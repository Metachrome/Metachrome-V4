var Yy=t=>{throw TypeError(t)};var pf=(t,e,s)=>e.has(t)||Yy("Cannot "+s);var L=(t,e,s)=>(pf(t,e,"read from private field"),s?s.call(t):e.get(t)),$e=(t,e,s)=>e.has(t)?Yy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),Ne=(t,e,s,n)=>(pf(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s),at=(t,e,s)=>(pf(t,e,"access private method"),s);var Bd=(t,e,s,n)=>({set _(i){Ne(t,e,i,s)},get _(){return L(t,e,n)}});function IE(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();function E0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fN={exports:{}},lm={},pN={exports:{}},dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nd=Symbol.for("react.element"),LE=Symbol.for("react.portal"),FE=Symbol.for("react.fragment"),$E=Symbol.for("react.strict_mode"),UE=Symbol.for("react.profiler"),BE=Symbol.for("react.provider"),zE=Symbol.for("react.context"),VE=Symbol.for("react.forward_ref"),WE=Symbol.for("react.suspense"),HE=Symbol.for("react.memo"),KE=Symbol.for("react.lazy"),Jy=Symbol.iterator;function GE(t){return t===null||typeof t!="object"?null:(t=Jy&&t[Jy]||t["@@iterator"],typeof t=="function"?t:null)}var gN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xN=Object.assign,yN={};function Il(t,e,s){this.props=t,this.context=e,this.refs=yN,this.updater=s||gN}Il.prototype.isReactComponent={};Il.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Il.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vN(){}vN.prototype=Il.prototype;function P0(t,e,s){this.props=t,this.context=e,this.refs=yN,this.updater=s||gN}var _0=P0.prototype=new vN;_0.constructor=P0;xN(_0,Il.prototype);_0.isPureReactComponent=!0;var Zy=Array.isArray,bN=Object.prototype.hasOwnProperty,M0={current:null},wN={key:!0,ref:!0,__self:!0,__source:!0};function jN(t,e,s){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)bN.call(e,n)&&!wN.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Nd,type:t,key:a,ref:o,props:i,_owner:M0.current}}function qE(t,e){return{$$typeof:Nd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function A0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nd}function QE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var ev=/\/+/g;function gf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QE(""+t.key):e.toString(36)}function Du(t,e,s,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Nd:case LE:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+gf(o,0):n,Zy(i)?(s="",t!=null&&(s=t.replace(ev,"$&/")+"/"),Du(i,e,s,"",function(d){return d})):i!=null&&(A0(i)&&(i=qE(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ev,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Zy(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+gf(a,l);o+=Du(a,e,s,c,i)}else if(c=GE(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+gf(a,l++),o+=Du(a,e,s,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zd(t,e,s){if(t==null)return t;var n=[],i=0;return Du(t,n,"","",function(a){return e.call(s,a,i++)}),n}function XE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ys={current:null},Ru={transition:null},YE={ReactCurrentDispatcher:Ys,ReactCurrentBatchConfig:Ru,ReactCurrentOwner:M0};function NN(){throw Error("act(...) is not supported in production builds of React.")}dt.Children={map:zd,forEach:function(t,e,s){zd(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return zd(t,function(){e++}),e},toArray:function(t){return zd(t,function(e){return e})||[]},only:function(t){if(!A0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};dt.Component=Il;dt.Fragment=FE;dt.Profiler=UE;dt.PureComponent=P0;dt.StrictMode=$E;dt.Suspense=WE;dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YE;dt.act=NN;dt.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=xN({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=M0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)bN.call(e,c)&&!wN.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Nd,type:t.type,key:i,ref:a,props:n,_owner:o}};dt.createContext=function(t){return t={$$typeof:zE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BE,_context:t},t.Consumer=t};dt.createElement=jN;dt.createFactory=function(t){var e=jN.bind(null,t);return e.type=t,e};dt.createRef=function(){return{current:null}};dt.forwardRef=function(t){return{$$typeof:VE,render:t}};dt.isValidElement=A0;dt.lazy=function(t){return{$$typeof:KE,_payload:{_status:-1,_result:t},_init:XE}};dt.memo=function(t,e){return{$$typeof:HE,type:t,compare:e===void 0?null:e}};dt.startTransition=function(t){var e=Ru.transition;Ru.transition={};try{t()}finally{Ru.transition=e}};dt.unstable_act=NN;dt.useCallback=function(t,e){return Ys.current.useCallback(t,e)};dt.useContext=function(t){return Ys.current.useContext(t)};dt.useDebugValue=function(){};dt.useDeferredValue=function(t){return Ys.current.useDeferredValue(t)};dt.useEffect=function(t,e){return Ys.current.useEffect(t,e)};dt.useId=function(){return Ys.current.useId()};dt.useImperativeHandle=function(t,e,s){return Ys.current.useImperativeHandle(t,e,s)};dt.useInsertionEffect=function(t,e){return Ys.current.useInsertionEffect(t,e)};dt.useLayoutEffect=function(t,e){return Ys.current.useLayoutEffect(t,e)};dt.useMemo=function(t,e){return Ys.current.useMemo(t,e)};dt.useReducer=function(t,e,s){return Ys.current.useReducer(t,e,s)};dt.useRef=function(t){return Ys.current.useRef(t)};dt.useState=function(t){return Ys.current.useState(t)};dt.useSyncExternalStore=function(t,e,s){return Ys.current.useSyncExternalStore(t,e,s)};dt.useTransition=function(){return Ys.current.useTransition()};dt.version="18.3.1";pN.exports=dt;var f=pN.exports;const ye=E0(f),D0=IE({__proto__:null,default:ye},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JE=f,ZE=Symbol.for("react.element"),eP=Symbol.for("react.fragment"),tP=Object.prototype.hasOwnProperty,sP=JE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rP={key:!0,ref:!0,__self:!0,__source:!0};function SN(t,e,s){var n,i={},a=null,o=null;s!==void 0&&(a=""+s),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)tP.call(e,n)&&!rP.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:ZE,type:t,key:a,ref:o,props:i,_owner:sP.current}}lm.Fragment=eP;lm.jsx=SN;lm.jsxs=SN;fN.exports=lm;var r=fN.exports,CN={exports:{}},Dr={},TN={exports:{}},kN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,U){var J=O.length;O.push(U);e:for(;0<J;){var Q=J-1>>>1,Oe=O[Q];if(0<i(Oe,U))O[Q]=U,O[J]=Oe,J=Q;else break e}}function s(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var U=O[0],J=O.pop();if(J!==U){O[0]=J;e:for(var Q=0,Oe=O.length,ge=Oe>>>1;Q<ge;){var He=2*(Q+1)-1,se=O[He],ze=He+1,ce=O[ze];if(0>i(se,J))ze<Oe&&0>i(ce,se)?(O[Q]=ce,O[ze]=J,Q=ze):(O[Q]=se,O[He]=J,Q=He);else if(ze<Oe&&0>i(ce,J))O[Q]=ce,O[ze]=J,Q=ze;else break e}}return U}function i(O,U){var J=O.sortIndex-U.sortIndex;return J!==0?J:O.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,u=null,m=3,y=!1,v=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var U=s(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=O)n(d),U.sortIndex=U.expirationTime,e(c,U);else break;U=s(d)}}function j(O){if(g=!1,w(O),!v)if(s(c)!==null)v=!0,R(S);else{var U=s(d);U!==null&&$(j,U.startTime-O)}}function S(O,U){v=!1,g&&(g=!1,x(P),P=-1),y=!0;var J=m;try{for(w(U),u=s(c);u!==null&&(!(u.expirationTime>U)||O&&!E());){var Q=u.callback;if(typeof Q=="function"){u.callback=null,m=u.priorityLevel;var Oe=Q(u.expirationTime<=U);U=t.unstable_now(),typeof Oe=="function"?u.callback=Oe:u===s(c)&&n(c),w(U)}else n(c);u=s(c)}if(u!==null)var ge=!0;else{var He=s(d);He!==null&&$(j,He.startTime-U),ge=!1}return ge}finally{u=null,m=J,y=!1}}var _=!1,k=null,P=-1,M=5,T=-1;function E(){return!(t.unstable_now()-T<M)}function I(){if(k!==null){var O=t.unstable_now();T=O;var U=!0;try{U=k(!0,O)}finally{U?V():(_=!1,k=null)}}else _=!1}var V;if(typeof p=="function")V=function(){p(I)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,A=G.port2;G.port1.onmessage=I,V=function(){A.postMessage(null)}}else V=function(){b(I,0)};function R(O){k=O,_||(_=!0,V())}function $(O,U){P=b(function(){O(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,R(S))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var J=m;m=U;try{return O()}finally{m=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,U){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var J=m;m=O;try{return U()}finally{m=J}},t.unstable_scheduleCallback=function(O,U,J){var Q=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Q+J:Q):J=Q,O){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=J+Oe,O={id:h++,callback:U,priorityLevel:O,startTime:J,expirationTime:Oe,sortIndex:-1},J>Q?(O.sortIndex=J,e(d,O),s(c)===null&&O===s(d)&&(g?(x(P),P=-1):g=!0,$(j,J-Q))):(O.sortIndex=Oe,e(c,O),v||y||(v=!0,R(S))),O},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(O){var U=m;return function(){var J=m;m=U;try{return O.apply(this,arguments)}finally{m=J}}}})(kN);TN.exports=kN;var nP=TN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iP=f,Mr=nP;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var EN=new Set,$c={};function go(t,e){ml(t,e),ml(t+"Capture",e)}function ml(t,e){for($c[t]=e,t=0;t<e.length;t++)EN.add(e[t])}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rp=Object.prototype.hasOwnProperty,aP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tv={},sv={};function oP(t){return Rp.call(sv,t)?!0:Rp.call(tv,t)?!1:aP.test(t)?sv[t]=!0:(tv[t]=!0,!1)}function lP(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cP(t,e,s,n){if(e===null||typeof e>"u"||lP(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Js(t,e,s,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Ds={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ds[t]=new Js(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ds[e]=new Js(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ds[t]=new Js(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ds[t]=new Js(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ds[t]=new Js(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ds[t]=new Js(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ds[t]=new Js(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ds[t]=new Js(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ds[t]=new Js(t,5,!1,t.toLowerCase(),null,!1,!1)});var R0=/[\-:]([a-z])/g;function O0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(R0,O0);Ds[e]=new Js(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(R0,O0);Ds[e]=new Js(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(R0,O0);Ds[e]=new Js(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ds[t]=new Js(t,1,!1,t.toLowerCase(),null,!1,!1)});Ds.xlinkHref=new Js("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ds[t]=new Js(t,1,!1,t.toLowerCase(),null,!0,!0)});function I0(t,e,s,n){var i=Ds.hasOwnProperty(e)?Ds[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cP(e,s,i,n)&&(s=null),n||i===null?oP(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,n=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var wi=iP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vd=Symbol.for("react.element"),_o=Symbol.for("react.portal"),Mo=Symbol.for("react.fragment"),L0=Symbol.for("react.strict_mode"),Op=Symbol.for("react.profiler"),PN=Symbol.for("react.provider"),_N=Symbol.for("react.context"),F0=Symbol.for("react.forward_ref"),Ip=Symbol.for("react.suspense"),Lp=Symbol.for("react.suspense_list"),$0=Symbol.for("react.memo"),Mi=Symbol.for("react.lazy"),MN=Symbol.for("react.offscreen"),rv=Symbol.iterator;function Yl(t){return t===null||typeof t!="object"?null:(t=rv&&t[rv]||t["@@iterator"],typeof t=="function"?t:null)}var Yt=Object.assign,xf;function mc(t){if(xf===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);xf=e&&e[1]||""}return`
`+xf+t}var yf=!1;function vf(t,e){if(!t||yf)return"";yf=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{yf=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?mc(t):""}function dP(t){switch(t.tag){case 5:return mc(t.type);case 16:return mc("Lazy");case 13:return mc("Suspense");case 19:return mc("SuspenseList");case 0:case 2:case 15:return t=vf(t.type,!1),t;case 11:return t=vf(t.type.render,!1),t;case 1:return t=vf(t.type,!0),t;default:return""}}function Fp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mo:return"Fragment";case _o:return"Portal";case Op:return"Profiler";case L0:return"StrictMode";case Ip:return"Suspense";case Lp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _N:return(t.displayName||"Context")+".Consumer";case PN:return(t._context.displayName||"Context")+".Provider";case F0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $0:return e=t.displayName||null,e!==null?e:Fp(t.type)||"Memo";case Mi:e=t._payload,t=t._init;try{return Fp(t(e))}catch{}}return null}function uP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fp(e);case 8:return e===L0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hP(t){var e=AN(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wd(t){t._valueTracker||(t._valueTracker=hP(t))}function DN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=AN(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function rh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $p(t,e){var s=e.checked;return Yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function nv(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=oa(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RN(t,e){e=e.checked,e!=null&&I0(t,"checked",e,!1)}function Up(t,e){RN(t,e);var s=oa(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bp(t,e.type,s):e.hasOwnProperty("defaultValue")&&Bp(t,e.type,oa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function iv(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Bp(t,e,s){(e!=="number"||rh(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var fc=Array.isArray;function Wo(t,e,s,n){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&n&&(t[s].defaultSelected=!0)}else{for(s=""+oa(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function zp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function av(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(le(92));if(fc(s)){if(1<s.length)throw Error(le(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:oa(s)}}function ON(t,e){var s=oa(e.value),n=oa(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function ov(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function IN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?IN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hd,LN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hd=Hd||document.createElement("div"),Hd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Uc(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var wc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mP=["Webkit","ms","Moz","O"];Object.keys(wc).forEach(function(t){mP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wc[e]=wc[t]})});function FN(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||wc.hasOwnProperty(t)&&wc[t]?(""+e).trim():e+"px"}function $N(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,i=FN(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,i):t[s]=i}}var fP=Yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wp(t,e){if(e){if(fP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function Hp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kp=null;function U0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gp=null,Ho=null,Ko=null;function lv(t){if(t=Td(t)){if(typeof Gp!="function")throw Error(le(280));var e=t.stateNode;e&&(e=mm(e),Gp(t.stateNode,t.type,e))}}function UN(t){Ho?Ko?Ko.push(t):Ko=[t]:Ho=t}function BN(){if(Ho){var t=Ho,e=Ko;if(Ko=Ho=null,lv(t),e)for(t=0;t<e.length;t++)lv(e[t])}}function zN(t,e){return t(e)}function VN(){}var bf=!1;function WN(t,e,s){if(bf)return t(e,s);bf=!0;try{return zN(t,e,s)}finally{bf=!1,(Ho!==null||Ko!==null)&&(VN(),BN())}}function Bc(t,e){var s=t.stateNode;if(s===null)return null;var n=mm(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(le(231,e,typeof s));return s}var qp=!1;if(hi)try{var Jl={};Object.defineProperty(Jl,"passive",{get:function(){qp=!0}}),window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{qp=!1}function pP(t,e,s,n,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(h){this.onError(h)}}var jc=!1,nh=null,ih=!1,Qp=null,gP={onError:function(t){jc=!0,nh=t}};function xP(t,e,s,n,i,a,o,l,c){jc=!1,nh=null,pP.apply(gP,arguments)}function yP(t,e,s,n,i,a,o,l,c){if(xP.apply(this,arguments),jc){if(jc){var d=nh;jc=!1,nh=null}else throw Error(le(198));ih||(ih=!0,Qp=d)}}function xo(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function HN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cv(t){if(xo(t)!==t)throw Error(le(188))}function vP(t){var e=t.alternate;if(!e){if(e=xo(t),e===null)throw Error(le(188));return e!==t?null:t}for(var s=t,n=e;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){s=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return cv(i),t;if(a===n)return cv(i),e;a=a.sibling}throw Error(le(188))}if(s.return!==n.return)s=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===s){o=!0,s=i,n=a;break}if(l===n){o=!0,n=i,s=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===s){o=!0,s=a,n=i;break}if(l===n){o=!0,n=a,s=i;break}l=l.sibling}if(!o)throw Error(le(189))}}if(s.alternate!==n)throw Error(le(190))}if(s.tag!==3)throw Error(le(188));return s.stateNode.current===s?t:e}function KN(t){return t=vP(t),t!==null?GN(t):null}function GN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=GN(t);if(e!==null)return e;t=t.sibling}return null}var qN=Mr.unstable_scheduleCallback,dv=Mr.unstable_cancelCallback,bP=Mr.unstable_shouldYield,wP=Mr.unstable_requestPaint,rs=Mr.unstable_now,jP=Mr.unstable_getCurrentPriorityLevel,B0=Mr.unstable_ImmediatePriority,QN=Mr.unstable_UserBlockingPriority,ah=Mr.unstable_NormalPriority,NP=Mr.unstable_LowPriority,XN=Mr.unstable_IdlePriority,cm=null,Fn=null;function SP(t){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(cm,t,void 0,(t.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:kP,CP=Math.log,TP=Math.LN2;function kP(t){return t>>>=0,t===0?32:31-(CP(t)/TP|0)|0}var Kd=64,Gd=4194304;function pc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oh(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=s&268435455;if(o!==0){var l=o&~i;l!==0?n=pc(l):(a&=o,a!==0&&(n=pc(a)))}else o=s&~i,o!==0?n=pc(o):a!==0&&(n=pc(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-pn(e),i=1<<s,n|=t[s],e&=~i;return n}function EP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PP(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-pn(a),l=1<<o,c=i[o];c===-1?(!(l&s)||l&n)&&(i[o]=EP(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function Xp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function YN(){var t=Kd;return Kd<<=1,!(Kd&4194240)&&(Kd=64),t}function wf(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Sd(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pn(e),t[e]=s}function _P(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-pn(s),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,s&=~a}}function z0(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-pn(s),i=1<<n;i&e|t[n]&e&&(t[n]|=e),s&=~i}}var Pt=0;function JN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ZN,V0,e1,t1,s1,Yp=!1,qd=[],Qi=null,Xi=null,Yi=null,zc=new Map,Vc=new Map,Ri=[],MP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uv(t,e){switch(t){case"focusin":case"focusout":Qi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":zc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(e.pointerId)}}function Zl(t,e,s,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Td(e),e!==null&&V0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function AP(t,e,s,n,i){switch(e){case"focusin":return Qi=Zl(Qi,t,e,s,n,i),!0;case"dragenter":return Xi=Zl(Xi,t,e,s,n,i),!0;case"mouseover":return Yi=Zl(Yi,t,e,s,n,i),!0;case"pointerover":var a=i.pointerId;return zc.set(a,Zl(zc.get(a)||null,t,e,s,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Vc.set(a,Zl(Vc.get(a)||null,t,e,s,n,i)),!0}return!1}function r1(t){var e=_a(t.target);if(e!==null){var s=xo(e);if(s!==null){if(e=s.tag,e===13){if(e=HN(s),e!==null){t.blockedOn=e,s1(t.priority,function(){e1(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ou(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Jp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Kp=n,s.target.dispatchEvent(n),Kp=null}else return e=Td(s),e!==null&&V0(e),t.blockedOn=s,!1;e.shift()}return!0}function hv(t,e,s){Ou(t)&&s.delete(e)}function DP(){Yp=!1,Qi!==null&&Ou(Qi)&&(Qi=null),Xi!==null&&Ou(Xi)&&(Xi=null),Yi!==null&&Ou(Yi)&&(Yi=null),zc.forEach(hv),Vc.forEach(hv)}function ec(t,e){t.blockedOn===e&&(t.blockedOn=null,Yp||(Yp=!0,Mr.unstable_scheduleCallback(Mr.unstable_NormalPriority,DP)))}function Wc(t){function e(i){return ec(i,t)}if(0<qd.length){ec(qd[0],t);for(var s=1;s<qd.length;s++){var n=qd[s];n.blockedOn===t&&(n.blockedOn=null)}}for(Qi!==null&&ec(Qi,t),Xi!==null&&ec(Xi,t),Yi!==null&&ec(Yi,t),zc.forEach(e),Vc.forEach(e),s=0;s<Ri.length;s++)n=Ri[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ri.length&&(s=Ri[0],s.blockedOn===null);)r1(s),s.blockedOn===null&&Ri.shift()}var Go=wi.ReactCurrentBatchConfig,lh=!0;function RP(t,e,s,n){var i=Pt,a=Go.transition;Go.transition=null;try{Pt=1,W0(t,e,s,n)}finally{Pt=i,Go.transition=a}}function OP(t,e,s,n){var i=Pt,a=Go.transition;Go.transition=null;try{Pt=4,W0(t,e,s,n)}finally{Pt=i,Go.transition=a}}function W0(t,e,s,n){if(lh){var i=Jp(t,e,s,n);if(i===null)Mf(t,e,n,ch,s),uv(t,n);else if(AP(i,t,e,s,n))n.stopPropagation();else if(uv(t,n),e&4&&-1<MP.indexOf(t)){for(;i!==null;){var a=Td(i);if(a!==null&&ZN(a),a=Jp(t,e,s,n),a===null&&Mf(t,e,n,ch,s),a===i)break;i=a}i!==null&&n.stopPropagation()}else Mf(t,e,n,null,s)}}var ch=null;function Jp(t,e,s,n){if(ch=null,t=U0(n),t=_a(t),t!==null)if(e=xo(t),e===null)t=null;else if(s=e.tag,s===13){if(t=HN(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ch=t,null}function n1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jP()){case B0:return 1;case QN:return 4;case ah:case NP:return 16;case XN:return 536870912;default:return 16}default:return 16}}var Hi=null,H0=null,Iu=null;function i1(){if(Iu)return Iu;var t,e=H0,s=e.length,n,i="value"in Hi?Hi.value:Hi.textContent,a=i.length;for(t=0;t<s&&e[t]===i[t];t++);var o=s-t;for(n=1;n<=o&&e[s-n]===i[a-n];n++);return Iu=i.slice(t,1<n?1-n:void 0)}function Lu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qd(){return!0}function mv(){return!1}function Rr(t){function e(s,n,i,a,o){this._reactName=s,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Qd:mv,this.isPropagationStopped=mv,this}return Yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Qd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Qd)},persist:function(){},isPersistent:Qd}),e}var Ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},K0=Rr(Ll),Cd=Yt({},Ll,{view:0,detail:0}),IP=Rr(Cd),jf,Nf,tc,dm=Yt({},Cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:G0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==tc&&(tc&&t.type==="mousemove"?(jf=t.screenX-tc.screenX,Nf=t.screenY-tc.screenY):Nf=jf=0,tc=t),jf)},movementY:function(t){return"movementY"in t?t.movementY:Nf}}),fv=Rr(dm),LP=Yt({},dm,{dataTransfer:0}),FP=Rr(LP),$P=Yt({},Cd,{relatedTarget:0}),Sf=Rr($P),UP=Yt({},Ll,{animationName:0,elapsedTime:0,pseudoElement:0}),BP=Rr(UP),zP=Yt({},Ll,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VP=Rr(zP),WP=Yt({},Ll,{data:0}),pv=Rr(WP),HP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GP[t])?!!e[t]:!1}function G0(){return qP}var QP=Yt({},Cd,{key:function(t){if(t.key){var e=HP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?KP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:G0,charCode:function(t){return t.type==="keypress"?Lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XP=Rr(QP),YP=Yt({},dm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gv=Rr(YP),JP=Yt({},Cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:G0}),ZP=Rr(JP),e_=Yt({},Ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),t_=Rr(e_),s_=Yt({},dm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),r_=Rr(s_),n_=[9,13,27,32],q0=hi&&"CompositionEvent"in window,Nc=null;hi&&"documentMode"in document&&(Nc=document.documentMode);var i_=hi&&"TextEvent"in window&&!Nc,a1=hi&&(!q0||Nc&&8<Nc&&11>=Nc),xv=" ",yv=!1;function o1(t,e){switch(t){case"keyup":return n_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ao=!1;function a_(t,e){switch(t){case"compositionend":return l1(e);case"keypress":return e.which!==32?null:(yv=!0,xv);case"textInput":return t=e.data,t===xv&&yv?null:t;default:return null}}function o_(t,e){if(Ao)return t==="compositionend"||!q0&&o1(t,e)?(t=i1(),Iu=H0=Hi=null,Ao=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return a1&&e.locale!=="ko"?null:e.data;default:return null}}var l_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!l_[t.type]:e==="textarea"}function c1(t,e,s,n){UN(n),e=dh(e,"onChange"),0<e.length&&(s=new K0("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var Sc=null,Hc=null;function c_(t){b1(t,0)}function um(t){var e=Oo(t);if(DN(e))return t}function d_(t,e){if(t==="change")return e}var d1=!1;if(hi){var Cf;if(hi){var Tf="oninput"in document;if(!Tf){var bv=document.createElement("div");bv.setAttribute("oninput","return;"),Tf=typeof bv.oninput=="function"}Cf=Tf}else Cf=!1;d1=Cf&&(!document.documentMode||9<document.documentMode)}function wv(){Sc&&(Sc.detachEvent("onpropertychange",u1),Hc=Sc=null)}function u1(t){if(t.propertyName==="value"&&um(Hc)){var e=[];c1(e,Hc,t,U0(t)),WN(c_,e)}}function u_(t,e,s){t==="focusin"?(wv(),Sc=e,Hc=s,Sc.attachEvent("onpropertychange",u1)):t==="focusout"&&wv()}function h_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return um(Hc)}function m_(t,e){if(t==="click")return um(e)}function f_(t,e){if(t==="input"||t==="change")return um(e)}function p_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yn=typeof Object.is=="function"?Object.is:p_;function Kc(t,e){if(yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!Rp.call(e,i)||!yn(t[i],e[i]))return!1}return!0}function jv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nv(t,e){var s=jv(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=jv(s)}}function h1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?h1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function m1(){for(var t=window,e=rh();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=rh(t.document)}return e}function Q0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function g_(t){var e=m1(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&h1(s.ownerDocument.documentElement,s)){if(n!==null&&Q0(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=Nv(s,a);var o=Nv(s,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var x_=hi&&"documentMode"in document&&11>=document.documentMode,Do=null,Zp=null,Cc=null,eg=!1;function Sv(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;eg||Do==null||Do!==rh(n)||(n=Do,"selectionStart"in n&&Q0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Cc&&Kc(Cc,n)||(Cc=n,n=dh(Zp,"onSelect"),0<n.length&&(e=new K0("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=Do)))}function Xd(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Ro={animationend:Xd("Animation","AnimationEnd"),animationiteration:Xd("Animation","AnimationIteration"),animationstart:Xd("Animation","AnimationStart"),transitionend:Xd("Transition","TransitionEnd")},kf={},f1={};hi&&(f1=document.createElement("div").style,"AnimationEvent"in window||(delete Ro.animationend.animation,delete Ro.animationiteration.animation,delete Ro.animationstart.animation),"TransitionEvent"in window||delete Ro.transitionend.transition);function hm(t){if(kf[t])return kf[t];if(!Ro[t])return t;var e=Ro[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in f1)return kf[t]=e[s];return t}var p1=hm("animationend"),g1=hm("animationiteration"),x1=hm("animationstart"),y1=hm("transitionend"),v1=new Map,Cv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ga(t,e){v1.set(t,e),go(e,[t])}for(var Ef=0;Ef<Cv.length;Ef++){var Pf=Cv[Ef],y_=Pf.toLowerCase(),v_=Pf[0].toUpperCase()+Pf.slice(1);ga(y_,"on"+v_)}ga(p1,"onAnimationEnd");ga(g1,"onAnimationIteration");ga(x1,"onAnimationStart");ga("dblclick","onDoubleClick");ga("focusin","onFocus");ga("focusout","onBlur");ga(y1,"onTransitionEnd");ml("onMouseEnter",["mouseout","mouseover"]);ml("onMouseLeave",["mouseout","mouseover"]);ml("onPointerEnter",["pointerout","pointerover"]);ml("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b_=new Set("cancel close invalid load scroll toggle".split(" ").concat(gc));function Tv(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,yP(n,e,void 0,t),t.currentTarget=null}function b1(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;Tv(i,l,d),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;Tv(i,l,d),a=c}}}if(ih)throw t=Qp,ih=!1,Qp=null,t}function Ut(t,e){var s=e[ig];s===void 0&&(s=e[ig]=new Set);var n=t+"__bubble";s.has(n)||(w1(e,t,2,!1),s.add(n))}function _f(t,e,s){var n=0;e&&(n|=4),w1(s,t,n,e)}var Yd="_reactListening"+Math.random().toString(36).slice(2);function Gc(t){if(!t[Yd]){t[Yd]=!0,EN.forEach(function(s){s!=="selectionchange"&&(b_.has(s)||_f(s,!1,t),_f(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yd]||(e[Yd]=!0,_f("selectionchange",!1,e))}}function w1(t,e,s,n){switch(n1(e)){case 1:var i=RP;break;case 4:i=OP;break;default:i=W0}s=i.bind(null,e,s,t),i=void 0,!qp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function Mf(t,e,s,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=_a(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}WN(function(){var d=a,h=U0(s),u=[];e:{var m=v1.get(t);if(m!==void 0){var y=K0,v=t;switch(t){case"keypress":if(Lu(s)===0)break e;case"keydown":case"keyup":y=XP;break;case"focusin":v="focus",y=Sf;break;case"focusout":v="blur",y=Sf;break;case"beforeblur":case"afterblur":y=Sf;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=fv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=FP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=ZP;break;case p1:case g1:case x1:y=BP;break;case y1:y=t_;break;case"scroll":y=IP;break;case"wheel":y=r_;break;case"copy":case"cut":case"paste":y=VP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=gv}var g=(e&4)!==0,b=!g&&t==="scroll",x=g?m!==null?m+"Capture":null:m;g=[];for(var p=d,w;p!==null;){w=p;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,x!==null&&(j=Bc(p,x),j!=null&&g.push(qc(p,j,w)))),b)break;p=p.return}0<g.length&&(m=new y(m,v,null,s,h),u.push({event:m,listeners:g}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&s!==Kp&&(v=s.relatedTarget||s.fromElement)&&(_a(v)||v[mi]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(v=s.relatedTarget||s.toElement,y=d,v=v?_a(v):null,v!==null&&(b=xo(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=d),y!==v)){if(g=fv,j="onMouseLeave",x="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(g=gv,j="onPointerLeave",x="onPointerEnter",p="pointer"),b=y==null?m:Oo(y),w=v==null?m:Oo(v),m=new g(j,p+"leave",y,s,h),m.target=b,m.relatedTarget=w,j=null,_a(h)===d&&(g=new g(x,p+"enter",v,s,h),g.target=w,g.relatedTarget=b,j=g),b=j,y&&v)t:{for(g=y,x=v,p=0,w=g;w;w=jo(w))p++;for(w=0,j=x;j;j=jo(j))w++;for(;0<p-w;)g=jo(g),p--;for(;0<w-p;)x=jo(x),w--;for(;p--;){if(g===x||x!==null&&g===x.alternate)break t;g=jo(g),x=jo(x)}g=null}else g=null;y!==null&&kv(u,m,y,g,!1),v!==null&&b!==null&&kv(u,b,v,g,!0)}}e:{if(m=d?Oo(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var S=d_;else if(vv(m))if(d1)S=f_;else{S=h_;var _=u_}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=m_);if(S&&(S=S(t,d))){c1(u,S,s,h);break e}_&&_(t,m,d),t==="focusout"&&(_=m._wrapperState)&&_.controlled&&m.type==="number"&&Bp(m,"number",m.value)}switch(_=d?Oo(d):window,t){case"focusin":(vv(_)||_.contentEditable==="true")&&(Do=_,Zp=d,Cc=null);break;case"focusout":Cc=Zp=Do=null;break;case"mousedown":eg=!0;break;case"contextmenu":case"mouseup":case"dragend":eg=!1,Sv(u,s,h);break;case"selectionchange":if(x_)break;case"keydown":case"keyup":Sv(u,s,h)}var k;if(q0)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ao?o1(t,s)&&(P="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(P="onCompositionStart");P&&(a1&&s.locale!=="ko"&&(Ao||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ao&&(k=i1()):(Hi=h,H0="value"in Hi?Hi.value:Hi.textContent,Ao=!0)),_=dh(d,P),0<_.length&&(P=new pv(P,t,null,s,h),u.push({event:P,listeners:_}),k?P.data=k:(k=l1(s),k!==null&&(P.data=k)))),(k=i_?a_(t,s):o_(t,s))&&(d=dh(d,"onBeforeInput"),0<d.length&&(h=new pv("onBeforeInput","beforeinput",null,s,h),u.push({event:h,listeners:d}),h.data=k))}b1(u,e)})}function qc(t,e,s){return{instance:t,listener:e,currentTarget:s}}function dh(t,e){for(var s=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Bc(t,s),a!=null&&n.unshift(qc(t,a,i)),a=Bc(t,e),a!=null&&n.push(qc(t,a,i))),t=t.return}return n}function jo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kv(t,e,s,n,i){for(var a=e._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,i?(c=Bc(s,a),c!=null&&o.unshift(qc(s,c,l))):i||(c=Bc(s,a),c!=null&&o.push(qc(s,c,l)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var w_=/\r\n?/g,j_=/\u0000|\uFFFD/g;function Ev(t){return(typeof t=="string"?t:""+t).replace(w_,`
`).replace(j_,"")}function Jd(t,e,s){if(e=Ev(e),Ev(t)!==e&&s)throw Error(le(425))}function uh(){}var tg=null,sg=null;function rg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ng=typeof setTimeout=="function"?setTimeout:void 0,N_=typeof clearTimeout=="function"?clearTimeout:void 0,Pv=typeof Promise=="function"?Promise:void 0,S_=typeof queueMicrotask=="function"?queueMicrotask:typeof Pv<"u"?function(t){return Pv.resolve(null).then(t).catch(C_)}:ng;function C_(t){setTimeout(function(){throw t})}function Af(t,e){var s=e,n=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(n===0){t.removeChild(i),Wc(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=i}while(s);Wc(e)}function Ji(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _v(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Fl=Math.random().toString(36).slice(2),Mn="__reactFiber$"+Fl,Qc="__reactProps$"+Fl,mi="__reactContainer$"+Fl,ig="__reactEvents$"+Fl,T_="__reactListeners$"+Fl,k_="__reactHandles$"+Fl;function _a(t){var e=t[Mn];if(e)return e;for(var s=t.parentNode;s;){if(e=s[mi]||s[Mn]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=_v(t);t!==null;){if(s=t[Mn])return s;t=_v(t)}return e}t=s,s=t.parentNode}return null}function Td(t){return t=t[Mn]||t[mi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function mm(t){return t[Qc]||null}var ag=[],Io=-1;function xa(t){return{current:t}}function Vt(t){0>Io||(t.current=ag[Io],ag[Io]=null,Io--)}function Lt(t,e){Io++,ag[Io]=t.current,t.current=e}var la={},Bs=xa(la),hr=xa(!1),Ja=la;function fl(t,e){var s=t.type.contextTypes;if(!s)return la;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mr(t){return t=t.childContextTypes,t!=null}function hh(){Vt(hr),Vt(Bs)}function Mv(t,e,s){if(Bs.current!==la)throw Error(le(168));Lt(Bs,e),Lt(hr,s)}function j1(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(le(108,uP(t)||"Unknown",i));return Yt({},s,n)}function mh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||la,Ja=Bs.current,Lt(Bs,t),Lt(hr,hr.current),!0}function Av(t,e,s){var n=t.stateNode;if(!n)throw Error(le(169));s?(t=j1(t,e,Ja),n.__reactInternalMemoizedMergedChildContext=t,Vt(hr),Vt(Bs),Lt(Bs,t)):Vt(hr),Lt(hr,s)}var ei=null,fm=!1,Df=!1;function N1(t){ei===null?ei=[t]:ei.push(t)}function E_(t){fm=!0,N1(t)}function ya(){if(!Df&&ei!==null){Df=!0;var t=0,e=Pt;try{var s=ei;for(Pt=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}ei=null,fm=!1}catch(i){throw ei!==null&&(ei=ei.slice(t+1)),qN(B0,ya),i}finally{Pt=e,Df=!1}}return null}var Lo=[],Fo=0,fh=null,ph=0,Wr=[],Hr=0,Za=null,ai=1,oi="";function Ca(t,e){Lo[Fo++]=ph,Lo[Fo++]=fh,fh=t,ph=e}function S1(t,e,s){Wr[Hr++]=ai,Wr[Hr++]=oi,Wr[Hr++]=Za,Za=t;var n=ai;t=oi;var i=32-pn(n)-1;n&=~(1<<i),s+=1;var a=32-pn(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,ai=1<<32-pn(e)+i|s<<i|n,oi=a+t}else ai=1<<a|s<<i|n,oi=t}function X0(t){t.return!==null&&(Ca(t,1),S1(t,1,0))}function Y0(t){for(;t===fh;)fh=Lo[--Fo],Lo[Fo]=null,ph=Lo[--Fo],Lo[Fo]=null;for(;t===Za;)Za=Wr[--Hr],Wr[Hr]=null,oi=Wr[--Hr],Wr[Hr]=null,ai=Wr[--Hr],Wr[Hr]=null}var Pr=null,Er=null,Ht=!1,dn=null;function C1(t,e){var s=Kr(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function Dv(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pr=t,Er=Ji(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pr=t,Er=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Za!==null?{id:ai,overflow:oi}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Kr(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Pr=t,Er=null,!0):!1;default:return!1}}function og(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lg(t){if(Ht){var e=Er;if(e){var s=e;if(!Dv(t,e)){if(og(t))throw Error(le(418));e=Ji(s.nextSibling);var n=Pr;e&&Dv(t,e)?C1(n,s):(t.flags=t.flags&-4097|2,Ht=!1,Pr=t)}}else{if(og(t))throw Error(le(418));t.flags=t.flags&-4097|2,Ht=!1,Pr=t}}}function Rv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pr=t}function Zd(t){if(t!==Pr)return!1;if(!Ht)return Rv(t),Ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rg(t.type,t.memoizedProps)),e&&(e=Er)){if(og(t))throw T1(),Error(le(418));for(;e;)C1(t,e),e=Ji(e.nextSibling)}if(Rv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Er=Ji(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Er=null}}else Er=Pr?Ji(t.stateNode.nextSibling):null;return!0}function T1(){for(var t=Er;t;)t=Ji(t.nextSibling)}function pl(){Er=Pr=null,Ht=!1}function J0(t){dn===null?dn=[t]:dn.push(t)}var P_=wi.ReactCurrentBatchConfig;function sc(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(le(309));var n=s.stateNode}if(!n)throw Error(le(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(le(284));if(!s._owner)throw Error(le(290,t))}return t}function eu(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ov(t){var e=t._init;return e(t._payload)}function k1(t){function e(x,p){if(t){var w=x.deletions;w===null?(x.deletions=[p],x.flags|=16):w.push(p)}}function s(x,p){if(!t)return null;for(;p!==null;)e(x,p),p=p.sibling;return null}function n(x,p){for(x=new Map;p!==null;)p.key!==null?x.set(p.key,p):x.set(p.index,p),p=p.sibling;return x}function i(x,p){return x=sa(x,p),x.index=0,x.sibling=null,x}function a(x,p,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<p?(x.flags|=2,p):w):(x.flags|=2,p)):(x.flags|=1048576,p)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,p,w,j){return p===null||p.tag!==6?(p=Uf(w,x.mode,j),p.return=x,p):(p=i(p,w),p.return=x,p)}function c(x,p,w,j){var S=w.type;return S===Mo?h(x,p,w.props.children,j,w.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Mi&&Ov(S)===p.type)?(j=i(p,w.props),j.ref=sc(x,p,w),j.return=x,j):(j=Wu(w.type,w.key,w.props,null,x.mode,j),j.ref=sc(x,p,w),j.return=x,j)}function d(x,p,w,j){return p===null||p.tag!==4||p.stateNode.containerInfo!==w.containerInfo||p.stateNode.implementation!==w.implementation?(p=Bf(w,x.mode,j),p.return=x,p):(p=i(p,w.children||[]),p.return=x,p)}function h(x,p,w,j,S){return p===null||p.tag!==7?(p=Ha(w,x.mode,j,S),p.return=x,p):(p=i(p,w),p.return=x,p)}function u(x,p,w){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Uf(""+p,x.mode,w),p.return=x,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Vd:return w=Wu(p.type,p.key,p.props,null,x.mode,w),w.ref=sc(x,null,p),w.return=x,w;case _o:return p=Bf(p,x.mode,w),p.return=x,p;case Mi:var j=p._init;return u(x,j(p._payload),w)}if(fc(p)||Yl(p))return p=Ha(p,x.mode,w,null),p.return=x,p;eu(x,p)}return null}function m(x,p,w,j){var S=p!==null?p.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(x,p,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vd:return w.key===S?c(x,p,w,j):null;case _o:return w.key===S?d(x,p,w,j):null;case Mi:return S=w._init,m(x,p,S(w._payload),j)}if(fc(w)||Yl(w))return S!==null?null:h(x,p,w,j,null);eu(x,w)}return null}function y(x,p,w,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(w)||null,l(p,x,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Vd:return x=x.get(j.key===null?w:j.key)||null,c(p,x,j,S);case _o:return x=x.get(j.key===null?w:j.key)||null,d(p,x,j,S);case Mi:var _=j._init;return y(x,p,w,_(j._payload),S)}if(fc(j)||Yl(j))return x=x.get(w)||null,h(p,x,j,S,null);eu(p,j)}return null}function v(x,p,w,j){for(var S=null,_=null,k=p,P=p=0,M=null;k!==null&&P<w.length;P++){k.index>P?(M=k,k=null):M=k.sibling;var T=m(x,k,w[P],j);if(T===null){k===null&&(k=M);break}t&&k&&T.alternate===null&&e(x,k),p=a(T,p,P),_===null?S=T:_.sibling=T,_=T,k=M}if(P===w.length)return s(x,k),Ht&&Ca(x,P),S;if(k===null){for(;P<w.length;P++)k=u(x,w[P],j),k!==null&&(p=a(k,p,P),_===null?S=k:_.sibling=k,_=k);return Ht&&Ca(x,P),S}for(k=n(x,k);P<w.length;P++)M=y(k,x,P,w[P],j),M!==null&&(t&&M.alternate!==null&&k.delete(M.key===null?P:M.key),p=a(M,p,P),_===null?S=M:_.sibling=M,_=M);return t&&k.forEach(function(E){return e(x,E)}),Ht&&Ca(x,P),S}function g(x,p,w,j){var S=Yl(w);if(typeof S!="function")throw Error(le(150));if(w=S.call(w),w==null)throw Error(le(151));for(var _=S=null,k=p,P=p=0,M=null,T=w.next();k!==null&&!T.done;P++,T=w.next()){k.index>P?(M=k,k=null):M=k.sibling;var E=m(x,k,T.value,j);if(E===null){k===null&&(k=M);break}t&&k&&E.alternate===null&&e(x,k),p=a(E,p,P),_===null?S=E:_.sibling=E,_=E,k=M}if(T.done)return s(x,k),Ht&&Ca(x,P),S;if(k===null){for(;!T.done;P++,T=w.next())T=u(x,T.value,j),T!==null&&(p=a(T,p,P),_===null?S=T:_.sibling=T,_=T);return Ht&&Ca(x,P),S}for(k=n(x,k);!T.done;P++,T=w.next())T=y(k,x,P,T.value,j),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?P:T.key),p=a(T,p,P),_===null?S=T:_.sibling=T,_=T);return t&&k.forEach(function(I){return e(x,I)}),Ht&&Ca(x,P),S}function b(x,p,w,j){if(typeof w=="object"&&w!==null&&w.type===Mo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Vd:e:{for(var S=w.key,_=p;_!==null;){if(_.key===S){if(S=w.type,S===Mo){if(_.tag===7){s(x,_.sibling),p=i(_,w.props.children),p.return=x,x=p;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Mi&&Ov(S)===_.type){s(x,_.sibling),p=i(_,w.props),p.ref=sc(x,_,w),p.return=x,x=p;break e}s(x,_);break}else e(x,_);_=_.sibling}w.type===Mo?(p=Ha(w.props.children,x.mode,j,w.key),p.return=x,x=p):(j=Wu(w.type,w.key,w.props,null,x.mode,j),j.ref=sc(x,p,w),j.return=x,x=j)}return o(x);case _o:e:{for(_=w.key;p!==null;){if(p.key===_)if(p.tag===4&&p.stateNode.containerInfo===w.containerInfo&&p.stateNode.implementation===w.implementation){s(x,p.sibling),p=i(p,w.children||[]),p.return=x,x=p;break e}else{s(x,p);break}else e(x,p);p=p.sibling}p=Bf(w,x.mode,j),p.return=x,x=p}return o(x);case Mi:return _=w._init,b(x,p,_(w._payload),j)}if(fc(w))return v(x,p,w,j);if(Yl(w))return g(x,p,w,j);eu(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,p!==null&&p.tag===6?(s(x,p.sibling),p=i(p,w),p.return=x,x=p):(s(x,p),p=Uf(w,x.mode,j),p.return=x,x=p),o(x)):s(x,p)}return b}var gl=k1(!0),E1=k1(!1),gh=xa(null),xh=null,$o=null,Z0=null;function ex(){Z0=$o=xh=null}function tx(t){var e=gh.current;Vt(gh),t._currentValue=e}function cg(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function qo(t,e){xh=t,Z0=$o=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dr=!0),t.firstContext=null)}function Yr(t){var e=t._currentValue;if(Z0!==t)if(t={context:t,memoizedValue:e,next:null},$o===null){if(xh===null)throw Error(le(308));$o=t,xh.dependencies={lanes:0,firstContext:t}}else $o=$o.next=t;return e}var Ma=null;function sx(t){Ma===null?Ma=[t]:Ma.push(t)}function P1(t,e,s,n){var i=e.interleaved;return i===null?(s.next=s,sx(e)):(s.next=i.next,i.next=s),e.interleaved=s,fi(t,n)}function fi(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Ai=!1;function rx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function di(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zi(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,yt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,fi(t,s)}return i=n.interleaved,i===null?(e.next=e,sx(n)):(e.next=i.next,i.next=e),n.interleaved=e,fi(t,s)}function Fu(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,z0(t,s)}}function Iv(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=o:a=a.next=o,s=s.next}while(s!==null);a===null?i=a=e:a=a.next=e}else i=a=e;s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function yh(t,e,s,n){var i=t.updateQueue;Ai=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(a!==null){var u=i.baseState;o=0,h=d=c=null,l=a;do{var m=l.lane,y=l.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,g=l;switch(m=e,y=s,g.tag){case 1:if(v=g.payload,typeof v=="function"){u=v.call(y,u,m);break e}u=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,m=typeof v=="function"?v.call(y,u,m):v,m==null)break e;u=Yt({},u,m);break e;case 2:Ai=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,c=u):h=h.next=y,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(c=u),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);to|=o,t.lanes=o,t.memoizedState=u}}function Lv(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=s,typeof i!="function")throw Error(le(191,i));i.call(n)}}}var kd={},$n=xa(kd),Xc=xa(kd),Yc=xa(kd);function Aa(t){if(t===kd)throw Error(le(174));return t}function nx(t,e){switch(Lt(Yc,e),Lt(Xc,t),Lt($n,kd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vp(e,t)}Vt($n),Lt($n,e)}function xl(){Vt($n),Vt(Xc),Vt(Yc)}function M1(t){Aa(Yc.current);var e=Aa($n.current),s=Vp(e,t.type);e!==s&&(Lt(Xc,t),Lt($n,s))}function ix(t){Xc.current===t&&(Vt($n),Vt(Xc))}var Qt=xa(0);function vh(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rf=[];function ax(){for(var t=0;t<Rf.length;t++)Rf[t]._workInProgressVersionPrimary=null;Rf.length=0}var $u=wi.ReactCurrentDispatcher,Of=wi.ReactCurrentBatchConfig,eo=0,Xt=null,fs=null,ws=null,bh=!1,Tc=!1,Jc=0,__=0;function Ls(){throw Error(le(321))}function ox(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!yn(t[s],e[s]))return!1;return!0}function lx(t,e,s,n,i,a){if(eo=a,Xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$u.current=t===null||t.memoizedState===null?R_:O_,t=s(n,i),Tc){a=0;do{if(Tc=!1,Jc=0,25<=a)throw Error(le(301));a+=1,ws=fs=null,e.updateQueue=null,$u.current=I_,t=s(n,i)}while(Tc)}if($u.current=wh,e=fs!==null&&fs.next!==null,eo=0,ws=fs=Xt=null,bh=!1,e)throw Error(le(300));return t}function cx(){var t=Jc!==0;return Jc=0,t}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ws===null?Xt.memoizedState=ws=t:ws=ws.next=t,ws}function Jr(){if(fs===null){var t=Xt.alternate;t=t!==null?t.memoizedState:null}else t=fs.next;var e=ws===null?Xt.memoizedState:ws.next;if(e!==null)ws=e,fs=t;else{if(t===null)throw Error(le(310));fs=t,t={memoizedState:fs.memoizedState,baseState:fs.baseState,baseQueue:fs.baseQueue,queue:fs.queue,next:null},ws===null?Xt.memoizedState=ws=t:ws=ws.next=t}return ws}function Zc(t,e){return typeof e=="function"?e(t):e}function If(t){var e=Jr(),s=e.queue;if(s===null)throw Error(le(311));s.lastRenderedReducer=t;var n=fs,i=n.baseQueue,a=s.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,n=n.baseState;var l=o=null,c=null,d=a;do{var h=d.lane;if((eo&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var u={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=u,o=n):c=c.next=u,Xt.lanes|=h,to|=h}d=d.next}while(d!==null&&d!==a);c===null?o=n:c.next=l,yn(n,e.memoizedState)||(dr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){i=t;do a=i.lane,Xt.lanes|=a,to|=a,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Lf(t){var e=Jr(),s=e.queue;if(s===null)throw Error(le(311));s.lastRenderedReducer=t;var n=s.dispatch,i=s.pending,a=e.memoizedState;if(i!==null){s.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);yn(a,e.memoizedState)||(dr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),s.lastRenderedState=a}return[a,n]}function A1(){}function D1(t,e){var s=Xt,n=Jr(),i=e(),a=!yn(n.memoizedState,i);if(a&&(n.memoizedState=i,dr=!0),n=n.queue,dx(I1.bind(null,s,n,t),[t]),n.getSnapshot!==e||a||ws!==null&&ws.memoizedState.tag&1){if(s.flags|=2048,ed(9,O1.bind(null,s,n,i,e),void 0,null),js===null)throw Error(le(349));eo&30||R1(s,e,i)}return i}function R1(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function O1(t,e,s,n){e.value=s,e.getSnapshot=n,L1(e)&&F1(t)}function I1(t,e,s){return s(function(){L1(e)&&F1(t)})}function L1(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!yn(t,s)}catch{return!0}}function F1(t){var e=fi(t,1);e!==null&&gn(e,t,1,-1)}function Fv(t){var e=Tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zc,lastRenderedState:t},e.queue=t,t=t.dispatch=D_.bind(null,Xt,t),[e.memoizedState,t]}function ed(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function $1(){return Jr().memoizedState}function Uu(t,e,s,n){var i=Tn();Xt.flags|=t,i.memoizedState=ed(1|e,s,void 0,n===void 0?null:n)}function pm(t,e,s,n){var i=Jr();n=n===void 0?null:n;var a=void 0;if(fs!==null){var o=fs.memoizedState;if(a=o.destroy,n!==null&&ox(n,o.deps)){i.memoizedState=ed(e,s,a,n);return}}Xt.flags|=t,i.memoizedState=ed(1|e,s,a,n)}function $v(t,e){return Uu(8390656,8,t,e)}function dx(t,e){return pm(2048,8,t,e)}function U1(t,e){return pm(4,2,t,e)}function B1(t,e){return pm(4,4,t,e)}function z1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function V1(t,e,s){return s=s!=null?s.concat([t]):null,pm(4,4,z1.bind(null,e,t),s)}function ux(){}function W1(t,e){var s=Jr();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&ox(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function H1(t,e){var s=Jr();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&ox(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function K1(t,e,s){return eo&21?(yn(s,e)||(s=YN(),Xt.lanes|=s,to|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dr=!0),t.memoizedState=s)}function M_(t,e){var s=Pt;Pt=s!==0&&4>s?s:4,t(!0);var n=Of.transition;Of.transition={};try{t(!1),e()}finally{Pt=s,Of.transition=n}}function G1(){return Jr().memoizedState}function A_(t,e,s){var n=ta(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},q1(t))Q1(e,s);else if(s=P1(t,e,s,n),s!==null){var i=Qs();gn(s,t,n,i),X1(s,e,n)}}function D_(t,e,s){var n=ta(t),i={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(q1(t))Q1(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,s);if(i.hasEagerState=!0,i.eagerState=l,yn(l,o)){var c=e.interleaved;c===null?(i.next=i,sx(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}s=P1(t,e,i,n),s!==null&&(i=Qs(),gn(s,t,n,i),X1(s,e,n))}}function q1(t){var e=t.alternate;return t===Xt||e!==null&&e===Xt}function Q1(t,e){Tc=bh=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function X1(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,z0(t,s)}}var wh={readContext:Yr,useCallback:Ls,useContext:Ls,useEffect:Ls,useImperativeHandle:Ls,useInsertionEffect:Ls,useLayoutEffect:Ls,useMemo:Ls,useReducer:Ls,useRef:Ls,useState:Ls,useDebugValue:Ls,useDeferredValue:Ls,useTransition:Ls,useMutableSource:Ls,useSyncExternalStore:Ls,useId:Ls,unstable_isNewReconciler:!1},R_={readContext:Yr,useCallback:function(t,e){return Tn().memoizedState=[t,e===void 0?null:e],t},useContext:Yr,useEffect:$v,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Uu(4194308,4,z1.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Uu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uu(4,2,t,e)},useMemo:function(t,e){var s=Tn();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=Tn();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=A_.bind(null,Xt,t),[n.memoizedState,t]},useRef:function(t){var e=Tn();return t={current:t},e.memoizedState=t},useState:Fv,useDebugValue:ux,useDeferredValue:function(t){return Tn().memoizedState=t},useTransition:function(){var t=Fv(!1),e=t[0];return t=M_.bind(null,t[1]),Tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=Xt,i=Tn();if(Ht){if(s===void 0)throw Error(le(407));s=s()}else{if(s=e(),js===null)throw Error(le(349));eo&30||R1(n,e,s)}i.memoizedState=s;var a={value:s,getSnapshot:e};return i.queue=a,$v(I1.bind(null,n,a,t),[t]),n.flags|=2048,ed(9,O1.bind(null,n,a,s,e),void 0,null),s},useId:function(){var t=Tn(),e=js.identifierPrefix;if(Ht){var s=oi,n=ai;s=(n&~(1<<32-pn(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=Jc++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=__++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},O_={readContext:Yr,useCallback:W1,useContext:Yr,useEffect:dx,useImperativeHandle:V1,useInsertionEffect:U1,useLayoutEffect:B1,useMemo:H1,useReducer:If,useRef:$1,useState:function(){return If(Zc)},useDebugValue:ux,useDeferredValue:function(t){var e=Jr();return K1(e,fs.memoizedState,t)},useTransition:function(){var t=If(Zc)[0],e=Jr().memoizedState;return[t,e]},useMutableSource:A1,useSyncExternalStore:D1,useId:G1,unstable_isNewReconciler:!1},I_={readContext:Yr,useCallback:W1,useContext:Yr,useEffect:dx,useImperativeHandle:V1,useInsertionEffect:U1,useLayoutEffect:B1,useMemo:H1,useReducer:Lf,useRef:$1,useState:function(){return Lf(Zc)},useDebugValue:ux,useDeferredValue:function(t){var e=Jr();return fs===null?e.memoizedState=t:K1(e,fs.memoizedState,t)},useTransition:function(){var t=Lf(Zc)[0],e=Jr().memoizedState;return[t,e]},useMutableSource:A1,useSyncExternalStore:D1,useId:G1,unstable_isNewReconciler:!1};function an(t,e){if(t&&t.defaultProps){e=Yt({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function dg(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:Yt({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var gm={isMounted:function(t){return(t=t._reactInternals)?xo(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=Qs(),i=ta(t),a=di(n,i);a.payload=e,s!=null&&(a.callback=s),e=Zi(t,a,i),e!==null&&(gn(e,t,i,n),Fu(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=Qs(),i=ta(t),a=di(n,i);a.tag=1,a.payload=e,s!=null&&(a.callback=s),e=Zi(t,a,i),e!==null&&(gn(e,t,i,n),Fu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Qs(),n=ta(t),i=di(s,n);i.tag=2,e!=null&&(i.callback=e),e=Zi(t,i,n),e!==null&&(gn(e,t,n,s),Fu(e,t,n))}};function Uv(t,e,s,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Kc(s,n)||!Kc(i,a):!0}function Y1(t,e,s){var n=!1,i=la,a=e.contextType;return typeof a=="object"&&a!==null?a=Yr(a):(i=mr(e)?Ja:Bs.current,n=e.contextTypes,a=(n=n!=null)?fl(t,i):la),e=new e(s,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gm,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Bv(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&gm.enqueueReplaceState(e,e.state,null)}function ug(t,e,s,n){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},rx(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Yr(a):(a=mr(e)?Ja:Bs.current,i.context=fl(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(dg(t,e,a,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&gm.enqueueReplaceState(i,i.state,null),yh(t,s,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function yl(t,e){try{var s="",n=e;do s+=dP(n),n=n.return;while(n);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Ff(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function hg(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var L_=typeof WeakMap=="function"?WeakMap:Map;function J1(t,e,s){s=di(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Nh||(Nh=!0,jg=n),hg(t,e)},s}function Z1(t,e,s){s=di(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;s.payload=function(){return n(i)},s.callback=function(){hg(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){hg(t,e),typeof n!="function"&&(ea===null?ea=new Set([this]):ea.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function zv(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new L_;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(s)||(i.add(s),t=Y_.bind(null,t,e,s),e.then(t,t))}function Vv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wv(t,e,s,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=di(-1,1),e.tag=2,Zi(s,e,1))),s.lanes|=1),t)}var F_=wi.ReactCurrentOwner,dr=!1;function Hs(t,e,s,n){e.child=t===null?E1(e,null,s,n):gl(e,t.child,s,n)}function Hv(t,e,s,n,i){s=s.render;var a=e.ref;return qo(e,i),n=lx(t,e,s,n,a,i),s=cx(),t!==null&&!dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pi(t,e,i)):(Ht&&s&&X0(e),e.flags|=1,Hs(t,e,n,i),e.child)}function Kv(t,e,s,n,i){if(t===null){var a=s.type;return typeof a=="function"&&!vx(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=a,eS(t,e,a,n,i)):(t=Wu(s.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(s=s.compare,s=s!==null?s:Kc,s(o,n)&&t.ref===e.ref)return pi(t,e,i)}return e.flags|=1,t=sa(a,n),t.ref=e.ref,t.return=e,e.child=t}function eS(t,e,s,n,i){if(t!==null){var a=t.memoizedProps;if(Kc(a,n)&&t.ref===e.ref)if(dr=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(dr=!0);else return e.lanes=t.lanes,pi(t,e,i)}return mg(t,e,s,n,i)}function tS(t,e,s){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(Bo,br),br|=s;else{if(!(s&1073741824))return t=a!==null?a.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Lt(Bo,br),br|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:s,Lt(Bo,br),br|=n}else a!==null?(n=a.baseLanes|s,e.memoizedState=null):n=s,Lt(Bo,br),br|=n;return Hs(t,e,i,s),e.child}function sS(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function mg(t,e,s,n,i){var a=mr(s)?Ja:Bs.current;return a=fl(e,a),qo(e,i),s=lx(t,e,s,n,a,i),n=cx(),t!==null&&!dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pi(t,e,i)):(Ht&&n&&X0(e),e.flags|=1,Hs(t,e,s,i),e.child)}function Gv(t,e,s,n,i){if(mr(s)){var a=!0;mh(e)}else a=!1;if(qo(e,i),e.stateNode===null)Bu(t,e),Y1(e,s,n),ug(e,s,n,i),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=Yr(d):(d=mr(s)?Ja:Bs.current,d=fl(e,d));var h=s.getDerivedStateFromProps,u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Bv(e,o,n,d),Ai=!1;var m=e.memoizedState;o.state=m,yh(e,n,o,i),c=e.memoizedState,l!==n||m!==c||hr.current||Ai?(typeof h=="function"&&(dg(e,s,h,n),c=e.memoizedState),(l=Ai||Uv(e,s,l,n,m,c,d))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,_1(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:an(e.type,l),o.props=d,u=e.pendingProps,m=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=Yr(c):(c=mr(s)?Ja:Bs.current,c=fl(e,c));var y=s.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==u||m!==c)&&Bv(e,o,n,c),Ai=!1,m=e.memoizedState,o.state=m,yh(e,n,o,i);var v=e.memoizedState;l!==u||m!==v||hr.current||Ai?(typeof y=="function"&&(dg(e,s,y,n),v=e.memoizedState),(d=Ai||Uv(e,s,d,n,m,v,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),o.props=n,o.state=v,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return fg(t,e,s,n,a,i)}function fg(t,e,s,n,i,a){sS(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Av(e,s,!1),pi(t,e,a);n=e.stateNode,F_.current=e;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=gl(e,t.child,null,a),e.child=gl(e,null,l,a)):Hs(t,e,l,a),e.memoizedState=n.state,i&&Av(e,s,!0),e.child}function rS(t){var e=t.stateNode;e.pendingContext?Mv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mv(t,e.context,!1),nx(t,e.containerInfo)}function qv(t,e,s,n,i){return pl(),J0(i),e.flags|=256,Hs(t,e,s,n),e.child}var pg={dehydrated:null,treeContext:null,retryLane:0};function gg(t){return{baseLanes:t,cachePool:null,transitions:null}}function nS(t,e,s){var n=e.pendingProps,i=Qt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Lt(Qt,i&1),t===null)return lg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=vm(o,n,0,null),t=Ha(t,n,s,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=gg(s),e.memoizedState=pg,t):hx(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return $_(t,e,o,n,l,i,s);if(a){a=n.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=sa(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=sa(l,a):(a=Ha(a,o,s,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?gg(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~s,e.memoizedState=pg,n}return a=t.child,t=a.sibling,n=sa(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function hx(t,e){return e=vm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tu(t,e,s,n){return n!==null&&J0(n),gl(e,t.child,null,s),t=hx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $_(t,e,s,n,i,a,o){if(s)return e.flags&256?(e.flags&=-257,n=Ff(Error(le(422))),tu(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=vm({mode:"visible",children:n.children},i,0,null),a=Ha(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&gl(e,t.child,null,o),e.child.memoizedState=gg(o),e.memoizedState=pg,a);if(!(e.mode&1))return tu(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(le(419)),n=Ff(a,n,void 0),tu(t,e,o,n)}if(l=(o&t.childLanes)!==0,dr||l){if(n=js,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,fi(t,i),gn(n,t,i,-1))}return yx(),n=Ff(Error(le(421))),tu(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=J_.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Er=Ji(i.nextSibling),Pr=e,Ht=!0,dn=null,t!==null&&(Wr[Hr++]=ai,Wr[Hr++]=oi,Wr[Hr++]=Za,ai=t.id,oi=t.overflow,Za=e),e=hx(e,n.children),e.flags|=4096,e)}function Qv(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),cg(t.return,e,s)}function $f(t,e,s,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=i)}function iS(t,e,s){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Hs(t,e,n.children,s),n=Qt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qv(t,s,e);else if(t.tag===19)Qv(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Lt(Qt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&vh(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),$f(e,!1,i,s,a);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vh(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}$f(e,!0,s,null,a);break;case"together":$f(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pi(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),to|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,s=sa(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=sa(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function U_(t,e,s){switch(e.tag){case 3:rS(e),pl();break;case 5:M1(e);break;case 1:mr(e.type)&&mh(e);break;case 4:nx(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Lt(gh,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Lt(Qt,Qt.current&1),e.flags|=128,null):s&e.child.childLanes?nS(t,e,s):(Lt(Qt,Qt.current&1),t=pi(t,e,s),t!==null?t.sibling:null);Lt(Qt,Qt.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return iS(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Lt(Qt,Qt.current),n)break;return null;case 22:case 23:return e.lanes=0,tS(t,e,s)}return pi(t,e,s)}var aS,xg,oS,lS;aS=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};xg=function(){};oS=function(t,e,s,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Aa($n.current);var a=null;switch(s){case"input":i=$p(t,i),n=$p(t,n),a=[];break;case"select":i=Yt({},i,{value:void 0}),n=Yt({},n,{value:void 0}),a=[];break;case"textarea":i=zp(t,i),n=zp(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=uh)}Wp(s,n);var o;s=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&($c.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(a||(a=[]),a.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&($c.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ut("scroll",t),a||l===c||(a=[])):(a=a||[]).push(d,c))}s&&(a=a||[]).push("style",s);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};lS=function(t,e,s,n){s!==n&&(e.flags|=4)};function rc(t,e){if(!Ht)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Fs(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function B_(t,e,s){var n=e.pendingProps;switch(Y0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fs(e),null;case 1:return mr(e.type)&&hh(),Fs(e),null;case 3:return n=e.stateNode,xl(),Vt(hr),Vt(Bs),ax(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Zd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dn!==null&&(Cg(dn),dn=null))),xg(t,e),Fs(e),null;case 5:ix(e);var i=Aa(Yc.current);if(s=e.type,t!==null&&e.stateNode!=null)oS(t,e,s,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(le(166));return Fs(e),null}if(t=Aa($n.current),Zd(e)){n=e.stateNode,s=e.type;var a=e.memoizedProps;switch(n[Mn]=e,n[Qc]=a,t=(e.mode&1)!==0,s){case"dialog":Ut("cancel",n),Ut("close",n);break;case"iframe":case"object":case"embed":Ut("load",n);break;case"video":case"audio":for(i=0;i<gc.length;i++)Ut(gc[i],n);break;case"source":Ut("error",n);break;case"img":case"image":case"link":Ut("error",n),Ut("load",n);break;case"details":Ut("toggle",n);break;case"input":nv(n,a),Ut("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ut("invalid",n);break;case"textarea":av(n,a),Ut("invalid",n)}Wp(s,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Jd(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Jd(n.textContent,l,t),i=["children",""+l]):$c.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ut("scroll",n)}switch(s){case"input":Wd(n),iv(n,a,!0);break;case"textarea":Wd(n),ov(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=uh)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=IN(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(s,{is:n.is}):(t=o.createElement(s),s==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,s),t[Mn]=e,t[Qc]=n,aS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Hp(s,n),s){case"dialog":Ut("cancel",t),Ut("close",t),i=n;break;case"iframe":case"object":case"embed":Ut("load",t),i=n;break;case"video":case"audio":for(i=0;i<gc.length;i++)Ut(gc[i],t);i=n;break;case"source":Ut("error",t),i=n;break;case"img":case"image":case"link":Ut("error",t),Ut("load",t),i=n;break;case"details":Ut("toggle",t),i=n;break;case"input":nv(t,n),i=$p(t,n),Ut("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Yt({},n,{value:void 0}),Ut("invalid",t);break;case"textarea":av(t,n),i=zp(t,n),Ut("invalid",t);break;default:i=n}Wp(s,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?$N(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&LN(t,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Uc(t,c):typeof c=="number"&&Uc(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&($c.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ut("scroll",t):c!=null&&I0(t,a,c,o))}switch(s){case"input":Wd(t),iv(t,n,!1);break;case"textarea":Wd(t),ov(t);break;case"option":n.value!=null&&t.setAttribute("value",""+oa(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Wo(t,!!n.multiple,a,!1):n.defaultValue!=null&&Wo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=uh)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Fs(e),null;case 6:if(t&&e.stateNode!=null)lS(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(le(166));if(s=Aa(Yc.current),Aa($n.current),Zd(e)){if(n=e.stateNode,s=e.memoizedProps,n[Mn]=e,(a=n.nodeValue!==s)&&(t=Pr,t!==null))switch(t.tag){case 3:Jd(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jd(n.nodeValue,s,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Mn]=e,e.stateNode=n}return Fs(e),null;case 13:if(Vt(Qt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ht&&Er!==null&&e.mode&1&&!(e.flags&128))T1(),pl(),e.flags|=98560,a=!1;else if(a=Zd(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(le(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(le(317));a[Mn]=e}else pl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fs(e),a=!1}else dn!==null&&(Cg(dn),dn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Qt.current&1?gs===0&&(gs=3):yx())),e.updateQueue!==null&&(e.flags|=4),Fs(e),null);case 4:return xl(),xg(t,e),t===null&&Gc(e.stateNode.containerInfo),Fs(e),null;case 10:return tx(e.type._context),Fs(e),null;case 17:return mr(e.type)&&hh(),Fs(e),null;case 19:if(Vt(Qt),a=e.memoizedState,a===null)return Fs(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)rc(a,!1);else{if(gs!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vh(t),o!==null){for(e.flags|=128,rc(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)a=s,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Lt(Qt,Qt.current&1|2),e.child}t=t.sibling}a.tail!==null&&rs()>vl&&(e.flags|=128,n=!0,rc(a,!1),e.lanes=4194304)}else{if(!n)if(t=vh(o),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),rc(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ht)return Fs(e),null}else 2*rs()-a.renderingStartTime>vl&&s!==1073741824&&(e.flags|=128,n=!0,rc(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(s=a.last,s!==null?s.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=rs(),e.sibling=null,s=Qt.current,Lt(Qt,n?s&1|2:s&1),e):(Fs(e),null);case 22:case 23:return xx(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?br&1073741824&&(Fs(e),e.subtreeFlags&6&&(e.flags|=8192)):Fs(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function z_(t,e){switch(Y0(e),e.tag){case 1:return mr(e.type)&&hh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xl(),Vt(hr),Vt(Bs),ax(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ix(e),null;case 13:if(Vt(Qt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));pl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Vt(Qt),null;case 4:return xl(),null;case 10:return tx(e.type._context),null;case 22:case 23:return xx(),null;case 24:return null;default:return null}}var su=!1,Us=!1,V_=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Uo(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Zt(t,e,n)}else s.current=null}function yg(t,e,s){try{s()}catch(n){Zt(t,e,n)}}var Xv=!1;function W_(t,e){if(tg=lh,t=m1(),Q0(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,h=0,u=t,m=null;t:for(;;){for(var y;u!==s||i!==0&&u.nodeType!==3||(l=o+i),u!==a||n!==0&&u.nodeType!==3||(c=o+n),u.nodeType===3&&(o+=u.nodeValue.length),(y=u.firstChild)!==null;)m=u,u=y;for(;;){if(u===t)break t;if(m===s&&++d===i&&(l=o),m===a&&++h===n&&(c=o),(y=u.nextSibling)!==null)break;u=m,m=u.parentNode}u=y}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(sg={focusedElem:t,selectionRange:s},lh=!1,ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){e=ke;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,b=v.memoizedState,x=e.stateNode,p=x.getSnapshotBeforeUpdate(e.elementType===e.type?g:an(e.type,g),b);x.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(j){Zt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}return v=Xv,Xv=!1,v}function kc(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&yg(e,s,a)}i=i.next}while(i!==n)}}function xm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function vg(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function cS(t){var e=t.alternate;e!==null&&(t.alternate=null,cS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[Qc],delete e[ig],delete e[T_],delete e[k_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dS(t){return t.tag===5||t.tag===3||t.tag===4}function Yv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bg(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=uh));else if(n!==4&&(t=t.child,t!==null))for(bg(t,e,s),t=t.sibling;t!==null;)bg(t,e,s),t=t.sibling}function wg(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(wg(t,e,s),t=t.sibling;t!==null;)wg(t,e,s),t=t.sibling}var Ps=null,cn=!1;function Ci(t,e,s){for(s=s.child;s!==null;)uS(t,e,s),s=s.sibling}function uS(t,e,s){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(cm,s)}catch{}switch(s.tag){case 5:Us||Uo(s,e);case 6:var n=Ps,i=cn;Ps=null,Ci(t,e,s),Ps=n,cn=i,Ps!==null&&(cn?(t=Ps,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Ps.removeChild(s.stateNode));break;case 18:Ps!==null&&(cn?(t=Ps,s=s.stateNode,t.nodeType===8?Af(t.parentNode,s):t.nodeType===1&&Af(t,s),Wc(t)):Af(Ps,s.stateNode));break;case 4:n=Ps,i=cn,Ps=s.stateNode.containerInfo,cn=!0,Ci(t,e,s),Ps=n,cn=i;break;case 0:case 11:case 14:case 15:if(!Us&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&yg(s,e,o),i=i.next}while(i!==n)}Ci(t,e,s);break;case 1:if(!Us&&(Uo(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Zt(s,e,l)}Ci(t,e,s);break;case 21:Ci(t,e,s);break;case 22:s.mode&1?(Us=(n=Us)||s.memoizedState!==null,Ci(t,e,s),Us=n):Ci(t,e,s);break;default:Ci(t,e,s)}}function Jv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new V_),e.forEach(function(n){var i=Z_.bind(null,t,n);s.has(n)||(s.add(n),n.then(i,i))})}}function rn(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ps=l.stateNode,cn=!1;break e;case 3:Ps=l.stateNode.containerInfo,cn=!0;break e;case 4:Ps=l.stateNode.containerInfo,cn=!0;break e}l=l.return}if(Ps===null)throw Error(le(160));uS(a,o,i),Ps=null,cn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Zt(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hS(e,t),e=e.sibling}function hS(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),Sn(t),n&4){try{kc(3,t,t.return),xm(3,t)}catch(g){Zt(t,t.return,g)}try{kc(5,t,t.return)}catch(g){Zt(t,t.return,g)}}break;case 1:rn(e,t),Sn(t),n&512&&s!==null&&Uo(s,s.return);break;case 5:if(rn(e,t),Sn(t),n&512&&s!==null&&Uo(s,s.return),t.flags&32){var i=t.stateNode;try{Uc(i,"")}catch(g){Zt(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=s!==null?s.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&RN(i,a),Hp(l,o);var d=Hp(l,a);for(o=0;o<c.length;o+=2){var h=c[o],u=c[o+1];h==="style"?$N(i,u):h==="dangerouslySetInnerHTML"?LN(i,u):h==="children"?Uc(i,u):I0(i,h,u,d)}switch(l){case"input":Up(i,a);break;case"textarea":ON(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?Wo(i,!!a.multiple,y,!1):m!==!!a.multiple&&(a.defaultValue!=null?Wo(i,!!a.multiple,a.defaultValue,!0):Wo(i,!!a.multiple,a.multiple?[]:"",!1))}i[Qc]=a}catch(g){Zt(t,t.return,g)}}break;case 6:if(rn(e,t),Sn(t),n&4){if(t.stateNode===null)throw Error(le(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(g){Zt(t,t.return,g)}}break;case 3:if(rn(e,t),Sn(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Wc(e.containerInfo)}catch(g){Zt(t,t.return,g)}break;case 4:rn(e,t),Sn(t);break;case 13:rn(e,t),Sn(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(px=rs())),n&4&&Jv(t);break;case 22:if(h=s!==null&&s.memoizedState!==null,t.mode&1?(Us=(d=Us)||h,rn(e,t),Us=d):rn(e,t),Sn(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ke=t,h=t.child;h!==null;){for(u=ke=h;ke!==null;){switch(m=ke,y=m.child,m.tag){case 0:case 11:case 14:case 15:kc(4,m,m.return);break;case 1:Uo(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,s=m.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(g){Zt(n,s,g)}}break;case 5:Uo(m,m.return);break;case 22:if(m.memoizedState!==null){eb(u);continue}}y!==null?(y.return=m,ke=y):eb(u)}h=h.sibling}e:for(h=null,u=t;;){if(u.tag===5){if(h===null){h=u;try{i=u.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=u.stateNode,c=u.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=FN("display",o))}catch(g){Zt(t,t.return,g)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(g){Zt(t,t.return,g)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:rn(e,t),Sn(t),n&4&&Jv(t);break;case 21:break;default:rn(e,t),Sn(t)}}function Sn(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(dS(s)){var n=s;break e}s=s.return}throw Error(le(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Uc(i,""),n.flags&=-33);var a=Yv(t);wg(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Yv(t);bg(t,l,o);break;default:throw Error(le(161))}}catch(c){Zt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function H_(t,e,s){ke=t,mS(t)}function mS(t,e,s){for(var n=(t.mode&1)!==0;ke!==null;){var i=ke,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||su;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Us;l=su;var d=Us;if(su=o,(Us=c)&&!d)for(ke=i;ke!==null;)o=ke,c=o.child,o.tag===22&&o.memoizedState!==null?tb(i):c!==null?(c.return=o,ke=c):tb(i);for(;a!==null;)ke=a,mS(a),a=a.sibling;ke=i,su=l,Us=d}Zv(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ke=a):Zv(t)}}function Zv(t){for(;ke!==null;){var e=ke;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Us||xm(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Us)if(s===null)n.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:an(e.type,s.memoizedProps);n.componentDidUpdate(i,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Lv(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Lv(e,o,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&Wc(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Us||e.flags&512&&vg(e)}catch(m){Zt(e,e.return,m)}}if(e===t){ke=null;break}if(s=e.sibling,s!==null){s.return=e.return,ke=s;break}ke=e.return}}function eb(t){for(;ke!==null;){var e=ke;if(e===t){ke=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ke=s;break}ke=e.return}}function tb(t){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{xm(4,e)}catch(c){Zt(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){Zt(e,i,c)}}var a=e.return;try{vg(e)}catch(c){Zt(e,a,c)}break;case 5:var o=e.return;try{vg(e)}catch(c){Zt(e,o,c)}}}catch(c){Zt(e,e.return,c)}if(e===t){ke=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ke=l;break}ke=e.return}}var K_=Math.ceil,jh=wi.ReactCurrentDispatcher,mx=wi.ReactCurrentOwner,Gr=wi.ReactCurrentBatchConfig,yt=0,js=null,cs=null,As=0,br=0,Bo=xa(0),gs=0,td=null,to=0,ym=0,fx=0,Ec=null,cr=null,px=0,vl=1/0,Zn=null,Nh=!1,jg=null,ea=null,ru=!1,Ki=null,Sh=0,Pc=0,Ng=null,zu=-1,Vu=0;function Qs(){return yt&6?rs():zu!==-1?zu:zu=rs()}function ta(t){return t.mode&1?yt&2&&As!==0?As&-As:P_.transition!==null?(Vu===0&&(Vu=YN()),Vu):(t=Pt,t!==0||(t=window.event,t=t===void 0?16:n1(t.type)),t):1}function gn(t,e,s,n){if(50<Pc)throw Pc=0,Ng=null,Error(le(185));Sd(t,s,n),(!(yt&2)||t!==js)&&(t===js&&(!(yt&2)&&(ym|=s),gs===4&&Oi(t,As)),fr(t,n),s===1&&yt===0&&!(e.mode&1)&&(vl=rs()+500,fm&&ya()))}function fr(t,e){var s=t.callbackNode;PP(t,e);var n=oh(t,t===js?As:0);if(n===0)s!==null&&dv(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&dv(s),e===1)t.tag===0?E_(sb.bind(null,t)):N1(sb.bind(null,t)),S_(function(){!(yt&6)&&ya()}),s=null;else{switch(JN(n)){case 1:s=B0;break;case 4:s=QN;break;case 16:s=ah;break;case 536870912:s=XN;break;default:s=ah}s=wS(s,fS.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function fS(t,e){if(zu=-1,Vu=0,yt&6)throw Error(le(327));var s=t.callbackNode;if(Qo()&&t.callbackNode!==s)return null;var n=oh(t,t===js?As:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ch(t,n);else{e=n;var i=yt;yt|=2;var a=gS();(js!==t||As!==e)&&(Zn=null,vl=rs()+500,Wa(t,e));do try{Q_();break}catch(l){pS(t,l)}while(!0);ex(),jh.current=a,yt=i,cs!==null?e=0:(js=null,As=0,e=gs)}if(e!==0){if(e===2&&(i=Xp(t),i!==0&&(n=i,e=Sg(t,i))),e===1)throw s=td,Wa(t,0),Oi(t,n),fr(t,rs()),s;if(e===6)Oi(t,n);else{if(i=t.current.alternate,!(n&30)&&!G_(i)&&(e=Ch(t,n),e===2&&(a=Xp(t),a!==0&&(n=a,e=Sg(t,a))),e===1))throw s=td,Wa(t,0),Oi(t,n),fr(t,rs()),s;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(le(345));case 2:Ta(t,cr,Zn);break;case 3:if(Oi(t,n),(n&130023424)===n&&(e=px+500-rs(),10<e)){if(oh(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Qs(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ng(Ta.bind(null,t,cr,Zn),e);break}Ta(t,cr,Zn);break;case 4:if(Oi(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-pn(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=rs()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*K_(n/1960))-n,10<n){t.timeoutHandle=ng(Ta.bind(null,t,cr,Zn),n);break}Ta(t,cr,Zn);break;case 5:Ta(t,cr,Zn);break;default:throw Error(le(329))}}}return fr(t,rs()),t.callbackNode===s?fS.bind(null,t):null}function Sg(t,e){var s=Ec;return t.current.memoizedState.isDehydrated&&(Wa(t,e).flags|=256),t=Ch(t,e),t!==2&&(e=cr,cr=s,e!==null&&Cg(e)),t}function Cg(t){cr===null?cr=t:cr.push.apply(cr,t)}function G_(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var i=s[n],a=i.getSnapshot;i=i.value;try{if(!yn(a(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oi(t,e){for(e&=~fx,e&=~ym,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-pn(e),n=1<<s;t[s]=-1,e&=~n}}function sb(t){if(yt&6)throw Error(le(327));Qo();var e=oh(t,0);if(!(e&1))return fr(t,rs()),null;var s=Ch(t,e);if(t.tag!==0&&s===2){var n=Xp(t);n!==0&&(e=n,s=Sg(t,n))}if(s===1)throw s=td,Wa(t,0),Oi(t,e),fr(t,rs()),s;if(s===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ta(t,cr,Zn),fr(t,rs()),null}function gx(t,e){var s=yt;yt|=1;try{return t(e)}finally{yt=s,yt===0&&(vl=rs()+500,fm&&ya())}}function so(t){Ki!==null&&Ki.tag===0&&!(yt&6)&&Qo();var e=yt;yt|=1;var s=Gr.transition,n=Pt;try{if(Gr.transition=null,Pt=1,t)return t()}finally{Pt=n,Gr.transition=s,yt=e,!(yt&6)&&ya()}}function xx(){br=Bo.current,Vt(Bo)}function Wa(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,N_(s)),cs!==null)for(s=cs.return;s!==null;){var n=s;switch(Y0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&hh();break;case 3:xl(),Vt(hr),Vt(Bs),ax();break;case 5:ix(n);break;case 4:xl();break;case 13:Vt(Qt);break;case 19:Vt(Qt);break;case 10:tx(n.type._context);break;case 22:case 23:xx()}s=s.return}if(js=t,cs=t=sa(t.current,null),As=br=e,gs=0,td=null,fx=ym=to=0,cr=Ec=null,Ma!==null){for(e=0;e<Ma.length;e++)if(s=Ma[e],n=s.interleaved,n!==null){s.interleaved=null;var i=n.next,a=s.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}s.pending=n}Ma=null}return t}function pS(t,e){do{var s=cs;try{if(ex(),$u.current=wh,bh){for(var n=Xt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}bh=!1}if(eo=0,ws=fs=Xt=null,Tc=!1,Jc=0,mx.current=null,s===null||s.return===null){gs=1,td=e,cs=null;break}e:{var a=t,o=s.return,l=s,c=e;if(e=As,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Vv(o);if(y!==null){y.flags&=-257,Wv(y,o,l,a,e),y.mode&1&&zv(a,d,e),e=y,c=d;var v=e.updateQueue;if(v===null){var g=new Set;g.add(c),e.updateQueue=g}else v.add(c);break e}else{if(!(e&1)){zv(a,d,e),yx();break e}c=Error(le(426))}}else if(Ht&&l.mode&1){var b=Vv(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Wv(b,o,l,a,e),J0(yl(c,l));break e}}a=c=yl(c,l),gs!==4&&(gs=2),Ec===null?Ec=[a]:Ec.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=J1(a,c,e);Iv(a,x);break e;case 1:l=c;var p=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof p.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ea===null||!ea.has(w)))){a.flags|=65536,e&=-e,a.lanes|=e;var j=Z1(a,l,e);Iv(a,j);break e}}a=a.return}while(a!==null)}yS(s)}catch(S){e=S,cs===s&&s!==null&&(cs=s=s.return);continue}break}while(!0)}function gS(){var t=jh.current;return jh.current=wh,t===null?wh:t}function yx(){(gs===0||gs===3||gs===2)&&(gs=4),js===null||!(to&268435455)&&!(ym&268435455)||Oi(js,As)}function Ch(t,e){var s=yt;yt|=2;var n=gS();(js!==t||As!==e)&&(Zn=null,Wa(t,e));do try{q_();break}catch(i){pS(t,i)}while(!0);if(ex(),yt=s,jh.current=n,cs!==null)throw Error(le(261));return js=null,As=0,gs}function q_(){for(;cs!==null;)xS(cs)}function Q_(){for(;cs!==null&&!bP();)xS(cs)}function xS(t){var e=bS(t.alternate,t,br);t.memoizedProps=t.pendingProps,e===null?yS(t):cs=e,mx.current=null}function yS(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=z_(s,e),s!==null){s.flags&=32767,cs=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gs=6,cs=null;return}}else if(s=B_(s,e,br),s!==null){cs=s;return}if(e=e.sibling,e!==null){cs=e;return}cs=e=t}while(e!==null);gs===0&&(gs=5)}function Ta(t,e,s){var n=Pt,i=Gr.transition;try{Gr.transition=null,Pt=1,X_(t,e,s,n)}finally{Gr.transition=i,Pt=n}return null}function X_(t,e,s,n){do Qo();while(Ki!==null);if(yt&6)throw Error(le(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var a=s.lanes|s.childLanes;if(_P(t,a),t===js&&(cs=js=null,As=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||ru||(ru=!0,wS(ah,function(){return Qo(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=Gr.transition,Gr.transition=null;var o=Pt;Pt=1;var l=yt;yt|=4,mx.current=null,W_(t,s),hS(s,t),g_(sg),lh=!!tg,sg=tg=null,t.current=s,H_(s),wP(),yt=l,Pt=o,Gr.transition=a}else t.current=s;if(ru&&(ru=!1,Ki=t,Sh=i),a=t.pendingLanes,a===0&&(ea=null),SP(s.stateNode),fr(t,rs()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],n(i.value,{componentStack:i.stack,digest:i.digest});if(Nh)throw Nh=!1,t=jg,jg=null,t;return Sh&1&&t.tag!==0&&Qo(),a=t.pendingLanes,a&1?t===Ng?Pc++:(Pc=0,Ng=t):Pc=0,ya(),null}function Qo(){if(Ki!==null){var t=JN(Sh),e=Gr.transition,s=Pt;try{if(Gr.transition=null,Pt=16>t?16:t,Ki===null)var n=!1;else{if(t=Ki,Ki=null,Sh=0,yt&6)throw Error(le(331));var i=yt;for(yt|=4,ke=t.current;ke!==null;){var a=ke,o=a.child;if(ke.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ke=d;ke!==null;){var h=ke;switch(h.tag){case 0:case 11:case 15:kc(8,h,a)}var u=h.child;if(u!==null)u.return=h,ke=u;else for(;ke!==null;){h=ke;var m=h.sibling,y=h.return;if(cS(h),h===d){ke=null;break}if(m!==null){m.return=y,ke=m;break}ke=y}}}var v=a.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}ke=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ke=o;else e:for(;ke!==null;){if(a=ke,a.flags&2048)switch(a.tag){case 0:case 11:case 15:kc(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,ke=x;break e}ke=a.return}}var p=t.current;for(ke=p;ke!==null;){o=ke;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ke=w;else e:for(o=p;ke!==null;){if(l=ke,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xm(9,l)}}catch(S){Zt(l,l.return,S)}if(l===o){ke=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,ke=j;break e}ke=l.return}}if(yt=i,ya(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(cm,t)}catch{}n=!0}return n}finally{Pt=s,Gr.transition=e}}return!1}function rb(t,e,s){e=yl(s,e),e=J1(t,e,1),t=Zi(t,e,1),e=Qs(),t!==null&&(Sd(t,1,e),fr(t,e))}function Zt(t,e,s){if(t.tag===3)rb(t,t,s);else for(;e!==null;){if(e.tag===3){rb(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ea===null||!ea.has(n))){t=yl(s,t),t=Z1(e,t,1),e=Zi(e,t,1),t=Qs(),e!==null&&(Sd(e,1,t),fr(e,t));break}}e=e.return}}function Y_(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=Qs(),t.pingedLanes|=t.suspendedLanes&s,js===t&&(As&s)===s&&(gs===4||gs===3&&(As&130023424)===As&&500>rs()-px?Wa(t,0):fx|=s),fr(t,e)}function vS(t,e){e===0&&(t.mode&1?(e=Gd,Gd<<=1,!(Gd&130023424)&&(Gd=4194304)):e=1);var s=Qs();t=fi(t,e),t!==null&&(Sd(t,e,s),fr(t,s))}function J_(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),vS(t,s)}function Z_(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(le(314))}n!==null&&n.delete(e),vS(t,s)}var bS;bS=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||hr.current)dr=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return dr=!1,U_(t,e,s);dr=!!(t.flags&131072)}else dr=!1,Ht&&e.flags&1048576&&S1(e,ph,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Bu(t,e),t=e.pendingProps;var i=fl(e,Bs.current);qo(e,s),i=lx(null,e,n,t,i,s);var a=cx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mr(n)?(a=!0,mh(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rx(e),i.updater=gm,e.stateNode=i,i._reactInternals=e,ug(e,n,t,s),e=fg(null,e,n,!0,a,s)):(e.tag=0,Ht&&a&&X0(e),Hs(null,e,i,s),e=e.child),e;case 16:n=e.elementType;e:{switch(Bu(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=t3(n),t=an(n,t),i){case 0:e=mg(null,e,n,t,s);break e;case 1:e=Gv(null,e,n,t,s);break e;case 11:e=Hv(null,e,n,t,s);break e;case 14:e=Kv(null,e,n,an(n.type,t),s);break e}throw Error(le(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:an(n,i),mg(t,e,n,i,s);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:an(n,i),Gv(t,e,n,i,s);case 3:e:{if(rS(e),t===null)throw Error(le(387));n=e.pendingProps,a=e.memoizedState,i=a.element,_1(t,e),yh(e,n,null,s);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=yl(Error(le(423)),e),e=qv(t,e,n,s,i);break e}else if(n!==i){i=yl(Error(le(424)),e),e=qv(t,e,n,s,i);break e}else for(Er=Ji(e.stateNode.containerInfo.firstChild),Pr=e,Ht=!0,dn=null,s=E1(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(pl(),n===i){e=pi(t,e,s);break e}Hs(t,e,n,s)}e=e.child}return e;case 5:return M1(e),t===null&&lg(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,rg(n,i)?o=null:a!==null&&rg(n,a)&&(e.flags|=32),sS(t,e),Hs(t,e,o,s),e.child;case 6:return t===null&&lg(e),null;case 13:return nS(t,e,s);case 4:return nx(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=gl(e,null,n,s):Hs(t,e,n,s),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:an(n,i),Hv(t,e,n,i,s);case 7:return Hs(t,e,e.pendingProps,s),e.child;case 8:return Hs(t,e,e.pendingProps.children,s),e.child;case 12:return Hs(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Lt(gh,n._currentValue),n._currentValue=o,a!==null)if(yn(a.value,o)){if(a.children===i.children&&!hr.current){e=pi(t,e,s);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=di(-1,s&-s),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),cg(a.return,s,e),l.lanes|=s;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(le(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),cg(o,s,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Hs(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,qo(e,s),i=Yr(i),n=n(i),e.flags|=1,Hs(t,e,n,s),e.child;case 14:return n=e.type,i=an(n,e.pendingProps),i=an(n.type,i),Kv(t,e,n,i,s);case 15:return eS(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:an(n,i),Bu(t,e),e.tag=1,mr(n)?(t=!0,mh(e)):t=!1,qo(e,s),Y1(e,n,i),ug(e,n,i,s),fg(null,e,n,!0,t,s);case 19:return iS(t,e,s);case 22:return tS(t,e,s)}throw Error(le(156,e.tag))};function wS(t,e){return qN(t,e)}function e3(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(t,e,s,n){return new e3(t,e,s,n)}function vx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function t3(t){if(typeof t=="function")return vx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===F0)return 11;if(t===$0)return 14}return 2}function sa(t,e){var s=t.alternate;return s===null?(s=Kr(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Wu(t,e,s,n,i,a){var o=2;if(n=t,typeof t=="function")vx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Mo:return Ha(s.children,i,a,e);case L0:o=8,i|=8;break;case Op:return t=Kr(12,s,e,i|2),t.elementType=Op,t.lanes=a,t;case Ip:return t=Kr(13,s,e,i),t.elementType=Ip,t.lanes=a,t;case Lp:return t=Kr(19,s,e,i),t.elementType=Lp,t.lanes=a,t;case MN:return vm(s,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case PN:o=10;break e;case _N:o=9;break e;case F0:o=11;break e;case $0:o=14;break e;case Mi:o=16,n=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=Kr(o,s,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Ha(t,e,s,n){return t=Kr(7,t,n,e),t.lanes=s,t}function vm(t,e,s,n){return t=Kr(22,t,n,e),t.elementType=MN,t.lanes=s,t.stateNode={isHidden:!1},t}function Uf(t,e,s){return t=Kr(6,t,null,e),t.lanes=s,t}function Bf(t,e,s){return e=Kr(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function s3(t,e,s,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wf(0),this.expirationTimes=wf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wf(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bx(t,e,s,n,i,a,o,l,c){return t=new s3(t,e,s,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Kr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},rx(a),t}function r3(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_o,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function jS(t){if(!t)return la;t=t._reactInternals;e:{if(xo(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var s=t.type;if(mr(s))return j1(t,s,e)}return e}function NS(t,e,s,n,i,a,o,l,c){return t=bx(s,n,!0,t,i,a,o,l,c),t.context=jS(null),s=t.current,n=Qs(),i=ta(s),a=di(n,i),a.callback=e??null,Zi(s,a,i),t.current.lanes=i,Sd(t,i,n),fr(t,n),t}function bm(t,e,s,n){var i=e.current,a=Qs(),o=ta(i);return s=jS(s),e.context===null?e.context=s:e.pendingContext=s,e=di(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Zi(i,e,o),t!==null&&(gn(t,i,o,a),Fu(t,i,o)),o}function Th(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function nb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function wx(t,e){nb(t,e),(t=t.alternate)&&nb(t,e)}function n3(){return null}var SS=typeof reportError=="function"?reportError:function(t){console.error(t)};function jx(t){this._internalRoot=t}wm.prototype.render=jx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));bm(t,e,null,null)};wm.prototype.unmount=jx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;so(function(){bm(null,t,null,null)}),e[mi]=null}};function wm(t){this._internalRoot=t}wm.prototype.unstable_scheduleHydration=function(t){if(t){var e=t1();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Ri.length&&e!==0&&e<Ri[s].priority;s++);Ri.splice(s,0,t),s===0&&r1(t)}};function Nx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ib(){}function i3(t,e,s,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var d=Th(o);a.call(d)}}var o=NS(e,n,t,0,null,!1,!1,"",ib);return t._reactRootContainer=o,t[mi]=o.current,Gc(t.nodeType===8?t.parentNode:t),so(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var d=Th(c);l.call(d)}}var c=bx(t,0,!1,null,null,!1,!1,"",ib);return t._reactRootContainer=c,t[mi]=c.current,Gc(t.nodeType===8?t.parentNode:t),so(function(){bm(e,c,s,n)}),c}function Nm(t,e,s,n,i){var a=s._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Th(o);l.call(c)}}bm(e,o,t,i)}else o=i3(s,e,t,i,n);return Th(o)}ZN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=pc(e.pendingLanes);s!==0&&(z0(e,s|1),fr(e,rs()),!(yt&6)&&(vl=rs()+500,ya()))}break;case 13:so(function(){var n=fi(t,1);if(n!==null){var i=Qs();gn(n,t,1,i)}}),wx(t,1)}};V0=function(t){if(t.tag===13){var e=fi(t,134217728);if(e!==null){var s=Qs();gn(e,t,134217728,s)}wx(t,134217728)}};e1=function(t){if(t.tag===13){var e=ta(t),s=fi(t,e);if(s!==null){var n=Qs();gn(s,t,e,n)}wx(t,e)}};t1=function(){return Pt};s1=function(t,e){var s=Pt;try{return Pt=t,e()}finally{Pt=s}};Gp=function(t,e,s){switch(e){case"input":if(Up(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var i=mm(n);if(!i)throw Error(le(90));DN(n),Up(n,i)}}}break;case"textarea":ON(t,s);break;case"select":e=s.value,e!=null&&Wo(t,!!s.multiple,e,!1)}};zN=gx;VN=so;var a3={usingClientEntryPoint:!1,Events:[Td,Oo,mm,UN,BN,gx]},nc={findFiberByHostInstance:_a,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o3={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=KN(t),t===null?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||n3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{cm=nu.inject(o3),Fn=nu}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a3;Dr.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nx(e))throw Error(le(200));return r3(t,e,null,s)};Dr.createRoot=function(t,e){if(!Nx(t))throw Error(le(299));var s=!1,n="",i=SS;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bx(t,1,!1,null,null,s,!1,n,i),t[mi]=e.current,Gc(t.nodeType===8?t.parentNode:t),new jx(e)};Dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=KN(e),t=t===null?null:t.stateNode,t};Dr.flushSync=function(t){return so(t)};Dr.hydrate=function(t,e,s){if(!jm(e))throw Error(le(200));return Nm(null,t,e,!0,s)};Dr.hydrateRoot=function(t,e,s){if(!Nx(t))throw Error(le(405));var n=s!=null&&s.hydratedSources||null,i=!1,a="",o=SS;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=NS(e,null,t,1,s??null,i,!1,a,o),t[mi]=e.current,Gc(t),n)for(t=0;t<n.length;t++)s=n[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new wm(e)};Dr.render=function(t,e,s){if(!jm(e))throw Error(le(200));return Nm(null,t,e,!1,s)};Dr.unmountComponentAtNode=function(t){if(!jm(t))throw Error(le(40));return t._reactRootContainer?(so(function(){Nm(null,null,t,!1,function(){t._reactRootContainer=null,t[mi]=null})}),!0):!1};Dr.unstable_batchedUpdates=gx;Dr.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!jm(s))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return Nm(t,e,s,!1,n)};Dr.version="18.3.1-next-f1338f8080-20240426";function CS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CS)}catch(t){console.error(t)}}CS(),CN.exports=Dr;var yo=CN.exports;const l3=E0(yo);var TS,ab=yo;TS=ab.createRoot,ab.hydrateRoot;function c3(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,n,i,a,o=[],l="",c=t.split("/");for(c[0]||c.shift();i=c.shift();)s=i[0],s==="*"?(o.push(s),l+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):s===":"?(n=i.indexOf("?",1),a=i.indexOf(".",1),o.push(i.substring(1,~n?n:~a?a:i.length)),l+=~n&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~n?"?":"")+"\\"+i.substring(a))):l+="/"+i;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var kS={exports:{}},ES={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bl=f;function d3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var u3=typeof Object.is=="function"?Object.is:d3,h3=bl.useState,m3=bl.useEffect,f3=bl.useLayoutEffect,p3=bl.useDebugValue;function g3(t,e){var s=e(),n=h3({inst:{value:s,getSnapshot:e}}),i=n[0].inst,a=n[1];return f3(function(){i.value=s,i.getSnapshot=e,zf(i)&&a({inst:i})},[t,s,e]),m3(function(){return zf(i)&&a({inst:i}),t(function(){zf(i)&&a({inst:i})})},[t]),p3(s),s}function zf(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!u3(t,s)}catch{return!0}}function x3(t,e){return e()}var y3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x3:g3;ES.useSyncExternalStore=bl.useSyncExternalStore!==void 0?bl.useSyncExternalStore:y3;kS.exports=ES;var v3=kS.exports;const b3=D0.useInsertionEffect,w3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",j3=w3?f.useLayoutEffect:f.useEffect,N3=b3||j3,PS=t=>{const e=f.useRef([t,(...s)=>e[0](...s)]).current;return N3(()=>{e[0]=t}),e[1]},S3="popstate",Sx="pushState",Cx="replaceState",C3="hashchange",ob=[S3,Sx,Cx,C3],T3=t=>{for(const e of ob)addEventListener(e,t);return()=>{for(const e of ob)removeEventListener(e,t)}},_S=(t,e)=>v3.useSyncExternalStore(T3,t,e),k3=()=>location.search,E3=({ssrSearch:t=""}={})=>_S(k3,()=>t),lb=()=>location.pathname,P3=({ssrPath:t}={})=>_S(lb,t?()=>t:lb),_3=(t,{replace:e=!1,state:s=null}={})=>history[e?Cx:Sx](s,"",t),M3=(t={})=>[P3(t),_3],cb=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[cb]>"u"){for(const t of[Sx,Cx]){const e=history[t];history[t]=function(){const s=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),s}}Object.defineProperty(window,cb,{value:!0})}const A3=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",MS=(t="")=>t==="/"?"":t,D3=(t,e)=>t[0]==="~"?t.slice(1):MS(e)+t,R3=(t="",e)=>A3(db(MS(t)),db(e)),db=t=>{try{return decodeURI(t)}catch{return t}},AS={hook:M3,searchHook:E3,parser:c3,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},DS=f.createContext(AS),Ed=()=>f.useContext(DS),RS={},OS=f.createContext(RS),O3=()=>f.useContext(OS),Sm=t=>{const[e,s]=t.hook(t);return[R3(t.base,e),PS((n,i)=>s(D3(n,t.base),i))]},Or=()=>Sm(Ed()),IS=(t,e,s,n)=>{const{pattern:i,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",n),o=i.exec(s)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=a!==!1?Object.fromEntries(a.map((u,m)=>[u,c[m]])):o.groups;let h={...c};return d&&Object.assign(h,d),h})(),...n?[l]:[]]:[!1,null]},I3=({children:t,...e})=>{var h,u;const s=Ed(),n=e.hook?AS:s;let i=n;const[a,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=a),e.hrefs=e.hrefs??((u=e.hook)==null?void 0:u.hrefs);let l=f.useRef({}),c=l.current,d=c;for(let m in n){const y=m==="base"?n[m]+(e[m]||""):e[m]||n[m];c===d&&y!==d[m]&&(l.current=d={...d}),d[m]=y,(y!==n[m]||y!==i[m])&&(i=d)}return f.createElement(DS.Provider,{value:i,children:t})},ub=({children:t,component:e},s)=>e?f.createElement(e,{params:s}):typeof t=="function"?t(s):t,L3=t=>{let e=f.useRef(RS);const s=e.current;return e.current=Object.keys(t).length!==Object.keys(s).length||Object.entries(t).some(([n,i])=>i!==s[n])?t:s},It=({path:t,nest:e,match:s,...n})=>{const i=Ed(),[a]=Sm(i),[o,l,c]=s??IS(i.parser,t,a,e),d=L3({...O3(),...l});if(!o)return null;const h=c?f.createElement(I3,{base:c},ub(n,d)):ub(n,d);return f.createElement(OS.Provider,{value:d,children:h})},lt=f.forwardRef((t,e)=>{const s=Ed(),[n,i]=Sm(s),{to:a="",href:o=a,onClick:l,asChild:c,children:d,className:h,replace:u,state:m,...y}=t,v=PS(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(l==null||l(b),b.defaultPrevented||(b.preventDefault(),i(o,t)))}),g=s.hrefs(o[0]==="~"?o.slice(1):s.base+o,s);return c&&f.isValidElement(d)?f.cloneElement(d,{onClick:v,href:g}):f.createElement("a",{...y,onClick:v,href:g,className:h!=null&&h.call?h(n===o):h,children:d,ref:e})}),LS=t=>Array.isArray(t)?t.flatMap(e=>LS(e&&e.type===f.Fragment?e.props.children:e)):[t],F3=({children:t,location:e})=>{const s=Ed(),[n]=Sm(s);for(const i of LS(t)){let a=0;if(f.isValidElement(i)&&(a=IS(s.parser,i.props.path,e||n,i.props.nest))[0])return f.cloneElement(i,{match:a})}return null};var $l=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$3={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Ii,k0,rN,U3=(rN=class{constructor(){$e(this,Ii,$3);$e(this,k0,!1)}setTimeoutProvider(t){Ne(this,Ii,t)}setTimeout(t,e){return L(this,Ii).setTimeout(t,e)}clearTimeout(t){L(this,Ii).clearTimeout(t)}setInterval(t,e){return L(this,Ii).setInterval(t,e)}clearInterval(t){L(this,Ii).clearInterval(t)}},Ii=new WeakMap,k0=new WeakMap,rN),Da=new U3;function B3(t){setTimeout(t,0)}var ro=typeof window>"u"||"Deno"in globalThis;function Gs(){}function z3(t,e){return typeof t=="function"?t(e):t}function Tg(t){return typeof t=="number"&&t>=0&&t!==1/0}function FS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ra(t,e){return typeof t=="function"?t(e):t}function Vr(t,e){return typeof t=="function"?t(e):t}function hb(t,e){const{type:s="all",exact:n,fetchStatus:i,predicate:a,queryKey:o,stale:l}=t;if(o){if(n){if(e.queryHash!==Tx(o,e.options))return!1}else if(!sd(e.queryKey,o))return!1}if(s!=="all"){const c=e.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||a&&!a(e))}function mb(t,e){const{exact:s,status:n,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(s){if(no(e.options.mutationKey)!==no(a))return!1}else if(!sd(e.options.mutationKey,a))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function Tx(t,e){return((e==null?void 0:e.queryKeyHashFn)||no)(t)}function no(t){return JSON.stringify(t,(e,s)=>kg(s)?Object.keys(s).sort().reduce((n,i)=>(n[i]=s[i],n),{}):s)}function sd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>sd(t[s],e[s])):!1}var V3=Object.prototype.hasOwnProperty;function $S(t,e){if(t===e)return t;const s=fb(t)&&fb(e);if(!s&&!(kg(t)&&kg(e)))return e;const i=(s?t:Object.keys(t)).length,a=s?e:Object.keys(e),o=a.length,l=s?new Array(o):{};let c=0;for(let d=0;d<o;d++){const h=s?d:a[d],u=t[h],m=e[h];if(u===m){l[h]=u,(s?d<i:V3.call(t,h))&&c++;continue}if(u===null||m===null||typeof u!="object"||typeof m!="object"){l[h]=m;continue}const y=$S(u,m);l[h]=y,y===u&&c++}return i===o&&c===i?t:l}function kh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function fb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function kg(t){if(!pb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!pb(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function pb(t){return Object.prototype.toString.call(t)==="[object Object]"}function W3(t){return new Promise(e=>{Da.setTimeout(e,t)})}function Eg(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?$S(t,e):e}function H3(t,e,s=0){const n=[...t,e];return s&&n.length>s?n.slice(1):n}function K3(t,e,s=0){const n=[e,...t];return s&&n.length>s?n.slice(0,-1):n}var kx=Symbol();function US(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===kx?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function BS(t,e){return typeof t=="function"?t(...e):!!t}var Oa,Li,tl,nN,G3=(nN=class extends $l{constructor(){super();$e(this,Oa);$e(this,Li);$e(this,tl);Ne(this,tl,e=>{if(!ro&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){L(this,Li)||this.setEventListener(L(this,tl))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,Li))==null||e.call(this),Ne(this,Li,void 0))}setEventListener(e){var s;Ne(this,tl,e),(s=L(this,Li))==null||s.call(this),Ne(this,Li,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){L(this,Oa)!==e&&(Ne(this,Oa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof L(this,Oa)=="boolean"?L(this,Oa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Oa=new WeakMap,Li=new WeakMap,tl=new WeakMap,nN),Ex=new G3;function Pg(){let t,e;const s=new Promise((i,a)=>{t=i,e=a});s.status="pending",s.catch(()=>{});function n(i){Object.assign(s,i),delete s.resolve,delete s.reject}return s.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},s.reject=i=>{n({status:"rejected",reason:i}),e(i)},s}var q3=B3;function Q3(){let t=[],e=0,s=l=>{l()},n=l=>{l()},i=q3;const a=l=>{e?t.push(l):i(()=>{s(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{n(()=>{l.forEach(c=>{s(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{s=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{i=l}}}var ps=Q3(),sl,Fi,rl,iN,X3=(iN=class extends $l{constructor(){super();$e(this,sl,!0);$e(this,Fi);$e(this,rl);Ne(this,rl,e=>{if(!ro&&window.addEventListener){const s=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){L(this,Fi)||this.setEventListener(L(this,rl))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,Fi))==null||e.call(this),Ne(this,Fi,void 0))}setEventListener(e){var s;Ne(this,rl,e),(s=L(this,Fi))==null||s.call(this),Ne(this,Fi,e(this.setOnline.bind(this)))}setOnline(e){L(this,sl)!==e&&(Ne(this,sl,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return L(this,sl)}},sl=new WeakMap,Fi=new WeakMap,rl=new WeakMap,iN),Eh=new X3;function Y3(t){return Math.min(1e3*2**t,3e4)}function zS(t){return(t??"online")==="online"?Eh.isOnline():!0}var _g=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function VS(t){let e=!1,s=0,n;const i=Pg(),a=()=>i.status!=="pending",o=g=>{var b;if(!a()){const x=new _g(g);m(x),(b=t.onCancel)==null||b.call(t,x)}},l=()=>{e=!0},c=()=>{e=!1},d=()=>Ex.isFocused()&&(t.networkMode==="always"||Eh.isOnline())&&t.canRun(),h=()=>zS(t.networkMode)&&t.canRun(),u=g=>{a()||(n==null||n(),i.resolve(g))},m=g=>{a()||(n==null||n(),i.reject(g))},y=()=>new Promise(g=>{var b;n=x=>{(a()||d())&&g(x)},(b=t.onPause)==null||b.call(t)}).then(()=>{var g;n=void 0,a()||(g=t.onContinue)==null||g.call(t)}),v=()=>{if(a())return;let g;const b=s===0?t.initialPromise:void 0;try{g=b??t.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(u).catch(x=>{var _;if(a())return;const p=t.retry??(ro?0:3),w=t.retryDelay??Y3,j=typeof w=="function"?w(s,x):w,S=p===!0||typeof p=="number"&&s<p||typeof p=="function"&&p(s,x);if(e||!S){m(x);return}s++,(_=t.onFail)==null||_.call(t,s,x),W3(j).then(()=>d()?void 0:y()).then(()=>{e?m(x):v()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?v():y().then(v),i)}}var Ia,aN,WS=(aN=class{constructor(){$e(this,Ia)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Tg(this.gcTime)&&Ne(this,Ia,Da.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ro?1/0:5*60*1e3))}clearGcTimeout(){L(this,Ia)&&(Da.clearTimeout(L(this,Ia)),Ne(this,Ia,void 0))}},Ia=new WeakMap,aN),La,nl,Br,Fa,vs,yd,$a,on,Jn,oN,J3=(oN=class extends WS{constructor(e){super();$e(this,on);$e(this,La);$e(this,nl);$e(this,Br);$e(this,Fa);$e(this,vs);$e(this,yd);$e(this,$a);Ne(this,$a,!1),Ne(this,yd,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ne(this,Fa,e.client),Ne(this,Br,L(this,Fa).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ne(this,La,gb(this.options)),this.state=e.state??L(this,La),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=L(this,vs))==null?void 0:e.promise}setOptions(e){if(this.options={...L(this,yd),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=gb(this.options);s.data!==void 0&&(this.setData(s.data,{updatedAt:s.dataUpdatedAt,manual:!0}),Ne(this,La,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,Br).remove(this)}setData(e,s){const n=Eg(this.state.data,e,this.options);return at(this,on,Jn).call(this,{data:n,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),n}setState(e,s){at(this,on,Jn).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var n,i;const s=(n=L(this,vs))==null?void 0:n.promise;return(i=L(this,vs))==null||i.cancel(e),s?s.then(Gs).catch(Gs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,La))}isActive(){return this.observers.some(e=>Vr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===kx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ra(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!FS(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=L(this,vs))==null||s.continue()}onOnline(){var s;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=L(this,vs))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),L(this,Br).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(L(this,vs)&&(L(this,$a)?L(this,vs).cancel({revert:!0}):L(this,vs).cancelRetry()),this.scheduleGc()),L(this,Br).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||at(this,on,Jn).call(this,{type:"invalidate"})}async fetch(e,s){var c,d,h,u,m,y,v,g,b,x,p,w;if(this.state.fetchStatus!=="idle"&&((c=L(this,vs))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(L(this,vs))return L(this,vs).continueRetry(),L(this,vs).promise}if(e&&this.setOptions(e),!this.options.queryFn){const j=this.observers.find(S=>S.options.queryFn);j&&this.setOptions(j.options)}const n=new AbortController,i=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(Ne(this,$a,!0),n.signal)})},a=()=>{const j=US(this.options,s),_=(()=>{const k={client:L(this,Fa),queryKey:this.queryKey,meta:this.meta};return i(k),k})();return Ne(this,$a,!1),this.options.persister?this.options.persister(j,_,this):j(_)},l=(()=>{const j={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:L(this,Fa),state:this.state,fetchFn:a};return i(j),j})();(d=this.options.behavior)==null||d.onFetch(l,this),Ne(this,nl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&at(this,on,Jn).call(this,{type:"fetch",meta:(u=l.fetchOptions)==null?void 0:u.meta}),Ne(this,vs,VS({initialPromise:s==null?void 0:s.initialPromise,fn:l.fetchFn,onCancel:j=>{j instanceof _g&&j.revert&&this.setState({...L(this,nl),fetchStatus:"idle"}),n.abort()},onFail:(j,S)=>{at(this,on,Jn).call(this,{type:"failed",failureCount:j,error:S})},onPause:()=>{at(this,on,Jn).call(this,{type:"pause"})},onContinue:()=>{at(this,on,Jn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const j=await L(this,vs).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(y=(m=L(this,Br).config).onSuccess)==null||y.call(m,j,this),(g=(v=L(this,Br).config).onSettled)==null||g.call(v,j,this.state.error,this),j}catch(j){if(j instanceof _g){if(j.silent)return L(this,vs).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw at(this,on,Jn).call(this,{type:"error",error:j}),(x=(b=L(this,Br).config).onError)==null||x.call(b,j,this),(w=(p=L(this,Br).config).onSettled)==null||w.call(p,this.state.data,j,this),j}finally{this.scheduleGc()}}},La=new WeakMap,nl=new WeakMap,Br=new WeakMap,Fa=new WeakMap,vs=new WeakMap,yd=new WeakMap,$a=new WeakMap,on=new WeakSet,Jn=function(e){const s=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...HS(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ne(this,nl,e.manual?i:void 0),i;case"error":const a=e.error;return{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=s(this.state),ps.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),L(this,Br).notify({query:this,type:"updated",action:e})})},oN);function HS(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:zS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function gb(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,n=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var ir,ft,vd,Vs,Ua,il,ti,$i,bd,al,ol,Ba,za,Ui,ll,Tt,xc,Mg,Ag,Dg,Rg,Og,Ig,Lg,KS,lN,Z3=(lN=class extends $l{constructor(e,s){super();$e(this,Tt);$e(this,ir);$e(this,ft);$e(this,vd);$e(this,Vs);$e(this,Ua);$e(this,il);$e(this,ti);$e(this,$i);$e(this,bd);$e(this,al);$e(this,ol);$e(this,Ba);$e(this,za);$e(this,Ui);$e(this,ll,new Set);this.options=s,Ne(this,ir,e),Ne(this,$i,null),Ne(this,ti,Pg()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(L(this,ft).addObserver(this),xb(L(this,ft),this.options)?at(this,Tt,xc).call(this):this.updateResult(),at(this,Tt,Rg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Fg(L(this,ft),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Fg(L(this,ft),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,at(this,Tt,Og).call(this),at(this,Tt,Ig).call(this),L(this,ft).removeObserver(this)}setOptions(e){const s=this.options,n=L(this,ft);if(this.options=L(this,ir).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Vr(this.options.enabled,L(this,ft))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");at(this,Tt,Lg).call(this),L(this,ft).setOptions(this.options),s._defaulted&&!kh(this.options,s)&&L(this,ir).getQueryCache().notify({type:"observerOptionsUpdated",query:L(this,ft),observer:this});const i=this.hasListeners();i&&yb(L(this,ft),n,this.options,s)&&at(this,Tt,xc).call(this),this.updateResult(),i&&(L(this,ft)!==n||Vr(this.options.enabled,L(this,ft))!==Vr(s.enabled,L(this,ft))||ra(this.options.staleTime,L(this,ft))!==ra(s.staleTime,L(this,ft)))&&at(this,Tt,Mg).call(this);const a=at(this,Tt,Ag).call(this);i&&(L(this,ft)!==n||Vr(this.options.enabled,L(this,ft))!==Vr(s.enabled,L(this,ft))||a!==L(this,Ui))&&at(this,Tt,Dg).call(this,a)}getOptimisticResult(e){const s=L(this,ir).getQueryCache().build(L(this,ir),e),n=this.createResult(s,e);return tM(this,n)&&(Ne(this,Vs,n),Ne(this,il,this.options),Ne(this,Ua,L(this,ft).state)),n}getCurrentResult(){return L(this,Vs)}trackResult(e,s){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),s==null||s(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&L(this,ti).status==="pending"&&L(this,ti).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){L(this,ll).add(e)}getCurrentQuery(){return L(this,ft)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=L(this,ir).defaultQueryOptions(e),n=L(this,ir).getQueryCache().build(L(this,ir),s);return n.fetch().then(()=>this.createResult(n,s))}fetch(e){return at(this,Tt,xc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),L(this,Vs)))}createResult(e,s){var M;const n=L(this,ft),i=this.options,a=L(this,Vs),o=L(this,Ua),l=L(this,il),d=e!==n?e.state:L(this,vd),{state:h}=e;let u={...h},m=!1,y;if(s._optimisticResults){const T=this.hasListeners(),E=!T&&xb(e,s),I=T&&yb(e,n,s,i);(E||I)&&(u={...u,...HS(h.data,e.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:v,errorUpdatedAt:g,status:b}=u;y=u.data;let x=!1;if(s.placeholderData!==void 0&&y===void 0&&b==="pending"){let T;a!=null&&a.isPlaceholderData&&s.placeholderData===(l==null?void 0:l.placeholderData)?(T=a.data,x=!0):T=typeof s.placeholderData=="function"?s.placeholderData((M=L(this,ol))==null?void 0:M.state.data,L(this,ol)):s.placeholderData,T!==void 0&&(b="success",y=Eg(a==null?void 0:a.data,T,s),m=!0)}if(s.select&&y!==void 0&&!x)if(a&&y===(o==null?void 0:o.data)&&s.select===L(this,bd))y=L(this,al);else try{Ne(this,bd,s.select),y=s.select(y),y=Eg(a==null?void 0:a.data,y,s),Ne(this,al,y),Ne(this,$i,null)}catch(T){Ne(this,$i,T)}L(this,$i)&&(v=L(this,$i),y=L(this,al),g=Date.now(),b="error");const p=u.fetchStatus==="fetching",w=b==="pending",j=b==="error",S=w&&p,_=y!==void 0,P={status:b,fetchStatus:u.fetchStatus,isPending:w,isSuccess:b==="success",isError:j,isInitialLoading:S,isLoading:S,data:y,dataUpdatedAt:u.dataUpdatedAt,error:v,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:p,isRefetching:p&&!w,isLoadingError:j&&!_,isPaused:u.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:j&&_,isStale:Px(e,s),refetch:this.refetch,promise:L(this,ti),isEnabled:Vr(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const T=V=>{P.status==="error"?V.reject(P.error):P.data!==void 0&&V.resolve(P.data)},E=()=>{const V=Ne(this,ti,P.promise=Pg());T(V)},I=L(this,ti);switch(I.status){case"pending":e.queryHash===n.queryHash&&T(I);break;case"fulfilled":(P.status==="error"||P.data!==I.value)&&E();break;case"rejected":(P.status!=="error"||P.error!==I.reason)&&E();break}}return P}updateResult(){const e=L(this,Vs),s=this.createResult(L(this,ft),this.options);if(Ne(this,Ua,L(this,ft).state),Ne(this,il,this.options),L(this,Ua).data!==void 0&&Ne(this,ol,L(this,ft)),kh(s,e))return;Ne(this,Vs,s);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!L(this,ll).size)return!0;const o=new Set(a??L(this,ll));return this.options.throwOnError&&o.add("error"),Object.keys(L(this,Vs)).some(l=>{const c=l;return L(this,Vs)[c]!==e[c]&&o.has(c)})};at(this,Tt,KS).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&at(this,Tt,Rg).call(this)}},ir=new WeakMap,ft=new WeakMap,vd=new WeakMap,Vs=new WeakMap,Ua=new WeakMap,il=new WeakMap,ti=new WeakMap,$i=new WeakMap,bd=new WeakMap,al=new WeakMap,ol=new WeakMap,Ba=new WeakMap,za=new WeakMap,Ui=new WeakMap,ll=new WeakMap,Tt=new WeakSet,xc=function(e){at(this,Tt,Lg).call(this);let s=L(this,ft).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(Gs)),s},Mg=function(){at(this,Tt,Og).call(this);const e=ra(this.options.staleTime,L(this,ft));if(ro||L(this,Vs).isStale||!Tg(e))return;const n=FS(L(this,Vs).dataUpdatedAt,e)+1;Ne(this,Ba,Da.setTimeout(()=>{L(this,Vs).isStale||this.updateResult()},n))},Ag=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(L(this,ft)):this.options.refetchInterval)??!1},Dg=function(e){at(this,Tt,Ig).call(this),Ne(this,Ui,e),!(ro||Vr(this.options.enabled,L(this,ft))===!1||!Tg(L(this,Ui))||L(this,Ui)===0)&&Ne(this,za,Da.setInterval(()=>{(this.options.refetchIntervalInBackground||Ex.isFocused())&&at(this,Tt,xc).call(this)},L(this,Ui)))},Rg=function(){at(this,Tt,Mg).call(this),at(this,Tt,Dg).call(this,at(this,Tt,Ag).call(this))},Og=function(){L(this,Ba)&&(Da.clearTimeout(L(this,Ba)),Ne(this,Ba,void 0))},Ig=function(){L(this,za)&&(Da.clearInterval(L(this,za)),Ne(this,za,void 0))},Lg=function(){const e=L(this,ir).getQueryCache().build(L(this,ir),this.options);if(e===L(this,ft))return;const s=L(this,ft);Ne(this,ft,e),Ne(this,vd,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},KS=function(e){ps.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(L(this,Vs))}),L(this,ir).getQueryCache().notify({query:L(this,ft),type:"observerResultsUpdated"})})},lN);function eM(t,e){return Vr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function xb(t,e){return eM(t,e)||t.state.data!==void 0&&Fg(t,e,e.refetchOnMount)}function Fg(t,e,s){if(Vr(e.enabled,t)!==!1&&ra(e.staleTime,t)!=="static"){const n=typeof s=="function"?s(t):s;return n==="always"||n!==!1&&Px(t,e)}return!1}function yb(t,e,s,n){return(t!==e||Vr(n.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&Px(t,s)}function Px(t,e){return Vr(e.enabled,t)!==!1&&t.isStaleByTime(ra(e.staleTime,t))}function tM(t,e){return!kh(t.getCurrentResult(),e)}function vb(t){return{onFetch:(e,s)=>{var h,u,m,y,v;const n=e.options,i=(m=(u=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:u.fetchMore)==null?void 0:m.direction,a=((y=e.state.data)==null?void 0:y.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const b=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},x=US(e.options,e.fetchOptions),p=async(w,j,S)=>{if(g)return Promise.reject();if(j==null&&w.pages.length)return Promise.resolve(w);const k=(()=>{const E={client:e.client,queryKey:e.queryKey,pageParam:j,direction:S?"backward":"forward",meta:e.options.meta};return b(E),E})(),P=await x(k),{maxPages:M}=e.options,T=S?K3:H3;return{pages:T(w.pages,P,M),pageParams:T(w.pageParams,j,M)}};if(i&&a.length){const w=i==="backward",j=w?sM:bb,S={pages:a,pageParams:o},_=j(n,S);l=await p(S,_,w)}else{const w=t??a.length;do{const j=c===0?o[0]??n.initialPageParam:bb(n,l);if(c>0&&j==null)break;l=await p(l,j),c++}while(c<w)}return l};e.options.persister?e.fetchFn=()=>{var g,b;return(b=(g=e.options).persister)==null?void 0:b.call(g,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=d}}}function bb(t,{pages:e,pageParams:s}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,s[n],s):void 0}function sM(t,{pages:e,pageParams:s}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,s[0],s):void 0}var wd,kn,Ws,Va,En,Pi,cN,rM=(cN=class extends WS{constructor(e){super();$e(this,En);$e(this,wd);$e(this,kn);$e(this,Ws);$e(this,Va);Ne(this,wd,e.client),this.mutationId=e.mutationId,Ne(this,Ws,e.mutationCache),Ne(this,kn,[]),this.state=e.state||GS(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){L(this,kn).includes(e)||(L(this,kn).push(e),this.clearGcTimeout(),L(this,Ws).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ne(this,kn,L(this,kn).filter(s=>s!==e)),this.scheduleGc(),L(this,Ws).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){L(this,kn).length||(this.state.status==="pending"?this.scheduleGc():L(this,Ws).remove(this))}continue(){var e;return((e=L(this,Va))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,c,d,h,u,m,y,v,g,b,x,p,w,j,S,_,k,P,M;const s=()=>{at(this,En,Pi).call(this,{type:"continue"})},n={client:L(this,wd),meta:this.options.meta,mutationKey:this.options.mutationKey};Ne(this,Va,VS({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(T,E)=>{at(this,En,Pi).call(this,{type:"failed",failureCount:T,error:E})},onPause:()=>{at(this,En,Pi).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,Ws).canRun(this)}));const i=this.state.status==="pending",a=!L(this,Va).canStart();try{if(i)s();else{at(this,En,Pi).call(this,{type:"pending",variables:e,isPaused:a}),await((l=(o=L(this,Ws).config).onMutate)==null?void 0:l.call(o,e,this,n));const E=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,e,n));E!==this.state.context&&at(this,En,Pi).call(this,{type:"pending",context:E,variables:e,isPaused:a})}const T=await L(this,Va).start();return await((u=(h=L(this,Ws).config).onSuccess)==null?void 0:u.call(h,T,e,this.state.context,this,n)),await((y=(m=this.options).onSuccess)==null?void 0:y.call(m,T,e,this.state.context,n)),await((g=(v=L(this,Ws).config).onSettled)==null?void 0:g.call(v,T,null,this.state.variables,this.state.context,this,n)),await((x=(b=this.options).onSettled)==null?void 0:x.call(b,T,null,e,this.state.context,n)),at(this,En,Pi).call(this,{type:"success",data:T}),T}catch(T){try{throw await((w=(p=L(this,Ws).config).onError)==null?void 0:w.call(p,T,e,this.state.context,this,n)),await((S=(j=this.options).onError)==null?void 0:S.call(j,T,e,this.state.context,n)),await((k=(_=L(this,Ws).config).onSettled)==null?void 0:k.call(_,void 0,T,this.state.variables,this.state.context,this,n)),await((M=(P=this.options).onSettled)==null?void 0:M.call(P,void 0,T,e,this.state.context,n)),T}finally{at(this,En,Pi).call(this,{type:"error",error:T})}}finally{L(this,Ws).runNext(this)}}},wd=new WeakMap,kn=new WeakMap,Ws=new WeakMap,Va=new WeakMap,En=new WeakSet,Pi=function(e){const s=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),ps.batch(()=>{L(this,kn).forEach(n=>{n.onMutationUpdate(e)}),L(this,Ws).notify({mutation:this,type:"updated",action:e})})},cN);function GS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var si,ln,jd,dN,nM=(dN=class extends $l{constructor(e={}){super();$e(this,si);$e(this,ln);$e(this,jd);this.config=e,Ne(this,si,new Set),Ne(this,ln,new Map),Ne(this,jd,0)}build(e,s,n){const i=new rM({client:e,mutationCache:this,mutationId:++Bd(this,jd)._,options:e.defaultMutationOptions(s),state:n});return this.add(i),i}add(e){L(this,si).add(e);const s=iu(e);if(typeof s=="string"){const n=L(this,ln).get(s);n?n.push(e):L(this,ln).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(L(this,si).delete(e)){const s=iu(e);if(typeof s=="string"){const n=L(this,ln).get(s);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&L(this,ln).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=iu(e);if(typeof s=="string"){const n=L(this,ln).get(s),i=n==null?void 0:n.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const s=iu(e);if(typeof s=="string"){const i=(n=L(this,ln).get(s))==null?void 0:n.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ps.batch(()=>{L(this,si).forEach(e=>{this.notify({type:"removed",mutation:e})}),L(this,si).clear(),L(this,ln).clear()})}getAll(){return Array.from(L(this,si))}find(e){const s={exact:!0,...e};return this.getAll().find(n=>mb(s,n))}findAll(e={}){return this.getAll().filter(s=>mb(e,s))}notify(e){ps.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return ps.batch(()=>Promise.all(e.map(s=>s.continue().catch(Gs))))}},si=new WeakMap,ln=new WeakMap,jd=new WeakMap,dN);function iu(t){var e;return(e=t.options.scope)==null?void 0:e.id}var ri,Bi,ar,ni,ui,Hu,$g,uN,iM=(uN=class extends $l{constructor(s,n){super();$e(this,ui);$e(this,ri);$e(this,Bi);$e(this,ar);$e(this,ni);Ne(this,ri,s),this.setOptions(n),this.bindMethods(),at(this,ui,Hu).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var i;const n=this.options;this.options=L(this,ri).defaultMutationOptions(s),kh(this.options,n)||L(this,ri).getMutationCache().notify({type:"observerOptionsUpdated",mutation:L(this,ar),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&no(n.mutationKey)!==no(this.options.mutationKey)?this.reset():((i=L(this,ar))==null?void 0:i.state.status)==="pending"&&L(this,ar).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=L(this,ar))==null||s.removeObserver(this)}onMutationUpdate(s){at(this,ui,Hu).call(this),at(this,ui,$g).call(this,s)}getCurrentResult(){return L(this,Bi)}reset(){var s;(s=L(this,ar))==null||s.removeObserver(this),Ne(this,ar,void 0),at(this,ui,Hu).call(this),at(this,ui,$g).call(this)}mutate(s,n){var i;return Ne(this,ni,n),(i=L(this,ar))==null||i.removeObserver(this),Ne(this,ar,L(this,ri).getMutationCache().build(L(this,ri),this.options)),L(this,ar).addObserver(this),L(this,ar).execute(s)}},ri=new WeakMap,Bi=new WeakMap,ar=new WeakMap,ni=new WeakMap,ui=new WeakSet,Hu=function(){var n;const s=((n=L(this,ar))==null?void 0:n.state)??GS();Ne(this,Bi,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},$g=function(s){ps.batch(()=>{var n,i,a,o,l,c,d,h;if(L(this,ni)&&this.hasListeners()){const u=L(this,Bi).variables,m=L(this,Bi).context,y={client:L(this,ri),meta:this.options.meta,mutationKey:this.options.mutationKey};(s==null?void 0:s.type)==="success"?((i=(n=L(this,ni)).onSuccess)==null||i.call(n,s.data,u,m,y),(o=(a=L(this,ni)).onSettled)==null||o.call(a,s.data,null,u,m,y)):(s==null?void 0:s.type)==="error"&&((c=(l=L(this,ni)).onError)==null||c.call(l,s.error,u,m,y),(h=(d=L(this,ni)).onSettled)==null||h.call(d,void 0,s.error,u,m,y))}this.listeners.forEach(u=>{u(L(this,Bi))})})},uN),Pn,hN,aM=(hN=class extends $l{constructor(e={}){super();$e(this,Pn);this.config=e,Ne(this,Pn,new Map)}build(e,s,n){const i=s.queryKey,a=s.queryHash??Tx(i,s);let o=this.get(a);return o||(o=new J3({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(s),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){L(this,Pn).has(e.queryHash)||(L(this,Pn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=L(this,Pn).get(e.queryHash);s&&(e.destroy(),s===e&&L(this,Pn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ps.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return L(this,Pn).get(e)}getAll(){return[...L(this,Pn).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(n=>hb(s,n))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(n=>hb(e,n)):s}notify(e){ps.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){ps.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ps.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Pn=new WeakMap,hN),Jt,zi,Vi,cl,dl,Wi,ul,hl,mN,oM=(mN=class{constructor(t={}){$e(this,Jt);$e(this,zi);$e(this,Vi);$e(this,cl);$e(this,dl);$e(this,Wi);$e(this,ul);$e(this,hl);Ne(this,Jt,t.queryCache||new aM),Ne(this,zi,t.mutationCache||new nM),Ne(this,Vi,t.defaultOptions||{}),Ne(this,cl,new Map),Ne(this,dl,new Map),Ne(this,Wi,0)}mount(){Bd(this,Wi)._++,L(this,Wi)===1&&(Ne(this,ul,Ex.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,Jt).onFocus())})),Ne(this,hl,Eh.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,Jt).onOnline())})))}unmount(){var t,e;Bd(this,Wi)._--,L(this,Wi)===0&&((t=L(this,ul))==null||t.call(this),Ne(this,ul,void 0),(e=L(this,hl))==null||e.call(this),Ne(this,hl,void 0))}isFetching(t){return L(this,Jt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return L(this,zi).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=L(this,Jt).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=L(this,Jt).build(this,e),n=s.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(ra(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return L(this,Jt).findAll(t).map(({queryKey:e,state:s})=>{const n=s.data;return[e,n]})}setQueryData(t,e,s){const n=this.defaultQueryOptions({queryKey:t}),i=L(this,Jt).get(n.queryHash),a=i==null?void 0:i.state.data,o=z3(e,a);if(o!==void 0)return L(this,Jt).build(this,n).setData(o,{...s,manual:!0})}setQueriesData(t,e,s){return ps.batch(()=>L(this,Jt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=L(this,Jt).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=L(this,Jt);ps.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=L(this,Jt);return ps.batch(()=>(s.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},n=ps.batch(()=>L(this,Jt).findAll(t).map(i=>i.cancel(s)));return Promise.all(n).then(Gs).catch(Gs)}invalidateQueries(t,e={}){return ps.batch(()=>(L(this,Jt).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},n=ps.batch(()=>L(this,Jt).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,s);return s.throwOnError||(a=a.catch(Gs)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Gs)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=L(this,Jt).build(this,e);return s.isStaleByTime(ra(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Gs).catch(Gs)}fetchInfiniteQuery(t){return t.behavior=vb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Gs).catch(Gs)}ensureInfiniteQueryData(t){return t.behavior=vb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Eh.isOnline()?L(this,zi).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,Jt)}getMutationCache(){return L(this,zi)}getDefaultOptions(){return L(this,Vi)}setDefaultOptions(t){Ne(this,Vi,t)}setQueryDefaults(t,e){L(this,cl).set(no(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...L(this,cl).values()],s={};return e.forEach(n=>{sd(t,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(t,e){L(this,dl).set(no(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...L(this,dl).values()],s={};return e.forEach(n=>{sd(t,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...L(this,Vi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Tx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===kx&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...L(this,Vi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){L(this,Jt).clear(),L(this,zi).clear()}},Jt=new WeakMap,zi=new WeakMap,Vi=new WeakMap,cl=new WeakMap,dl=new WeakMap,Wi=new WeakMap,ul=new WeakMap,hl=new WeakMap,mN),qS=f.createContext(void 0),Ir=t=>{const e=f.useContext(qS);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},lM=({client:t,children:e})=>(f.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),r.jsx(qS.Provider,{value:t,children:e})),QS=f.createContext(!1),cM=()=>f.useContext(QS);QS.Provider;function dM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var uM=f.createContext(dM()),hM=()=>f.useContext(uM),mM=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},fM=t=>{f.useEffect(()=>{t.clearReset()},[t])},pM=({result:t,errorResetBoundary:e,throwOnError:s,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||BS(s,[t.error,n])),gM=t=>{if(t.suspense){const s=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>s(n(...i)):s(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},xM=(t,e)=>t.isLoading&&t.isFetching&&!e,yM=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,wb=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function vM(t,e,s){var u,m,y,v,g;const n=cM(),i=hM(),a=Ir(),o=a.defaultQueryOptions(t);(m=(u=a.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||m.call(u,o),o._optimisticResults=n?"isRestoring":"optimistic",gM(o),mM(o,i),fM(i);const l=!a.getQueryCache().get(o.queryHash),[c]=f.useState(()=>new e(a,o)),d=c.getOptimisticResult(o),h=!n&&t.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(b=>{const x=h?c.subscribe(ps.batchCalls(b)):Gs;return c.updateResult(),x},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(o)},[o,c]),yM(o,d))throw wb(o,c,i);if(pM({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((v=(y=a.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||v.call(y,o,d),o.experimental_prefetchInRender&&!ro&&xM(d,n)){const b=l?wb(o,c,i):(g=a.getQueryCache().get(o.queryHash))==null?void 0:g.promise;b==null||b.catch(Gs).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function ns(t,e){return vM(t,Z3)}function Ms(t,e){const s=Ir(),[n]=f.useState(()=>new iM(s,t));f.useEffect(()=>{n.setOptions(t)},[n,t]);const i=f.useSyncExternalStore(f.useCallback(o=>n.subscribe(ps.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=f.useCallback((o,l)=>{n.mutate(o,l).catch(Gs)},[n]);if(i.error&&BS(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}const bM=()=>{const t=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="0.0.0.0",e=window.location.hostname.includes("vercel.app"),s=window.location.hostname.includes("railway.app"),n=window.location.hostname.includes("metachrome.io");return console.log(" API Base URL Detection:",{hostname:window.location.hostname,isLocal:t,isVercel:e,isRailway:s,isMetachromeIO:n,isProd:!0}),e||s||n||!t?(console.log(" Using production API endpoints (relative URLs)"),""):t?(console.log(" Using local server endpoints"),`http://${window.location.hostname}:3005`):(console.log(" Using Vite proxy"),"")},XS=bM();async function YS(t){if(!t.ok){let e=t.statusText;try{const s=await t.json();e=s.message||s.error||JSON.stringify(s)}catch{try{e=await t.text()||t.statusText}catch{e=t.statusText}}throw new Error(`${t.status}: ${e}`)}}async function qs(t,e,s){const n=`${XS}${e}`,i=localStorage.getItem("authToken"),a={};s&&(a["Content-Type"]="application/json");const o=e.includes("/login")||e.includes("/register");i&&!o&&(a.Authorization=`Bearer ${i}`);const l=await fetch(n,{method:t,headers:a,body:s?JSON.stringify(s):void 0,credentials:e.includes("/admin-login")?"omit":"include"});return await YS(l),await l.json()}const wM=({on401:t})=>async({queryKey:e})=>{const s=`${XS}${e.join("/")}`,n=localStorage.getItem("authToken"),i={};n&&(i.Authorization=`Bearer ${n}`);const a=await fetch(s,{headers:i,credentials:"include"});return await YS(a),await a.json()},jM=new oM({defaultOptions:{queries:{queryFn:wM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:0,cacheTime:0,retry:!1},mutations:{retry:!1}}}),NM=1,SM=1e6;let Vf=0;function CM(){return Vf=(Vf+1)%Number.MAX_SAFE_INTEGER,Vf.toString()}const Wf=new Map,jb=t=>{if(Wf.has(t))return;const e=setTimeout(()=>{Wf.delete(t),_c({type:"REMOVE_TOAST",toastId:t})},SM);Wf.set(t,e)},TM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,NM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=e;return s?jb(s):t.toasts.forEach(n=>{jb(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===s||s===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)}}},Ku=[];let Gu={toasts:[]};function _c(t){Gu=TM(Gu,t),Ku.forEach(e=>{e(Gu)})}function et({...t}){const e=CM(),s=i=>_c({type:"UPDATE_TOAST",toast:{...i,id:e}}),n=()=>_c({type:"DISMISS_TOAST",toastId:e});return _c({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||n()}}}),{id:e,dismiss:n,update:s}}function Zs(){const[t,e]=f.useState(Gu);return f.useEffect(()=>(Ku.push(e),()=>{const s=Ku.indexOf(e);s>-1&&Ku.splice(s,1)}),[t]),{...t,toast:et,dismiss:s=>_c({type:"DISMISS_TOAST",toastId:s})}}function we(t,e,{checkForDefaultPrevented:s=!0}={}){return function(i){if(t==null||t(i),s===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Nb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Cm(...t){return e=>{let s=!1;const n=t.map(i=>{const a=Nb(i,e);return!s&&typeof a=="function"&&(s=!0),a});if(s)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():Nb(t[i],null)}}}}function Nt(...t){return f.useCallback(Cm(...t),t)}function kM(t,e){const s=f.createContext(e),n=a=>{const{children:o,...l}=a,c=f.useMemo(()=>l,Object.values(l));return r.jsx(s.Provider,{value:c,children:o})};n.displayName=t+"Provider";function i(a){const o=f.useContext(s);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[n,i]}function Zr(t,e=[]){let s=[];function n(a,o){const l=f.createContext(o),c=s.length;s=[...s,o];const d=u=>{var x;const{scope:m,children:y,...v}=u,g=((x=m==null?void 0:m[t])==null?void 0:x[c])||l,b=f.useMemo(()=>v,Object.values(v));return r.jsx(g.Provider,{value:b,children:y})};d.displayName=a+"Provider";function h(u,m){var g;const y=((g=m==null?void 0:m[t])==null?void 0:g[c])||l,v=f.useContext(y);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${a}\``)}return[d,h]}const i=()=>{const a=s.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return f.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,EM(i,...e)]}function EM(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const u=c(a)[`__scope${d}`];return{...l,...u}},{});return f.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}function io(t){const e=PM(t),s=f.forwardRef((n,i)=>{const{children:a,...o}=n,l=f.Children.toArray(a),c=l.find(MM);if(c){const d=c.props.children,h=l.map(u=>u===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:u);return r.jsx(e,{...o,ref:i,children:f.isValidElement(d)?f.cloneElement(d,void 0,h):null})}return r.jsx(e,{...o,ref:i,children:a})});return s.displayName=`${t}.Slot`,s}var JS=io("Slot");function PM(t){const e=f.forwardRef((s,n)=>{const{children:i,...a}=s;if(f.isValidElement(i)){const o=DM(i),l=AM(a,i.props);return i.type!==f.Fragment&&(l.ref=n?Cm(n,o):o),f.cloneElement(i,l)}return f.Children.count(i)>1?f.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ZS=Symbol("radix.slottable");function _M(t){const e=({children:s})=>r.jsx(r.Fragment,{children:s});return e.displayName=`${t}.Slottable`,e.__radixId=ZS,e}function MM(t){return f.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ZS}function AM(t,e){const s={...e};for(const n in e){const i=t[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?s[n]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(s[n]=i):n==="style"?s[n]={...i,...a}:n==="className"&&(s[n]=[i,a].filter(Boolean).join(" "))}return{...t,...s}}function DM(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function Tm(t){const e=t+"CollectionProvider",[s,n]=Zr(e),[i,a]=s(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:b,children:x}=g,p=ye.useRef(null),w=ye.useRef(new Map).current;return r.jsx(i,{scope:b,itemMap:w,collectionRef:p,children:x})};o.displayName=e;const l=t+"CollectionSlot",c=io(l),d=ye.forwardRef((g,b)=>{const{scope:x,children:p}=g,w=a(l,x),j=Nt(b,w.collectionRef);return r.jsx(c,{ref:j,children:p})});d.displayName=l;const h=t+"CollectionItemSlot",u="data-radix-collection-item",m=io(h),y=ye.forwardRef((g,b)=>{const{scope:x,children:p,...w}=g,j=ye.useRef(null),S=Nt(b,j),_=a(h,x);return ye.useEffect(()=>(_.itemMap.set(j,{ref:j,...w}),()=>void _.itemMap.delete(j))),r.jsx(m,{[u]:"",ref:S,children:p})});y.displayName=h;function v(g){const b=a(t+"CollectionConsumer",g);return ye.useCallback(()=>{const p=b.collectionRef.current;if(!p)return[];const w=Array.from(p.querySelectorAll(`[${u}]`));return Array.from(b.itemMap.values()).sort((_,k)=>w.indexOf(_.ref.current)-w.indexOf(k.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:d,ItemSlot:y},v,n]}var RM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],We=RM.reduce((t,e)=>{const s=io(`Primitive.${e}`),n=f.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function _x(t,e){t&&yo.flushSync(()=>t.dispatchEvent(e))}function gr(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t}),f.useMemo(()=>(...s)=>{var n;return(n=e.current)==null?void 0:n.call(e,...s)},[])}function OM(t,e=globalThis==null?void 0:globalThis.document){const s=gr(t);f.useEffect(()=>{const n=i=>{i.key==="Escape"&&s(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[s,e])}var IM="DismissableLayer",Ug="dismissableLayer.update",LM="dismissableLayer.pointerDownOutside",FM="dismissableLayer.focusOutside",Sb,e2=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ul=f.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,d=f.useContext(e2),[h,u]=f.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=f.useState({}),v=Nt(e,k=>u(k)),g=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(b),p=h?g.indexOf(h):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,j=p>=x,S=UM(k=>{const P=k.target,M=[...d.branches].some(T=>T.contains(P));!j||M||(i==null||i(k),o==null||o(k),k.defaultPrevented||l==null||l())},m),_=BM(k=>{const P=k.target;[...d.branches].some(T=>T.contains(P))||(a==null||a(k),o==null||o(k),k.defaultPrevented||l==null||l())},m);return OM(k=>{p===d.layers.size-1&&(n==null||n(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},m),f.useEffect(()=>{if(h)return s&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Sb=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),Cb(),()=>{s&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Sb)}},[h,m,s,d]),f.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),Cb())},[h,d]),f.useEffect(()=>{const k=()=>y({});return document.addEventListener(Ug,k),()=>document.removeEventListener(Ug,k)},[]),r.jsx(We.div,{...c,ref:v,style:{pointerEvents:w?j?"auto":"none":void 0,...t.style},onFocusCapture:we(t.onFocusCapture,_.onFocusCapture),onBlurCapture:we(t.onBlurCapture,_.onBlurCapture),onPointerDownCapture:we(t.onPointerDownCapture,S.onPointerDownCapture)})});Ul.displayName=IM;var $M="DismissableLayerBranch",t2=f.forwardRef((t,e)=>{const s=f.useContext(e2),n=f.useRef(null),i=Nt(e,n);return f.useEffect(()=>{const a=n.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),r.jsx(We.div,{...t,ref:i})});t2.displayName=$M;function UM(t,e=globalThis==null?void 0:globalThis.document){const s=gr(t),n=f.useRef(!1),i=f.useRef(()=>{});return f.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){s2(LM,s,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,s]),{onPointerDownCapture:()=>n.current=!0}}function BM(t,e=globalThis==null?void 0:globalThis.document){const s=gr(t),n=f.useRef(!1);return f.useEffect(()=>{const i=a=>{a.target&&!n.current&&s2(FM,s,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Cb(){const t=new CustomEvent(Ug);document.dispatchEvent(t)}function s2(t,e,s,{discrete:n}){const i=s.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&i.addEventListener(t,e,{once:!0}),n?_x(i,a):i.dispatchEvent(a)}var zM=Ul,VM=t2,Ns=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},WM="Portal",Pd=f.forwardRef((t,e)=>{var l;const{container:s,...n}=t,[i,a]=f.useState(!1);Ns(()=>a(!0),[]);const o=s||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?l3.createPortal(r.jsx(We.div,{...n,ref:e}),o):null});Pd.displayName=WM;function HM(t,e){return f.useReducer((s,n)=>e[s][n]??s,t)}var en=t=>{const{present:e,children:s}=t,n=KM(e),i=typeof s=="function"?s({present:n.isPresent}):f.Children.only(s),a=Nt(n.ref,GM(i));return typeof s=="function"||n.isPresent?f.cloneElement(i,{ref:a}):null};en.displayName="Presence";function KM(t){const[e,s]=f.useState(),n=f.useRef(null),i=f.useRef(t),a=f.useRef("none"),o=t?"mounted":"unmounted",[l,c]=HM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const d=au(n.current);a.current=l==="mounted"?d:"none"},[l]),Ns(()=>{const d=n.current,h=i.current;if(h!==t){const m=a.current,y=au(d);t?c("MOUNT"):y==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),Ns(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,u=y=>{const g=au(n.current).includes(CSS.escape(y.animationName));if(y.target===e&&g&&(c("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=y=>{y.target===e&&(a.current=au(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(d=>{n.current=d?getComputedStyle(d):null,s(d)},[])}}function au(t){return(t==null?void 0:t.animationName)||"none"}function GM(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var qM=D0[" useInsertionEffect ".trim().toString()]||Ns;function ca({prop:t,defaultProp:e,onChange:s=()=>{},caller:n}){const[i,a,o]=QM({defaultProp:e,onChange:s}),l=t!==void 0,c=l?t:i;{const h=f.useRef(t!==void 0);f.useEffect(()=>{const u=h.current;u!==l&&console.warn(`${n} is changing from ${u?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const d=f.useCallback(h=>{var u;if(l){const m=XM(h)?h(t):h;m!==t&&((u=o.current)==null||u.call(o,m))}else a(h)},[l,t,a,o]);return[c,d]}function QM({defaultProp:t,onChange:e}){const[s,n]=f.useState(t),i=f.useRef(s),a=f.useRef(e);return qM(()=>{a.current=e},[e]),f.useEffect(()=>{var o;i.current!==s&&((o=a.current)==null||o.call(a,s),i.current=s)},[s,i]),[s,n,a]}function XM(t){return typeof t=="function"}var r2=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),YM="VisuallyHidden",km=f.forwardRef((t,e)=>r.jsx(We.span,{...t,ref:e,style:{...r2,...t.style}}));km.displayName=YM;var JM=km,Mx="ToastProvider",[Ax,ZM,eA]=Tm("Toast"),[n2]=Zr("Toast",[eA]),[tA,Em]=n2(Mx),i2=t=>{const{__scopeToast:e,label:s="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=t,[l,c]=f.useState(null),[d,h]=f.useState(0),u=f.useRef(!1),m=f.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${Mx}\`. Expected non-empty \`string\`.`),r.jsx(Ax.Provider,{scope:e,children:r.jsx(tA,{scope:e,label:s,duration:n,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>h(y=>y+1),[]),onToastRemove:f.useCallback(()=>h(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:o})})};i2.displayName=Mx;var a2="ToastViewport",sA=["F8"],Bg="toast.viewportPause",zg="toast.viewportResume",o2=f.forwardRef((t,e)=>{const{__scopeToast:s,hotkey:n=sA,label:i="Notifications ({hotkey})",...a}=t,o=Em(a2,s),l=ZM(s),c=f.useRef(null),d=f.useRef(null),h=f.useRef(null),u=f.useRef(null),m=Nt(e,u,o.onViewportChange),y=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;f.useEffect(()=>{const b=x=>{var w;n.length!==0&&n.every(j=>x[j]||x.code===j)&&((w=u.current)==null||w.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n]),f.useEffect(()=>{const b=c.current,x=u.current;if(v&&b&&x){const p=()=>{if(!o.isClosePausedRef.current){const _=new CustomEvent(Bg);x.dispatchEvent(_),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const _=new CustomEvent(zg);x.dispatchEvent(_),o.isClosePausedRef.current=!1}},j=_=>{!b.contains(_.relatedTarget)&&w()},S=()=>{b.contains(document.activeElement)||w()};return b.addEventListener("focusin",p),b.addEventListener("focusout",j),b.addEventListener("pointermove",p),b.addEventListener("pointerleave",S),window.addEventListener("blur",p),window.addEventListener("focus",w),()=>{b.removeEventListener("focusin",p),b.removeEventListener("focusout",j),b.removeEventListener("pointermove",p),b.removeEventListener("pointerleave",S),window.removeEventListener("blur",p),window.removeEventListener("focus",w)}}},[v,o.isClosePausedRef]);const g=f.useCallback(({tabbingDirection:b})=>{const p=l().map(w=>{const j=w.ref.current,S=[j,...pA(j)];return b==="forwards"?S:S.reverse()});return(b==="forwards"?p.reverse():p).flat()},[l]);return f.useEffect(()=>{const b=u.current;if(b){const x=p=>{var S,_,k;const w=p.altKey||p.ctrlKey||p.metaKey;if(p.key==="Tab"&&!w){const P=document.activeElement,M=p.shiftKey;if(p.target===b&&M){(S=d.current)==null||S.focus();return}const I=g({tabbingDirection:M?"backwards":"forwards"}),V=I.findIndex(G=>G===P);Hf(I.slice(V+1))?p.preventDefault():M?(_=d.current)==null||_.focus():(k=h.current)==null||k.focus()}};return b.addEventListener("keydown",x),()=>b.removeEventListener("keydown",x)}},[l,g]),r.jsxs(VM,{ref:c,role:"region","aria-label":i.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&r.jsx(Vg,{ref:d,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});Hf(b)}}),r.jsx(Ax.Slot,{scope:s,children:r.jsx(We.ol,{tabIndex:-1,...a,ref:m})}),v&&r.jsx(Vg,{ref:h,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});Hf(b)}})]})});o2.displayName=a2;var l2="ToastFocusProxy",Vg=f.forwardRef((t,e)=>{const{__scopeToast:s,onFocusFromOutsideViewport:n,...i}=t,a=Em(l2,s);return r.jsx(km,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&n()}})});Vg.displayName=l2;var _d="Toast",rA="toast.swipeStart",nA="toast.swipeMove",iA="toast.swipeCancel",aA="toast.swipeEnd",c2=f.forwardRef((t,e)=>{const{forceMount:s,open:n,defaultOpen:i,onOpenChange:a,...o}=t,[l,c]=ca({prop:n,defaultProp:i??!0,onChange:a,caller:_d});return r.jsx(en,{present:s||l,children:r.jsx(cA,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:gr(t.onPause),onResume:gr(t.onResume),onSwipeStart:we(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:we(t.onSwipeMove,d=>{const{x:h,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:we(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:we(t.onSwipeEnd,d=>{const{x:h,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),c(!1)})})})});c2.displayName=_d;var[oA,lA]=n2(_d,{onClose(){}}),cA=f.forwardRef((t,e)=>{const{__scopeToast:s,type:n="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:u,onSwipeCancel:m,onSwipeEnd:y,...v}=t,g=Em(_d,s),[b,x]=f.useState(null),p=Nt(e,G=>x(G)),w=f.useRef(null),j=f.useRef(null),S=i||g.duration,_=f.useRef(0),k=f.useRef(S),P=f.useRef(0),{onToastAdd:M,onToastRemove:T}=g,E=gr(()=>{var A;(b==null?void 0:b.contains(document.activeElement))&&((A=g.viewport)==null||A.focus()),o()}),I=f.useCallback(G=>{!G||G===1/0||(window.clearTimeout(P.current),_.current=new Date().getTime(),P.current=window.setTimeout(E,G))},[E]);f.useEffect(()=>{const G=g.viewport;if(G){const A=()=>{I(k.current),d==null||d()},R=()=>{const $=new Date().getTime()-_.current;k.current=k.current-$,window.clearTimeout(P.current),c==null||c()};return G.addEventListener(Bg,R),G.addEventListener(zg,A),()=>{G.removeEventListener(Bg,R),G.removeEventListener(zg,A)}}},[g.viewport,S,c,d,I]),f.useEffect(()=>{a&&!g.isClosePausedRef.current&&I(S)},[a,S,g.isClosePausedRef,I]),f.useEffect(()=>(M(),()=>T()),[M,T]);const V=f.useMemo(()=>b?g2(b):null,[b]);return g.viewport?r.jsxs(r.Fragment,{children:[V&&r.jsx(dA,{__scopeToast:s,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:V}),r.jsx(oA,{scope:s,onClose:E,children:yo.createPortal(r.jsx(Ax.ItemSlot,{scope:s,children:r.jsx(zM,{asChild:!0,onEscapeKeyDown:we(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||E(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(We.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...v,ref:p,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:we(t.onKeyDown,G=>{G.key==="Escape"&&(l==null||l(G.nativeEvent),G.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,E()))}),onPointerDown:we(t.onPointerDown,G=>{G.button===0&&(w.current={x:G.clientX,y:G.clientY})}),onPointerMove:we(t.onPointerMove,G=>{if(!w.current)return;const A=G.clientX-w.current.x,R=G.clientY-w.current.y,$=!!j.current,O=["left","right"].includes(g.swipeDirection),U=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,J=O?U(0,A):0,Q=O?0:U(0,R),Oe=G.pointerType==="touch"?10:2,ge={x:J,y:Q},He={originalEvent:G,delta:ge};$?(j.current=ge,ou(nA,u,He,{discrete:!1})):Tb(ge,g.swipeDirection,Oe)?(j.current=ge,ou(rA,h,He,{discrete:!1}),G.target.setPointerCapture(G.pointerId)):(Math.abs(A)>Oe||Math.abs(R)>Oe)&&(w.current=null)}),onPointerUp:we(t.onPointerUp,G=>{const A=j.current,R=G.target;if(R.hasPointerCapture(G.pointerId)&&R.releasePointerCapture(G.pointerId),j.current=null,w.current=null,A){const $=G.currentTarget,O={originalEvent:G,delta:A};Tb(A,g.swipeDirection,g.swipeThreshold)?ou(aA,y,O,{discrete:!0}):ou(iA,m,O,{discrete:!0}),$.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),dA=t=>{const{__scopeToast:e,children:s,...n}=t,i=Em(_d,e),[a,o]=f.useState(!1),[l,c]=f.useState(!1);return mA(()=>o(!0)),f.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(Pd,{asChild:!0,children:r.jsx(km,{...n,children:a&&r.jsxs(r.Fragment,{children:[i.label," ",s]})})})},uA="ToastTitle",d2=f.forwardRef((t,e)=>{const{__scopeToast:s,...n}=t;return r.jsx(We.div,{...n,ref:e})});d2.displayName=uA;var hA="ToastDescription",u2=f.forwardRef((t,e)=>{const{__scopeToast:s,...n}=t;return r.jsx(We.div,{...n,ref:e})});u2.displayName=hA;var h2="ToastAction",m2=f.forwardRef((t,e)=>{const{altText:s,...n}=t;return s.trim()?r.jsx(p2,{altText:s,asChild:!0,children:r.jsx(Dx,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${h2}\`. Expected non-empty \`string\`.`),null)});m2.displayName=h2;var f2="ToastClose",Dx=f.forwardRef((t,e)=>{const{__scopeToast:s,...n}=t,i=lA(f2,s);return r.jsx(p2,{asChild:!0,children:r.jsx(We.button,{type:"button",...n,ref:e,onClick:we(t.onClick,i.onClose)})})});Dx.displayName=f2;var p2=f.forwardRef((t,e)=>{const{__scopeToast:s,altText:n,...i}=t;return r.jsx(We.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:e})});function g2(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),fA(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...g2(n))}}),e}function ou(t,e,s,{discrete:n}){const i=s.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:s});e&&i.addEventListener(t,e,{once:!0}),n?_x(i,a):i.dispatchEvent(a)}var Tb=(t,e,s=0)=>{const n=Math.abs(t.x),i=Math.abs(t.y),a=n>i;return e==="left"||e==="right"?a&&n>s:!a&&i>s};function mA(t=()=>{}){const e=gr(t);Ns(()=>{let s=0,n=0;return s=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(n)}},[e])}function fA(t){return t.nodeType===t.ELEMENT_NODE}function pA(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function Hf(t){const e=document.activeElement;return t.some(s=>s===e?!0:(s.focus(),document.activeElement!==e))}var gA=i2,x2=o2,y2=c2,v2=d2,b2=u2,w2=m2,j2=Dx;function N2(t){var e,s,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(s=N2(t[e]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s);return n}function S2(){for(var t,e,s=0,n="",i=arguments.length;s<i;s++)(t=arguments[s])&&(e=N2(t))&&(n&&(n+=" "),n+=e);return n}const kb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Eb=S2,Pm=(t,e)=>s=>{var n;if((e==null?void 0:e.variants)==null)return Eb(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(d=>{const h=s==null?void 0:s[d],u=a==null?void 0:a[d];if(h===null)return null;const m=kb(h)||kb(u);return i[d][m]}),l=s&&Object.entries(s).reduce((d,h)=>{let[u,m]=h;return m===void 0||(d[u]=m),d},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((d,h)=>{let{class:u,className:m,...y}=h;return Object.entries(y).every(v=>{let[g,b]=v;return Array.isArray(b)?b.includes({...a,...l}[g]):{...a,...l}[g]===b})?[...d,u,m]:d},[]);return Eb(t,o,c,s==null?void 0:s.class,s==null?void 0:s.className)};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Fe=(t,e)=>{const s=f.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,...d},h)=>f.createElement("svg",{ref:h,...xA,width:i,height:i,stroke:n,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${yA(t)}`,l].join(" "),...d},[...e.map(([u,m])=>f.createElement(u,m)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=Fe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=Fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=Fe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=Fe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=Fe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=Fe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=Fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=Fe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=Fe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=Fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Fe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=Fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=Fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=Fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=Fe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=Fe("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=Fe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=Fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=Fe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=Fe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=Fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=Fe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=Fe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=Fe("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=Fe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=Fe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=Fe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=Fe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=Fe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=Fe("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=Fe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=Fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=Fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=Fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=Fe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=Fe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=Fe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=Fe("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=Fe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=Fe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=Fe("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=Fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=Fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=Fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Fe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=Fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=Fe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=Fe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=Fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=Fe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=Fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=Fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=Fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=Fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=Fe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=Fe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=Fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Rx="-",IA=t=>{const e=FA(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(Rx);return l[0]===""&&l.length!==1&&l.shift(),P2(l,e)||LA(o)},getConflictingClassGroupIds:(o,l)=>{const c=s[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},P2=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const s=t[0],n=e.nextPart.get(s),i=n?P2(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(Rx);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},Ob=/^\[(.+)\]$/,LA=t=>{if(Ob.test(t)){const e=Ob.exec(t)[1],s=e==null?void 0:e.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},FA=t=>{const{theme:e,prefix:s}=t,n={nextPart:new Map,validators:[]};return UA(Object.entries(t.classGroups),s).forEach(([a,o])=>{qg(o,n,a,e)}),n},qg=(t,e,s,n)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:Ib(e,i);a.classGroupId=s;return}if(typeof i=="function"){if($A(i)){qg(i(n),e,s,n);return}e.validators.push({validator:i,classGroupId:s});return}Object.entries(i).forEach(([a,o])=>{qg(o,Ib(e,a),s,n)})})},Ib=(t,e)=>{let s=t;return e.split(Rx).forEach(n=>{s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s},$A=t=>t.isThemeGetter,UA=(t,e)=>e?t.map(([s,n])=>{const i=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[s,i]}):t,BA=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,n=new Map;const i=(a,o)=>{s.set(a,o),e++,e>t&&(e=0,n=s,s=new Map)};return{get(a){let o=s.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return i(a,o),o},set(a,o){s.has(a)?s.set(a,o):i(a,o)}}},_2="!",zA=t=>{const{separator:e,experimentalParseClassName:s}=t,n=e.length===1,i=e[0],a=e.length,o=l=>{const c=[];let d=0,h=0,u;for(let b=0;b<l.length;b++){let x=l[b];if(d===0){if(x===i&&(n||l.slice(b,b+a)===e)){c.push(l.slice(h,b)),h=b+a;continue}if(x==="/"){u=b;continue}}x==="["?d++:x==="]"&&d--}const m=c.length===0?l:l.substring(h),y=m.startsWith(_2),v=y?m.substring(1):m,g=u&&u>h?u-h:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:g}};return s?l=>s({className:l,parseClassName:o}):o},VA=t=>{if(t.length<=1)return t;const e=[];let s=[];return t.forEach(n=>{n[0]==="["?(e.push(...s.sort(),n),s=[]):s.push(n)}),e.push(...s.sort()),e},WA=t=>({cache:BA(t.cacheSize),parseClassName:zA(t),...IA(t)}),HA=/\s+/,KA=(t,e)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(HA);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:h,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:y}=s(d);let v=!!y,g=n(v?m.substring(0,y):m);if(!g){if(!v){l=d+(l.length>0?" "+l:l);continue}if(g=n(m),!g){l=d+(l.length>0?" "+l:l);continue}v=!1}const b=VA(h).join(":"),x=u?b+_2:b,p=x+g;if(a.includes(p))continue;a.push(p);const w=i(g,v);for(let j=0;j<w.length;++j){const S=w[j];a.push(x+S)}l=d+(l.length>0?" "+l:l)}return l};function GA(){let t=0,e,s,n="";for(;t<arguments.length;)(e=arguments[t++])&&(s=M2(e))&&(n&&(n+=" "),n+=s);return n}const M2=t=>{if(typeof t=="string")return t;let e,s="";for(let n=0;n<t.length;n++)t[n]&&(e=M2(t[n]))&&(s&&(s+=" "),s+=e);return s};function qA(t,...e){let s,n,i,a=o;function o(c){const d=e.reduce((h,u)=>u(h),t());return s=WA(d),n=s.cache.get,i=s.cache.set,a=l,l(c)}function l(c){const d=n(c);if(d)return d;const h=KA(c,s);return i(c,h),h}return function(){return a(GA.apply(null,arguments))}}const $t=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},A2=/^\[(?:([a-z-]+):)?(.+)\]$/i,QA=/^\d+\/\d+$/,XA=new Set(["px","full","screen"]),YA=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ZA=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,eD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xn=t=>Xo(t)||XA.has(t)||QA.test(t),Ti=t=>zl(t,"length",cD),Xo=t=>!!t&&!Number.isNaN(Number(t)),Qf=t=>zl(t,"number",Xo),ic=t=>!!t&&Number.isInteger(Number(t)),sD=t=>t.endsWith("%")&&Xo(t.slice(0,-1)),rt=t=>A2.test(t),ki=t=>YA.test(t),rD=new Set(["length","size","percentage"]),nD=t=>zl(t,rD,D2),iD=t=>zl(t,"position",D2),aD=new Set(["image","url"]),oD=t=>zl(t,aD,uD),lD=t=>zl(t,"",dD),ac=()=>!0,zl=(t,e,s)=>{const n=A2.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):s(n[2]):!1},cD=t=>JA.test(t)&&!ZA.test(t),D2=()=>!1,dD=t=>eD.test(t),uD=t=>tD.test(t),hD=()=>{const t=$t("colors"),e=$t("spacing"),s=$t("blur"),n=$t("brightness"),i=$t("borderColor"),a=$t("borderRadius"),o=$t("borderSpacing"),l=$t("borderWidth"),c=$t("contrast"),d=$t("grayscale"),h=$t("hueRotate"),u=$t("invert"),m=$t("gap"),y=$t("gradientColorStops"),v=$t("gradientColorStopPositions"),g=$t("inset"),b=$t("margin"),x=$t("opacity"),p=$t("padding"),w=$t("saturate"),j=$t("scale"),S=$t("sepia"),_=$t("skew"),k=$t("space"),P=$t("translate"),M=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto",rt,e],I=()=>[rt,e],V=()=>["",Xn,Ti],G=()=>["auto",Xo,rt],A=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],R=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",rt],J=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[Xo,rt];return{cacheSize:500,separator:":",theme:{colors:[ac],spacing:[Xn,Ti],blur:["none","",ki,rt],brightness:Q(),borderColor:[t],borderRadius:["none","","full",ki,rt],borderSpacing:I(),borderWidth:V(),contrast:Q(),grayscale:U(),hueRotate:Q(),invert:U(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[sD,Ti],inset:E(),margin:E(),opacity:Q(),padding:I(),saturate:Q(),scale:Q(),sepia:U(),skew:Q(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",rt]}],container:["container"],columns:[{columns:[ki]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...A(),rt]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ic,rt]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",rt]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",ic,rt]}],"grid-cols":[{"grid-cols":[ac]}],"col-start-end":[{col:["auto",{span:["full",ic,rt]},rt]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[ac]}],"row-start-end":[{row:["auto",{span:[ic,rt]},rt]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",rt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",rt,e]}],"min-w":[{"min-w":[rt,e,"min","max","fit"]}],"max-w":[{"max-w":[rt,e,"none","full","min","max","fit","prose",{screen:[ki]},ki]}],h:[{h:[rt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[rt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[rt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[rt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ki,Ti]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Qf]}],"font-family":[{font:[ac]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",rt]}],"line-clamp":[{"line-clamp":["none",Xo,Qf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Xn,rt]}],"list-image":[{"list-image":["none",rt]}],"list-style-type":[{list:["none","disc","decimal",rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...R(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Xn,Ti]}],"underline-offset":[{"underline-offset":["auto",Xn,rt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...A(),iD]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",nD]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},oD]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...R(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:R()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...R()]}],"outline-offset":[{"outline-offset":[Xn,rt]}],"outline-w":[{outline:[Xn,Ti]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Xn,Ti]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ki,lD]}],"shadow-color":[{shadow:[ac]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ki,rt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[u]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",rt]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",rt]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[ic,rt]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",rt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",rt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",rt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Xn,Ti,Qf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},mD=qA(hD);function Ue(...t){return mD(S2(t))}const fD=gA,R2=f.forwardRef(({className:t,...e},s)=>r.jsx(x2,{ref:s,className:Ue("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));R2.displayName=x2.displayName;const pD=Pm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),O2=f.forwardRef(({className:t,variant:e,...s},n)=>r.jsx(y2,{ref:n,className:Ue(pD({variant:e}),t),...s}));O2.displayName=y2.displayName;const gD=f.forwardRef(({className:t,...e},s)=>r.jsx(w2,{ref:s,className:Ue("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));gD.displayName=w2.displayName;const I2=f.forwardRef(({className:t,...e},s)=>r.jsx(j2,{ref:s,className:Ue("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:r.jsx(Bl,{className:"h-4 w-4"})}));I2.displayName=j2.displayName;const L2=f.forwardRef(({className:t,...e},s)=>r.jsx(v2,{ref:s,className:Ue("text-sm font-semibold",t),...e}));L2.displayName=v2.displayName;const F2=f.forwardRef(({className:t,...e},s)=>r.jsx(b2,{ref:s,className:Ue("text-sm opacity-90",t),...e}));F2.displayName=b2.displayName;function xD(){const{toasts:t}=Zs();return r.jsxs(fD,{children:[t.map(function({id:e,title:s,description:n,action:i,...a}){return r.jsxs(O2,{...a,children:[r.jsxs("div",{className:"grid gap-1",children:[s&&r.jsx(L2,{children:s}),n&&r.jsx(F2,{children:n})]}),i,r.jsx(I2,{})]},e)}),r.jsx(R2,{})]})}var yD=D0[" useId ".trim().toString()]||(()=>{}),vD=0;function xn(t){const[e,s]=f.useState(yD());return Ns(()=>{s(n=>n??String(vD++))},[t]),e?`radix-${e}`:""}const bD=["top","right","bottom","left"],da=Math.min,Tr=Math.max,Dh=Math.round,du=Math.floor,Un=t=>({x:t,y:t}),wD={left:"right",right:"left",bottom:"top",top:"bottom"},jD={start:"end",end:"start"};function Qg(t,e,s){return Tr(t,da(e,s))}function yi(t,e){return typeof t=="function"?t(e):t}function vi(t){return t.split("-")[0]}function Vl(t){return t.split("-")[1]}function Ox(t){return t==="x"?"y":"x"}function Ix(t){return t==="y"?"height":"width"}const ND=new Set(["top","bottom"]);function In(t){return ND.has(vi(t))?"y":"x"}function Lx(t){return Ox(In(t))}function SD(t,e,s){s===void 0&&(s=!1);const n=Vl(t),i=Lx(t),a=Ix(i);let o=i==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=Rh(o)),[o,Rh(o)]}function CD(t){const e=Rh(t);return[Xg(t),e,Xg(e)]}function Xg(t){return t.replace(/start|end/g,e=>jD[e])}const Lb=["left","right"],Fb=["right","left"],TD=["top","bottom"],kD=["bottom","top"];function ED(t,e,s){switch(t){case"top":case"bottom":return s?e?Fb:Lb:e?Lb:Fb;case"left":case"right":return e?TD:kD;default:return[]}}function PD(t,e,s,n){const i=Vl(t);let a=ED(vi(t),s==="start",n);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(Xg)))),a}function Rh(t){return t.replace(/left|right|bottom|top/g,e=>wD[e])}function _D(t){return{top:0,right:0,bottom:0,left:0,...t}}function $2(t){return typeof t!="number"?_D(t):{top:t,right:t,bottom:t,left:t}}function Oh(t){const{x:e,y:s,width:n,height:i}=t;return{width:n,height:i,top:s,left:e,right:e+n,bottom:s+i,x:e,y:s}}function $b(t,e,s){let{reference:n,floating:i}=t;const a=In(e),o=Lx(e),l=Ix(o),c=vi(e),d=a==="y",h=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2,m=n[l]/2-i[l]/2;let y;switch(c){case"top":y={x:h,y:n.y-i.height};break;case"bottom":y={x:h,y:n.y+n.height};break;case"right":y={x:n.x+n.width,y:u};break;case"left":y={x:n.x-i.width,y:u};break;default:y={x:n.x,y:n.y}}switch(Vl(e)){case"start":y[o]-=m*(s&&d?-1:1);break;case"end":y[o]+=m*(s&&d?-1:1);break}return y}const MD=async(t,e,s)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:o}=s,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:h,y:u}=$b(d,n,c),m=n,y={},v=0;for(let g=0;g<l.length;g++){const{name:b,fn:x}=l[g],{x:p,y:w,data:j,reset:S}=await x({x:h,y:u,initialPlacement:n,placement:m,strategy:i,middlewareData:y,rects:d,platform:o,elements:{reference:t,floating:e}});h=p??h,u=w??u,y={...y,[b]:{...y[b],...j}},S&&v<=50&&(v++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(d=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:h,y:u}=$b(d,m,c)),g=-1)}return{x:h,y:u,placement:m,strategy:i,middlewareData:y}};async function nd(t,e){var s;e===void 0&&(e={});const{x:n,y:i,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:u="floating",altBoundary:m=!1,padding:y=0}=yi(e,t),v=$2(y),b=l[m?u==="floating"?"reference":"floating":u],x=Oh(await a.getClippingRect({element:(s=await(a.isElement==null?void 0:a.isElement(b)))==null||s?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),p=u==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},S=Oh(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:p,offsetParent:w,strategy:c}):p);return{top:(x.top-S.top+v.top)/j.y,bottom:(S.bottom-x.bottom+v.bottom)/j.y,left:(x.left-S.left+v.left)/j.x,right:(S.right-x.right+v.right)/j.x}}const AD=t=>({name:"arrow",options:t,async fn(e){const{x:s,y:n,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=yi(t,e)||{};if(d==null)return{};const u=$2(h),m={x:s,y:n},y=Lx(i),v=Ix(y),g=await o.getDimensions(d),b=y==="y",x=b?"top":"left",p=b?"bottom":"right",w=b?"clientHeight":"clientWidth",j=a.reference[v]+a.reference[y]-m[y]-a.floating[v],S=m[y]-a.reference[y],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let k=_?_[w]:0;(!k||!await(o.isElement==null?void 0:o.isElement(_)))&&(k=l.floating[w]||a.floating[v]);const P=j/2-S/2,M=k/2-g[v]/2-1,T=da(u[x],M),E=da(u[p],M),I=T,V=k-g[v]-E,G=k/2-g[v]/2+P,A=Qg(I,G,V),R=!c.arrow&&Vl(i)!=null&&G!==A&&a.reference[v]/2-(G<I?T:E)-g[v]/2<0,$=R?G<I?G-I:G-V:0;return{[y]:m[y]+$,data:{[y]:A,centerOffset:G-A-$,...R&&{alignmentOffset:$}},reset:R}}}),DD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var s,n;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:u=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...b}=yi(t,e);if((s=a.arrow)!=null&&s.alignmentOffset)return{};const x=vi(i),p=In(l),w=vi(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=m||(w||!g?[Rh(l)]:CD(l)),_=v!=="none";!m&&_&&S.push(...PD(l,g,v,j));const k=[l,...S],P=await nd(e,b),M=[];let T=((n=a.flip)==null?void 0:n.overflows)||[];if(h&&M.push(P[x]),u){const G=SD(i,o,j);M.push(P[G[0]],P[G[1]])}if(T=[...T,{placement:i,overflows:M}],!M.every(G=>G<=0)){var E,I;const G=(((E=a.flip)==null?void 0:E.index)||0)+1,A=k[G];if(A&&(!(u==="alignment"?p!==In(A):!1)||T.every(O=>In(O.placement)===p?O.overflows[0]>0:!0)))return{data:{index:G,overflows:T},reset:{placement:A}};let R=(I=T.filter($=>$.overflows[0]<=0).sort(($,O)=>$.overflows[1]-O.overflows[1])[0])==null?void 0:I.placement;if(!R)switch(y){case"bestFit":{var V;const $=(V=T.filter(O=>{if(_){const U=In(O.placement);return U===p||U==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(U=>U>0).reduce((U,J)=>U+J,0)]).sort((O,U)=>O[1]-U[1])[0])==null?void 0:V[0];$&&(R=$);break}case"initialPlacement":R=l;break}if(i!==R)return{reset:{placement:R}}}return{}}}};function Ub(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Bb(t){return bD.some(e=>t[e]>=0)}const RD=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:s}=e,{strategy:n="referenceHidden",...i}=yi(t,e);switch(n){case"referenceHidden":{const a=await nd(e,{...i,elementContext:"reference"}),o=Ub(a,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Bb(o)}}}case"escaped":{const a=await nd(e,{...i,altBoundary:!0}),o=Ub(a,s.floating);return{data:{escapedOffsets:o,escaped:Bb(o)}}}default:return{}}}}},U2=new Set(["left","top"]);async function OD(t,e){const{placement:s,platform:n,elements:i}=t,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=vi(s),l=Vl(s),c=In(s)==="y",d=U2.has(o)?-1:1,h=a&&c?-1:1,u=yi(e,t);let{mainAxis:m,crossAxis:y,alignmentAxis:v}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof v=="number"&&(y=l==="end"?v*-1:v),c?{x:y*h,y:m*d}:{x:m*d,y:y*h}}const ID=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var s,n;const{x:i,y:a,placement:o,middlewareData:l}=e,c=await OD(e,t);return o===((s=l.offset)==null?void 0:s.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},LD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:s,y:n,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x,y:p}=b;return{x,y:p}}},...c}=yi(t,e),d={x:s,y:n},h=await nd(e,c),u=In(vi(i)),m=Ox(u);let y=d[m],v=d[u];if(a){const b=m==="y"?"top":"left",x=m==="y"?"bottom":"right",p=y+h[b],w=y-h[x];y=Qg(p,y,w)}if(o){const b=u==="y"?"top":"left",x=u==="y"?"bottom":"right",p=v+h[b],w=v-h[x];v=Qg(p,v,w)}const g=l.fn({...e,[m]:y,[u]:v});return{...g,data:{x:g.x-s,y:g.y-n,enabled:{[m]:a,[u]:o}}}}}},FD=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:s,y:n,placement:i,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=yi(t,e),h={x:s,y:n},u=In(i),m=Ox(u);let y=h[m],v=h[u];const g=yi(l,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=m==="y"?"height":"width",j=a.reference[m]-a.floating[w]+b.mainAxis,S=a.reference[m]+a.reference[w]-b.mainAxis;y<j?y=j:y>S&&(y=S)}if(d){var x,p;const w=m==="y"?"width":"height",j=U2.has(vi(i)),S=a.reference[u]-a.floating[w]+(j&&((x=o.offset)==null?void 0:x[u])||0)+(j?0:b.crossAxis),_=a.reference[u]+a.reference[w]+(j?0:((p=o.offset)==null?void 0:p[u])||0)-(j?b.crossAxis:0);v<S?v=S:v>_&&(v=_)}return{[m]:y,[u]:v}}}},$D=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var s,n;const{placement:i,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...d}=yi(t,e),h=await nd(e,d),u=vi(i),m=Vl(i),y=In(i)==="y",{width:v,height:g}=a.floating;let b,x;u==="top"||u==="bottom"?(b=u,x=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=u,b=m==="end"?"top":"bottom");const p=g-h.top-h.bottom,w=v-h.left-h.right,j=da(g-h[b],p),S=da(v-h[x],w),_=!e.middlewareData.shift;let k=j,P=S;if((s=e.middlewareData.shift)!=null&&s.enabled.x&&(P=w),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(k=p),_&&!m){const T=Tr(h.left,0),E=Tr(h.right,0),I=Tr(h.top,0),V=Tr(h.bottom,0);y?P=v-2*(T!==0||E!==0?T+E:Tr(h.left,h.right)):k=g-2*(I!==0||V!==0?I+V:Tr(h.top,h.bottom))}await c({...e,availableWidth:P,availableHeight:k});const M=await o.getDimensions(l.floating);return v!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function Am(){return typeof window<"u"}function Wl(t){return B2(t)?(t.nodeName||"").toLowerCase():"#document"}function _r(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Vn(t){var e;return(e=(B2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function B2(t){return Am()?t instanceof Node||t instanceof _r(t).Node:!1}function vn(t){return Am()?t instanceof Element||t instanceof _r(t).Element:!1}function zn(t){return Am()?t instanceof HTMLElement||t instanceof _r(t).HTMLElement:!1}function zb(t){return!Am()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof _r(t).ShadowRoot}const UD=new Set(["inline","contents"]);function Md(t){const{overflow:e,overflowX:s,overflowY:n,display:i}=bn(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+s)&&!UD.has(i)}const BD=new Set(["table","td","th"]);function zD(t){return BD.has(Wl(t))}const VD=[":popover-open",":modal"];function Dm(t){return VD.some(e=>{try{return t.matches(e)}catch{return!1}})}const WD=["transform","translate","scale","rotate","perspective"],HD=["transform","translate","scale","rotate","perspective","filter"],KD=["paint","layout","strict","content"];function Fx(t){const e=$x(),s=vn(t)?bn(t):t;return WD.some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!e&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!e&&(s.filter?s.filter!=="none":!1)||HD.some(n=>(s.willChange||"").includes(n))||KD.some(n=>(s.contain||"").includes(n))}function GD(t){let e=ua(t);for(;zn(e)&&!Nl(e);){if(Fx(e))return e;if(Dm(e))return null;e=ua(e)}return null}function $x(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const qD=new Set(["html","body","#document"]);function Nl(t){return qD.has(Wl(t))}function bn(t){return _r(t).getComputedStyle(t)}function Rm(t){return vn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ua(t){if(Wl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||zb(t)&&t.host||Vn(t);return zb(e)?e.host:e}function z2(t){const e=ua(t);return Nl(e)?t.ownerDocument?t.ownerDocument.body:t.body:zn(e)&&Md(e)?e:z2(e)}function id(t,e,s){var n;e===void 0&&(e=[]),s===void 0&&(s=!0);const i=z2(t),a=i===((n=t.ownerDocument)==null?void 0:n.body),o=_r(i);if(a){const l=Yg(o);return e.concat(o,o.visualViewport||[],Md(i)?i:[],l&&s?id(l):[])}return e.concat(i,id(i,[],s))}function Yg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function V2(t){const e=bn(t);let s=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=zn(t),a=i?t.offsetWidth:s,o=i?t.offsetHeight:n,l=Dh(s)!==a||Dh(n)!==o;return l&&(s=a,n=o),{width:s,height:n,$:l}}function Ux(t){return vn(t)?t:t.contextElement}function Yo(t){const e=Ux(t);if(!zn(e))return Un(1);const s=e.getBoundingClientRect(),{width:n,height:i,$:a}=V2(e);let o=(a?Dh(s.width):s.width)/n,l=(a?Dh(s.height):s.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const QD=Un(0);function W2(t){const e=_r(t);return!$x()||!e.visualViewport?QD:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function XD(t,e,s){return e===void 0&&(e=!1),!s||e&&s!==_r(t)?!1:e}function ao(t,e,s,n){e===void 0&&(e=!1),s===void 0&&(s=!1);const i=t.getBoundingClientRect(),a=Ux(t);let o=Un(1);e&&(n?vn(n)&&(o=Yo(n)):o=Yo(t));const l=XD(a,s,n)?W2(a):Un(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,h=i.width/o.x,u=i.height/o.y;if(a){const m=_r(a),y=n&&vn(n)?_r(n):n;let v=m,g=Yg(v);for(;g&&n&&y!==v;){const b=Yo(g),x=g.getBoundingClientRect(),p=bn(g),w=x.left+(g.clientLeft+parseFloat(p.paddingLeft))*b.x,j=x.top+(g.clientTop+parseFloat(p.paddingTop))*b.y;c*=b.x,d*=b.y,h*=b.x,u*=b.y,c+=w,d+=j,v=_r(g),g=Yg(v)}}return Oh({width:h,height:u,x:c,y:d})}function Om(t,e){const s=Rm(t).scrollLeft;return e?e.left+s:ao(Vn(t)).left+s}function H2(t,e){const s=t.getBoundingClientRect(),n=s.left+e.scrollLeft-Om(t,s),i=s.top+e.scrollTop;return{x:n,y:i}}function YD(t){let{elements:e,rect:s,offsetParent:n,strategy:i}=t;const a=i==="fixed",o=Vn(n),l=e?Dm(e.floating):!1;if(n===o||l&&a)return s;let c={scrollLeft:0,scrollTop:0},d=Un(1);const h=Un(0),u=zn(n);if((u||!u&&!a)&&((Wl(n)!=="body"||Md(o))&&(c=Rm(n)),zn(n))){const y=ao(n);d=Yo(n),h.x=y.x+n.clientLeft,h.y=y.y+n.clientTop}const m=o&&!u&&!a?H2(o,c):Un(0);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:s.y*d.y-c.scrollTop*d.y+h.y+m.y}}function JD(t){return Array.from(t.getClientRects())}function ZD(t){const e=Vn(t),s=Rm(t),n=t.ownerDocument.body,i=Tr(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=Tr(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-s.scrollLeft+Om(t);const l=-s.scrollTop;return bn(n).direction==="rtl"&&(o+=Tr(e.clientWidth,n.clientWidth)-i),{width:i,height:a,x:o,y:l}}const Vb=25;function eR(t,e){const s=_r(t),n=Vn(t),i=s.visualViewport;let a=n.clientWidth,o=n.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const h=$x();(!h||h&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}const d=Om(n);if(d<=0){const h=n.ownerDocument,u=h.body,m=getComputedStyle(u),y=h.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,v=Math.abs(n.clientWidth-u.clientWidth-y);v<=Vb&&(a-=v)}else d<=Vb&&(a+=d);return{width:a,height:o,x:l,y:c}}const tR=new Set(["absolute","fixed"]);function sR(t,e){const s=ao(t,!0,e==="fixed"),n=s.top+t.clientTop,i=s.left+t.clientLeft,a=zn(t)?Yo(t):Un(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=i*a.x,d=n*a.y;return{width:o,height:l,x:c,y:d}}function Wb(t,e,s){let n;if(e==="viewport")n=eR(t,s);else if(e==="document")n=ZD(Vn(t));else if(vn(e))n=sR(e,s);else{const i=W2(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Oh(n)}function K2(t,e){const s=ua(t);return s===e||!vn(s)||Nl(s)?!1:bn(s).position==="fixed"||K2(s,e)}function rR(t,e){const s=e.get(t);if(s)return s;let n=id(t,[],!1).filter(l=>vn(l)&&Wl(l)!=="body"),i=null;const a=bn(t).position==="fixed";let o=a?ua(t):t;for(;vn(o)&&!Nl(o);){const l=bn(o),c=Fx(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&tR.has(i.position)||Md(o)&&!c&&K2(t,o))?n=n.filter(h=>h!==o):i=l,o=ua(o)}return e.set(t,n),n}function nR(t){let{element:e,boundary:s,rootBoundary:n,strategy:i}=t;const o=[...s==="clippingAncestors"?Dm(e)?[]:rR(e,this._c):[].concat(s),n],l=o[0],c=o.reduce((d,h)=>{const u=Wb(e,h,i);return d.top=Tr(u.top,d.top),d.right=da(u.right,d.right),d.bottom=da(u.bottom,d.bottom),d.left=Tr(u.left,d.left),d},Wb(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function iR(t){const{width:e,height:s}=V2(t);return{width:e,height:s}}function aR(t,e,s){const n=zn(e),i=Vn(e),a=s==="fixed",o=ao(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=Un(0);function d(){c.x=Om(i)}if(n||!n&&!a)if((Wl(e)!=="body"||Md(i))&&(l=Rm(e)),n){const y=ao(e,!0,a,e);c.x=y.x+e.clientLeft,c.y=y.y+e.clientTop}else i&&d();a&&!n&&i&&d();const h=i&&!n&&!a?H2(i,l):Un(0),u=o.left+l.scrollLeft-c.x-h.x,m=o.top+l.scrollTop-c.y-h.y;return{x:u,y:m,width:o.width,height:o.height}}function Xf(t){return bn(t).position==="static"}function Hb(t,e){if(!zn(t)||bn(t).position==="fixed")return null;if(e)return e(t);let s=t.offsetParent;return Vn(t)===s&&(s=s.ownerDocument.body),s}function G2(t,e){const s=_r(t);if(Dm(t))return s;if(!zn(t)){let i=ua(t);for(;i&&!Nl(i);){if(vn(i)&&!Xf(i))return i;i=ua(i)}return s}let n=Hb(t,e);for(;n&&zD(n)&&Xf(n);)n=Hb(n,e);return n&&Nl(n)&&Xf(n)&&!Fx(n)?s:n||GD(t)||s}const oR=async function(t){const e=this.getOffsetParent||G2,s=this.getDimensions,n=await s(t.floating);return{reference:aR(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function lR(t){return bn(t).direction==="rtl"}const cR={convertOffsetParentRelativeRectToViewportRelativeRect:YD,getDocumentElement:Vn,getClippingRect:nR,getOffsetParent:G2,getElementRects:oR,getClientRects:JD,getDimensions:iR,getScale:Yo,isElement:vn,isRTL:lR};function q2(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function dR(t,e){let s=null,n;const i=Vn(t);function a(){var l;clearTimeout(n),(l=s)==null||l.disconnect(),s=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=t.getBoundingClientRect(),{left:h,top:u,width:m,height:y}=d;if(l||e(),!m||!y)return;const v=du(u),g=du(i.clientWidth-(h+m)),b=du(i.clientHeight-(u+y)),x=du(h),w={rootMargin:-v+"px "+-g+"px "+-b+"px "+-x+"px",threshold:Tr(0,da(1,c))||1};let j=!0;function S(_){const k=_[0].intersectionRatio;if(k!==c){if(!j)return o();k?o(!1,k):n=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!q2(d,t.getBoundingClientRect())&&o(),j=!1}try{s=new IntersectionObserver(S,{...w,root:i.ownerDocument})}catch{s=new IntersectionObserver(S,w)}s.observe(t)}return o(!0),a}function uR(t,e,s,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Ux(t),h=i||a?[...d?id(d):[],...id(e)]:[];h.forEach(x=>{i&&x.addEventListener("scroll",s,{passive:!0}),a&&x.addEventListener("resize",s)});const u=d&&l?dR(d,s):null;let m=-1,y=null;o&&(y=new ResizeObserver(x=>{let[p]=x;p&&p.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=y)==null||w.observe(e)})),s()}),d&&!c&&y.observe(d),y.observe(e));let v,g=c?ao(t):null;c&&b();function b(){const x=ao(t);g&&!q2(g,x)&&s(),g=x,v=requestAnimationFrame(b)}return s(),()=>{var x;h.forEach(p=>{i&&p.removeEventListener("scroll",s),a&&p.removeEventListener("resize",s)}),u==null||u(),(x=y)==null||x.disconnect(),y=null,c&&cancelAnimationFrame(v)}}const hR=ID,mR=LD,fR=DD,pR=$D,gR=RD,Kb=AD,xR=FD,yR=(t,e,s)=>{const n=new Map,i={platform:cR,...s},a={...i.platform,_c:n};return MD(t,e,{...i,platform:a})};var vR=typeof document<"u",bR=function(){},Xu=vR?f.useLayoutEffect:bR;function Ih(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let s,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==e.length)return!1;for(n=s;n--!==0;)if(!Ih(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),s=i.length,s!==Object.keys(e).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=s;n--!==0;){const a=i[n];if(!(a==="_owner"&&t.$$typeof)&&!Ih(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function Q2(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Gb(t,e){const s=Q2(t);return Math.round(e*s)/s}function Yf(t){const e=f.useRef(t);return Xu(()=>{e.current=t}),e}function wR(t){t===void 0&&(t={});const{placement:e="bottom",strategy:s="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[h,u]=f.useState({x:0,y:0,strategy:s,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=f.useState(n);Ih(m,n)||y(n);const[v,g]=f.useState(null),[b,x]=f.useState(null),p=f.useCallback(O=>{O!==_.current&&(_.current=O,g(O))},[]),w=f.useCallback(O=>{O!==k.current&&(k.current=O,x(O))},[]),j=a||v,S=o||b,_=f.useRef(null),k=f.useRef(null),P=f.useRef(h),M=c!=null,T=Yf(c),E=Yf(i),I=Yf(d),V=f.useCallback(()=>{if(!_.current||!k.current)return;const O={placement:e,strategy:s,middleware:m};E.current&&(O.platform=E.current),yR(_.current,k.current,O).then(U=>{const J={...U,isPositioned:I.current!==!1};G.current&&!Ih(P.current,J)&&(P.current=J,yo.flushSync(()=>{u(J)}))})},[m,e,s,E,I]);Xu(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,u(O=>({...O,isPositioned:!1})))},[d]);const G=f.useRef(!1);Xu(()=>(G.current=!0,()=>{G.current=!1}),[]),Xu(()=>{if(j&&(_.current=j),S&&(k.current=S),j&&S){if(T.current)return T.current(j,S,V);V()}},[j,S,V,T,M]);const A=f.useMemo(()=>({reference:_,floating:k,setReference:p,setFloating:w}),[p,w]),R=f.useMemo(()=>({reference:j,floating:S}),[j,S]),$=f.useMemo(()=>{const O={position:s,left:0,top:0};if(!R.floating)return O;const U=Gb(R.floating,h.x),J=Gb(R.floating,h.y);return l?{...O,transform:"translate("+U+"px, "+J+"px)",...Q2(R.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:U,top:J}},[s,l,R.floating,h.x,h.y]);return f.useMemo(()=>({...h,update:V,refs:A,elements:R,floatingStyles:$}),[h,V,A,R,$])}const jR=t=>{function e(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:n,padding:i}=typeof t=="function"?t(s):t;return n&&e(n)?n.current!=null?Kb({element:n.current,padding:i}).fn(s):{}:n?Kb({element:n,padding:i}).fn(s):{}}}},NR=(t,e)=>({...hR(t),options:[t,e]}),SR=(t,e)=>({...mR(t),options:[t,e]}),CR=(t,e)=>({...xR(t),options:[t,e]}),TR=(t,e)=>({...fR(t),options:[t,e]}),kR=(t,e)=>({...pR(t),options:[t,e]}),ER=(t,e)=>({...gR(t),options:[t,e]}),PR=(t,e)=>({...jR(t),options:[t,e]});var _R="Arrow",X2=f.forwardRef((t,e)=>{const{children:s,width:n=10,height:i=5,...a}=t;return r.jsx(We.svg,{...a,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});X2.displayName=_R;var MR=X2;function AR(t){const[e,s]=f.useState(void 0);return Ns(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;s({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else s(void 0)},[t]),e}var Bx="Popper",[Y2,Hl]=Zr(Bx),[DR,J2]=Y2(Bx),Z2=t=>{const{__scopePopper:e,children:s}=t,[n,i]=f.useState(null);return r.jsx(DR,{scope:e,anchor:n,onAnchorChange:i,children:s})};Z2.displayName=Bx;var eC="PopperAnchor",tC=f.forwardRef((t,e)=>{const{__scopePopper:s,virtualRef:n,...i}=t,a=J2(eC,s),o=f.useRef(null),l=Nt(e,o),c=f.useRef(null);return f.useEffect(()=>{const d=c.current;c.current=(n==null?void 0:n.current)||o.current,d!==c.current&&a.onAnchorChange(c.current)}),n?null:r.jsx(We.div,{...i,ref:l})});tC.displayName=eC;var zx="PopperContent",[RR,OR]=Y2(zx),sC=f.forwardRef((t,e)=>{var ce,Ke,je,Ve,Me,De;const{__scopePopper:s,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:u="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:v,...g}=t,b=J2(zx,s),[x,p]=f.useState(null),w=Nt(e,pt=>p(pt)),[j,S]=f.useState(null),_=AR(j),k=(_==null?void 0:_.width)??0,P=(_==null?void 0:_.height)??0,M=n+(a!=="center"?"-"+a:""),T=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},E=Array.isArray(d)?d:[d],I=E.length>0,V={padding:T,boundary:E.filter(LR),altBoundary:I},{refs:G,floatingStyles:A,placement:R,isPositioned:$,middlewareData:O}=wR({strategy:"fixed",placement:M,whileElementsMounted:(...pt)=>uR(...pt,{animationFrame:y==="always"}),elements:{reference:b.anchor},middleware:[NR({mainAxis:i+P,alignmentAxis:o}),c&&SR({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?CR():void 0,...V}),c&&TR({...V}),kR({...V,apply:({elements:pt,rects:K,availableWidth:pe,availableHeight:st})=>{const{width:qe,height:Wt}=K.reference,ut=pt.floating.style;ut.setProperty("--radix-popper-available-width",`${pe}px`),ut.setProperty("--radix-popper-available-height",`${st}px`),ut.setProperty("--radix-popper-anchor-width",`${qe}px`),ut.setProperty("--radix-popper-anchor-height",`${Wt}px`)}}),j&&PR({element:j,padding:l}),FR({arrowWidth:k,arrowHeight:P}),m&&ER({strategy:"referenceHidden",...V})]}),[U,J]=iC(R),Q=gr(v);Ns(()=>{$&&(Q==null||Q())},[$,Q]);const Oe=(ce=O.arrow)==null?void 0:ce.x,ge=(Ke=O.arrow)==null?void 0:Ke.y,He=((je=O.arrow)==null?void 0:je.centerOffset)!==0,[se,ze]=f.useState();return Ns(()=>{x&&ze(window.getComputedStyle(x).zIndex)},[x]),r.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...A,transform:$?A.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(Ve=O.transformOrigin)==null?void 0:Ve.x,(Me=O.transformOrigin)==null?void 0:Me.y].join(" "),...((De=O.hide)==null?void 0:De.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:r.jsx(RR,{scope:s,placedSide:U,onArrowChange:S,arrowX:Oe,arrowY:ge,shouldHideArrow:He,children:r.jsx(We.div,{"data-side":U,"data-align":J,...g,ref:w,style:{...g.style,animation:$?void 0:"none"}})})})});sC.displayName=zx;var rC="PopperArrow",IR={top:"bottom",right:"left",bottom:"top",left:"right"},nC=f.forwardRef(function(e,s){const{__scopePopper:n,...i}=e,a=OR(rC,n),o=IR[a.placedSide];return r.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:r.jsx(MR,{...i,ref:s,style:{...i.style,display:"block"}})})});nC.displayName=rC;function LR(t){return t!==null}var FR=t=>({name:"transformOrigin",options:t,fn(e){var b,x,p;const{placement:s,rects:n,middlewareData:i}=e,o=((b=i.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[d,h]=iC(s),u={start:"0%",center:"50%",end:"100%"}[h],m=(((x=i.arrow)==null?void 0:x.x)??0)+l/2,y=(((p=i.arrow)==null?void 0:p.y)??0)+c/2;let v="",g="";return d==="bottom"?(v=o?u:`${m}px`,g=`${-c}px`):d==="top"?(v=o?u:`${m}px`,g=`${n.floating.height+c}px`):d==="right"?(v=`${-c}px`,g=o?u:`${y}px`):d==="left"&&(v=`${n.floating.width+c}px`,g=o?u:`${y}px`),{data:{x:v,y:g}}}});function iC(t){const[e,s="center"]=t.split("-");return[e,s]}var aC=Z2,Vx=tC,Wx=sC,Hx=nC,[Im]=Zr("Tooltip",[Hl]),Kx=Hl(),oC="TooltipProvider",$R=700,qb="tooltip.open",[UR,lC]=Im(oC),cC=t=>{const{__scopeTooltip:e,delayDuration:s=$R,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:a}=t,o=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(UR,{scope:e,isOpenDelayedRef:o,delayDuration:s,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(d=>{l.current=d},[]),disableHoverableContent:i,children:a})};cC.displayName=oC;var dC="Tooltip",[k7,Lm]=Im(dC),Jg="TooltipTrigger",BR=f.forwardRef((t,e)=>{const{__scopeTooltip:s,...n}=t,i=Lm(Jg,s),a=lC(Jg,s),o=Kx(s),l=f.useRef(null),c=Nt(e,l,i.onTriggerChange),d=f.useRef(!1),h=f.useRef(!1),u=f.useCallback(()=>d.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),r.jsx(Vx,{asChild:!0,...o,children:r.jsx(We.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:c,onPointerMove:we(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),h.current=!0)}),onPointerLeave:we(t.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:we(t.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:we(t.onFocus,()=>{d.current||i.onOpen()}),onBlur:we(t.onBlur,i.onClose),onClick:we(t.onClick,i.onClose)})})});BR.displayName=Jg;var zR="TooltipPortal",[E7,VR]=Im(zR,{forceMount:void 0}),Sl="TooltipContent",uC=f.forwardRef((t,e)=>{const s=VR(Sl,t.__scopeTooltip),{forceMount:n=s.forceMount,side:i="top",...a}=t,o=Lm(Sl,t.__scopeTooltip);return r.jsx(en,{present:n||o.open,children:o.disableHoverableContent?r.jsx(hC,{side:i,...a,ref:e}):r.jsx(WR,{side:i,...a,ref:e})})}),WR=f.forwardRef((t,e)=>{const s=Lm(Sl,t.__scopeTooltip),n=lC(Sl,t.__scopeTooltip),i=f.useRef(null),a=Nt(e,i),[o,l]=f.useState(null),{trigger:c,onClose:d}=s,h=i.current,{onPointerInTransitChange:u}=n,m=f.useCallback(()=>{l(null),u(!1)},[u]),y=f.useCallback((v,g)=>{const b=v.currentTarget,x={x:v.clientX,y:v.clientY},p=QR(x,b.getBoundingClientRect()),w=XR(x,p),j=YR(g.getBoundingClientRect()),S=ZR([...w,...j]);l(S),u(!0)},[u]);return f.useEffect(()=>()=>m(),[m]),f.useEffect(()=>{if(c&&h){const v=b=>y(b,h),g=b=>y(b,c);return c.addEventListener("pointerleave",v),h.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",v),h.removeEventListener("pointerleave",g)}}},[c,h,y,m]),f.useEffect(()=>{if(o){const v=g=>{const b=g.target,x={x:g.clientX,y:g.clientY},p=(c==null?void 0:c.contains(b))||(h==null?void 0:h.contains(b)),w=!JR(x,o);p?m():w&&(m(),d())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,h,o,d,m]),r.jsx(hC,{...t,ref:a})}),[HR,KR]=Im(dC,{isInside:!1}),GR=_M("TooltipContent"),hC=f.forwardRef((t,e)=>{const{__scopeTooltip:s,children:n,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=t,c=Lm(Sl,s),d=Kx(s),{onClose:h}=c;return f.useEffect(()=>(document.addEventListener(qb,h),()=>document.removeEventListener(qb,h)),[h]),f.useEffect(()=>{if(c.trigger){const u=m=>{const y=m.target;y!=null&&y.contains(c.trigger)&&h()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[c.trigger,h]),r.jsx(Ul,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:u=>u.preventDefault(),onDismiss:h,children:r.jsxs(Wx,{"data-state":c.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(GR,{children:n}),r.jsx(HR,{scope:s,isInside:!0,children:r.jsx(JM,{id:c.contentId,role:"tooltip",children:i||n})})]})})});uC.displayName=Sl;var mC="TooltipArrow",qR=f.forwardRef((t,e)=>{const{__scopeTooltip:s,...n}=t,i=Kx(s);return KR(mC,s).isInside?null:r.jsx(Hx,{...i,...n,ref:e})});qR.displayName=mC;function QR(t,e){const s=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(s,n,i,a)){case a:return"left";case i:return"right";case s:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function XR(t,e,s=5){const n=[];switch(e){case"top":n.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":n.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":n.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":n.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return n}function YR(t){const{top:e,right:s,bottom:n,left:i}=t;return[{x:i,y:e},{x:s,y:e},{x:s,y:n},{x:i,y:n}]}function JR(t,e){const{x:s,y:n}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],d=l.x,h=l.y,u=c.x,m=c.y;h>n!=m>n&&s<(u-d)*(n-h)/(m-h)+d&&(i=!i)}return i}function ZR(t){const e=t.slice();return e.sort((s,n)=>s.x<n.x?-1:s.x>n.x?1:s.y<n.y?-1:s.y>n.y?1:0),e6(e)}function e6(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const i=t[n];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const s=[];for(let n=t.length-1;n>=0;n--){const i=t[n];for(;s.length>=2;){const a=s[s.length-1],o=s[s.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))s.pop();else break}s.push(i)}return s.pop(),e.length===1&&s.length===1&&e[0].x===s[0].x&&e[0].y===s[0].y?e:e.concat(s)}var t6=cC,fC=uC;const s6=t6,r6=f.forwardRef(({className:t,sideOffset:e=4,...s},n)=>r.jsx(fC,{ref:n,sideOffset:e,className:Ue("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...s}));r6.displayName=fC.displayName;const uu=768;function Wn(){const[t,e]=f.useState(()=>typeof window<"u"?window.innerWidth<uu:!1);return f.useEffect(()=>{const s=window.matchMedia(`(max-width: ${uu-1}px)`),n=()=>{e(window.innerWidth<uu)};return s.addEventListener("change",n),e(window.innerWidth<uu),()=>s.removeEventListener("change",n)},[]),t}function n6(){const[t,e]=f.useState(!1),[s,n]=f.useState(null),i=f.useRef(),[a,o]=f.useState(null),l=f.useCallback(()=>{try{const m=localStorage.getItem("user");if(m)try{const y=JSON.parse(m);o(y.id),console.log(" POLLING: Starting polling for user:",y.id)}catch(y){console.error(" POLLING: Failed to parse user data:",y)}e(!0),console.log(" POLLING: Connected - polling started"),i.current=setInterval(async()=>{try{(await fetch("/api/health")).ok&&n({type:"keep_alive",data:{timestamp:new Date().toISOString()}})}catch(y){console.error(" POLLING: Error fetching updates:",y)}},5e3)}catch(m){console.error(" POLLING: Failed to start polling:",m),e(!1)}},[]),c=f.useCallback(()=>{i.current&&clearInterval(i.current),e(!1),console.log(" POLLING: Stopped")},[]),d=f.useCallback(m=>{console.log(" POLLING: Message would be sent:",m)},[]),h=f.useCallback(m=>{console.log(" POLLING: Subscribe to symbols:",m)},[]),u=f.useCallback(m=>{console.log(" POLLING: Unsubscribe from symbols:",m)},[]);return f.useEffect(()=>(console.log(" POLLING: useEffect triggered - starting polling..."),l(),()=>{console.log(" POLLING: Cleanup - stopping polling..."),c()}),[l,c]),{socket:null,connected:t,lastMessage:s,sendMessage:d,subscribe:h,unsubscribe:u,connect:l,disconnect:c}}function Fm(){const[t,e]=f.useState(null),[s,n]=f.useState(!1),[i,a]=f.useState(null),[o,l]=f.useState(!1),c=n6(),d=f.useRef(0),h=f.useRef(),u=f.useRef(0),m=f.useCallback(()=>{try{console.log(" WEBSOCKET DEBUG: ===== CONNECT FUNCTION CALLED =====");const x=window.location.protocol==="https:"?"wss:":"ws:",p=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="0.0.0.0",w=window.location.hostname.includes("vercel.app"),j=window.location.hostname.includes("railway.app"),S=window.location.hostname.includes("metachrome.io");let _;const k="http://127.0.0.1:3005";if(k){const M=k.startsWith("https")?"wss:":"ws:",T=k.replace(/^https?:\/\//,"").replace(/^wss?:\/\//,"");_=`${M}//${T}/ws`,console.log(" CUSTOM BACKEND: Using provided backend URL:",_)}if(d.current>0){console.log(" WEBSOCKET: Already attempted connection, using polling fallback"),l(!0);return}d.current++,console.log(" WEBSOCKET DEBUG: Attempting to connect to:",_);const P=new WebSocket(_);console.log(" WEBSOCKET DEBUG: WebSocket instance created"),P.onopen=()=>{console.log(" WEBSOCKET DEBUG: WebSocket connected successfully!"),n(!0),u.current=0;const M=localStorage.getItem("authToken"),T=localStorage.getItem("user");if(T)try{const E=JSON.parse(T);console.log(" Sending user identification to WebSocket:",E.id),P.send(JSON.stringify({type:"identify_user",userId:E.id,username:E.username,authToken:M}))}catch(E){console.error(" Failed to parse user data:",E)}P.send(JSON.stringify({type:"ping"}))},P.onmessage=M=>{try{const T=JSON.parse(M.data);console.log(" WEBSOCKET: Received message:",T),a(T),T.type==="pong"?console.log(" WEBSOCKET: Received pong from server"):T.type==="trade_completed"?console.log(" WEBSOCKET: Trade completion message received:",T.data):T.type==="trigger_mobile_notification"?(console.log(" WEBSOCKET: Mobile notification trigger received:",T.data),typeof window<"u"&&window.testDirectNotification&&(console.log(" WEBSOCKET: Triggering direct notification via global function"),window.testDirectNotification())):console.log(" WEBSOCKET: Unknown message type:",T.type)}catch(T){console.error(" WEBSOCKET: Error parsing WebSocket message:",T)}},P.onclose=M=>{console.log(" WEBSOCKET DEBUG: WebSocket disconnected:",M.code,M.reason),n(!1),e(null)},P.onerror=M=>{console.error(" WEBSOCKET DEBUG: WebSocket error - falling back to polling"),n(!1)},e(P)}catch(x){console.error(" WEBSOCKET DEBUG: Failed to create WebSocket connection:",x)}},[]),y=f.useCallback(()=>{h.current&&clearTimeout(h.current),t&&t.close(1e3,"Intentional disconnect")},[t]),v=f.useCallback(x=>{t&&t.readyState===WebSocket.OPEN?t.send(JSON.stringify(x)):console.warn("WebSocket is not connected. Message not sent:",x)},[t]),g=f.useCallback(x=>{v({type:"subscribe",data:{symbols:x}})},[v]),b=f.useCallback(x=>{v({type:"unsubscribe",data:{symbols:x}})},[v]);return f.useEffect(()=>(console.log(" WEBSOCKET HOOK: useEffect triggered"),m(),()=>{console.log(" WEBSOCKET HOOK: Cleanup - disconnecting..."),y()}),[m,y]),f.useEffect(()=>{if(o){console.log(" WEBSOCKET HOOK: Switching to polling fallback");return}},[o]),f.useEffect(()=>{if(!s)return;const x=setInterval(()=>{v({type:"ping"})},3e4);return()=>clearInterval(x)},[s,v]),o?{socket:null,connected:c.connected,lastMessage:c.lastMessage||i,sendMessage:c.sendMessage,subscribe:c.subscribe,unsubscribe:c.unsubscribe,connect:c.connect,disconnect:c.disconnect}:{socket:t,connected:s,lastMessage:i,sendMessage:v,subscribe:g,unsubscribe:b,connect:m,disconnect:y}}function Ss(){const t=Ir(),{lastMessage:e}=Fm(),{data:s,isLoading:n,error:i}=ns({queryKey:["/api/auth"],queryFn:async()=>{var g,b,x;const u=new URLSearchParams(window.location.search),m=u.get("token"),y=u.get("user");if(m&&y)return console.log(" Found OAuth token in URL, storing locally"),localStorage.setItem("authToken",m),localStorage.setItem("user",decodeURIComponent(y)),window.history.replaceState({},document.title,window.location.pathname),JSON.parse(decodeURIComponent(y));const v=localStorage.getItem("authToken");if(console.log(" useAuth queryFn - Auth token:",(v==null?void 0:v.substring(0,20))+"..."),!v)return console.log("No auth token found"),null;try{if(v.startsWith("user-session-")){console.log("Found user session token, fetching fresh user data from API");try{const p=await qs("GET","/api/auth/user");return console.log("User session API response:",p),localStorage.setItem("user",JSON.stringify(p)),p}catch(p){console.log("API call failed, falling back to stored user data:",p);const w=localStorage.getItem("user");if(w)return console.log("Using fallback stored user data"),JSON.parse(w)}}if(v.startsWith("admin-session-")){console.log("Making API request for admin user");try{const p=await qs("GET","/api/auth");return console.log("Admin user query response:",p),p}catch(p){console.log("Admin API call failed, falling back to stored user data:",p);const w=localStorage.getItem("user");if(w)return console.log("Using fallback stored user data"),JSON.parse(w)}}if(v.startsWith("admin-token-")){console.log(" Found admin-token, using stored user data");const p=localStorage.getItem("user");if(p){const w=JSON.parse(p);return console.log(" Admin-token user data:",w),w}}if(v.startsWith("demo-token-")){const p=localStorage.getItem("demoUser");if(p)return console.log("Found demo user in localStorage"),JSON.parse(p)}if(v==="mock-admin-token"){const p=localStorage.getItem("user");if(p)return console.log("Found admin user in localStorage"),JSON.parse(p)}if(v&&(v.startsWith("mock-jwt-token")||v==="mock-jwt-token")){console.log("Found mock JWT token, using stored user data");const p=localStorage.getItem("user");if(p){const w=JSON.parse(p);return console.log("Mock JWT user data:",w),w}}if(v&&(v.startsWith("token_admin-001_")||v.startsWith("token_superadmin-001_"))){console.log(" Found admin token, using stored user data");const p=localStorage.getItem("user");if(p){const w=JSON.parse(p);return console.log(" Admin token user data:",w),w}}if(v&&!v.startsWith("demo-token-")&&!v.startsWith("admin-session-")&&!v.startsWith("admin-token-")&&!v.startsWith("mock-jwt-token")&&v!=="mock-jwt-token"&&!v.startsWith("token_admin-001_")&&!v.startsWith("token_superadmin-001_")){console.log("Making API request for JWT token user");const w=await(await qs("GET","/api/auth")).json();return console.log("JWT user query response:",w),w}return console.log(" No matching token pattern found"),null}catch(p){if(console.log(" Auth query error:",p),((g=p==null?void 0:p.response)==null?void 0:g.status)===401||((b=p==null?void 0:p.message)==null?void 0:b.includes("401"))||((x=p==null?void 0:p.message)==null?void 0:x.includes("User not found")))return console.log(" 401 Unauthorized - User not found or deleted. Clearing auth data."),localStorage.removeItem("authToken"),localStorage.removeItem("demoUser"),localStorage.removeItem("user"),null;const j=localStorage.getItem("authToken");if(j&&(j.startsWith("mock-jwt-token")||j==="mock-jwt-token"||j==="mock-admin-token"||j.startsWith("token_admin-001_")||j.startsWith("token_superadmin-001_")||j.startsWith("admin-token-")||j.startsWith("user-session-"))){const S=localStorage.getItem("user");if(S)return console.log("Auth query failed, but using stored user data for token:",j.substring(0,20)+"..."),JSON.parse(S)}return p.message&&p.message.includes("401")&&(localStorage.removeItem("authToken"),localStorage.removeItem("demoUser"),localStorage.removeItem("user")),null}},retry:!1,staleTime:5*60*1e3,refetchOnWindowFocus:!1}),a=Ms({mutationFn:async u=>{try{return await(await qs("POST","/api/auth",u)).json()}catch(m){console.error("Login error:",m);let y="Login failed";throw m.message&&(m.message.includes("401")?y="Invalid username or password":m.message.includes("400")?y="Username and password are required":m.message.includes("500")?y="Server error. Please try again later.":y=m.message),new Error(y)}},onSuccess:u=>{u.token&&localStorage.setItem("authToken",u.token),t.setQueryData(["/api/auth"],u.user),t.invalidateQueries({queryKey:["/api/auth"]})}}),o=Ms({mutationFn:async u=>{try{const m="/api/admin/login",y=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="0.0.0.0",v=window.location.hostname.includes("vercel.app"),g=y?"http://127.0.0.1:3005":"",b=`${g}${m}`;console.log(" Login Debug Info:",{isLocal:y,isVercel:v,isProd:!0,hostname:window.location.hostname,endpoint:m,baseUrl:g,fullUrl:b});const x=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!x.ok)throw new Error(`HTTP ${x.status}: ${x.statusText}`);return await x.json()}catch(m){console.error("Admin login error:",m);let y="Admin login failed";throw m.message&&(m.message.includes("401")?y="Invalid admin credentials":m.message.includes("403")?y="Access denied. Admin privileges required.":m.message.includes("400")?y="Username and password are required":m.message.includes("500")?y="Server error. Please try again later.":y=m.message),new Error(y)}},onSuccess:u=>{console.log(" Admin login success:",u),u.token&&localStorage.setItem("authToken",u.token),u.user&&localStorage.setItem("user",JSON.stringify(u.user)),t.setQueryData(["/api/auth"],u.user),t.invalidateQueries({queryKey:["/api/auth"]})}}),l=Ms({mutationFn:async()=>{try{await qs("POST","/api/auth?action=logout")}catch(u){console.warn("Logout API failed, continuing with local cleanup:",u)}},onSuccess:()=>{t.setQueryData(["/api/auth"],null),t.invalidateQueries({queryKey:["/api/auth"]}),localStorage.removeItem("authToken"),localStorage.removeItem("user"),sessionStorage.clear(),window.location.href="/"},onError:()=>{t.setQueryData(["/api/auth/user"],null),t.invalidateQueries({queryKey:["/api/auth/user"]}),localStorage.removeItem("authToken"),localStorage.removeItem("user"),sessionStorage.clear(),window.location.href="/"}}),c=Ms({mutationFn:async u=>{try{return await qs("POST","/api/auth",u)}catch(m){console.warn("Main auth endpoint failed, trying fallback:",m);try{const v=await qs("POST","/api/auth/user/register",{username:u.username,email:u.email,password:u.password});return(u.firstName||u.lastName)&&console.warn("Note: firstName and lastName were not saved due to fallback endpoint limitations"),v}catch(y){console.error("Both registration endpoints failed:",y),console.warn("Creating demo user locally due to server issues");const v={id:`demo-user-${Date.now()}`,username:u.username,email:u.email,role:"user",firstName:u.firstName,lastName:u.lastName};return localStorage.setItem("demoUser",JSON.stringify(v)),localStorage.setItem("authToken",`demo-token-${Date.now()}`),{user:v,message:"Registration successful (Demo Mode - Local Storage)",token:`demo-token-${Date.now()}`,success:!0}}}},onSuccess:u=>{u.token&&localStorage.setItem("authToken",u.token),u.user&&u.token&&u.token.startsWith("user-session-")&&localStorage.setItem("user",JSON.stringify(u.user)),t.setQueryData(["/api/auth"],u.user),t.invalidateQueries({queryKey:["/api/auth"]})}}),d=Ms({mutationFn:async u=>await qs("POST","/api/auth",u),onSuccess:u=>{u.token&&localStorage.setItem("authToken",u.token),u.user&&u.token&&u.token.startsWith("user-session-")&&localStorage.setItem("user",JSON.stringify(u.user)),t.setQueryData(["/api/auth"],u.user),t.invalidateQueries({queryKey:["/api/auth"]})}}),h=()=>{console.log(" Force refreshing auth state"),t.invalidateQueries({queryKey:["/api/auth"]}),t.refetchQueries({queryKey:["/api/auth"]})};return f.useEffect(()=>{if(e&&e.type==="verification_status_updated"){const{userId:u,verification_status:m,message:y,forceRefresh:v}=e;s&&s.id===u&&(console.log(" Verification status updated:",m),v?(localStorage.removeItem("user"),t.removeQueries({queryKey:["/api/auth"]}),t.invalidateQueries({queryKey:["/api/auth"]}),t.refetchQueries({queryKey:["/api/auth"]}),console.log(" Forced complete refresh of user data")):h(),typeof window<"u"&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Account Verification Update",{body:y,icon:"/favicon.ico"}),console.log(" Verification status update:",y))}},[e,s,h,t]),{user:s,isLoading:n,isAuthenticated:!!s,error:i,userLogin:a.mutateAsync,adminLogin:o.mutateAsync,logout:l.mutateAsync,register:c.mutateAsync,metamaskLogin:d.mutateAsync,refreshAuth:h,isUserLoginPending:a.isPending,isAdminLoginPending:o.isPending,isLogoutPending:l.isPending,isRegisterPending:c.isPending,isMetamaskLoginPending:d.isPending}}const i6=[{path:"/",label:"Home",normalIcon:"/Homeiconbar-normal.png?v=5",activeIcon:"/iconbar_Home-active.png?v=5"},{path:"/market",label:"Market",normalIcon:"/iconbar_Market-normal.png?v=5",activeIcon:"/iconbar_Market-active.png?v=5"},{path:"/trade",label:"Trade",normalIcon:"/iconbar_Trade-normal.png?v=5",activeIcon:"/iconbar_Trade-active.png?v=5"},{path:"/wallet",label:"Wallet",normalIcon:"/iconbar_Wallet-normal.png?v=5",activeIcon:"/iconbar_Wallet-active.png?v=5"},{path:"/support",label:"Support",normalIcon:"/iconbar_Support-normal.png?v=5",activeIcon:"/iconbar_Support-active.png?v=5"}],a6=t=>{switch(t){case"/":return"";case"/market":return"";case"/trade":return"";case"/wallet":return"";case"/support":return"";default:return""}};function Lh(){const[t,e]=Or(),[s,n]=f.useState(!1),[i,a]=f.useState(!1),[o,l]=f.useState(null);if(Ss(),f.useEffect(()=>(s?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width=""),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[s]),f.useEffect(()=>{const u=()=>{if(typeof window<"u"){const m=window.innerWidth;a(m<1024)}};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),!i)return null;const c=u=>u==="/"?t==="/":t.startsWith(u),d=u=>{u==="/trade"?n(!s):(n(!1),window.scrollTo({top:0,behavior:"smooth"}),e(u))},h=u=>{n(!1),window.scrollTo({top:0,behavior:"smooth"}),e(u)};return r.jsxs(r.Fragment,{children:[s&&r.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/70 backdrop-blur-sm overflow-hidden",onClick:()=>n(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:9998},children:r.jsx("div",{className:"fixed bottom-20 left-0 right-0 bg-[#1A1B3A] border-t border-gray-700/50",onClick:u=>u.stopPropagation(),children:r.jsx("div",{className:"py-4 px-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>h("/trade/spot"),className:"w-full relative p-3 bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 rounded-lg cursor-pointer transition-all duration-300 transform hover:scale-105",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 text-left",children:[r.jsx("h3",{className:"text-base font-bold text-black mb-1",children:"SPOT"}),r.jsxs("p",{className:"text-xs text-black/80 leading-tight",children:["Buy and sell crypto instantly at",r.jsx("br",{}),"real-time market prices."]})]}),r.jsx("div",{className:"ml-3 flex-shrink-0",children:r.jsx("img",{src:"/asset/trade-spot_icon.png",alt:"Spot Trading",className:"w-10 h-10 object-contain"})})]})}),r.jsx("button",{onClick:()=>h("/trade/options"),className:"w-full relative p-3 bg-gradient-to-r from-cyan-400 to-blue-500 hover:from-cyan-500 hover:to-blue-600 rounded-lg cursor-pointer transition-all duration-300 transform hover:scale-105",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 text-left",children:[r.jsx("h3",{className:"text-base font-bold text-black mb-1",children:"OPTION"}),r.jsxs("p",{className:"text-xs text-black/80 leading-tight",children:["Maximize gains by predicting",r.jsx("br",{}),"market moves in seconds."]})]}),r.jsx("div",{className:"ml-3 flex-shrink-0",children:r.jsx("img",{src:"/asset/trade-option_icon.png",alt:"Options Trading",className:"w-10 h-10 object-contain"})})]})})]})})})}),r.jsx("div",{className:"mobile-bottom-nav",style:{position:"fixed",bottom:"0px",left:"0px",right:"0px",zIndex:99999,backgroundColor:"#1A1B3A",borderTop:"2px solid #4F46E5",height:"80px",display:"flex",alignItems:"center",justifyContent:"space-around",padding:"0 8px",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"100vw",overflow:"hidden"},children:i6.map(u=>{const m=c(u.path),y=o===u.path,v=m||y;return r.jsx("button",{onClick:()=>d(u.path),onMouseEnter:()=>l(u.path),onMouseLeave:()=>l(null),onTouchStart:()=>l(u.path),onTouchEnd:()=>l(null),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"6px 4px",flex:"1",maxWidth:"20%",minWidth:"0",backgroundColor:m?"rgba(79, 70, 229, 0.2)":y?"rgba(79, 70, 229, 0.1)":"transparent",borderRadius:"6px",border:"none",cursor:"pointer",transition:"all 0.2s ease",transform:y?"scale(1.02)":"scale(1)"},children:r.jsx("div",{className:"nav-icon",style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("img",{src:v?u.activeIcon:u.normalIcon,alt:`${u.label} icon`,style:{width:"100%",height:"100%",objectFit:"contain",transition:"all 0.2s ease"},onError:g=>{const b=g.currentTarget;b.style.display="none";const x=b.parentElement;x&&(x.innerHTML=a6(u.path),x.style.fontSize="24px")}})})},u.path)})})]})}const o6=Pm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-white",secondary:"bg-secondary text-white hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-white",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),W=f.forwardRef(({className:t,variant:e,size:s,asChild:n=!1,...i},a)=>{const o=n?JS:"button";return r.jsx(o,{className:Ue(o6({variant:e,size:s,className:t})),ref:a,...i})});W.displayName="Button";var l6=f.createContext(void 0);function $m(t){const e=f.useContext(l6);return t||e||"ltr"}var Jf=0;function Gx(){f.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Qb()),document.body.insertAdjacentElement("beforeend",t[1]??Qb()),Jf++,()=>{Jf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Jf--}},[])}function Qb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Zf="focusScope.autoFocusOnMount",ep="focusScope.autoFocusOnUnmount",Xb={bubbles:!1,cancelable:!0},c6="FocusScope",Um=f.forwardRef((t,e)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[l,c]=f.useState(null),d=gr(i),h=gr(a),u=f.useRef(null),m=Nt(e,g=>c(g)),y=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let g=function(w){if(y.paused||!l)return;const j=w.target;l.contains(j)?u.current=j:_i(u.current,{select:!0})},b=function(w){if(y.paused||!l)return;const j=w.relatedTarget;j!==null&&(l.contains(j)||_i(u.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&_i(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const p=new MutationObserver(x);return l&&p.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),p.disconnect()}}},[n,l,y.paused]),f.useEffect(()=>{if(l){Jb.add(y);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(Zf,Xb);l.addEventListener(Zf,d),l.dispatchEvent(x),x.defaultPrevented||(d6(p6(pC(l)),{select:!0}),document.activeElement===g&&_i(l))}return()=>{l.removeEventListener(Zf,d),setTimeout(()=>{const x=new CustomEvent(ep,Xb);l.addEventListener(ep,h),l.dispatchEvent(x),x.defaultPrevented||_i(g??document.body,{select:!0}),l.removeEventListener(ep,h),Jb.remove(y)},0)}}},[l,d,h,y]);const v=f.useCallback(g=>{if(!s&&!n||y.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(b&&x){const p=g.currentTarget,[w,j]=u6(p);w&&j?!g.shiftKey&&x===j?(g.preventDefault(),s&&_i(w,{select:!0})):g.shiftKey&&x===w&&(g.preventDefault(),s&&_i(j,{select:!0})):x===p&&g.preventDefault()}},[s,n,y.paused]);return r.jsx(We.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});Um.displayName=c6;function d6(t,{select:e=!1}={}){const s=document.activeElement;for(const n of t)if(_i(n,{select:e}),document.activeElement!==s)return}function u6(t){const e=pC(t),s=Yb(e,t),n=Yb(e.reverse(),t);return[s,n]}function pC(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function Yb(t,e){for(const s of t)if(!h6(s,{upTo:e}))return s}function h6(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function m6(t){return t instanceof HTMLInputElement&&"select"in t}function _i(t,{select:e=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&m6(t)&&e&&t.select()}}var Jb=f6();function f6(){let t=[];return{add(e){const s=t[0];e!==s&&(s==null||s.pause()),t=Zb(t,e),t.unshift(e)},remove(e){var s;t=Zb(t,e),(s=t[0])==null||s.resume()}}}function Zb(t,e){const s=[...t],n=s.indexOf(e);return n!==-1&&s.splice(n,1),s}function p6(t){return t.filter(e=>e.tagName!=="A")}var tp="rovingFocusGroup.onEntryFocus",g6={bubbles:!1,cancelable:!0},Ad="RovingFocusGroup",[Zg,gC,x6]=Tm(Ad),[y6,Bm]=Zr(Ad,[x6]),[v6,b6]=y6(Ad),xC=f.forwardRef((t,e)=>r.jsx(Zg.Provider,{scope:t.__scopeRovingFocusGroup,children:r.jsx(Zg.Slot,{scope:t.__scopeRovingFocusGroup,children:r.jsx(w6,{...t,ref:e})})}));xC.displayName=Ad;var w6=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,orientation:n,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...u}=t,m=f.useRef(null),y=Nt(e,m),v=$m(a),[g,b]=ca({prop:o,defaultProp:l??null,onChange:c,caller:Ad}),[x,p]=f.useState(!1),w=gr(d),j=gC(s),S=f.useRef(!1),[_,k]=f.useState(0);return f.useEffect(()=>{const P=m.current;if(P)return P.addEventListener(tp,w),()=>P.removeEventListener(tp,w)},[w]),r.jsx(v6,{scope:s,orientation:n,dir:v,loop:i,currentTabStopId:g,onItemFocus:f.useCallback(P=>b(P),[b]),onItemShiftTab:f.useCallback(()=>p(!0),[]),onFocusableItemAdd:f.useCallback(()=>k(P=>P+1),[]),onFocusableItemRemove:f.useCallback(()=>k(P=>P-1),[]),children:r.jsx(We.div,{tabIndex:x||_===0?-1:0,"data-orientation":n,...u,ref:y,style:{outline:"none",...t.style},onMouseDown:we(t.onMouseDown,()=>{S.current=!0}),onFocus:we(t.onFocus,P=>{const M=!S.current;if(P.target===P.currentTarget&&M&&!x){const T=new CustomEvent(tp,g6);if(P.currentTarget.dispatchEvent(T),!T.defaultPrevented){const E=j().filter(R=>R.focusable),I=E.find(R=>R.active),V=E.find(R=>R.id===g),A=[I,V,...E].filter(Boolean).map(R=>R.ref.current);bC(A,h)}}S.current=!1}),onBlur:we(t.onBlur,()=>p(!1))})})}),yC="RovingFocusGroupItem",vC=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,focusable:n=!0,active:i=!1,tabStopId:a,children:o,...l}=t,c=xn(),d=a||c,h=b6(yC,s),u=h.currentTabStopId===d,m=gC(s),{onFocusableItemAdd:y,onFocusableItemRemove:v,currentTabStopId:g}=h;return f.useEffect(()=>{if(n)return y(),()=>v()},[n,y,v]),r.jsx(Zg.ItemSlot,{scope:s,id:d,focusable:n,active:i,children:r.jsx(We.span,{tabIndex:u?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:we(t.onMouseDown,b=>{n?h.onItemFocus(d):b.preventDefault()}),onFocus:we(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:we(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){h.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=S6(b,h.orientation,h.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=m().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const j=w.indexOf(b.currentTarget);w=h.loop?C6(w,j+1):w.slice(j+1)}setTimeout(()=>bC(w))}}),children:typeof o=="function"?o({isCurrentTabStop:u,hasTabStop:g!=null}):o})})});vC.displayName=yC;var j6={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function N6(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function S6(t,e,s){const n=N6(t.key,s);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return j6[n]}function bC(t,e=!1){const s=document.activeElement;for(const n of t)if(n===s||(n.focus({preventScroll:e}),document.activeElement!==s))return}function C6(t,e){return t.map((s,n)=>t[(e+n)%t.length])}var wC=xC,jC=vC,T6=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},No=new WeakMap,hu=new WeakMap,mu={},sp=0,NC=function(t){return t&&(t.host||NC(t.parentNode))},k6=function(t,e){return e.map(function(s){if(t.contains(s))return s;var n=NC(s);return n&&t.contains(n)?n:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},E6=function(t,e,s,n){var i=k6(e,Array.isArray(t)?t:[t]);mu[s]||(mu[s]=new WeakMap);var a=mu[s],o=[],l=new Set,c=new Set(i),d=function(u){!u||l.has(u)||(l.add(u),d(u.parentNode))};i.forEach(d);var h=function(u){!u||c.has(u)||Array.prototype.forEach.call(u.children,function(m){if(l.has(m))h(m);else try{var y=m.getAttribute(n),v=y!==null&&y!=="false",g=(No.get(m)||0)+1,b=(a.get(m)||0)+1;No.set(m,g),a.set(m,b),o.push(m),g===1&&v&&hu.set(m,!0),b===1&&m.setAttribute(s,"true"),v||m.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return h(e),l.clear(),sp++,function(){o.forEach(function(u){var m=No.get(u)-1,y=a.get(u)-1;No.set(u,m),a.set(u,y),m||(hu.has(u)||u.removeAttribute(n),hu.delete(u)),y||u.removeAttribute(s)}),sp--,sp||(No=new WeakMap,No=new WeakMap,hu=new WeakMap,mu={})}},qx=function(t,e,s){s===void 0&&(s="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=T6(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),E6(n,i,s,"aria-hidden")):function(){return null}},An=function(){return An=Object.assign||function(e){for(var s,n=1,i=arguments.length;n<i;n++){s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},An.apply(this,arguments)};function SC(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s}function P6(t,e,s){if(s||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}var Yu="right-scroll-bar-position",Ju="width-before-scroll-bar",_6="with-scroll-bars-hidden",M6="--removed-body-scroll-bar-size";function rp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function A6(t,e){var s=f.useState(function(){return{value:t,callback:e,facade:{get current(){return s.value},set current(n){var i=s.value;i!==n&&(s.value=n,s.callback(n,i))}}}})[0];return s.callback=e,s.facade}var D6=typeof window<"u"?f.useLayoutEffect:f.useEffect,ew=new WeakMap;function R6(t,e){var s=A6(null,function(n){return t.forEach(function(i){return rp(i,n)})});return D6(function(){var n=ew.get(s);if(n){var i=new Set(n),a=new Set(t),o=s.current;i.forEach(function(l){a.has(l)||rp(l,null)}),a.forEach(function(l){i.has(l)||rp(l,o)})}ew.set(s,t)},[t]),s}function O6(t){return t}function I6(t,e){e===void 0&&(e=O6);var s=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(a){var o=e(a,n);return s.push(o),function(){s=s.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(n=!0;s.length;){var o=s;s=[],o.forEach(a)}s={push:function(l){return a(l)},filter:function(){return s}}},assignMedium:function(a){n=!0;var o=[];if(s.length){var l=s;s=[],l.forEach(a),o=s}var c=function(){var h=o;o=[],h.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),s={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),s}}}};return i}function L6(t){t===void 0&&(t={});var e=I6(null);return e.options=An({async:!0,ssr:!1},t),e}var CC=function(t){var e=t.sideCar,s=SC(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return f.createElement(n,An({},s))};CC.isSideCarExport=!0;function F6(t,e){return t.useMedium(e),CC}var TC=L6(),np=function(){},zm=f.forwardRef(function(t,e){var s=f.useRef(null),n=f.useState({onScrollCapture:np,onWheelCapture:np,onTouchMoveCapture:np}),i=n[0],a=n[1],o=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,h=t.enabled,u=t.shards,m=t.sideCar,y=t.noRelative,v=t.noIsolation,g=t.inert,b=t.allowPinchZoom,x=t.as,p=x===void 0?"div":x,w=t.gapMode,j=SC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,_=R6([s,e]),k=An(An({},j),i);return f.createElement(f.Fragment,null,h&&f.createElement(S,{sideCar:TC,removeScrollBar:d,shards:u,noRelative:y,noIsolation:v,inert:g,setCallbacks:a,allowPinchZoom:!!b,lockRef:s,gapMode:w}),o?f.cloneElement(f.Children.only(l),An(An({},k),{ref:_})):f.createElement(p,An({},k,{className:c,ref:_}),l))});zm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zm.classNames={fullWidth:Ju,zeroRight:Yu};var $6=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function U6(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=$6();return e&&t.setAttribute("nonce",e),t}function B6(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function z6(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var V6=function(){var t=0,e=null;return{add:function(s){t==0&&(e=U6())&&(B6(e,s),z6(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},W6=function(){var t=V6();return function(e,s){f.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&s])}},kC=function(){var t=W6(),e=function(s){var n=s.styles,i=s.dynamic;return t(n,i),null};return e},H6={left:0,top:0,right:0,gap:0},ip=function(t){return parseInt(t||"",10)||0},K6=function(t){var e=window.getComputedStyle(document.body),s=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[ip(s),ip(n),ip(i)]},G6=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return H6;var e=K6(t),s=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-s+e[2]-e[0])}},q6=kC(),Jo="data-scroll-locked",Q6=function(t,e,s,n){var i=t.left,a=t.top,o=t.right,l=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(_6,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Jo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),s==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),s==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yu,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ju,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Yu," .").concat(Yu,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Ju," .").concat(Ju,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Jo,`] {
    `).concat(M6,": ").concat(l,`px;
  }
`)},tw=function(){var t=parseInt(document.body.getAttribute(Jo)||"0",10);return isFinite(t)?t:0},X6=function(){f.useEffect(function(){return document.body.setAttribute(Jo,(tw()+1).toString()),function(){var t=tw()-1;t<=0?document.body.removeAttribute(Jo):document.body.setAttribute(Jo,t.toString())}},[])},Y6=function(t){var e=t.noRelative,s=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;X6();var a=f.useMemo(function(){return G6(i)},[i]);return f.createElement(q6,{styles:Q6(a,!e,i,s?"":"!important")})},e0=!1;if(typeof window<"u")try{var fu=Object.defineProperty({},"passive",{get:function(){return e0=!0,!0}});window.addEventListener("test",fu,fu),window.removeEventListener("test",fu,fu)}catch{e0=!1}var So=e0?{passive:!1}:!1,J6=function(t){return t.tagName==="TEXTAREA"},EC=function(t,e){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[e]!=="hidden"&&!(s.overflowY===s.overflowX&&!J6(t)&&s[e]==="visible")},Z6=function(t){return EC(t,"overflowY")},eO=function(t){return EC(t,"overflowX")},sw=function(t,e){var s=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=PC(t,n);if(i){var a=_C(t,n),o=a[1],l=a[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==s.body);return!1},tO=function(t){var e=t.scrollTop,s=t.scrollHeight,n=t.clientHeight;return[e,s,n]},sO=function(t){var e=t.scrollLeft,s=t.scrollWidth,n=t.clientWidth;return[e,s,n]},PC=function(t,e){return t==="v"?Z6(e):eO(e)},_C=function(t,e){return t==="v"?tO(e):sO(e)},rO=function(t,e){return t==="h"&&e==="rtl"?-1:1},nO=function(t,e,s,n,i){var a=rO(t,window.getComputedStyle(e).direction),o=a*n,l=s.target,c=e.contains(l),d=!1,h=o>0,u=0,m=0;do{if(!l)break;var y=_C(t,l),v=y[0],g=y[1],b=y[2],x=g-b-a*v;(v||x)&&PC(t,l)&&(u+=x,m+=v);var p=l.parentNode;l=p&&p.nodeType===Node.DOCUMENT_FRAGMENT_NODE?p.host:p}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&Math.abs(u)<1||!h&&Math.abs(m)<1)&&(d=!0),d},pu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},rw=function(t){return[t.deltaX,t.deltaY]},nw=function(t){return t&&"current"in t?t.current:t},iO=function(t,e){return t[0]===e[0]&&t[1]===e[1]},aO=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},oO=0,Co=[];function lO(t){var e=f.useRef([]),s=f.useRef([0,0]),n=f.useRef(),i=f.useState(oO++)[0],a=f.useState(kC)[0],o=f.useRef(t);f.useEffect(function(){o.current=t},[t]),f.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=P6([t.lockRef.current],(t.shards||[]).map(nw),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=f.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var x=pu(g),p=s.current,w="deltaX"in g?g.deltaX:p[0]-x[0],j="deltaY"in g?g.deltaY:p[1]-x[1],S,_=g.target,k=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in g&&k==="h"&&_.type==="range")return!1;var P=sw(k,_);if(!P)return!0;if(P?S=k:(S=k==="v"?"h":"v",P=sw(k,_)),!P)return!1;if(!n.current&&"changedTouches"in g&&(w||j)&&(n.current=S),!S)return!0;var M=n.current||S;return nO(M,b,g,M==="h"?w:j)},[]),c=f.useCallback(function(g){var b=g;if(!(!Co.length||Co[Co.length-1]!==a)){var x="deltaY"in b?rw(b):pu(b),p=e.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&iO(S.delta,x)})[0];if(p&&p.should){b.cancelable&&b.preventDefault();return}if(!p){var w=(o.current.shards||[]).map(nw).filter(Boolean).filter(function(S){return S.contains(b.target)}),j=w.length>0?l(b,w[0]):!o.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),d=f.useCallback(function(g,b,x,p){var w={name:g,delta:b,target:x,should:p,shadowParent:cO(x)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(j){return j!==w})},1)},[]),h=f.useCallback(function(g){s.current=pu(g),n.current=void 0},[]),u=f.useCallback(function(g){d(g.type,rw(g),g.target,l(g,t.lockRef.current))},[]),m=f.useCallback(function(g){d(g.type,pu(g),g.target,l(g,t.lockRef.current))},[]);f.useEffect(function(){return Co.push(a),t.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",c,So),document.addEventListener("touchmove",c,So),document.addEventListener("touchstart",h,So),function(){Co=Co.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,So),document.removeEventListener("touchmove",c,So),document.removeEventListener("touchstart",h,So)}},[]);var y=t.removeScrollBar,v=t.inert;return f.createElement(f.Fragment,null,v?f.createElement(a,{styles:aO(i)}):null,y?f.createElement(Y6,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function cO(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const dO=F6(TC,lO);var Vm=f.forwardRef(function(t,e){return f.createElement(zm,An({},t,{ref:e,sideCar:dO}))});Vm.classNames=zm.classNames;var t0=["Enter"," "],uO=["ArrowDown","PageUp","Home"],MC=["ArrowUp","PageDown","End"],hO=[...uO,...MC],mO={ltr:[...t0,"ArrowRight"],rtl:[...t0,"ArrowLeft"]},fO={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Dd="Menu",[ad,pO,gO]=Tm(Dd),[vo,AC]=Zr(Dd,[gO,Hl,Bm]),Wm=Hl(),DC=Bm(),[xO,bo]=vo(Dd),[yO,Rd]=vo(Dd),RC=t=>{const{__scopeMenu:e,open:s=!1,children:n,dir:i,onOpenChange:a,modal:o=!0}=t,l=Wm(e),[c,d]=f.useState(null),h=f.useRef(!1),u=gr(a),m=$m(i);return f.useEffect(()=>{const y=()=>{h.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>h.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),r.jsx(aC,{...l,children:r.jsx(xO,{scope:e,open:s,onOpenChange:u,content:c,onContentChange:d,children:r.jsx(yO,{scope:e,onClose:f.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:h,dir:m,modal:o,children:n})})})};RC.displayName=Dd;var vO="MenuAnchor",Qx=f.forwardRef((t,e)=>{const{__scopeMenu:s,...n}=t,i=Wm(s);return r.jsx(Vx,{...i,...n,ref:e})});Qx.displayName=vO;var Xx="MenuPortal",[bO,OC]=vo(Xx,{forceMount:void 0}),IC=t=>{const{__scopeMenu:e,forceMount:s,children:n,container:i}=t,a=bo(Xx,e);return r.jsx(bO,{scope:e,forceMount:s,children:r.jsx(en,{present:s||a.open,children:r.jsx(Pd,{asChild:!0,container:i,children:n})})})};IC.displayName=Xx;var Xr="MenuContent",[wO,Yx]=vo(Xr),LC=f.forwardRef((t,e)=>{const s=OC(Xr,t.__scopeMenu),{forceMount:n=s.forceMount,...i}=t,a=bo(Xr,t.__scopeMenu),o=Rd(Xr,t.__scopeMenu);return r.jsx(ad.Provider,{scope:t.__scopeMenu,children:r.jsx(en,{present:n||a.open,children:r.jsx(ad.Slot,{scope:t.__scopeMenu,children:o.modal?r.jsx(jO,{...i,ref:e}):r.jsx(NO,{...i,ref:e})})})})}),jO=f.forwardRef((t,e)=>{const s=bo(Xr,t.__scopeMenu),n=f.useRef(null),i=Nt(e,n);return f.useEffect(()=>{const a=n.current;if(a)return qx(a)},[]),r.jsx(Jx,{...t,ref:i,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:we(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),NO=f.forwardRef((t,e)=>{const s=bo(Xr,t.__scopeMenu);return r.jsx(Jx,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),SO=io("MenuContent.ScrollLock"),Jx=f.forwardRef((t,e)=>{const{__scopeMenu:s,loop:n=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:u,onInteractOutside:m,onDismiss:y,disableOutsideScroll:v,...g}=t,b=bo(Xr,s),x=Rd(Xr,s),p=Wm(s),w=DC(s),j=pO(s),[S,_]=f.useState(null),k=f.useRef(null),P=Nt(e,k,b.onContentChange),M=f.useRef(0),T=f.useRef(""),E=f.useRef(0),I=f.useRef(null),V=f.useRef("right"),G=f.useRef(0),A=v?Vm:f.Fragment,R=v?{as:SO,allowPinchZoom:!0}:void 0,$=U=>{var ce,Ke;const J=T.current+U,Q=j().filter(je=>!je.disabled),Oe=document.activeElement,ge=(ce=Q.find(je=>je.ref.current===Oe))==null?void 0:ce.textValue,He=Q.map(je=>je.textValue),se=IO(He,J,ge),ze=(Ke=Q.find(je=>je.textValue===se))==null?void 0:Ke.ref.current;(function je(Ve){T.current=Ve,window.clearTimeout(M.current),Ve!==""&&(M.current=window.setTimeout(()=>je(""),1e3))})(J),ze&&setTimeout(()=>ze.focus())};f.useEffect(()=>()=>window.clearTimeout(M.current),[]),Gx();const O=f.useCallback(U=>{var Q,Oe;return V.current===((Q=I.current)==null?void 0:Q.side)&&FO(U,(Oe=I.current)==null?void 0:Oe.area)},[]);return r.jsx(wO,{scope:s,searchRef:T,onItemEnter:f.useCallback(U=>{O(U)&&U.preventDefault()},[O]),onItemLeave:f.useCallback(U=>{var J;O(U)||((J=k.current)==null||J.focus(),_(null))},[O]),onTriggerLeave:f.useCallback(U=>{O(U)&&U.preventDefault()},[O]),pointerGraceTimerRef:E,onPointerGraceIntentChange:f.useCallback(U=>{I.current=U},[]),children:r.jsx(A,{...R,children:r.jsx(Um,{asChild:!0,trapped:i,onMountAutoFocus:we(a,U=>{var J;U.preventDefault(),(J=k.current)==null||J.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:r.jsx(Ul,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:u,onInteractOutside:m,onDismiss:y,children:r.jsx(wC,{asChild:!0,...w,dir:x.dir,orientation:"vertical",loop:n,currentTabStopId:S,onCurrentTabStopIdChange:_,onEntryFocus:we(c,U=>{x.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(Wx,{role:"menu","aria-orientation":"vertical","data-state":ZC(b.open),"data-radix-menu-content":"",dir:x.dir,...p,...g,ref:P,style:{outline:"none",...g.style},onKeyDown:we(g.onKeyDown,U=>{const Q=U.target.closest("[data-radix-menu-content]")===U.currentTarget,Oe=U.ctrlKey||U.altKey||U.metaKey,ge=U.key.length===1;Q&&(U.key==="Tab"&&U.preventDefault(),!Oe&&ge&&$(U.key));const He=k.current;if(U.target!==He||!hO.includes(U.key))return;U.preventDefault();const ze=j().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);MC.includes(U.key)&&ze.reverse(),RO(ze)}),onBlur:we(t.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(M.current),T.current="")}),onPointerMove:we(t.onPointerMove,od(U=>{const J=U.target,Q=G.current!==U.clientX;if(U.currentTarget.contains(J)&&Q){const Oe=U.clientX>G.current?"right":"left";V.current=Oe,G.current=U.clientX}}))})})})})})})});LC.displayName=Xr;var CO="MenuGroup",Zx=f.forwardRef((t,e)=>{const{__scopeMenu:s,...n}=t;return r.jsx(We.div,{role:"group",...n,ref:e})});Zx.displayName=CO;var TO="MenuLabel",FC=f.forwardRef((t,e)=>{const{__scopeMenu:s,...n}=t;return r.jsx(We.div,{...n,ref:e})});FC.displayName=TO;var Fh="MenuItem",iw="menu.itemSelect",Hm=f.forwardRef((t,e)=>{const{disabled:s=!1,onSelect:n,...i}=t,a=f.useRef(null),o=Rd(Fh,t.__scopeMenu),l=Yx(Fh,t.__scopeMenu),c=Nt(e,a),d=f.useRef(!1),h=()=>{const u=a.current;if(!s&&u){const m=new CustomEvent(iw,{bubbles:!0,cancelable:!0});u.addEventListener(iw,y=>n==null?void 0:n(y),{once:!0}),_x(u,m),m.defaultPrevented?d.current=!1:o.onClose()}};return r.jsx($C,{...i,ref:c,disabled:s,onClick:we(t.onClick,h),onPointerDown:u=>{var m;(m=t.onPointerDown)==null||m.call(t,u),d.current=!0},onPointerUp:we(t.onPointerUp,u=>{var m;d.current||(m=u.currentTarget)==null||m.click()}),onKeyDown:we(t.onKeyDown,u=>{const m=l.searchRef.current!=="";s||m&&u.key===" "||t0.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});Hm.displayName=Fh;var $C=f.forwardRef((t,e)=>{const{__scopeMenu:s,disabled:n=!1,textValue:i,...a}=t,o=Yx(Fh,s),l=DC(s),c=f.useRef(null),d=Nt(e,c),[h,u]=f.useState(!1),[m,y]=f.useState("");return f.useEffect(()=>{const v=c.current;v&&y((v.textContent??"").trim())},[a.children]),r.jsx(ad.ItemSlot,{scope:s,disabled:n,textValue:i??m,children:r.jsx(jC,{asChild:!0,...l,focusable:!n,children:r.jsx(We.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:d,onPointerMove:we(t.onPointerMove,od(v=>{n?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:we(t.onPointerLeave,od(v=>o.onItemLeave(v))),onFocus:we(t.onFocus,()=>u(!0)),onBlur:we(t.onBlur,()=>u(!1))})})})}),kO="MenuCheckboxItem",UC=f.forwardRef((t,e)=>{const{checked:s=!1,onCheckedChange:n,...i}=t;return r.jsx(HC,{scope:t.__scopeMenu,checked:s,children:r.jsx(Hm,{role:"menuitemcheckbox","aria-checked":$h(s)?"mixed":s,...i,ref:e,"data-state":ty(s),onSelect:we(i.onSelect,()=>n==null?void 0:n($h(s)?!0:!s),{checkForDefaultPrevented:!1})})})});UC.displayName=kO;var BC="MenuRadioGroup",[EO,PO]=vo(BC,{value:void 0,onValueChange:()=>{}}),zC=f.forwardRef((t,e)=>{const{value:s,onValueChange:n,...i}=t,a=gr(n);return r.jsx(EO,{scope:t.__scopeMenu,value:s,onValueChange:a,children:r.jsx(Zx,{...i,ref:e})})});zC.displayName=BC;var VC="MenuRadioItem",WC=f.forwardRef((t,e)=>{const{value:s,...n}=t,i=PO(VC,t.__scopeMenu),a=s===i.value;return r.jsx(HC,{scope:t.__scopeMenu,checked:a,children:r.jsx(Hm,{role:"menuitemradio","aria-checked":a,...n,ref:e,"data-state":ty(a),onSelect:we(n.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,s)},{checkForDefaultPrevented:!1})})})});WC.displayName=VC;var ey="MenuItemIndicator",[HC,_O]=vo(ey,{checked:!1}),KC=f.forwardRef((t,e)=>{const{__scopeMenu:s,forceMount:n,...i}=t,a=_O(ey,s);return r.jsx(en,{present:n||$h(a.checked)||a.checked===!0,children:r.jsx(We.span,{...i,ref:e,"data-state":ty(a.checked)})})});KC.displayName=ey;var MO="MenuSeparator",GC=f.forwardRef((t,e)=>{const{__scopeMenu:s,...n}=t;return r.jsx(We.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});GC.displayName=MO;var AO="MenuArrow",qC=f.forwardRef((t,e)=>{const{__scopeMenu:s,...n}=t,i=Wm(s);return r.jsx(Hx,{...i,...n,ref:e})});qC.displayName=AO;var DO="MenuSub",[P7,QC]=vo(DO),yc="MenuSubTrigger",XC=f.forwardRef((t,e)=>{const s=bo(yc,t.__scopeMenu),n=Rd(yc,t.__scopeMenu),i=QC(yc,t.__scopeMenu),a=Yx(yc,t.__scopeMenu),o=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:t.__scopeMenu},h=f.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return f.useEffect(()=>h,[h]),f.useEffect(()=>{const u=l.current;return()=>{window.clearTimeout(u),c(null)}},[l,c]),r.jsx(Qx,{asChild:!0,...d,children:r.jsx($C,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":i.contentId,"data-state":ZC(s.open),...t,ref:Cm(e,i.onTriggerChange),onClick:u=>{var m;(m=t.onClick)==null||m.call(t,u),!(t.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:we(t.onPointerMove,od(u=>{a.onItemEnter(u),!u.defaultPrevented&&!t.disabled&&!s.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{s.onOpenChange(!0),h()},100))})),onPointerLeave:we(t.onPointerLeave,od(u=>{var y,v;h();const m=(y=s.content)==null?void 0:y.getBoundingClientRect();if(m){const g=(v=s.content)==null?void 0:v.dataset.side,b=g==="right",x=b?-5:5,p=m[b?"left":"right"],w=m[b?"right":"left"];a.onPointerGraceIntentChange({area:[{x:u.clientX+x,y:u.clientY},{x:p,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:p,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(u),u.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:we(t.onKeyDown,u=>{var y;const m=a.searchRef.current!=="";t.disabled||m&&u.key===" "||mO[n.dir].includes(u.key)&&(s.onOpenChange(!0),(y=s.content)==null||y.focus(),u.preventDefault())})})})});XC.displayName=yc;var YC="MenuSubContent",JC=f.forwardRef((t,e)=>{const s=OC(Xr,t.__scopeMenu),{forceMount:n=s.forceMount,...i}=t,a=bo(Xr,t.__scopeMenu),o=Rd(Xr,t.__scopeMenu),l=QC(YC,t.__scopeMenu),c=f.useRef(null),d=Nt(e,c);return r.jsx(ad.Provider,{scope:t.__scopeMenu,children:r.jsx(en,{present:n||a.open,children:r.jsx(ad.Slot,{scope:t.__scopeMenu,children:r.jsx(Jx,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var u;o.isUsingKeyboardRef.current&&((u=c.current)==null||u.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:we(t.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:we(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:we(t.onKeyDown,h=>{var y;const u=h.currentTarget.contains(h.target),m=fO[o.dir].includes(h.key);u&&m&&(a.onOpenChange(!1),(y=l.trigger)==null||y.focus(),h.preventDefault())})})})})})});JC.displayName=YC;function ZC(t){return t?"open":"closed"}function $h(t){return t==="indeterminate"}function ty(t){return $h(t)?"indeterminate":t?"checked":"unchecked"}function RO(t){const e=document.activeElement;for(const s of t)if(s===e||(s.focus(),document.activeElement!==e))return}function OO(t,e){return t.map((s,n)=>t[(e+n)%t.length])}function IO(t,e,s){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=s?t.indexOf(s):-1;let o=OO(t,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==s));const c=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return c!==s?c:void 0}function LO(t,e){const{x:s,y:n}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],d=l.x,h=l.y,u=c.x,m=c.y;h>n!=m>n&&s<(u-d)*(n-h)/(m-h)+d&&(i=!i)}return i}function FO(t,e){if(!e)return!1;const s={x:t.clientX,y:t.clientY};return LO(s,e)}function od(t){return e=>e.pointerType==="mouse"?t(e):void 0}var $O=RC,UO=Qx,BO=IC,zO=LC,VO=Zx,WO=FC,HO=Hm,KO=UC,GO=zC,qO=WC,QO=KC,XO=GC,YO=qC,JO=XC,ZO=JC,Km="DropdownMenu",[e5]=Zr(Km,[AC]),er=AC(),[t5,eT]=e5(Km),tT=t=>{const{__scopeDropdownMenu:e,children:s,dir:n,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=er(e),d=f.useRef(null),[h,u]=ca({prop:i,defaultProp:a??!1,onChange:o,caller:Km});return r.jsx(t5,{scope:e,triggerId:xn(),triggerRef:d,contentId:xn(),open:h,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(m=>!m),[u]),modal:l,children:r.jsx($O,{...c,open:h,onOpenChange:u,dir:n,modal:l,children:s})})};tT.displayName=Km;var sT="DropdownMenuTrigger",rT=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,disabled:n=!1,...i}=t,a=eT(sT,s),o=er(s);return r.jsx(UO,{asChild:!0,...o,children:r.jsx(We.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:Cm(e,a.triggerRef),onPointerDown:we(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:we(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});rT.displayName=sT;var s5="DropdownMenuPortal",nT=t=>{const{__scopeDropdownMenu:e,...s}=t,n=er(e);return r.jsx(BO,{...n,...s})};nT.displayName=s5;var iT="DropdownMenuContent",aT=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,i=eT(iT,s),a=er(s),o=f.useRef(!1);return r.jsx(zO,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...n,ref:e,onCloseAutoFocus:we(t.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:we(t.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;(!i.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});aT.displayName=iT;var r5="DropdownMenuGroup",n5=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,i=er(s);return r.jsx(VO,{...i,...n,ref:e})});n5.displayName=r5;var i5="DropdownMenuLabel",oT=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,i=er(s);return r.jsx(WO,{...i,...n,ref:e})});oT.displayName=i5;var a5="DropdownMenuItem",lT=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,i=er(s);return r.jsx(HO,{...i,...n,ref:e})});lT.displayName=a5;var o5="DropdownMenuCheckboxItem",cT=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,i=er(s);return r.jsx(KO,{...i,...n,ref:e})});cT.displayName=o5;var l5="DropdownMenuRadioGroup",c5=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,i=er(s);return r.jsx(GO,{...i,...n,ref:e})});c5.displayName=l5;var d5="DropdownMenuRadioItem",dT=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,i=er(s);return r.jsx(qO,{...i,...n,ref:e})});dT.displayName=d5;var u5="DropdownMenuItemIndicator",uT=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,i=er(s);return r.jsx(QO,{...i,...n,ref:e})});uT.displayName=u5;var h5="DropdownMenuSeparator",hT=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,i=er(s);return r.jsx(XO,{...i,...n,ref:e})});hT.displayName=h5;var m5="DropdownMenuArrow",f5=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,i=er(s);return r.jsx(YO,{...i,...n,ref:e})});f5.displayName=m5;var p5="DropdownMenuSubTrigger",mT=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,i=er(s);return r.jsx(JO,{...i,...n,ref:e})});mT.displayName=p5;var g5="DropdownMenuSubContent",fT=f.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,i=er(s);return r.jsx(ZO,{...i,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fT.displayName=g5;var x5=tT,y5=rT,v5=nT,pT=aT,gT=oT,xT=lT,yT=cT,vT=dT,bT=uT,wT=hT,jT=mT,NT=fT;const ST=x5,CT=y5,b5=f.forwardRef(({className:t,inset:e,children:s,...n},i)=>r.jsxs(jT,{ref:i,className:Ue("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n,children:[s,r.jsx(jA,{className:"ml-auto"})]}));b5.displayName=jT.displayName;const w5=f.forwardRef(({className:t,...e},s)=>r.jsx(NT,{ref:s,className:Ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));w5.displayName=NT.displayName;const sy=f.forwardRef(({className:t,sideOffset:e=4,...s},n)=>r.jsx(v5,{children:r.jsx(pT,{ref:n,sideOffset:e,className:Ue("z-[60] max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s})}));sy.displayName=pT.displayName;const Ga=f.forwardRef(({className:t,inset:e,...s},n)=>r.jsx(xT,{ref:n,className:Ue("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...s}));Ga.displayName=xT.displayName;const j5=f.forwardRef(({className:t,children:e,checked:s,...n},i)=>r.jsxs(yT,{ref:i,className:Ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(bT,{children:r.jsx(C2,{className:"h-4 w-4"})})}),e]}));j5.displayName=yT.displayName;const N5=f.forwardRef(({className:t,children:e,...s},n)=>r.jsxs(vT,{ref:n,className:Ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(bT,{children:r.jsx(SA,{className:"h-2 w-2 fill-current"})})}),e]}));N5.displayName=vT.displayName;const S5=f.forwardRef(({className:t,inset:e,...s},n)=>r.jsx(gT,{ref:n,className:Ue("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...s}));S5.displayName=gT.displayName;const ry=f.forwardRef(({className:t,...e},s)=>r.jsx(wT,{ref:s,className:Ue("-mx-1 my-1 h-px bg-muted",t),...e}));ry.displayName=wT.displayName;const Od="/assets/new-metachrome-logo-1762724043163.png";function ny(){const[t,e]=f.useState(!1),[s,n]=Or(),{user:i,isAuthenticated:a,logout:o}=Ss(),l=Wn();if(f.useEffect(()=>(t?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width=""),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[t]),!l)return null;const c=h=>{window.scrollTo({top:0,behavior:"smooth"}),n(h),e(!1)},d=()=>{if(console.log(" Mobile Header User Data:",{user:i,walletAddress:i==null?void 0:i.walletAddress,wallet_address:i==null?void 0:i.wallet_address,username:i==null?void 0:i.username,firstName:i==null?void 0:i.firstName,lastName:i==null?void 0:i.lastName,currentLocation:s}),i!=null&&i.firstName&&(i!=null&&i.lastName))return console.log(" Mobile Header: Showing full name"),`${i.firstName} ${i.lastName}`;if(i!=null&&i.firstName)return console.log(" Mobile Header: Showing first name"),i.firstName;if(i!=null&&i.username){if(console.log(" Mobile Header: Showing username:",i.username),i.username.startsWith("0x")&&i.username.length>20){const u=`${i.username.slice(0,6)}...${i.username.slice(-4)}`;return console.log(" Mobile Header: Showing truncated wallet:",u),u}return i.username}const h=(i==null?void 0:i.walletAddress)||(i==null?void 0:i.wallet_address);if(h&&h.startsWith("0x")&&h.length>20){const u=`${h.slice(0,6)}...${h.slice(-4)}`;return console.log(" Mobile Header: Showing wallet from other field:",u),u}return console.log(" Mobile Header: Showing default Account"),"Account"};return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"bg-[#1A1B3A] border-b border-gray-700/50 px-4 py-3 flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("img",{src:Od,alt:"METACHROME",className:"h-8 w-auto",onClick:()=>c("/")})}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-6 h-4 bg-red-500 rounded-sm flex items-center justify-center",children:r.jsx("span",{className:"text-xs text-white",children:""})}),a?r.jsx("div",{className:"flex items-center",children:r.jsxs(ST,{children:[r.jsx(CT,{asChild:!0,children:r.jsxs(W,{variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white flex items-center space-x-1 max-w-[160px]",children:[r.jsx(qu,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"text-sm truncate",children:d()}),r.jsx(gi,{className:"w-3 h-3 flex-shrink-0"})]})}),r.jsxs(sy,{align:"end",className:"w-48 bg-gray-800 border-gray-700",children:[r.jsxs(Ga,{onClick:()=>{const h=(i==null?void 0:i.role)==="admin"||(i==null?void 0:i.role)==="super_admin"?"/admin/dashboard":"/dashboard";c(h)},className:"flex items-center w-full px-2 py-2 text-gray-300 hover:text-white hover:bg-gray-700 cursor-pointer",children:[r.jsx(jl,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),r.jsxs(Ga,{onClick:()=>c("/profile"),className:"flex items-center w-full px-2 py-2 text-gray-300 hover:text-white hover:bg-gray-700 cursor-pointer",children:[r.jsx(Qr,{className:"w-4 h-4 mr-2"}),"Profile"]}),r.jsx(ry,{className:"bg-gray-700"}),r.jsxs(Ga,{onClick:()=>o(),className:"flex items-center w-full px-2 py-2 text-gray-300 hover:text-white hover:bg-gray-700 cursor-pointer",children:[r.jsx(Kg,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>c("/signup"),className:"text-gray-300 hover:text-white",children:"Sign up"}),r.jsx(W,{size:"sm",onClick:()=>c("/login"),className:"bg-purple-600 hover:bg-purple-700 text-white",children:"Login"})]})]})]}),t&&r.jsx("div",{className:"fixed inset-0 z-50 bg-black/70 backdrop-blur-sm overflow-hidden",onClick:()=>e(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:9999},children:r.jsxs("div",{className:"fixed right-0 top-0 h-full w-64 bg-[#1A1B3A] p-4 overflow-y-auto",onClick:h=>h.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-white font-semibold",children:"Menu"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>e(!1),children:r.jsx(Bl,{className:"w-4 h-4"})})]}),r.jsxs("nav",{className:"space-y-2",children:[r.jsx("button",{onClick:()=>c("/"),className:"w-full text-left py-2 px-3 text-gray-300 hover:text-white hover:bg-gray-700/50 rounded",children:"Home"}),r.jsx("button",{onClick:()=>c("/market"),className:"w-full text-left py-2 px-3 text-gray-300 hover:text-white hover:bg-gray-700/50 rounded",children:"Market"}),r.jsxs("div",{className:"w-full",children:[r.jsx("div",{className:"text-gray-300 py-2 px-3 text-base font-medium",children:"Trade"}),r.jsxs("div",{className:"mx-3 mb-2 space-y-2",children:[r.jsx(lt,{href:"/trade/spot",children:r.jsx("div",{className:"relative p-3 bg-gradient-to-r from-yellow-400 to-yellow-500 rounded-lg cursor-pointer transform transition-transform hover:scale-105",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),e(!1)},children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-base font-bold text-black mb-1",children:"SPOT"}),r.jsxs("p",{className:"text-xs text-black/80 leading-tight",children:["Buy and sell crypto instantly at",r.jsx("br",{}),"real-time market prices."]})]}),r.jsx("div",{className:"ml-3 flex-shrink-0",children:r.jsx("img",{src:"/asset/trade-spot_icon.png",alt:"Spot Trading",className:"w-10 h-10 object-contain"})})]})})}),r.jsx(lt,{href:"/trade/options",children:r.jsx("div",{className:"relative p-3 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-lg cursor-pointer transform transition-transform hover:scale-105",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),e(!1)},children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-base font-bold text-black mb-1",children:"OPTION"}),r.jsxs("p",{className:"text-xs text-black/80 leading-tight",children:["Maximize gains by predicting",r.jsx("br",{}),"market moves in seconds."]})]}),r.jsx("div",{className:"ml-3 flex-shrink-0",children:r.jsx("img",{src:"/asset/trade-option_icon.png",alt:"Options Trading",className:"w-10 h-10 object-contain"})})]})})})]})]}),r.jsx("button",{onClick:()=>c("/wallet"),className:"w-full text-left py-2 px-3 text-gray-300 hover:text-white hover:bg-gray-700/50 rounded",children:"Wallet"}),r.jsx("button",{onClick:()=>c("/support"),className:"w-full text-left py-2 px-3 text-gray-300 hover:text-white hover:bg-gray-700/50 rounded",children:"Support"})]})]})})]})}function iy(){const[t,e]=Or(),[s,n]=f.useState(!1),[i,a]=f.useState(!1),[o,l]=f.useState(null),{user:c,isAuthenticated:d,logout:h}=Ss();console.log(" Navigation Debug - User Data:",{user:c,isAuthenticated:d,firstName:c==null?void 0:c.firstName,lastName:c==null?void 0:c.lastName,username:c==null?void 0:c.username,walletAddress:c==null?void 0:c.walletAddress,email:c==null?void 0:c.email,displayName:c!=null&&c.firstName&&(c!=null&&c.lastName)?`${c.firstName} ${c.lastName}`:c!=null&&c.firstName?c.firstName:c!=null&&c.username?c.username:"Account"});const u=()=>{if(c!=null&&c.firstName&&(c!=null&&c.lastName))return`${c.firstName} ${c.lastName}`;if(c!=null&&c.firstName)return c.firstName;if(c!=null&&c.username&&!(c!=null&&c.username.startsWith("0x"))||c!=null&&c.username)return c.username;const v=(c==null?void 0:c.walletAddress)||(c==null?void 0:c.wallet_address);return v&&v.startsWith("0x")&&v.length>20?`${v.slice(0,6)}...${v.slice(-4)}`:"Account"},m=()=>{if(c!=null&&c.firstName&&(c!=null&&c.lastName))return`${c.firstName} ${c.lastName}`;if(c!=null&&c.firstName)return c.firstName;if(c!=null&&c.username&&!(c!=null&&c.username.startsWith("0x"))||c!=null&&c.username)return c.username;const v=(c==null?void 0:c.walletAddress)||(c==null?void 0:c.wallet_address);return v&&v.startsWith("0x")&&v.length>20?`${v.slice(0,6)}...`:"Account"};f.useEffect(()=>(i?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width=""),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[i]);const y=[{path:"/",label:"Home"},{path:"/market",label:"Market"},{path:"/trade",label:"Trade",hasDropdown:!0,dropdownItems:[{path:"/trade/spot",label:"Spot"},{path:"/trade/options",label:"Options"}]},{path:"/wallet",label:"Wallet"},{path:"/support",label:"Support"}];return f.useEffect(()=>()=>{o&&clearTimeout(o)},[o]),r.jsx("header",{className:"bg-[#34344E] border-b border-gray-700/30",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex items-center justify-between h-16 md:h-16",children:[r.jsx("div",{className:"hidden md:flex items-center",children:r.jsx(lt,{href:"/",children:r.jsx("div",{className:"flex items-center cursor-pointer hover:opacity-80 transition-opacity",children:r.jsx("img",{src:Od,alt:"METACHROME",className:"h-[3rem] md:h-[2.6rem] w-auto"})})})}),r.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:y.map(v=>r.jsx("div",{className:"relative",children:v.hasDropdown?r.jsxs("div",{className:"relative",onMouseEnter:()=>{o&&(clearTimeout(o),l(null)),n(!0)},onMouseLeave:()=>{const g=setTimeout(()=>{n(!1)},300);l(g)},children:[r.jsxs("button",{className:`text-gray-300 hover:text-white px-3 py-2 text-sm font-medium flex items-center ${t.startsWith("/trade")?"text-white":""}`,children:[v.label,r.jsx(gi,{className:"ml-1 h-4 w-4"})]}),s&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 w-80 bg-gray-900/95 backdrop-blur-sm border border-gray-700/50 rounded-xl shadow-2xl z-[60] overflow-hidden",children:[r.jsx(lt,{href:"/trade/spot",children:r.jsx("div",{className:"relative p-4 bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 transition-all duration-300 cursor-pointer group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold text-black mb-1",children:"SPOT"}),r.jsxs("p",{className:"text-sm text-black/80 leading-tight",children:["Buy and sell crypto instantly at",r.jsx("br",{}),"real-time market prices."]})]}),r.jsx("div",{className:"ml-4 flex-shrink-0",children:r.jsx("img",{src:"/asset/trade-spot_icon.png",alt:"Spot Trading",className:"w-12 h-12 object-contain"})})]})})}),r.jsx(lt,{href:"/trade/options",children:r.jsx("div",{className:"relative p-4 bg-gradient-to-r from-cyan-400 to-blue-500 hover:from-cyan-500 hover:to-blue-600 transition-all duration-300 cursor-pointer group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold text-black mb-1",children:"OPTION"}),r.jsxs("p",{className:"text-sm text-black/80 leading-tight",children:["Maximize gains by predicting",r.jsx("br",{}),"market moves in seconds."]})]}),r.jsx("div",{className:"ml-4 flex-shrink-0",children:r.jsx("img",{src:"/asset/trade-option_icon.png",alt:"Options Trading",className:"w-12 h-12 object-contain"})})]})})})]})]}):r.jsx(lt,{href:v.path,children:r.jsxs("span",{className:`text-gray-300 hover:text-white px-3 py-2 text-sm font-medium flex items-center gap-2 ${t===v.path?"text-white":""}`,children:[v.path==="/"&&r.jsx(PA,{className:"w-4 h-4"}),v.label]})})},v.path))}),r.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-300",children:[r.jsx("img",{src:"https://flagcdn.com/w20/us.png",alt:"English",className:"w-5 h-3"}),r.jsx("span",{children:"English"})]}),d?r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs(ST,{children:[r.jsx(CT,{asChild:!0,children:r.jsxs(W,{variant:"ghost",className:"flex items-center space-x-2 text-gray-300 hover:text-white hover:bg-gray-800",children:[r.jsx(qu,{className:"w-5 h-5"}),r.jsx("span",{children:u()}),r.jsx(gi,{className:"w-4 h-4"})]})}),r.jsxs(sy,{align:"end",className:"w-56 bg-gray-800 border-gray-700",children:[r.jsxs(Ga,{onClick:()=>{const v=(c==null?void 0:c.role)==="admin"||(c==null?void 0:c.role)==="super_admin"?"/admin/dashboard":"/dashboard";e(v)},className:"flex items-center w-full px-2 py-2 text-gray-300 hover:text-white hover:bg-gray-700 cursor-pointer",children:[r.jsx(jl,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),r.jsxs(Ga,{onClick:()=>e("/profile"),className:"flex items-center w-full px-2 py-2 text-gray-300 hover:text-white hover:bg-gray-700 cursor-pointer",children:[r.jsx(Qr,{className:"w-4 h-4 mr-2"}),"Profile"]}),r.jsx(ry,{className:"bg-gray-700"}),r.jsxs(Ga,{onClick:()=>h(),className:"flex items-center w-full px-2 py-2 text-gray-300 hover:text-white hover:bg-gray-700 cursor-pointer",children:[r.jsx(Kg,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}):r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(lt,{href:"/login",children:r.jsx(W,{variant:"outline",size:"sm",className:"text-gray-300 border-gray-600 hover:bg-gray-700 hover:text-white",children:"Login"})}),r.jsx(lt,{href:"/signup",children:r.jsx(W,{size:"sm",className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white border-0",children:"Sign Up"})})]})]}),r.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("img",{src:"https://flagcdn.com/w20/us.png",alt:"English",className:"w-5 h-3"})}),d&&r.jsxs("div",{className:"flex items-center space-x-1.5 text-gray-300 bg-gray-700/30 rounded-full px-2 py-1",children:[r.jsx(qu,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs font-medium",children:m()})]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>a(!i),className:"text-gray-300 hover:text-white p-1.5",children:i?r.jsx(Bl,{className:"h-5 w-5"}):r.jsx(AA,{className:"h-5 w-5"})})]})]}),i&&r.jsx("div",{className:"fixed inset-0 z-50 bg-black/70 backdrop-blur-sm overflow-hidden md:hidden",onClick:()=>a(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:9999},children:r.jsx("div",{className:"fixed right-0 top-0 h-full w-64 bg-[#1A1B3A] p-4 overflow-y-auto",onClick:v=>v.stopPropagation(),children:r.jsxs("div",{className:"space-y-1",children:[y.map(v=>r.jsx("div",{children:v.hasDropdown?r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-300 block px-3 py-2 text-base font-medium",children:v.label}),r.jsxs("div",{className:"mx-3 mb-2 space-y-2",children:[r.jsx(lt,{href:"/trade/spot",children:r.jsx("div",{className:"relative p-3 bg-gradient-to-r from-yellow-400 to-yellow-500 rounded-lg cursor-pointer transform transition-transform hover:scale-105",onClick:()=>a(!1),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-base font-bold text-black mb-1",children:"SPOT"}),r.jsxs("p",{className:"text-xs text-black/80 leading-tight",children:["Buy and sell crypto instantly at",r.jsx("br",{}),"real-time market prices."]})]}),r.jsx("div",{className:"ml-3 flex-shrink-0",children:r.jsx("img",{src:"/asset/trade-spot_icon.png",alt:"Spot Trading",className:"w-10 h-10 object-contain"})})]})})}),r.jsx(lt,{href:"/trade/options",children:r.jsx("div",{className:"relative p-3 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-lg cursor-pointer transform transition-transform hover:scale-105",onClick:()=>a(!1),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-base font-bold text-black mb-1",children:"OPTION"}),r.jsxs("p",{className:"text-xs text-black/80 leading-tight",children:["Maximize gains by predicting",r.jsx("br",{}),"market moves in seconds."]})]}),r.jsx("div",{className:"ml-3 flex-shrink-0",children:r.jsx("img",{src:"/asset/trade-option_icon.png",alt:"Options Trading",className:"w-10 h-10 object-contain"})})]})})})]})]}):r.jsx(lt,{href:v.path,children:r.jsx("div",{className:`block px-3 py-2 text-base font-medium hover:text-white hover:bg-gray-800 ${t===v.path?"text-purple-400":"text-gray-300"}`,onClick:()=>a(!1),children:v.label})})},v.path)),r.jsx("div",{className:"pt-4 space-y-2",children:d?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-gray-300 px-3 py-2",children:[r.jsx(qu,{className:"w-4 h-4"}),r.jsx("span",{children:m()})]}),r.jsxs(W,{variant:"outline",className:"w-full text-gray-300 border-gray-700 hover:bg-gray-800 mb-2",onClick:()=>{const v=(c==null?void 0:c.role)==="admin"||(c==null?void 0:c.role)==="super_admin"?"/admin/dashboard":"/dashboard";e(v),a(!1)},children:[r.jsx(jl,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),r.jsx(lt,{href:"/profile",children:r.jsxs(W,{variant:"outline",className:"w-full text-gray-300 border-gray-700 hover:bg-gray-800 mb-2",onClick:()=>a(!1),children:[r.jsx(Qr,{className:"w-4 h-4 mr-2"}),"Profile"]})}),r.jsxs(W,{variant:"outline",className:"w-full text-gray-300 border-gray-700 hover:bg-gray-800",onClick:()=>{h(),a(!1)},children:[r.jsx(Kg,{className:"w-4 h-4 mr-2"}),"Logout"]})]}):r.jsxs("div",{className:"space-y-2",children:[r.jsx(lt,{href:"/login",children:r.jsx(W,{variant:"outline",className:"w-full text-gray-300 border-gray-700 hover:bg-gray-800",onClick:()=>a(!1),children:"Login"})}),r.jsx(lt,{href:"/signup",children:r.jsx(W,{className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white border-0",onClick:()=>a(!1),children:"Sign Up"})})]})})]})})})]})})}function ld(){return r.jsx("footer",{className:"bg-[#181D20] border-t border-gray-600/30 w-full",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"col-span-1 md:col-span-1",children:[r.jsx("div",{className:"flex items-center mb-4",children:r.jsx("img",{src:Od,alt:"METACHROME",className:"h-8 w-auto"})}),r.jsx("p",{className:"text-gray-400 text-sm mb-4 leading-relaxed",children:"We're passionate about creating unforgettable moments. Our platform provides a seamless and transparent trading experience, with a range of exciting crypto and fiat currency options."})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold mb-4",children:"Quick Links"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(lt,{href:"/trade/options",className:"text-gray-400 hover:text-white text-sm",children:"Options Trade"})}),r.jsx("li",{children:r.jsx(lt,{href:"/trade/spot",className:"text-gray-400 hover:text-white text-sm",children:"Spot Trade"})}),r.jsx("li",{children:r.jsx(lt,{href:"/market",className:"text-gray-400 hover:text-white text-sm",children:"Market"})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold mb-4",children:"Company"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(lt,{href:"/",className:"text-gray-400 hover:text-white text-sm",children:"Home"})}),r.jsx("li",{children:r.jsx(lt,{href:"/signup",className:"text-gray-400 hover:text-white text-sm",children:"Sign Up"})}),r.jsx("li",{children:r.jsx(lt,{href:"/support",className:"text-gray-400 hover:text-white text-sm",children:"Support"})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold mb-4",children:"Legal"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(lt,{href:"/trade-policy",className:"text-gray-400 hover:text-white text-sm",children:"Trade Policy"})}),r.jsx("li",{children:r.jsx(lt,{href:"/terms-of-service",className:"text-gray-400 hover:text-white text-sm",children:"Terms of Service"})}),r.jsx("li",{children:r.jsx(lt,{href:"/privacy-policy",className:"text-gray-400 hover:text-white text-sm",children:"Privacy Policy"})})]})]})]}),r.jsxs("div",{className:"border-t border-gray-600/30 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center",children:[r.jsxs("p",{className:"text-gray-500 text-xs mb-4 md:mb-0",children:[" 2025 ",r.jsx("span",{className:"font-bold text-purple-500",children:"Metachrome"}),". All Rights Reserved"]}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),r.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),r.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),r.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]})]})]})})}function C5({children:t}){const e=Wn(),[s]=Or(),[n,i]=f.useState(!1),o=!["/admin/login","/trade/options","/options","/trade/spot","/login","/signup"].includes(s);return f.useEffect(()=>{const l=()=>{const c=typeof window<"u"?window.innerWidth:1024;i(c<1024)};if(l(),typeof window<"u")return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),e||n?r.jsxs("div",{className:"min-h-screen bg-gray-900 overflow-x-hidden max-w-full relative",children:[o&&r.jsx(ny,{}),r.jsx("main",{className:"relative pb-20 overflow-x-hidden max-w-full",children:t}),o&&r.jsx(ld,{}),r.jsx(Lh,{}),r.jsx("div",{id:"mobile-modal-root",className:"relative z-[99999]"})]}):r.jsxs("div",{className:"min-h-screen bg-gray-900",children:[o&&r.jsx(iy,{}),r.jsx("main",{children:t}),o&&r.jsx(ld,{}),r.jsx(Lh,{})]})}const de=f.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ue("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));de.displayName="Card";const nt=f.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ue("flex flex-col space-y-1.5 p-6",t),...e}));nt.displayName="CardHeader";const it=f.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ue("text-2xl font-semibold leading-none tracking-tight",t),...e}));it.displayName="CardTitle";const Rt=f.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ue("text-sm text-muted-foreground",t),...e}));Rt.displayName="CardDescription";const he=f.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ue("p-6 pt-0",t),...e}));he.displayName="CardContent";const T5=f.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ue("flex items-center p-6 pt-0",t),...e}));T5.displayName="CardFooter";const Ee=f.forwardRef(({className:t,type:e,...s},n)=>r.jsx("input",{type:e,className:Ue("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...s}));Ee.displayName="Input";var Gm="Collapsible",[k5]=Zr(Gm),[E5,ay]=k5(Gm),TT=f.forwardRef((t,e)=>{const{__scopeCollapsible:s,open:n,defaultOpen:i,disabled:a,onOpenChange:o,...l}=t,[c,d]=ca({prop:n,defaultProp:i??!1,onChange:o,caller:Gm});return r.jsx(E5,{scope:s,disabled:a,contentId:xn(),open:c,onOpenToggle:f.useCallback(()=>d(h=>!h),[d]),children:r.jsx(We.div,{"data-state":ly(c),"data-disabled":a?"":void 0,...l,ref:e})})});TT.displayName=Gm;var kT="CollapsibleTrigger",ET=f.forwardRef((t,e)=>{const{__scopeCollapsible:s,...n}=t,i=ay(kT,s);return r.jsx(We.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":ly(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...n,ref:e,onClick:we(t.onClick,i.onOpenToggle)})});ET.displayName=kT;var oy="CollapsibleContent",PT=f.forwardRef((t,e)=>{const{forceMount:s,...n}=t,i=ay(oy,t.__scopeCollapsible);return r.jsx(en,{present:s||i.open,children:({present:a})=>r.jsx(P5,{...n,ref:e,present:a})})});PT.displayName=oy;var P5=f.forwardRef((t,e)=>{const{__scopeCollapsible:s,present:n,children:i,...a}=t,o=ay(oy,s),[l,c]=f.useState(n),d=f.useRef(null),h=Nt(e,d),u=f.useRef(0),m=u.current,y=f.useRef(0),v=y.current,g=o.open||l,b=f.useRef(g),x=f.useRef(void 0);return f.useEffect(()=>{const p=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(p)},[]),Ns(()=>{const p=d.current;if(p){x.current=x.current||{transitionDuration:p.style.transitionDuration,animationName:p.style.animationName},p.style.transitionDuration="0s",p.style.animationName="none";const w=p.getBoundingClientRect();u.current=w.height,y.current=w.width,b.current||(p.style.transitionDuration=x.current.transitionDuration,p.style.animationName=x.current.animationName),c(n)}},[o.open,n]),r.jsx(We.div,{"data-state":ly(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...a,ref:h,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...t.style},children:g&&i})});function ly(t){return t?"open":"closed"}var _5=TT;const Uh=_5,Bh=ET,zh=PT,_T="/assets/hero-desktop_1754552987909-1762724043163.jpg",M5="/assets/hero-mobile-1762724043163.jpg";function A5(){const t=Wn(),[,e]=Or(),s=()=>{e("/trade/options")};return t?r.jsx("section",{className:"relative overflow-hidden bg-black",children:r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:M5,alt:"METACHROME Hero Banner",className:"w-full h-auto object-cover",style:{maxHeight:"280px"},onError:n=>{n.currentTarget.style.display="none",n.currentTarget.parentElement.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",n.currentTarget.parentElement.style.minHeight="280px"}}),r.jsx("div",{className:"absolute bottom-6 left-4 z-20",children:r.jsx(W,{onClick:s,className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white px-6 py-2.5 rounded-lg text-base font-semibold border-0 shadow-lg",children:"Start Trading"})})]})}):r.jsx("section",{className:"relative overflow-hidden bg-black py-6",children:r.jsx("div",{className:"w-full px-4",children:r.jsxs("div",{className:"relative max-w-6xl mx-auto",children:[r.jsx("img",{src:_T,alt:"METACHROME Hero Banner - We believe in the future",className:"w-full h-auto object-cover rounded-lg",style:{maxHeight:"400px",objectFit:"cover"}}),r.jsx("div",{className:"absolute bottom-20 left-8 z-20",children:r.jsx(W,{onClick:s,className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white px-8 py-3 rounded-lg text-lg font-semibold border-0 shadow-lg",children:"Start Trading"})})]})})})}const aw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAA0rSURBVHjazJp7sF1Vfcc/37X3vUnIQwiJSQhgAk0JkVfk1YktOiQURAnCtELt0FLRARVxSnHGaouMpfVREBRHqPgotGrRPsTSSRFiNUQGbfOoIS0Q0mDepoGQB5ck9+z17R9r7332edybS/tP98yac87ee+29vr/f9/dcR5e9YwOjHe7+LmEEAhOwBArVOA7pXBQWAvMgTAemABHYi70D/Cx4FfYqXOyRDY5Un2CEwUZdK1HXmeaRjw2E04JrMAkEEkhnIV2LdA5wBmJymtPnpWo8AO8SYR2KK4weBF4AIYzdvlU94nxNQNw7tX6qADLJVxldL1gE5NgQ0n0mkhal3kfYIGP8euPFMosDfMR4ueCLQo/350Na1UhaCb2r9UjyLM/7SuDfQN8QXCCXIEo6YCMbOSIXUA65IMQi0ScmKolYzZskcznwqGEZcGbJ3lF44pGAuAOLq4W1r88GHgK+IzhLdqK+IqJceEyLrwaxSOdiATECsQRY3VfaA4lLwkFwieApwZ2IiW3BNnXRCyavT7iLVvW9BrhI6Ovg2W6QV/WP2KDOyLrsFKKbfKt/lrPHAzcDbwF+C9hgG2kkDYnQDaKkTz2wrwd/F+Jsaso0RiVxR0JFp1igWHRoR26lc/W1UivEBhVLD1a93z5b8EPBhSrxqqRur7G7S1Vu80vow8DdfS3fyRVXcmwItc1Xa3SXKJUut8cOm7Q+TvD3wG8aHqvvscv3u6KWGxSqtADga8Cfk5uWr6ZPbLtSpUWr5Dqj+PtOMOpryPXZGoxeJ/xN0JXgJ9IyhNz2rnmFzlQqM7IXAV8Fh65oWGpDXeBM732jHZ1RgqZyPVI4ZprQX4HfbLQtdEWZvIOXCchU7AcEA72OoJ80Gxc1FgCjR98jPOENwL3AUpWWlAgQyE6Z94FKCxWgu4Uvqg0QE+wuQ6R2nSKm37g2RDnNOe30idx6+1zGDQaeW3+g43r3oOuzY9TPBtmngIewn1RDK1r6tvXJ82BwXBLwY3bbVtr25BHibbck07c5J03gtjvmMWlyzs7th7jpPf9BjB6j7XQnEo2XSli8iHW6pR0p+gTydhAz4FuSG2x4LjeMTirzIKNRaHTs9EH+8PaTmTQ5haksQHCBizECabC0yrvqIwqkY4GPSfqQJYgmJBARuVisWFxMBaz2+Y2YUaRzoeN65zh6SuATf34Kx04fpOl8euNK75j/xqO49bO/zOXvmsFASPEpxAKKZvypRryaWMyo1tjUyO9WNlFpoPJitXGrTK3d35Bfd8wAN982j1nHjydGc/hQZPyELGk2FmgEak2dNshlV8/m4itmkWXipFMm8ty6vTz79P4yJFTOpSKcIGga8D4It8siL6U7X/a7RMTRhGb6UGaynX699xg3PuPDt85j/hlTAHjkW9s4dsY43rxkeoIZYw+QEMSSy2dyxTUncsy0pMHh4cg/PLCFTc/sQzE2jaP9KVAURtcBn3PQUF6q7FI5jpNLELVG2skzmHHjAjOPP6oHxPDhyNU3zOWNC48GYNXK3fzNvc/zwU+cWi8hxAI3gMw9ZTK/fePJLCjnADy9ag/fuGcjP3/+QEeG0AlFdW0kwhzkUw2rchUFwcWbRCxdH+3qrEwfhJgzfxJXXDuXcy6YPqqRrl+1h89/fF1ywWpUd1UuBSy95g1cdcPJ9Zwdm4d4+MEXeGLZzr6xpJPOKh2BkogVlkS0Ls9iMVFuLWoDKL1VFCji0jYWnHk0p507dVQQG9bt5c4/WEs8VHS+3KAiosJkubjw8uMAaA1HHv+7rXz7vo0cPliMXAOpkSRXPxBSABeXBLQ8l+P8UMS5baPqdLuqjNyxptzqFbt46vs7GRyXJb4KipZZ++P/pvXqcE0JNbxCcMQ2HoZvff45Fl08k7+973m2v/BKvwqv84jteKZSI6nULsBaEO2FuYpigWLRkXVWgGThMq1Vw043P7OPnz66/YglZzPdDjHWNrJ6+Q5WL99xZADNGBnb+WntwSRkTUbFrDw4zg0xNqyqnYIYE0yPx5JcepQjvb2RWTe81rijMmbNmdRfEBIH9h1m9/ZXiY0AqmZ+p8oMAuDxAR+TK3pm7Rbr/Em1CKp8JuVB1N5M8TVEadL91Zyb7jibBedPG3XOw/c9x8N/saF/mq9QyigigqI8MVf0hDrwlRSqPFiT53KnpMcCpDmnCWQs1UqWqfcdVYlNkx0Rogdy7FZbI/TEkD4V29g10pzTAPKVj65m/nnT+sbXEGDfS4fZ+O97+r/DidrNQi9AzGW9VPUPJENMCaFiVzxtmIQLd/w+okbcCWTfroP89JGtY6Jkd+0oOus6J8N6NZfZokL1YlV1+WI7A1UtifR74eJZHD19PFkeaikWhXni25vZ9LM9/YvEWDdbmDFnEifMn8L6lbt49UBrjNlwuwuj4OTvUmQYttmXE/WMrATTruNIiJ0leXHIFK30pBPmT+GE+VN6Xnb2rx/H1z+6hrXLdzZ7faV2VGvo/V84l9nzJrNj4wG+85n1rH9i12hpXLtAMRBUC9kpQL5itCsohqcVwx5FUQ2K9BmiUBFQIdYs28nyr21i95Yhdjx/oGNs37Cf4YMFEybnvP+eczj3ktmo6OpjxfZ4cesQALNOnsRNXz6f3/v0QqbOmNBxT+dQor4rgQRspaBI2AbhWb1nwQ/IhlvLMRe2e0ZlUIzu7DN0NwnqpNic987ZXPPp08kHE92+8vtrOO0t0/mVdx7P7q1D/PGSf6njQsjEhb8zl7ffOI+jpqTWwPDBgke+uIHlD2xi+GAxsmJCmUoQcMhw0H1xYPDW7Oyp15K1mC/4NRUpPZaTNpIUQimFNJJ0KiomaQmx/T8PsHn9Xt506UxCJs66aCbTT5xIPhgY2jvMDx/4efm89NxNa15m5UNbeP2cicz6pUlkeeDURdM4f+nxbFr7Mi/vONR+p6t2k9rNU2WggEN2m7N8bVARUNQKtQLBgRBFiKGkVoaKQCgqiqVRXU9zy/NRrH/8Re688icM7R0mZGL8pLyzRG3QV1EMvTTMl29YzV3v/gnbntmfyuTjJ/DB+8/lpDOPSTSPSu+IiVKqhShM2A9hbVQghEKEVvh+FrW6e2HE8nesAFZ2k8CG+rrKewKb1+7ns5c9xd5fHOrwOMHqWERzPPfkS3zqHT/mmx97muGDBc+sfJFd/zWUtFCNigkIYpa8lvWo0TYUyMvFRdC9wfF+l+1PHDo7IxppF8jNbA4kdm88yN2/8a9c/7WFzJw3kdahCK0Epu6Qdj0vHoaVf72NNf+0i4P7WxQtI3emlA4loCCwLIU7IGAFsvOmXEfWMrK2Cb1b1uRQd9UrVjbthPZ3Grw1deNfiKGXW+zcMEQ2IFZ/7xdsXru/wXB12F3bFsTwqxEX5TsI9RuCErXSFp+wwgqH7E+dZRQDGbpx9kqy4VhJ6EYi91S5jN2dZI2wu6Xu76415J7uqMeYZnZ2MF1VhQFiCMQsvDUOZj8q8ozh8QPkyYDKQGketP0BoVM7Wph2n8a6uxrbrjVTteatMifT2Nbvftspavabq1RD/4jCj1zSygrkIqTiJmXt+2TeC35CdPQhOjLOdkOieU3NkibFon6N6REEUtsmpGKurgTbrSinHeWtSNc7BKysjCWBHIUOrQs9CXwS+7a65G0srlnbdLRR+6TYPZ0c988K3dUxsYQb+x+xpJYDEHRLDGGHg3CWQFiBHGXJG5Dy/3LunwjOJPqK5iKau7K98uwjeR+hGR+7qKTkql0yKVIuPlk7MdOfOeMhZyJmImaBmAUcRO4s4Ex1YV+2hKLgKuRlMosrioZ6k7R7H6D/dnZ/FqmHnpJTt6aMm3VVG5TCRYCYc1fM9PGYUYIQMW+DyWOeEWNq/6R6pC5rhyUtFf6e7MXE9OrQ0EJvPBlB/BrdYVV2bIlgE0OSmjPhDIpcX4g5Nxc1CCgaQJyJvMiztP8RgQKyVtX4AgqGgIuQ75e5rvJgoYtWr80d9QHhtlG7MuqkiRhz3RJz31XkosihyBsaySCGBCZvDSYZZ1E4lNsFhaEFGYICy/G9ClpN9KcEU1KTojLII++YjBYuKifhspWQ/hVikLbEjOtixmMxh2IAigGRtFKCCSnax0zkrcFk6I5JGwgylSlHCzKBWxlEfylIy2S+JLgYo6CUwv/vj6R9G8iqPrsOIf6SwEcI7I8ZxFwUA6bSStJEApG8mchbA+Xii6QmBye1tsqd0oKywBeO3iTxNswFgk9iFgVroG3ueg0QqoCfFhPNK4Jlgj8CPZtyntLYs0rytOlUOoEyk0oacYBYpJ0lB7VdniAfptHrKjUlr5D1VuwzBB/CLAGdqJEah+oyl9qj6TB4I/DdAPcattDIx2gmyaExsjaI6i9XeZGrNrpqNFtDIUKIIUXbcmKdVJqfCd4HjAOfAboU+FVgRvk/rfHAQGlCh4EhwT5gi+AHmH8GbRAU0aQ+Qenm5UZp28iy3ajpKm2U8e3/wvH/P8f/DACMQ7FL/FtdXwAAAABJRU5ErkJggg==",ow="/assets/new-metachrome-card-1762724043163.png",Vh="/assets/FAQ_image-2_1755414462649-1762724043163.png",D5="/assets/featureimage01_1754552987907-1762724043163.png",R5="/assets/featureimage02_1754552987908-1762724043163.png",O5="/assets/featureimage03_1754552987909-1762724043163.png",lw="/assets/emailsb_1754552987905-1762724043163.png",cy=()=>{const[t,e]=f.useState([]),[s,n]=f.useState(!0),[i,a]=f.useState(null),o=async()=>{try{n(!0),a(null),console.log(" Fetching from CoinMarketCap via server proxy...");const d=await fetch("/api/market-data",{headers:{Accept:"application/json"},signal:AbortSignal.timeout(15e3)});if(!d.ok)throw new Error(`Server API failed: ${d.status} ${d.statusText}`);const h=await d.json();if(h.error&&h.fallback){console.log(" Server returned fallback data due to CoinMarketCap API error"),e(h.fallback),a("Using cached data");return}console.log(" CoinMarketCap data received via server proxy"),e(h),a(null)}catch(d){console.error(" Server proxy failed, trying direct CoinGecko fallback:",d);try{console.log(" Fallback: Fetching from CoinGecko API...");const h=await fetch("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=bitcoin,ethereum,binancecoin,solana,cardano,ripple,dogecoin,polygon,avalanche-2,chainlink,litecoin,polkadot,uniswap,shiba-inu&order=market_cap_desc&per_page=15&page=1&sparkline=false&price_change_percentage=24h",{headers:{Accept:"application/json"},signal:AbortSignal.timeout(1e4)});if(!h.ok)throw new Error(`CoinGecko API failed: ${h.status} ${h.statusText}`);const u=await h.json();console.log(" CoinGecko fallback data received");const m=u.map(y=>{var v,g,b;return{id:y.id,symbol:`${y.symbol.toUpperCase()}/USDT`,name:y.name,price:`$${y.current_price.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:y.current_price<1?6:2})}`,change:`${((v=y.price_change_percentage_24h)==null?void 0:v.toFixed(2))||"0.00"}%`,high:`$${((g=y.high_24h)==null?void 0:g.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:y.high_24h<1?6:2}))||"N/A"}`,low:`$${((b=y.low_24h)==null?void 0:b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:y.low_24h<1?6:2}))||"N/A"}`,isPositive:(y.price_change_percentage_24h||0)>=0,marketCap:y.market_cap,volume:y.total_volume,image:y.image,coinGeckoId:y.id,rawPrice:y.current_price,rawChange:y.price_change_percentage_24h||0}});e(m),a("Using CoinGecko fallback"),console.log(" CoinGecko fallback data processed successfully")}catch(h){console.error(" All crypto data sources failed:",h),a("Failed to fetch"),console.log(" Using enhanced fallback data..."),e([{id:"bitcoin",symbol:"BTC/USDT",name:"Bitcoin",price:"$43,250.50",change:"+2.45%",high:"$44,100",low:"$42,800",isPositive:!0,marketCap:85e10,volume:25e9,image:"https://cryptoicons.org/api/icon/btc/200",coinGeckoId:"bitcoin",rawPrice:43250.5,rawChange:2.45},{id:"ethereum",symbol:"ETH/USDT",name:"Ethereum",price:"$2,650.75",change:"-1.23%",high:"$2,720",low:"$2,580",isPositive:!1,marketCap:32e10,volume:15e9,image:"https://cryptoicons.org/api/icon/eth/200",coinGeckoId:"ethereum",rawPrice:2650.75,rawChange:-1.23},{id:"binancecoin",symbol:"BNB/USDT",name:"BNB",price:"$315.20",change:"+3.67%",high:"$325",low:"$305",isPositive:!0,marketCap:5e10,volume:2e9,image:"https://cryptoicons.org/api/icon/bnb/200",coinGeckoId:"binancecoin",rawPrice:315.2,rawChange:3.67},{id:"solana",symbol:"SOL/USDT",name:"Solana",price:"$98.45",change:"+5.12%",high:"$102",low:"$94",isPositive:!0,marketCap:45e9,volume:3e9,image:"https://cryptoicons.org/api/icon/sol/200",coinGeckoId:"solana",rawPrice:98.45,rawChange:5.12},{id:"cardano",symbol:"ADA/USDT",name:"Cardano",price:"$0.485",change:"-2.34%",high:"$0.52",low:"$0.47",isPositive:!1,marketCap:15e9,volume:8e8,image:"https://cryptoicons.org/api/icon/ada/200",coinGeckoId:"cardano",rawPrice:.485,rawChange:-2.34},{id:"ripple",symbol:"XRP/USDT",name:"XRP",price:"$0.6234",change:"+4.12%",high:"$0.65",low:"$0.59",isPositive:!0,marketCap:35e9,volume:15e8,image:"https://cryptoicons.org/api/icon/xrp/200",coinGeckoId:"ripple",rawPrice:.6234,rawChange:4.12},{id:"dogecoin",symbol:"DOGE/USDT",name:"Dogecoin",price:"$0.0823",change:"+6.78%",high:"$0.087",low:"$0.076",isPositive:!0,marketCap:12e9,volume:9e8,image:"https://cryptoicons.org/api/icon/doge/200",coinGeckoId:"dogecoin",rawPrice:.0823,rawChange:6.78},{id:"polygon",symbol:"POL/USDT",name:"Polygon",price:"$0.8945",change:"+3.21%",high:"$0.92",low:"$0.86",isPositive:!0,marketCap:85e8,volume:65e7,image:"https://cryptoicons.org/api/icon/pol/200",coinGeckoId:"polygon",rawPrice:.8945,rawChange:3.21},{id:"avalanche-2",symbol:"AVAX/USDT",name:"Avalanche",price:"$36.78",change:"-1.45%",high:"$38.20",low:"$35.90",isPositive:!1,marketCap:14e9,volume:75e7,image:"https://cryptoicons.org/api/icon/avax/200",coinGeckoId:"avalanche-2",rawPrice:36.78,rawChange:-1.45},{id:"chainlink",symbol:"LINK/USDT",name:"Chainlink",price:"$14.56",change:"+2.89%",high:"$15.10",low:"$14.20",isPositive:!0,marketCap:88e8,volume:42e7,image:"https://cryptoicons.org/api/icon/link/200",coinGeckoId:"chainlink",rawPrice:14.56,rawChange:2.89},{id:"litecoin",symbol:"LTC/USDT",name:"Litecoin",price:"$73.45",change:"+1.67%",high:"$75.20",low:"$71.80",isPositive:!0,marketCap:54e8,volume:38e7,image:"https://cryptoicons.org/api/icon/ltc/200",coinGeckoId:"litecoin",rawPrice:73.45,rawChange:1.67},{id:"polkadot",symbol:"DOT/USDT",name:"Polkadot",price:"$5.89",change:"-3.12%",high:"$6.15",low:"$5.75",isPositive:!1,marketCap:72e8,volume:29e7,image:"https://cryptoicons.org/api/icon/dot/200",coinGeckoId:"polkadot",rawPrice:5.89,rawChange:-3.12},{id:"uniswap",symbol:"UNI/USDT",name:"Uniswap",price:"$6.78",change:"+4.56%",high:"$7.05",low:"$6.45",isPositive:!0,marketCap:51e8,volume:34e7,image:"https://cryptoicons.org/api/icon/uni/200",coinGeckoId:"uniswap",rawPrice:6.78,rawChange:4.56},{id:"shiba-inu",symbol:"SHIB/USDT",name:"Shiba Inu",price:"$0.000009234",change:"+8.92%",high:"$0.000009850",low:"$0.000008650",isPositive:!0,marketCap:54e8,volume:28e7,image:"https://cryptoicons.org/api/icon/shib/200",coinGeckoId:"shiba-inu",rawPrice:9234e-9,rawChange:8.92}])}}finally{n(!1)}};return f.useEffect(()=>{o();const d=setInterval(()=>{o()},i?3e4:6e4);return()=>clearInterval(d)},[i]),{cryptoData:t,loading:s,error:i,refetch:o,retry:()=>{console.log(" Manual retry triggered"),o()},forceRefresh:async()=>{try{console.log(" Force refreshing data from server..."),n(!0),await fetch("/api/market-data/refresh",{method:"POST"}),await o()}catch(d){console.error(" Force refresh failed:",d),o()}}}};function I5(){const[t,e]=f.useState(null),[s,n]=f.useState(""),[,i]=Or(),a=Wn(),{cryptoData:o,loading:l,error:c,retry:d}=cy(),[h,u]=f.useState([{symbol:"BTC",price:"$43,250",change:"+2.34%",color:"bg-orange-500"},{symbol:"ETH",price:"$2,650",change:"+1.89%",color:"bg-blue-500"},{symbol:"BNB",price:"$315",change:"+0.89%",color:"bg-yellow-500"},{symbol:"SOL",price:"$245",change:"+3.45%",color:"bg-purple-500"}]),m=async()=>{try{const x=await fetch("/api/market-data/top-gainers");if(x.ok){const p=await x.json();u(p),console.log(" Top gainers data updated from CoinMarketCap")}}catch(x){console.log(" Using fallback top gainers data:",x)}};f.useEffect(()=>{m();const x=setInterval(m,12e4);return()=>clearInterval(x)},[]);const y=[{icon:D5,title:"Fast Execution",description:"Experience blazing-fast trade performance and experience."},{icon:R5,title:"Secure Wallets",description:"Your assets are protected with top-level security protocols."},{icon:O5,title:"Real-Time Updates",description:"Stay updated with real-time charts and market data."}],v=[{title:"Create Your Account",description:"Join in seconds, secure, and built for all traders."},{title:"Verify & Activate",description:"Unlock full access with multi-layered protection."},{title:"Deposit / Buy Crypto",description:"Top up with flexible options, ready to deploy instantly."},{title:"Trade",description:"Experience deep liquidity, real-time insights, and refined execution."}],g=[{question:"What products does METACHROME Ecosystem include?",answer:"Our ecosystem includes spot trading, futures, options, and advanced trading tools with MetaMask integration."},{question:"Why is it better to trade cryptocurrencies on METACHROME?",answer:"Advanced trading features with competitive fees, superior execution, and admin-controlled outcomes."},{question:"Can I buy cryptocurrency with a credit card?",answer:"Yes, we support multiple payment methods including credit cards and crypto wallets."},{question:"How to buy cryptocurrency on METACHROME?",answer:"Connect your MetaMask wallet and start trading with our intuitive interface."},{question:"How to Complete Identity Verification?",answer:"Upload required documents through our secure verification system for enhanced features."}],b=x=>{x.preventDefault(),console.log("Newsletter signup:",s),n("")};return a?r.jsxs("div",{className:"min-h-screen bg-[#0D0B1F] text-white",children:[r.jsx(A5,{}),r.jsx("section",{className:"bg-gradient-to-r from-blue-600/20 to-blue-500/30 border-y border-blue-500/30 relative overflow-hidden",style:{height:"56px"},children:r.jsx("div",{className:"px-4 h-full",children:r.jsxs("div",{className:"flex items-center h-full gap-2",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("img",{src:aw,alt:"Announcement",className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[r.jsx("style",{children:`
                  @keyframes mobile-scroll-fast {
                    0% {
                      transform: translate3d(0, 0, 0);
                      -webkit-transform: translate3d(0, 0, 0);
                    }
                    100% {
                      transform: translate3d(-50%, 0, 0);
                      -webkit-transform: translate3d(-50%, 0, 0);
                    }
                  }
                  @-webkit-keyframes mobile-scroll-fast {
                    0% { -webkit-transform: translate3d(0, 0, 0); }
                    100% { -webkit-transform: translate3d(-50%, 0, 0); }
                  }
                  .mobile-ticker-wrapper {
                    display: inline-flex;
                    animation: mobile-scroll-fast 23s linear infinite;
                    -webkit-animation: mobile-scroll-fast 23s linear infinite;
                    will-change: transform;
                    backface-visibility: hidden;
                    -webkit-backface-visibility: hidden;
                  }
                  .mobile-ticker-item {
                    flex-shrink: 0;
                    padding-right: 3rem;
                    white-space: nowrap;
                    display: inline-block;
                  }
                `}),r.jsxs("div",{className:"mobile-ticker-wrapper",children:[r.jsx("div",{className:"mobile-ticker-item text-white text-sm font-medium",children:"Metachrome introduces seamless trading built for speed and precision    Crypto market cap expands almost 5% in 24 hours    Bitcoin surges past key resistance traders eye the next breakout    Ethereum momentum builds smart money is already in    Market opportunities don't wait execute faster with Metachrome"}),r.jsx("div",{className:"mobile-ticker-item text-white text-sm font-medium",children:"Metachrome introduces seamless trading built for speed and precision    Crypto market cap expands almost 5% in 24 hours    Bitcoin surges past key resistance traders eye the next breakout    Ethereum momentum builds smart money is already in    Market opportunities don't wait execute faster with Metachrome"})]})]})]})})}),r.jsxs("section",{className:"px-4 py-4",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Currency List"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Real-time market data  Updates every minute"}),l&&r.jsx("p",{className:"text-blue-400 text-sm mt-2",children:"Loading real-time data..."}),c&&r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("p",{className:"text-yellow-400 text-sm",children:"Using cached data  Real-time updates temporarily unavailable"}),r.jsx("button",{onClick:d,className:"text-blue-400 text-sm underline hover:text-blue-300",children:"Retry"})]})]}),r.jsx(de,{className:"bg-[#1a1340]/80 border-purple-800/30 backdrop-blur-sm",children:r.jsx(he,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-purple-800/30",children:[r.jsx("th",{className:"text-left p-3 font-medium text-gray-400 text-xs",children:"Name"}),r.jsx("th",{className:"text-left p-3 font-medium text-gray-400 text-xs",children:"Price"}),r.jsx("th",{className:"text-left p-3 font-medium text-gray-400 text-xs",children:"24h"})]})}),r.jsx("tbody",{children:l?Array.from({length:5}).map((x,p)=>r.jsxs("tr",{className:"border-b border-purple-800/20",children:[r.jsx("td",{className:"p-3",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-6 h-6 bg-gray-700 rounded-full animate-pulse"}),r.jsxs("div",{children:[r.jsx("div",{className:"h-3 bg-gray-700 rounded animate-pulse mb-1 w-12"}),r.jsx("div",{className:"h-2 bg-gray-700 rounded animate-pulse w-8"})]})]})}),r.jsx("td",{className:"p-3",children:r.jsx("div",{className:"h-3 bg-gray-700 rounded animate-pulse w-16"})}),r.jsx("td",{className:"p-3",children:r.jsx("div",{className:"h-3 bg-gray-700 rounded animate-pulse w-10"})})]},p)):o.slice(0,12).map(x=>r.jsxs("tr",{className:"border-b border-purple-800/20 hover:bg-purple-900/20 transition-colors",children:[r.jsx("td",{className:"p-3",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gradient-to-br from-purple-600/20 to-blue-600/20 flex items-center justify-center border border-purple-500/30",children:[r.jsx("img",{src:x.image||`https://cryptoicons.org/api/icon/${x.symbol.split("/")[0].toLowerCase()}/200`,alt:x.name,className:"w-6 h-6 object-contain",onError:p=>{const w=p.currentTarget;w.style.display="none";const j=w.nextElementSibling;j&&(j.style.display="flex")}}),r.jsx("span",{className:"text-white font-bold text-xs hidden",children:x.symbol.split("/")[0].charAt(0)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-white text-sm",children:x.symbol}),r.jsx("div",{className:"text-xs text-gray-400",children:x.name})]})]})}),r.jsx("td",{className:"p-3 text-white font-medium text-sm",children:x.price}),r.jsx("td",{className:"p-3",children:r.jsxs("div",{className:`flex items-center space-x-1 ${x.isPositive?"text-green-400":"text-red-400"}`,children:[x.isPositive?r.jsx(ur,{className:"w-3 h-3"}):r.jsx(rd,{className:"w-3 h-3"}),r.jsx("span",{className:"font-medium text-xs",children:x.change})]})})]},x.symbol))})]})})})})]}),r.jsxs("section",{className:"px-4 py-8",children:[r.jsx("div",{className:"mb-6",children:r.jsx("h2",{className:"text-2xl font-bold text-white mb-4 text-left",children:"Top Gainers"})}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:h.map(x=>r.jsx(de,{className:"bg-[#1E1E2E] border-[#2A2A3E] backdrop-blur-sm hover:bg-[#252537] transition-all duration-300 rounded-xl",children:r.jsxs(he,{className:"p-4",children:[r.jsx("div",{className:"flex items-center mb-4",children:r.jsx("div",{className:`w-8 h-8 ${x.color} rounded-full flex items-center justify-center`,children:r.jsx("span",{className:"text-white font-bold text-xs",children:x.symbol})})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-white font-bold text-sm",children:x.symbol}),r.jsx("span",{className:"text-gray-400 text-xs",children:x.price.replace("$","")})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("svg",{className:"w-3 h-3 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-green-400 font-bold text-sm",children:x.change})]})]})]})},x.symbol))})]}),r.jsxs("section",{className:"px-4 py-8",children:[r.jsx("div",{className:"mb-8 text-left",children:r.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Metachrome Features"})}),r.jsx("div",{className:"space-y-6",children:y.map((x,p)=>r.jsx(de,{className:"bg-[#1B1B2F] border-[#3B82F6]/30 backdrop-blur-sm hover:border-[#3B82F6]/60 transition-all duration-300 rounded-3xl",children:r.jsxs(he,{className:"p-6 text-center",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("img",{src:x.icon,alt:x.title,className:"w-32 h-32 object-contain"})}),r.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:x.title}),r.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:x.description})]})},p))})]}),r.jsx("section",{className:"bg-black py-12",children:r.jsx("div",{className:"px-4",children:r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"A New Era Begins"}),r.jsx("p",{className:"text-gray-400 mb-8 text-base leading-relaxed",children:"Explore the future of tradingsmart, secure, and accessible for everyone."}),r.jsx("div",{className:"space-y-6",children:v.map((x,p)=>r.jsxs("div",{className:"flex items-start space-x-3 relative",children:[r.jsxs("div",{className:"relative flex flex-col items-center",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-gray-400 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0 bg-black z-10",children:p+1}),p<v.length-1&&r.jsx("div",{className:"w-0.5 h-12 bg-gray-600 mt-3"})]}),r.jsxs("div",{className:"flex-1 pt-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:x.title}),r.jsx("p",{className:"text-gray-400 leading-relaxed text-sm",children:x.description})]})]},p))})]}),r.jsx("div",{className:"flex justify-center",children:r.jsx("img",{src:ow,alt:"METACHROME",className:"w-auto h-auto max-w-full"})})]})})}),r.jsx("section",{className:"px-4 py-8",children:r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Frequently Asked Questions"}),r.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed text-base",children:"Begin your trading journey and stand a chance to earn exciting rewards worth up to $300 through our Mystery Box promotion."}),r.jsx("div",{className:"flex justify-center mb-8",children:r.jsx("div",{className:"w-64 h-64",children:r.jsx("img",{src:Vh,alt:"Crypto FAQ",className:"w-full h-full object-contain"})})})]}),r.jsx("div",{className:"space-y-4",children:g.map((x,p)=>r.jsxs(Uh,{open:t===p,onOpenChange:()=>e(t===p?null:p),children:[r.jsx(Bh,{asChild:!0,children:r.jsx(de,{className:`bg-black border-2 transition-all duration-300 cursor-pointer ${t===p?"border-purple-500 shadow-lg shadow-purple-500/50":"border-gray-700 hover:border-purple-400"}`,children:r.jsx(he,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:`font-medium pr-3 text-sm transition-colors duration-300 ${t===p?"text-purple-400":"text-white"}`,children:x.question}),r.jsx(gi,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 flex-shrink-0 ${t===p?"rotate-180 text-purple-400":""}`})]})})})}),r.jsx(zh,{children:r.jsx("div",{className:"px-4 pb-4 bg-black border-l-2 border-r-2 border-b-2 border-gray-700 rounded-b-lg",children:r.jsx("p",{className:"text-gray-400 text-sm",children:x.answer})})})]},p))})]})}),r.jsx("section",{className:"bg-black py-8",children:r.jsx("div",{className:"px-4",children:r.jsx(de,{className:"bg-gray-800 border-0 rounded-2xl shadow-2xl",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"space-y-6 text-center",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"relative",children:r.jsx("img",{src:lw,alt:"Newsletter Chart",className:"w-full max-w-xs h-auto object-contain"})})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-xs mb-2 uppercase tracking-wider",children:"Get Started For Free"}),r.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 leading-tight",children:["Subscribe our newsletter &",r.jsx("br",{}),"Stay Update Every Day"]}),r.jsxs("form",{onSubmit:b,className:"flex flex-col space-y-3",children:[r.jsx(Ee,{type:"email",placeholder:"Enter you email",value:s,onChange:x=>n(x.target.value),className:"bg-black border-gray-600 text-white placeholder-gray-500 focus:ring-purple-500 focus:border-purple-500 h-10 rounded-lg"}),r.jsx(W,{type:"submit",className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-2 h-10 font-semibold rounded-lg",children:"Submit"})]})]})]})})})})})]}):r.jsxs("div",{className:"min-h-screen bg-[#0D0B1F] text-white",children:[r.jsx("section",{className:"relative overflow-hidden bg-black py-6",children:r.jsx("div",{className:"w-full px-4",children:r.jsxs("div",{className:"relative max-w-6xl mx-auto",children:[r.jsx("img",{src:_T,alt:"METACHROME Hero Banner - We believe in the future",className:"w-full h-auto object-cover rounded-lg",style:{maxHeight:"400px",objectFit:"cover"}}),r.jsx("div",{className:"absolute top-80 left-40 z-20",children:r.jsx(W,{onClick:()=>i("/trade/options"),className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white px-8 py-4 rounded-lg text-lg font-semibold border-0 shadow-lg transform hover:scale-105 transition-all duration-300",children:"Start Trading"})})]})})}),r.jsx("section",{className:"bg-gradient-to-r from-blue-600/20 to-blue-500/20 border-y border-blue-500/30 relative overflow-hidden",style:{height:"60px"},children:r.jsx("div",{className:"max-w-7xl mx-auto px-6 h-full",children:r.jsxs("div",{className:"flex items-center h-full gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("img",{src:aw,alt:"Announcement",className:"w-6 h-6"})}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsx("div",{className:"whitespace-nowrap animate-scroll",children:r.jsx("span",{className:"text-white text-base font-medium",children:"Metachrome introduces seamless trading built for speed and precision    Crypto market cap expands almost 5% in 24 hours    Bitcoin surges past key resistance traders eye the next breakout    Ethereum momentum builds smart money is already in    Market opportunities don't wait execute faster with Metachrome    Metachrome introduces seamless trading built for speed and precision    Crypto market cap expands almost 5% in 24 hours    Bitcoin surges past key resistance traders eye the next breakout    Ethereum momentum builds smart money is already in"})})})]})})}),r.jsxs("section",{className:"max-w-7xl mx-auto px-6 py-16",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Currency List"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Real-time market data  Updates every minute"}),l&&r.jsx("p",{className:"text-blue-400 text-sm mt-2",children:"Loading real-time data..."}),c&&r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("p",{className:"text-yellow-400 text-sm",children:"Using cached data  Real-time updates temporarily unavailable"}),r.jsx("button",{onClick:d,className:"text-blue-400 text-sm underline hover:text-blue-300",children:"Retry"})]})]}),r.jsx(de,{className:"bg-[#1a1340]/80 border-purple-800/30 backdrop-blur-sm",children:r.jsx(he,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-purple-800/30",children:[r.jsx("th",{className:"text-left p-6 font-medium text-gray-400 text-sm",children:"Name"}),r.jsx("th",{className:"text-left p-6 font-medium text-gray-400 text-sm",children:"Last Price"}),r.jsx("th",{className:"text-left p-6 font-medium text-gray-400 text-sm",children:"24h Change"}),r.jsx("th",{className:"text-left p-6 font-medium text-gray-400 text-sm",children:"24h High"}),r.jsx("th",{className:"text-left p-6 font-medium text-gray-400 text-sm",children:"24h Low"})]})}),r.jsx("tbody",{children:l?Array.from({length:5}).map((x,p)=>r.jsxs("tr",{className:"border-b border-purple-800/20",children:[r.jsx("td",{className:"p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-full animate-pulse"}),r.jsxs("div",{children:[r.jsx("div",{className:"h-4 bg-gray-700 rounded animate-pulse mb-1 w-20"}),r.jsx("div",{className:"h-3 bg-gray-700 rounded animate-pulse w-16"})]})]})}),r.jsx("td",{className:"p-6",children:r.jsx("div",{className:"h-4 bg-gray-700 rounded animate-pulse w-24"})}),r.jsx("td",{className:"p-6",children:r.jsx("div",{className:"h-4 bg-gray-700 rounded animate-pulse w-16"})}),r.jsx("td",{className:"p-6",children:r.jsx("div",{className:"h-4 bg-gray-700 rounded animate-pulse w-20"})}),r.jsx("td",{className:"p-6",children:r.jsx("div",{className:"h-4 bg-gray-700 rounded animate-pulse w-20"})})]},p)):o.map(x=>r.jsxs("tr",{className:"border-b border-purple-800/20 hover:bg-purple-900/20 transition-colors",children:[r.jsx("td",{className:"p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gradient-to-br from-purple-600/20 to-blue-600/20 flex items-center justify-center border border-purple-500/30",children:[r.jsx("img",{src:x.image||`https://cryptoicons.org/api/icon/${x.symbol.split("/")[0].toLowerCase()}/200`,alt:x.name,className:"w-9 h-9 object-contain",onError:p=>{const w=p.currentTarget;w.style.display="none";const j=w.nextElementSibling;j&&(j.style.display="flex")}}),r.jsx("span",{className:"text-white font-bold text-sm hidden",children:x.symbol.split("/")[0].charAt(0)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-white",children:x.symbol}),r.jsx("div",{className:"text-sm text-gray-400",children:x.name})]})]})}),r.jsx("td",{className:"p-6 text-white font-medium",children:x.price}),r.jsx("td",{className:"p-6",children:r.jsxs("div",{className:`flex items-center space-x-1 ${x.isPositive?"text-green-400":"text-red-400"}`,children:[x.isPositive?r.jsx(ur,{className:"w-4 h-4"}):r.jsx(rd,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:x.change})]})}),r.jsx("td",{className:"p-6 text-gray-300",children:x.high}),r.jsx("td",{className:"p-6 text-gray-300",children:x.low})]},x.symbol))})]})})})})]}),r.jsxs("section",{className:"max-w-7xl mx-auto px-6 py-16",children:[r.jsx("div",{className:"mb-8",children:r.jsx("h2",{className:"text-3xl font-bold text-white mb-6 text-left",children:"Top Gainers"})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map(x=>r.jsx(de,{className:"bg-[#1E1E2E] border-[#2A2A3E] backdrop-blur-sm hover:bg-[#252537] transition-all duration-300 rounded-xl",children:r.jsxs(he,{className:"p-6",children:[r.jsx("div",{className:"flex items-center mb-6",children:r.jsx("div",{className:`w-12 h-12 ${x.color} rounded-full flex items-center justify-center`,children:r.jsx("span",{className:"text-white font-bold text-sm",children:x.symbol})})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-white font-bold text-lg",children:x.symbol}),r.jsx("span",{className:"text-gray-400 text-sm",children:x.price.replace("$","")})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-green-400 font-bold text-lg",children:x.change})]})]})]})},x.symbol))})]}),r.jsxs("section",{className:"max-w-7xl mx-auto px-6 py-16",children:[r.jsx("div",{className:"mb-12 text-left",children:r.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Metachrome Features"})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:y.map((x,p)=>r.jsx(de,{className:"bg-[#1B1B2F] border-[#3B82F6]/30 backdrop-blur-sm hover:border-[#3B82F6]/60 transition-all duration-300 rounded-3xl",children:r.jsxs(he,{className:"p-8 text-center",children:[r.jsx("div",{className:"flex justify-center mb-8",children:r.jsx("img",{src:x.icon,alt:x.title,className:"w-60 h-60 object-contain"})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:x.title}),r.jsx("p",{className:"text-gray-300 leading-relaxed text-base",children:x.description})]})},p))})]}),r.jsx("section",{className:"bg-black py-24",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-5xl font-bold text-white mb-6",children:"A New Era Begins"}),r.jsx("p",{className:"text-gray-400 mb-12 text-lg leading-relaxed",children:"Explore the future of tradingsmart, secure, and accessible for everyone."}),r.jsx("div",{className:"space-y-8",children:v.map((x,p)=>r.jsxs("div",{className:"flex items-start space-x-4 relative",children:[r.jsxs("div",{className:"relative flex flex-col items-center",children:[r.jsx("div",{className:"w-10 h-10 border-2 border-gray-400 rounded-full flex items-center justify-center text-white font-bold text-lg flex-shrink-0 bg-black z-10",children:p+1}),p<v.length-1&&r.jsx("div",{className:"w-0.5 h-16 bg-gray-600 mt-4"})]}),r.jsxs("div",{className:"flex-1 pt-2",children:[r.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:x.title}),r.jsx("p",{className:"text-gray-400 leading-relaxed",children:x.description})]})]},p))})]}),r.jsx("div",{className:"flex justify-center lg:justify-end",children:r.jsx("img",{src:ow,alt:"METACHROME",className:"w-auto h-auto max-w-full"})})]})})}),r.jsx("section",{className:"max-w-7xl mx-auto px-6 py-16",children:r.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[r.jsxs("div",{className:"order-2 lg:order-1 p-0 m-0",children:[r.jsx("h2",{className:"text-5xl font-bold text-white mb-6",children:"Frequently Asked Questions"}),r.jsx("p",{className:"text-gray-400 mb-0 leading-relaxed text-xl",children:"Begin your trading journey and stand a chance to earn exciting rewards worth up to $300 through our Mystery Box promotion."}),r.jsx("div",{className:"p-0 m-0",children:r.jsx("div",{className:"w-[564px] h-[564px] p-0 m-0",children:r.jsx("img",{src:Vh,alt:"Crypto FAQ",className:"w-full h-full object-contain p-0 m-0 block"})})})]}),r.jsx("div",{className:"space-y-4 order-1 lg:order-2",children:g.map((x,p)=>r.jsxs(Uh,{open:t===p,onOpenChange:()=>e(t===p?null:p),children:[r.jsx(Bh,{asChild:!0,children:r.jsx(de,{className:`bg-black border-2 transition-all duration-300 cursor-pointer ${t===p?"border-purple-500 shadow-lg shadow-purple-500/50":"border-gray-700 hover:border-purple-400"}`,children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:`font-medium pr-4 text-lg transition-colors duration-300 ${t===p?"text-purple-400":"text-white"}`,children:x.question}),r.jsx(gi,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 flex-shrink-0 ${t===p?"rotate-180 text-purple-400":""}`})]})})})}),r.jsx(zh,{children:r.jsx("div",{className:"px-6 pb-6 bg-black border-l-2 border-r-2 border-b-2 border-gray-700 rounded-b-lg",children:r.jsx("p",{className:"text-gray-400 text-lg",children:x.answer})})})]},p))})]})}),r.jsx("section",{className:"bg-black py-16",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsx(de,{className:"bg-gray-800 border-0 rounded-2xl shadow-2xl",children:r.jsx(he,{className:"p-12",children:r.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 items-center",children:[r.jsx("div",{className:"flex justify-center lg:justify-start",children:r.jsx("div",{className:"relative",children:r.jsx("img",{src:lw,alt:"Newsletter Chart",className:"w-full max-w-lg h-auto object-contain",style:{width:"512px",height:"384px"}})})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-gray-400 text-sm mb-2 uppercase tracking-wider",children:"Get Started For Free"}),r.jsxs("h2",{className:"text-4xl font-bold text-white mb-6 leading-tight",children:["Subscribe our newsletter &",r.jsx("br",{}),"Stay Update Every Day"]}),r.jsxs("form",{onSubmit:b,className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[r.jsx(Ee,{type:"email",placeholder:"Enter you email",value:s,onChange:x=>n(x.target.value),className:"flex-1 bg-black border-gray-600 text-white placeholder-gray-500 focus:ring-purple-500 focus:border-purple-500 h-12 rounded-lg"}),r.jsx(W,{type:"submit",className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-8 py-3 h-12 font-semibold rounded-lg",children:"Submit"})]})]})]})})})})})]})}function L5(){const[t,e]=f.useState(""),s=Wn(),{cryptoData:n,loading:i,error:a,forceRefresh:o,retry:l}=cy(),c=n.filter(d=>d.symbol.toLowerCase().includes(t.toLowerCase())||d.name.toLowerCase().includes(t.toLowerCase()));return r.jsx("div",{className:"min-h-screen bg-[#10121E]",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Markets"}),r.jsx("p",{className:"text-gray-400",children:"Live crypto data in real time"})]}),r.jsxs("div",{className:`mb-8 ${s?"flex gap-2":"flex items-center justify-end space-x-4"}`,children:[r.jsxs("div",{className:`relative ${s?"flex-1":""}`,children:[r.jsx(_m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(Ee,{type:"text",placeholder:s?"Search...":"Search cryptocurrencies...",value:t,onChange:d=>e(d.target.value),className:`pl-10 ${s?"w-full":"w-64"} bg-[#3A3A4E] border-gray-600 text-white placeholder-gray-400 rounded-md`})]}),r.jsxs(W,{onClick:o,disabled:i,className:`bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 text-white rounded-md flex items-center gap-2 ${s?"px-3 py-2 text-sm flex-shrink-0":"px-4 py-2"}`,title:i?"Updating...":"Refresh",children:[r.jsx(On,{className:`w-4 h-4 ${i?"animate-spin":""}`}),!s&&(i?"Updating...":"Refresh")]})]}),r.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${i?"bg-yellow-400 animate-pulse":a?"bg-red-400":"bg-green-400"}`}),r.jsx("span",{className:"text-sm text-gray-400",children:i?"Updating market data...":a?"Using cached data":"Real-time data"}),a&&r.jsx("button",{onClick:l,className:"text-blue-400 text-sm underline hover:text-blue-300 ml-2",children:"Retry"})]}),r.jsxs("span",{className:"text-xs text-gray-500",children:[c.length," cryptocurrencies"]})]}),r.jsx(de,{className:"bg-[#1a1340]/80 border-purple-800/30 backdrop-blur-sm",children:r.jsx(he,{className:"p-0",children:r.jsx("div",{className:s?"":"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-purple-800/30",children:[r.jsx("th",{className:`text-left font-medium text-gray-400 ${s?"p-3 text-xs":"p-6 text-sm"}`,children:"Name"}),r.jsx("th",{className:`text-left font-medium text-gray-400 ${s?"p-3 text-xs":"p-6 text-sm"}`,children:s?"Price":"Last Price"}),r.jsx("th",{className:`text-left font-medium text-gray-400 ${s?"p-3 text-xs":"p-6 text-sm"}`,children:s?"24h":"24h Change"}),!s&&r.jsx("th",{className:"text-left p-6 font-medium text-gray-400 text-sm",children:"24h High"}),!s&&r.jsx("th",{className:"text-left p-6 font-medium text-gray-400 text-sm",children:"24h Low"})]})}),r.jsx("tbody",{children:i?Array.from({length:5}).map((d,h)=>r.jsxs("tr",{className:"border-b border-purple-800/20",children:[r.jsx("td",{className:s?"p-3":"p-6",children:r.jsxs("div",{className:`flex items-center ${s?"space-x-2":"space-x-3"}`,children:[r.jsx("div",{className:`bg-gray-700 rounded-full animate-pulse ${s?"w-6 h-6":"w-10 h-10"}`}),r.jsxs("div",{children:[r.jsx("div",{className:`bg-gray-700 rounded animate-pulse mb-1 ${s?"h-3 w-12":"h-4 w-20"}`}),r.jsx("div",{className:`bg-gray-700 rounded animate-pulse ${s?"h-2 w-8":"h-3 w-16"}`})]})]})}),r.jsx("td",{className:s?"p-3":"p-6",children:r.jsx("div",{className:`bg-gray-700 rounded animate-pulse ${s?"h-3 w-16":"h-4 w-24"}`})}),r.jsx("td",{className:s?"p-3":"p-6",children:r.jsx("div",{className:`bg-gray-700 rounded animate-pulse ${s?"h-3 w-10":"h-4 w-16"}`})}),!s&&r.jsx("td",{className:"p-6",children:r.jsx("div",{className:"h-4 bg-gray-700 rounded animate-pulse w-20"})}),!s&&r.jsx("td",{className:"p-6",children:r.jsx("div",{className:"h-4 bg-gray-700 rounded animate-pulse w-20"})})]},h)):c.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:s?3:5,className:"py-12 text-center",children:r.jsxs("span",{className:"text-gray-400",children:['No cryptocurrencies found matching "',t,'"']})})}):c.map(d=>r.jsxs("tr",{className:"border-b border-purple-800/20 hover:bg-purple-900/20 transition-colors",children:[r.jsx("td",{className:s?"p-3":"p-6",children:r.jsxs("div",{className:`flex items-center ${s?"space-x-2":"space-x-3"}`,children:[r.jsxs("div",{className:`rounded-full overflow-hidden bg-gradient-to-br from-purple-600/20 to-blue-600/20 flex items-center justify-center border border-purple-500/30 ${s?"w-8 h-8":"w-12 h-12"}`,children:[r.jsx("img",{src:d.image||`https://cryptoicons.org/api/icon/${d.symbol.split("/")[0].toLowerCase()}/200`,alt:d.name,className:`object-contain ${s?"w-6 h-6":"w-9 h-9"}`,onError:h=>{const u=h.currentTarget;u.style.display="none";const m=u.nextElementSibling;m&&(m.style.display="flex")}}),r.jsx("span",{className:`text-white font-bold hidden ${s?"text-xs":"text-sm"}`,children:d.symbol.split("/")[0].charAt(0)})]}),r.jsxs("div",{children:[r.jsx("div",{className:`font-medium text-white ${s?"text-sm":""}`,children:d.symbol}),r.jsx("div",{className:`text-gray-400 ${s?"text-xs":"text-sm"}`,children:d.name})]})]})}),r.jsx("td",{className:`text-white font-medium ${s?"p-3 text-sm":"p-6"}`,children:d.price}),r.jsx("td",{className:s?"p-3":"p-6",children:r.jsxs("div",{className:`flex items-center space-x-1 ${d.isPositive?"text-green-400":"text-red-400"}`,children:[d.isPositive?r.jsx(ur,{className:s?"w-3 h-3":"w-4 h-4"}):r.jsx(rd,{className:s?"w-3 h-3":"w-4 h-4"}),r.jsx("span",{className:`font-medium ${s?"text-xs":""}`,children:d.change})]})}),!s&&r.jsx("td",{className:"p-6 text-gray-300",children:d.high}),!s&&r.jsx("td",{className:"p-6 text-gray-300",children:d.low})]},d.symbol))})]})})})})]})})}const F5=Pm("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-white hover:bg-primary/80",secondary:"border-transparent bg-secondary text-white hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-white hover:bg-destructive/80",outline:"text-white"}},defaultVariants:{variant:"default"}});function xt({className:t,variant:e,...s}){return r.jsx("div",{className:Ue(F5({variant:e}),t),...s})}function $5({type:t}){var A;const[e,s]=f.useState(t||"spot"),[n,i]=f.useState("BTCUSDT"),[a,o]=f.useState("market"),[l,c]=f.useState(""),[d,h]=f.useState(""),[u,m]=f.useState("30s"),[y,v]=f.useState(!1),{toast:g}=Zs(),{user:b}=Ss(),x=Ir(),{data:p,isLoading:w}=ns({queryKey:["/api/market-data"]}),{data:j}=ns({queryKey:["/api/balances"],enabled:!!b}),{data:S}=ns({queryKey:["/api/trades/active"],enabled:!!b,refetchInterval:5e3}),_=p==null?void 0:p.find(R=>R.symbol===n),k=((A=j==null?void 0:j.find(R=>R.symbol==="USDT"))==null?void 0:A.available)||"0",P=Ms({mutationFn:async R=>{const $=await fetch("/api/trades/options",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:b==null?void 0:b.id,symbol:n,...R})});if(!$.ok){const O=await $.json();throw new Error(O.message||"Failed to create trade")}return $.json()},onSuccess:R=>{g({title:"Trade Created",description:`Options trade created successfully for $${l}`}),c(""),x.invalidateQueries({queryKey:["/api/balances"]}),x.invalidateQueries({queryKey:["/api/trades/active"]})},onError:R=>{g({title:"Trade Failed",description:R.message||"Failed to create trade",variant:"destructive"})}}),M=[{value:"30s",label:"30s",percentage:"10%",seconds:30,minAmount:100},{value:"60s",label:"60s",percentage:"15%",seconds:60,minAmount:1e3},{value:"120s",label:"120s",percentage:"20%",seconds:120,minAmount:5e3},{value:"180s",label:"180s",percentage:"25%",seconds:180,minAmount:1e4},{value:"240s",label:"240s",percentage:"30%",seconds:240,minAmount:15e3},{value:"300s",label:"300s",percentage:"35%",seconds:300,minAmount:2e4},{value:"600s",label:"600s",percentage:"40%",seconds:600,minAmount:5e4}],T=M.find(R=>R.value===u),E=async R=>{if(!b){g({title:"Authentication Required",description:"Please log in to start trading",variant:"destructive"});return}if(!l||parseFloat(l)<=0){g({title:"Invalid Amount",description:"Please enter a valid trade amount",variant:"destructive"});return}const $=parseFloat(l),O=(T==null?void 0:T.minAmount)||100;if($<O){g({title:"Minimum Amount Required",description:`Minimum amount for ${u} is $${O}`,variant:"destructive"});return}if($>parseFloat(k)){g({title:"Insufficient Balance",description:"You do not have enough USDT balance",variant:"destructive"});return}v(!0);try{await P.mutateAsync({direction:R,amount:l,duration:(T==null?void 0:T.seconds)||30})}finally{v(!1)}},I=R=>{const O=(parseFloat(k)*R/100).toFixed(2);c(O)},V=[{price:"118113.00",amount:"0.12345",total:"14567.89"},{price:"118112.50",amount:"0.23456",total:"27701.23"},{price:"118112.00",amount:"0.34567",total:"40834.56"},{price:"118111.50",amount:"0.45678",total:"53967.89"},{price:"118111.00",amount:"0.56789",total:"67101.23"}],G=[{time:"14:30:15",price:"118113.00",amount:"0.12345",side:"buy"},{time:"14:30:14",price:"118112.50",amount:"0.23456",side:"sell"},{time:"14:30:13",price:"118112.00",amount:"0.34567",side:"buy"},{time:"14:30:12",price:"118111.50",amount:"0.45678",side:"sell"},{time:"14:30:11",price:"118111.00",amount:"0.56789",side:"buy"}];return r.jsx("div",{className:"min-h-screen bg-[#1a1b2e] pt-16",children:r.jsxs("div",{className:"max-w-full px-4 sm:px-6 lg:px-8 py-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:n}),r.jsxs("div",{className:"flex items-center space-x-4 text-white",children:[r.jsxs("span",{className:"text-2xl font-bold",children:["$",_!=null&&_.price?parseFloat(_.price).toLocaleString():"118113.00"]}),r.jsxs("span",{className:`flex items-center ${parseFloat((_==null?void 0:_.priceChangePercent24h)||"0")>=0?"text-green-400":"text-red-400"}`,children:[parseFloat((_==null?void 0:_.priceChangePercent24h)||"0")>=0?r.jsx(ur,{className:"w-4 h-4 mr-1"}):r.jsx(rd,{className:"w-4 h-4 mr-1"}),parseFloat((_==null?void 0:_.priceChangePercent24h)||"0").toFixed(2),"%"]})]})]}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(_m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(Ee,{placeholder:"Search",className:"pl-10 bg-[#2a2d47] border-gray-600 text-white w-64"})]})})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 h-auto lg:h-[calc(100vh-200px)]",children:[r.jsxs("div",{className:"lg:col-span-3 space-y-4 order-3 lg:order-1",children:[r.jsx(de,{className:"bg-[#2a2d47] border-gray-600 h-1/2",children:r.jsxs(he,{className:"p-4",children:[r.jsx("h3",{className:"text-white font-semibold mb-4",children:"Order Book"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"grid grid-cols-3 text-gray-400 mb-2",children:[r.jsx("span",{children:"Price"}),r.jsx("span",{className:"text-right",children:"Amount"}),r.jsx("span",{className:"text-right",children:"Total"})]}),V.map((R,$)=>r.jsxs("div",{className:"grid grid-cols-3 text-red-400 hover:bg-[#1a1b2e]/50 p-1 rounded",children:[r.jsx("span",{className:"font-mono",children:R.price}),r.jsx("span",{className:"font-mono text-right",children:R.amount}),r.jsx("span",{className:"font-mono text-right",children:R.total})]},`sell-${$}`)),r.jsx("div",{className:"py-2 text-center",children:r.jsx("span",{className:"text-white font-bold text-lg",children:"$118113.00"})}),V.reverse().map((R,$)=>r.jsxs("div",{className:"grid grid-cols-3 text-green-400 hover:bg-[#1a1b2e]/50 p-1 rounded",children:[r.jsx("span",{className:"font-mono",children:R.price}),r.jsx("span",{className:"font-mono text-right",children:R.amount}),r.jsx("span",{className:"font-mono text-right",children:R.total})]},`buy-${$}`))]})]})}),r.jsx(de,{className:"bg-[#2a2d47] border-gray-600 h-1/2",children:r.jsxs(he,{className:"p-4",children:[r.jsx("h3",{className:"text-white font-semibold mb-4",children:"Market Trades"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"grid grid-cols-3 text-gray-400 mb-2",children:[r.jsx("span",{children:"Time"}),r.jsx("span",{className:"text-right",children:"Price"}),r.jsx("span",{className:"text-right",children:"Amount"})]}),G.map((R,$)=>r.jsxs("div",{className:`grid grid-cols-3 hover:bg-[#1a1b2e]/50 p-1 rounded ${R.side==="buy"?"text-green-400":"text-red-400"}`,children:[r.jsx("span",{className:"text-gray-400",children:R.time}),r.jsx("span",{className:"font-mono text-right",children:R.price}),r.jsx("span",{className:"font-mono text-right",children:R.amount})]},$))]})]})})]}),r.jsx("div",{className:"lg:col-span-6 order-2 lg:order-2",children:r.jsx(de,{className:"bg-[#2a2d47] border-gray-600 h-64 lg:h-full",children:r.jsx(he,{className:"p-4 h-full",children:r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx(na,{className:"w-16 h-16 mx-auto mb-4"}),r.jsx("p",{children:"Chart will be displayed here"}),r.jsxs("p",{className:"text-sm mt-2",children:["Real-time candlestick chart for ",n]})]})})})})}),r.jsxs("div",{className:"lg:col-span-3 space-y-4 order-1 lg:order-3",children:[r.jsxs("div",{className:"flex space-x-2 mb-4",children:[r.jsx(W,{variant:e==="spot"?"default":"outline",size:"sm",onClick:()=>s("spot"),className:e==="spot"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white border-0":"bg-transparent border-gray-600 text-gray-300 hover:bg-gray-800",children:"Spot"}),r.jsx(W,{variant:e==="options"?"default":"outline",size:"sm",onClick:()=>s("options"),className:e==="options"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white border-0":"bg-transparent border-gray-600 text-gray-300 hover:bg-gray-800",children:"Options"})]}),e==="options"?r.jsx(de,{className:"bg-[#2a2d47] border-gray-600",children:r.jsxs(he,{className:"p-4",children:[r.jsx("h3",{className:"text-white font-semibold mb-4",children:"Options Trading"}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"text-gray-300 text-sm mb-2 block",children:"Duration"}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:M.slice(0,4).map(R=>r.jsx(W,{variant:u===R.value?"default":"outline",size:"sm",onClick:()=>m(R.value),className:`text-xs ${u===R.value?"bg-blue-600 text-white border-0":"bg-transparent border-gray-600 text-gray-300 hover:bg-gray-700"}`,children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{children:R.label}),r.jsx("div",{className:"text-xs opacity-75",children:R.percentage})]})},R.value))}),r.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:M.slice(4).map(R=>r.jsx(W,{variant:u===R.value?"default":"outline",size:"sm",onClick:()=>m(R.value),className:`text-xs ${u===R.value?"bg-blue-600 text-white border-0":"bg-transparent border-gray-600 text-gray-300 hover:bg-gray-700"}`,children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{children:R.label}),r.jsx("div",{className:"text-xs opacity-75",children:R.percentage})]})},R.value))})]}),r.jsxs("div",{className:"mb-4 p-3 bg-[#1a1b2e]/50 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-300",children:"Available Balance:"}),r.jsxs("span",{className:"text-white font-semibold",children:["$",parseFloat(k).toFixed(2)," USDT"]})]}),r.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[r.jsxs("span",{className:"text-gray-300",children:["Min Amount (",u,"):"]}),r.jsxs("span",{className:"text-yellow-400",children:["$",(T==null?void 0:T.minAmount)||100]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"text-gray-300 text-sm mb-2 block",children:"Amount (USDT)"}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mb-2",children:[25,50,75,100].map(R=>r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>I(R),className:"bg-transparent border-gray-600 text-gray-300 hover:bg-gray-700 text-xs",children:[R,"%"]},R))}),r.jsx(Ee,{type:"number",placeholder:"0",value:l,onChange:R=>c(R.target.value),className:"bg-[#1a1b2e] border-gray-600 text-white",min:(T==null?void 0:T.minAmount)||100})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(W,{className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>E("up"),disabled:y||!b,children:y?"Processing...":"Buy Up"}),r.jsx(W,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:()=>E("down"),disabled:y||!b,children:y?"Processing...":"Buy Down"})]})]})}):r.jsx(de,{className:"bg-[#2a2d47] border-gray-600",children:r.jsxs(he,{className:"p-4",children:[r.jsx("h3",{className:"text-white font-semibold mb-4",children:"Spot Trading"}),r.jsx("div",{className:"mb-4",children:r.jsx("div",{className:"flex space-x-2",children:["market","limit"].map(R=>r.jsx(W,{variant:a===R?"default":"outline",size:"sm",onClick:()=>o(R),className:a===R?"bg-blue-600 text-white border-0":"bg-transparent border-gray-600 text-gray-300 hover:bg-gray-700",children:R.charAt(0).toUpperCase()+R.slice(1)},R))})}),a==="limit"&&r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"text-gray-300 text-sm mb-2 block",children:"Price (USDT)"}),r.jsx(Ee,{type:"number",placeholder:"0.00",value:d,onChange:R=>h(R.target.value),className:"bg-[#1a1b2e] border-gray-600 text-white"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"text-gray-300 text-sm mb-2 block",children:"Amount (BTC)"}),r.jsx(Ee,{type:"number",placeholder:"0.00",value:l,onChange:R=>c(R.target.value),className:"bg-[#1a1b2e] border-gray-600 text-white"}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:["25%","50%","75%","100%"].map(R=>r.jsx(W,{variant:"outline",size:"sm",className:"bg-transparent border-gray-600 text-gray-300 hover:bg-gray-700 text-xs",children:R},R))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(W,{className:"bg-green-600 hover:bg-green-700 text-white",children:"Buy (BTC)"}),r.jsx(W,{className:"bg-red-600 hover:bg-red-700 text-white",children:"Sell (BTC)"})]})]})}),r.jsx(de,{className:"bg-[#2a2d47] border-gray-600",children:r.jsxs(he,{className:"p-4",children:[r.jsx("h3",{className:"text-white font-semibold mb-4",children:"Active Trades"}),S&&S.length>0?r.jsx("div",{className:"space-y-2",children:S.map(R=>r.jsxs("div",{className:"bg-[#1a1b2e]/50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-white font-medium",children:R.symbol}),r.jsx(xt,{variant:R.direction==="up"?"default":"destructive",className:R.direction==="up"?"bg-green-600":"bg-red-600",children:R.direction.toUpperCase()})]}),r.jsxs("div",{className:"text-sm text-gray-300",children:[r.jsxs("div",{children:["Amount: $",parseFloat(R.amount).toFixed(2)]}),r.jsxs("div",{children:["Entry: $",parseFloat(R.entryPrice||"0").toFixed(2)]}),r.jsxs("div",{children:["Duration: ",R.duration,"s"]})]})]},R.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-[#1a1b2e] rounded-full mx-auto mb-4 flex items-center justify-center",children:r.jsx(na,{className:"w-8 h-8 text-gray-500"})}),r.jsx("p",{className:"text-gray-400 text-sm",children:"No active trades"})]})]})})]})]}),r.jsx("div",{className:"mt-6 grid grid-cols-1 gap-4",children:r.jsx(de,{className:"bg-[#2a2d47] border-gray-600",children:r.jsxs(he,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"flex space-x-4",children:["Open Orders","Order History","Trade History"].map(R=>r.jsx(W,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:R},R))}),r.jsx(W,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:"Hide other trading pairs"})]}),r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-[#1a1b2e] rounded-full mx-auto mb-4 flex items-center justify-center",children:r.jsx(na,{className:"w-8 h-8 text-gray-500"})}),r.jsx("p",{className:"text-gray-400",children:"No data"})]})]})})})]})})}function U5({symbol:t="BTCUSDT",height:e=400}){const[s,n]=f.useState(!0),[i,a]=f.useState(null),[o,l]=ye.useState(null);f.useEffect(()=>{if(!o)return;(async()=>{try{n(!0),a(null),console.log(" [SimpleFallbackChart] Fetching klines for",t);let h=null;try{const u=await fetch(`/api/binance/klines?symbol=${t}&interval=1m&limit=100`);if(u.ok){const m=await u.json();m.success&&m.data&&(h=m.data,console.log(" [SimpleFallbackChart] Got klines from API:",h.length))}else console.warn(" [SimpleFallbackChart] API returned status:",u.status)}catch(u){console.warn(" [SimpleFallbackChart] API endpoint failed:",u)}if(!h)try{console.log(" [SimpleFallbackChart] Trying direct Binance API for",t);const u=`https://api.binance.com/api/v3/klines?symbol=${t}&interval=1m&limit=100`,m=new AbortController,y=setTimeout(()=>m.abort(),5e3),v=await fetch(u,{signal:m.signal});if(clearTimeout(y),v.ok){const g=await v.json();console.log(" [SimpleFallbackChart] Got data from Binance:",g.length,"candles"),h=g.map(b=>({time:Math.floor(b[0]/1e3),open:parseFloat(b[1]),high:parseFloat(b[2]),low:parseFloat(b[3]),close:parseFloat(b[4]),volume:parseFloat(b[5])}))}else{console.warn(" [SimpleFallbackChart] Binance API returned status:",v.status);const g=await v.text();console.warn(" [SimpleFallbackChart] Binance error:",g)}}catch(u){console.warn(" [SimpleFallbackChart] Binance API failed:",u)}if(!h||h.length===0)try{console.log(" [SimpleFallbackChart] Trying alternative Binance endpoint for",t);const u=`https://api.binance.com/api/v3/klines?symbol=${t}&interval=5m&limit=100`,m=new AbortController,y=setTimeout(()=>m.abort(),5e3),v=await fetch(u,{signal:m.signal});if(clearTimeout(y),v.ok){const g=await v.json();console.log(" [SimpleFallbackChart] Got data from alternative endpoint:",g.length,"candles"),h=g.map(b=>({time:Math.floor(b[0]/1e3),open:parseFloat(b[1]),high:parseFloat(b[2]),low:parseFloat(b[3]),close:parseFloat(b[4]),volume:parseFloat(b[5])}))}}catch(u){console.warn(" [SimpleFallbackChart] Alternative endpoint failed:",u)}if(!h||h.length===0)throw new Error(`Unable to load chart data for ${t}. Please try again later.`);if(!h||h.length===0)throw new Error("No chart data available");console.log(" [SimpleFallbackChart] Received",h.length,"candles, drawing chart"),c(o,h),n(!1)}catch(h){const u=h instanceof Error?h.message:"Unknown error";console.error(" [SimpleFallbackChart] Error:",u),a(u),n(!1)}})()},[t,o]);const c=(d,h)=>{const u=d.getContext("2d");if(!u)return;const m=d.getBoundingClientRect(),y=window.devicePixelRatio||1;d.width=m.width*y,d.height=m.height*y,u.scale(y,y);const v=m.width,g=m.height-40,b=40;if(u.fillStyle="#10121E",u.fillRect(0,0,v,d.height),h.length===0)return;const x=h.flatMap(k=>[k.high,k.low]),p=Math.min(...x),w=Math.max(...x),j=w-p||1;u.strokeStyle="#1F2937",u.lineWidth=1;for(let k=0;k<=5;k++){const P=b+g/5*k;u.beginPath(),u.moveTo(b,P),u.lineTo(v-b,P),u.stroke()}const S=(v-b*2)/h.length,_=Math.max(1,S*.6);h.forEach((k,P)=>{const M=b+P*S+S/2,T=b+(w-k.open)/j*g,E=b+(w-k.close)/j*g,I=b+(w-k.high)/j*g,V=b+(w-k.low)/j*g,A=k.close>=k.open?"#10B981":"#EF4444";u.strokeStyle=A,u.lineWidth=1,u.beginPath(),u.moveTo(M,I),u.lineTo(M,V),u.stroke(),u.fillStyle=A;const R=Math.min(T,E),$=Math.abs(E-T)||1;u.fillRect(M-_/2,R,_,$)}),u.fillStyle="#9CA3AF",u.font="11px sans-serif",u.textAlign="right";for(let k=0;k<=5;k++){const P=w-j/5*k,M=b+g/5*k+4;u.fillText(P.toFixed(2),v-5,M)}};return r.jsxs("div",{style:{height:`${e}px`,width:"100%",position:"relative",backgroundColor:"#10121E",borderRadius:"8px",overflow:"hidden"},children:[s&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#10121E]/80 z-10",children:r.jsx("div",{className:"text-gray-400 text-sm",children:"Loading chart..."})}),i&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#10121E]/80 z-10",children:r.jsxs("div",{className:"text-red-400 text-sm text-center px-4",children:["Error: ",i]})}),r.jsx("canvas",{ref:l,style:{width:"100%",height:"100%",display:"block"}})]})}const B5=[];function z5({type:t="chart",symbol:e="BINANCE:BTCUSDT",height:s="100%",interval:n="1",theme:i="dark",style:a="1",locale:o="en",timezone:l="Etc/UTC",allow_symbol_change:c=!0,container_id:d="tradingview_widget",onPriceUpdate:h,onSymbolChange:u}){const m=f.useRef(null),[y,v]=f.useState(!1),g=e.replace(/^(BINANCE:|COINBASE:|CRYPTO:)/,""),b=B5.includes(g);return f.useEffect(()=>{if(m.current){try{m.current.innerHTML=""}catch(x){console.log("Error clearing container:",x)}if(t==="ticker"){const x=document.createElement("script");x.src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js",x.type="text/javascript",x.async=!0,x.innerHTML=JSON.stringify({symbols:[{proName:"FOREXCOM:SPXUSD",title:"S&P 500"},{proName:"FOREXCOM:NSXUSD",title:"US 100"},{proName:"FX_IDC:EURUSD",title:"EUR/USD"},{proName:"BITSTAMP:BTCUSD",title:"BTC/USD"},{proName:"BITSTAMP:ETHUSD",title:"ETH/USD"},{proName:"BINANCE:BNBUSDT",title:"BNB/USDT"}],showSymbolLogo:!0,colorTheme:"dark",isTransparent:!0,displayMode:"adaptive",locale:"en"}),m.current.appendChild(x)}else{const x=document.createElement("script");x.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",x.type="text/javascript",x.async=!0;let p=e;g==="HYPEHUSD"?p=`CRYPTO:${g}`:e.includes(":")||(p=g.includes("USDT")?`BINANCE:${g}`:g.includes("USD")?`COINBASE:${g}`:`BINANCE:${g}`),console.log(` TradingViewWidget: ${g} -> ${p}`);const w={autosize:!0,symbol:p,interval:n,timezone:l,theme:"dark",colorTheme:"dark",style:"1",locale:o,toolbar_bg:"#000000",enable_publishing:!1,allow_symbol_change:!1,container_id:d,hide_volume:!0,hide_top_toolbar:!1,hide_legend:!1,save_image:!1,disabled_features:["volume_force_overlay","create_volume_indicator_by_default","study_templates","header_indicators","header_compare","header_undo_redo","header_screenshot","header_chart_type","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","left_toolbar","header_saveload","header_settings","use_localstorage_for_settings"],enabled_features:["hide_last_na_study_output","remove_library_container_border","disable_resolution_rebuild"],loading_screen:{backgroundColor:"#000000"},overrides:{"paneProperties.background":"#000000","paneProperties.backgroundType":"solid","paneProperties.vertGridProperties.color":"#1a1a1a","paneProperties.horzGridProperties.color":"#1a1a1a","symbolWatermarkProperties.transparency":90,"scalesProperties.textColor":"#666666","scalesProperties.backgroundColor":"#000000","mainSeriesProperties.candleStyle.upColor":"#10B981","mainSeriesProperties.candleStyle.downColor":"#EF4444","mainSeriesProperties.candleStyle.borderUpColor":"#10B981","mainSeriesProperties.candleStyle.borderDownColor":"#EF4444","mainSeriesProperties.candleStyle.wickUpColor":"#10B981","mainSeriesProperties.candleStyle.wickDownColor":"#EF4444"}};x.innerHTML=JSON.stringify(w),x.onload=()=>{console.log(" TradingView widget loaded successfully")},x.onerror=()=>{console.error(" TradingView script failed to load")};try{m.current.appendChild(x)}catch(j){console.error("Error appending TradingView script:",j)}}return()=>{try{m.current&&(m.current.innerHTML="")}catch(x){console.log("Error during cleanup:",x)}}}},[t,e,s,n,i,a,o,l,c,d]),b||y?r.jsx(U5,{symbol:g,height:typeof s=="number"?s:400}):r.jsx("div",{className:`tradingview-widget-container ${t==="ticker"?"w-full overflow-hidden bg-transparent":"bg-[#000000]"}`,ref:m,style:{height:t==="ticker"?"50px":typeof s=="number"?`${s}px`:s,width:"100%",position:"relative",backgroundColor:t==="ticker"?"transparent":"#000000"},children:t==="ticker"?r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:r.jsx("div",{className:"animate-pulse",children:"Loading market data..."})}):r.jsx("div",{id:d,className:"tradingview-widget-container__widget",style:{height:"100%",width:"100%"}})})}const Wh=f.memo(z5);function zt(t){var e=t.width,s=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(s<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:s}}function qa(t,e){return t.width===e.width&&t.height===e.height}var V5=function(){function t(e){var s=this;this._resolutionListener=function(){return s._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var s=this,n={next:e};return this._observers.push(n),{unsubscribe:function(){s._observers=s._observers.filter(function(i){return i!==n})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(s){return s.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function W5(t){return new V5(t)}var H5=function(){function t(e,s,n){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=zt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=s??function(a){return a},this._allowResizeObserver=(i=n==null?void 0:n.allowResizeObserver)!==null&&i!==void 0?i:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,s;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(s=this._devicePixelRatioObservable)===null||s===void 0||s.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return zt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=zt(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(s){return s!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(s){return s!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var s=this.bitmapSize;qa(s,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(s,e))},t.prototype._emitBitmapSizeChanged=function(e,s){var n=this;this._bitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,s)})},t.prototype._suggestNewBitmapSize=function(e){var s=this._suggestedBitmapSize,n=zt(this._transformBitmapSize(e,this._canvasElementClientSize)),i=qa(this.bitmapSize,n)?null:n;s===null&&i===null||s!==null&&i!==null&&qa(s,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(s,i))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,s){var n=this;this._suggestedBitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,s)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}G5().then(function(s){return s?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var s=cw(this._canvasElement);if(s===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=W5(s),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,s;if(this._canvasElement!==null){var n=cw(this._canvasElement);if(n!==null){var i=(s=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&s!==void 0?s:n.devicePixelRatio,a=this._canvasElement.getClientRects(),o=a[0]!==void 0?q5(a[0],i):zt({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(s){var n=s.find(function(o){return o.target===e._canvasElement});if(!(!n||!n.devicePixelContentBoxSize||!n.devicePixelContentBoxSize[0])){var i=n.devicePixelContentBoxSize[0],a=zt({width:i.inlineSize,height:i.blockSize});e._suggestNewBitmapSize(a)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function K5(t,e){return new H5(t,e.transform,e.options)}function cw(t){return t.ownerDocument.defaultView}function G5(){return new Promise(function(t){var e=new ResizeObserver(function(s){t(s.every(function(n){return"devicePixelContentBoxSize"in n})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function q5(t,e){return zt({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var Q5=function(){function t(e,s,n){if(s.width===0||s.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=s,n.width===0||n.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function oo(t,e){var s=t.canvasElementClientSize;if(s.width===0||s.height===0)return null;var n=t.bitmapSize;if(n.width===0||n.height===0)return null;var i=t.canvasElement.getContext("2d",e);return i===null?null:new Q5(i,s,n)}/*!
 * @license
 * TradingView Lightweight Charts v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const X5={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Y5={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},J5={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Z5={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},eI={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},tI={color:"#26a69a",base:0},MT={color:"#2196f3"},AT={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var dw,uw;function lo(t,e){const s={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(s)}function DT(t,e,s,n){t.beginPath();const i=t.lineWidth%2?.5:0;t.moveTo(s,e+i),t.lineTo(n,e+i),t.stroke()}function ha(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Xs(t){if(t===void 0)throw new Error("Value is undefined");return t}function ae(t){if(t===null)throw new Error("Value is null");return t}function zo(t){return ae(Xs(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(dw||(dw={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(uw||(uw={}));const hw={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function Ur(t){return t<0?0:t>255?255:Math.round(t)||0}function RT(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const sI=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,rI=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,nI=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,iI=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function cd(t){(t=t.toLowerCase())in hw&&(t=hw[t]);{const e=iI.exec(t)||nI.exec(t);if(e)return[Ur(parseInt(e[1],10)),Ur(parseInt(e[2],10)),Ur(parseInt(e[3],10)),RT(e.length<5?1:parseFloat(e[4]))]}{const e=rI.exec(t);if(e)return[Ur(parseInt(e[1],16)),Ur(parseInt(e[2],16)),Ur(parseInt(e[3],16)),1]}{const e=sI.exec(t);if(e)return[Ur(17*parseInt(e[1],16)),Ur(17*parseInt(e[2],16)),Ur(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function OT(t){return .199*t[0]+.687*t[1]+.114*t[2]}function qm(t){const e=cd(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:OT(e)>160?"black":"white"}}class is{constructor(){this.h=[]}l(e,s,n){const i={o:e,_:s,u:n===!0};this.h.push(i)}v(e){const s=this.h.findIndex(n=>e===n.o);s>-1&&this.h.splice(s,1)}p(e){this.h=this.h.filter(s=>s._!==e)}m(e,s,n){const i=[...this.h];this.h=this.h.filter(a=>!a.u),i.forEach(a=>a.o(e,s,n))}M(){return this.h.length>0}S(){this.h=[]}}function wn(t,...e){for(const s of e)for(const n in s)s[n]!==void 0&&Object.prototype.hasOwnProperty.call(s,n)&&!["__proto__","constructor","prototype"].includes(n)&&(typeof s[n]!="object"||t[n]===void 0||Array.isArray(s[n])?t[n]=s[n]:wn(t[n],s[n]));return t}function Ln(t){return typeof t=="number"&&isFinite(t)}function dd(t){return typeof t=="number"&&t%1==0}function Id(t){return typeof t=="string"}function gu(t){return typeof t=="boolean"}function li(t){const e=t;if(!e||typeof e!="object")return e;let s,n,i;for(n in s=Array.isArray(e)?[]:{},e)e.hasOwnProperty(n)&&(i=e[n],s[n]=i&&typeof i=="object"?li(i):i);return s}function aI(t){return t!==null}function ud(t){return t===null?void 0:t}const dy="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Cl(t,e,s){return e===void 0&&(e=dy),`${s=s!==void 0?`${s} `:""}${t}px ${e}`}class oI{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,s=this.j(),n=this.H();return e.P===s&&e.D===n||(e.P=s,e.D=n,e.R=Cl(s,n),e.L=2.5/12*s,e.B=e.L,e.A=s/12*e.T,e.I=s/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class uy{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,s,n){this.Y.forEach(i=>{i.X(e,s,n)})}}class jn{X(e,s,n){e.useBitmapCoordinateSpace(i=>this.K(i,s,n))}}class lI extends jn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.G===null||this.G.tt===null)return;const i=this.G.tt,a=this.G,o=Math.max(1,Math.floor(s))%2/2,l=c=>{e.beginPath();for(let d=i.to-1;d>=i.from;--d){const h=a.it[d],u=Math.round(h.nt*s)+o,m=h.st*n,y=c*n+o;e.moveTo(u,m),e.arc(u,m,y,0,2*Math.PI)}e.fill()};a.et>0&&(e.fillStyle=a.rt,l(a.ht+a.et)),e.fillStyle=a.lt,l(a.ht)}}function cI(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const dI={from:0,to:1};class uI{constructor(e,s){this.ut=new uy,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=s,this.ut.Z(this.ct)}bt(e){const s=this.F.wt();s.length!==this.ct.length&&(this.dt=s.map(cI),this.ct=this.dt.map(n=>{const i=new lI;return i.J(n),i}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,s=this.F.wt(),n=this.vt.xt(),i=this.F.St();s.forEach((a,o)=>{var l;const c=this.dt[o],d=a.kt(n);if(e||d===null||!a.yt())return void(c.tt=null);const h=ae(a.Ct());c.lt=d.Tt,c.ht=d.ht,c.et=d.Pt,c.it[0]._t=d._t,c.it[0].st=a.Dt().Rt(d._t,h.Vt),c.rt=(l=d.Ot)!==null&&l!==void 0?l:this.F.Bt(c.it[0].st/a.Dt().At()),c.it[0].ot=n,c.it[0].nt=i.It(n),c.tt=dI})}}class hI extends jn{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null)return;const a=this.zt.Lt.yt,o=this.zt.Et.yt;if(!a&&!o)return;const l=Math.round(this.zt.nt*n),c=Math.round(this.zt.st*i);e.lineCap="butt",a&&l>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*n),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,lo(e,this.zt.Lt.Nt),function(d,h,u,m){d.beginPath();const y=d.lineWidth%2?.5:0;d.moveTo(h+y,u),d.lineTo(h+y,m),d.stroke()}(e,l,0,s.height)),o&&c>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*i),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,lo(e,this.zt.Et.Nt),DT(e,c,0,s.width))}}class mI{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new hI(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),s=ae(this.jt.Ht()),n=s.$t().W().crosshair,i=this.Ft;if(n.mode===2)return i.Et.yt=!1,void(i.Lt.yt=!1);i.Et.yt=e&&this.jt.Ut(s),i.Lt.yt=e&&this.jt.qt(),i.Et.et=n.horzLine.width,i.Et.Nt=n.horzLine.style,i.Et.V=n.horzLine.color,i.Lt.et=n.vertLine.width,i.Lt.Nt=n.vertLine.style,i.Lt.V=n.vertLine.color,i.nt=this.jt.Yt(),i.st=this.jt.Zt()}}function fI(t,e,s,n,i,a){t.fillRect(e+a,s,n-2*a,a),t.fillRect(e+a,s+i-a,n-2*a,a),t.fillRect(e,s,a,i),t.fillRect(e+n-a,s,a,i)}function Qm(t,e,s,n,i,a){t.save(),t.globalCompositeOperation="copy",t.fillStyle=a,t.fillRect(e,s,n,i),t.restore()}function mw(t,e,s,n,i,a){t.beginPath(),t.roundRect?t.roundRect(e,s,n,i,a):(t.lineTo(e+n-a[1],s),a[1]!==0&&t.arcTo(e+n,s,e+n,s+a[1],a[1]),t.lineTo(e+n,s+i-a[2]),a[2]!==0&&t.arcTo(e+n,s+i,e+n-a[2],s+i,a[2]),t.lineTo(e+a[3],s+i),a[3]!==0&&t.arcTo(e,s+i,e,s+i-a[3],a[3]),t.lineTo(e,s+a[0]),a[0]!==0&&t.arcTo(e,s,e+a[0],s,a[0]))}function fw(t,e,s,n,i,a,o=0,l=[0,0,0,0],c=""){if(t.save(),!o||!c||c===a)return mw(t,e,s,n,i,l),t.fillStyle=a,t.fill(),void t.restore();const d=o/2;var h;mw(t,e+d,s+d,n-o,i-o,(h=-d,l.map(u=>u===0?u:u+h))),a!=="transparent"&&(t.fillStyle=a,t.fill()),c!=="transparent"&&(t.lineWidth=o,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function IT(t,e,s,n,i,a,o){t.save(),t.globalCompositeOperation="copy";const l=t.createLinearGradient(0,0,0,i);l.addColorStop(0,a),l.addColorStop(1,o),t.fillStyle=l,t.fillRect(e,s,n,i),t.restore()}class pw{constructor(e,s){this.J(e,s)}J(e,s){this.zt=e,this.Xt=s}At(e,s){return this.zt.yt?e.P+e.L+e.B:0}X(e,s,n,i){if(!this.zt.yt||this.zt.Kt.length===0)return;const a=this.zt.V,o=this.Xt.t,l=e.useBitmapCoordinateSpace(c=>{const d=c.context;d.font=s.R;const h=this.Gt(c,s,n,i),u=h.Jt;return h.Qt?fw(d,u.ti,u.ii,u.ni,u.si,o,u.ei,[u.ht,0,0,u.ht],o):fw(d,u.ri,u.ii,u.ni,u.si,o,u.ei,[0,u.ht,u.ht,0],o),this.zt.hi&&(d.fillStyle=a,d.fillRect(u.ri,u.li,u.ai-u.ri,u.oi)),this.zt._i&&(d.fillStyle=s.O,d.fillRect(h.Qt?u.ui-u.ei:0,u.ii,u.ei,u.ci-u.ii)),h});e.useMediaCoordinateSpace(({context:c})=>{const d=l.di;c.font=s.R,c.textAlign=l.Qt?"right":"left",c.textBaseline="middle",c.fillStyle=a,c.fillText(this.zt.Kt,d.fi,(d.ii+d.ci)/2+d.pi)})}Gt(e,s,n,i){var a;const{context:o,bitmapSize:l,mediaSize:c,horizontalPixelRatio:d,verticalPixelRatio:h}=e,u=this.zt.hi||!this.zt.mi?s.T:0,m=this.zt.bi?s.C:0,y=s.L+this.Xt.wi,v=s.B+this.Xt.gi,g=s.A,b=s.I,x=this.zt.Kt,p=s.P,w=n.Mi(o,x),j=Math.ceil(n.xi(o,x)),S=p+y+v,_=s.C+g+b+j+u,k=Math.max(1,Math.floor(h));let P=Math.round(S*h);P%2!=k%2&&(P+=1);const M=m>0?Math.max(1,Math.floor(m*d)):0,T=Math.round(_*d),E=Math.round(u*d),I=(a=this.Xt.Si)!==null&&a!==void 0?a:this.Xt.ki,V=Math.round(I*h)-Math.floor(.5*h),G=Math.floor(V+k/2-P/2),A=G+P,R=i==="right",$=R?c.width-m:m,O=R?l.width-M:M;let U,J,Q;return R?(U=O-T,J=O-E,Q=$-u-g-m):(U=O+T,J=O+E,Q=$+u+g),{Qt:R,Jt:{ii:G,li:V,ci:A,ni:T,si:P,ht:2*d,ei:M,ti:U,ri:O,ai:J,oi:k,ui:l.width},di:{ii:G/h,ci:A/h,fi:Q,pi:w}}}}class Xm{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||pw)(this.Ci,this.yi),this.Ri=new(e||pw)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,s=!1){return Math.max(this.Pi.At(e,s),this.Ri.At(e,s))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class pI extends Xm{constructor(e,s,n){super(),this.jt=e,this.Li=s,this.Ei=n}zi(e,s,n){if(e.yt=!1,this.jt.W().mode===2)return;const i=this.jt.W().horzLine;if(!i.labelVisible)return;const a=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||a===null)return;const o=qm(i.labelBackgroundColor);n.t=o.t,e.V=o.i;const l=2/12*this.Li.P();n.wi=l,n.gi=l;const c=this.Ei(this.Li);n.ki=c.ki,e.Kt=this.Li.Fi(c._t,a),e.yt=!0}}const gI=/[1-9]/g;class LT{constructor(){this.zt=null}J(e){this.zt=e}X(e,s){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const n=e.useMediaCoordinateSpace(({context:m})=>(m.font=s.R,Math.round(s.Wi.xi(m,ae(this.zt).Kt,gI))));if(n<=0)return;const i=s.ji,a=n+2*i,o=a/2,l=this.zt.Hi;let c=this.zt.ki,d=Math.floor(c-o)+.5;d<0?(c+=Math.abs(0-d),d=Math.floor(c-o)+.5):d+a>l&&(c-=Math.abs(l-(d+a)),d=Math.floor(c-o)+.5);const h=d+a,u=Math.ceil(0+s.C+s.T+s.L+s.P+s.B);e.useBitmapCoordinateSpace(({context:m,horizontalPixelRatio:y,verticalPixelRatio:v})=>{const g=ae(this.zt);m.fillStyle=g.t;const b=Math.round(d*y),x=Math.round(0*v),p=Math.round(h*y),w=Math.round(u*v),j=Math.round(2*y);if(m.beginPath(),m.moveTo(b,x),m.lineTo(b,w-j),m.arcTo(b,w,b+j,w,j),m.lineTo(p-j,w),m.arcTo(p,w,p,w-j,j),m.lineTo(p,x),m.fill(),g.hi){const S=Math.round(g.ki*y),_=x,k=Math.round((_+s.T)*v);m.fillStyle=g.V;const P=Math.max(1,Math.floor(y)),M=Math.floor(.5*y);m.fillRect(S-M,_,P,k-_)}}),e.useMediaCoordinateSpace(({context:m})=>{const y=ae(this.zt),v=0+s.C+s.T+s.L+s.P/2;m.font=s.R,m.textAlign="left",m.textBaseline="middle",m.fillStyle=y.V;const g=s.Wi.Mi(m,"Apr0");m.translate(d+i,v+g),m.fillText(y.Kt,0,0)})}}class xI{constructor(e,s,n){this.ft=!0,this.Wt=new LT,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=s,this.Ei=n}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const s=this.vt.W().vertLine;if(!s.labelVisible)return;const n=this.$i.St();if(n.Ni())return;e.Hi=n.Hi();const i=this.Ei();if(i===null)return;e.ki=i.ki;const a=n.Ui(this.vt.xt());e.Kt=n.qi(ae(a)),e.yt=!0;const o=qm(s.labelBackgroundColor);e.t=o.t,e.V=o.i,e.hi=n.W().ticksVisible}}class hy{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var gw;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(gw||(gw={}));class yI extends hy{constructor(e,s){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=s,this.dn=new uI(e,this),this.fn=((i,a)=>o=>{const l=a(),c=i();if(o===ae(this.tn).vn())return{_t:c,ki:l};{const d=ae(o.Ct());return{_t:o.pn(l,d),ki:l}}})(()=>this.nn,()=>this.an);const n=((i,a)=>()=>{const o=this.$i.St().mn(i()),l=a();return o&&Number.isFinite(l)?{ot:o,ki:l}:null})(()=>this.sn,()=>this.Yt());this.bn=new xI(this,e,n),this.wn=new mI(this)}W(){return this.cn}gn(e,s){this._n=e,this.un=s}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,s,n){this.hn||(this.hn=!0),this.en=!0,this.yn(e,s,n)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,s){this.en&&this.tn===e||this.rn.clear();const n=[];return this.tn===e&&n.push(this.Dn(this.rn,s,this.fn)),n}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,s,n){this.Bn(e,s,n)&&this.Vn()}Bn(e,s,n){const i=this.ln,a=this.an,o=this.nn,l=this.sn,c=this.tn,d=this.On(n);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=n;const h=d!==null?d.Ct():null;return d!==null&&h!==null?(this.nn=s,this.an=d.Rt(s,h)):(this.nn=NaN,this.an=NaN),i!==this.ln||a!==this.an||l!==this.sn||o!==this.nn||c!==this.tn}Tn(){const e=this.$i.wt().map(n=>n.In().An()).filter(aI),s=e.length===0?null:Math.max(...e);this.sn=s!==null?s:NaN}Dn(e,s,n){let i=e.get(s);return i===void 0&&(i=new pI(this,s,n),e.set(s,i)),i}}function Ym(t){return t==="left"||t==="right"}class _s{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,s){const n=function(i,a){return i===void 0?a:{Fn:Math.max(i.Fn,a.Fn),Wn:i.Wn||a.Wn}}(this.zn.get(e),s);this.zn.set(e,n)}jn(){return this.En}Hn(e){const s=this.zn.get(e);return s===void 0?{Fn:this.En}:{Fn:Math.max(this.En,s.Fn),Wn:s.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const s of e.Ln)this.ns(s);this.En=Math.max(this.En,e.En),e.zn.forEach((s,n)=>{this.Nn(n,s)})}static ss(){return new _s(2)}static es(){return new _s(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(s=>s.qn===5);e!==-1&&this.Ln.splice(e,1)}}const xw=".";function ci(t,e){if(!Ln(t))return"n/a";if(!dd(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class Jm{constructor(e,s){if(s||(s=1),Ln(e)&&dd(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=s,this.hs()}format(e){const s=e<0?"":"";return e=Math.abs(e),s+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const s=this.Li/this.rs;let n=Math.floor(e),i="";const a=this._s!==void 0?this._s:NaN;if(s>1){let o=+(Math.round(e*s)-n*s).toFixed(this._s);o>=s&&(o-=s,n+=1),i=xw+ci(+o.toFixed(this._s)*this.rs,a)}else n=Math.round(n*s)/s,a>0&&(i=xw+ci(0,a));return n.toFixed(0)+i}}class FT extends Jm{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class vI{constructor(e){this.us=e}format(e){let s="";return e<0&&(s="-",e=-e),e<995?s+this.cs(e):e<999995?s+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),s+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),s+this.cs(e/1e9)+"B")}cs(e){let s;const n=Math.pow(10,this.us);return s=(e=Math.round(e*n)/n)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),s.replace(/(\.[1-9]*)0+$/,(i,a)=>a)}}function $T(t,e,s,n,i,a,o){if(e.length===0||n.from>=e.length||n.to<=0)return;const{context:l,horizontalPixelRatio:c,verticalPixelRatio:d}=t,h=e[n.from];let u=a(t,h),m=h;if(n.to-n.from<2){const y=i/2;l.beginPath();const v={nt:h.nt-y,st:h.st},g={nt:h.nt+y,st:h.st};l.moveTo(v.nt*c,v.st*d),l.lineTo(g.nt*c,g.st*d),o(t,u,v,g)}else{const y=(g,b)=>{o(t,u,m,b),l.beginPath(),u=g,m=b};let v=m;l.beginPath(),l.moveTo(h.nt*c,h.st*d);for(let g=n.from+1;g<n.to;++g){v=e[g];const b=a(t,v);switch(s){case 0:l.lineTo(v.nt*c,v.st*d);break;case 1:l.lineTo(v.nt*c,e[g-1].st*d),b!==u&&(y(b,v),l.lineTo(v.nt*c,e[g-1].st*d)),l.lineTo(v.nt*c,v.st*d);break;case 2:{const[x,p]=bI(e,g-1,g);l.bezierCurveTo(x.nt*c,x.st*d,p.nt*c,p.st*d,v.nt*c,v.st*d);break}}s!==1&&b!==u&&(y(b,v),l.moveTo(v.nt*c,v.st*d))}(m!==v||m===v&&s===1)&&o(t,u,m,v)}}const yw=6;function ap(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function vw(t,e){return{nt:t.nt/e,st:t.st/e}}function bI(t,e,s){const n=Math.max(0,e-1),i=Math.min(t.length-1,s+1);var a,o;return[(a=t[e],o=vw(ap(t[s],t[n]),yw),{nt:a.nt+o.nt,st:a.st+o.st}),ap(t[s],vw(ap(t[i],t[e]),yw))]}function wI(t,e,s,n,i){const{context:a,horizontalPixelRatio:o,verticalPixelRatio:l}=e;a.lineTo(i.nt*o,t*l),a.lineTo(n.nt*o,t*l),a.closePath(),a.fillStyle=s,a.fill()}class UT extends jn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var s;if(this.G===null)return;const{it:n,tt:i,ds:a,et:o,Nt:l,fs:c}=this.G,d=(s=this.G.vs)!==null&&s!==void 0?s:this.G.ps?0:e.mediaSize.height;if(i===null)return;const h=e.context;h.lineCap="butt",h.lineJoin="round",h.lineWidth=o,lo(h,l),h.lineWidth=1,$T(e,n,c,i,a,this.bs.bind(this),wI.bind(null,d))}}function s0(t,e,s){return Math.min(Math.max(t,e),s)}function xu(t,e,s){return e-t<=s}function BT(t){const e=Math.ceil(t);return e%2==0?e-1:e}class my{ws(e,s){const n=this.gs,{Ms:i,xs:a,Ss:o,ks:l,ys:c,vs:d}=s;if(this.Cs===void 0||n===void 0||n.Ms!==i||n.xs!==a||n.Ss!==o||n.ks!==l||n.vs!==d||n.ys!==c){const h=e.context.createLinearGradient(0,0,0,c);if(h.addColorStop(0,i),d!=null){const u=s0(d*e.verticalPixelRatio/c,0,1);h.addColorStop(u,a),h.addColorStop(u,o)}h.addColorStop(1,l),this.Cs=h,this.gs=s}return this.Cs}}class jI extends UT{constructor(){super(...arguments),this.Ts=new my}bs(e,s){return this.Ts.ws(e,{Ms:s.Ps,xs:"",Ss:"",ks:s.Rs,ys:e.bitmapSize.height})}}function NI(t,e){const s=t.context;s.strokeStyle=e,s.stroke()}class zT extends jn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:s,tt:n,ds:i,fs:a,et:o,Nt:l,Ds:c}=this.G;if(n===null)return;const d=e.context;d.lineCap="butt",d.lineWidth=o*e.verticalPixelRatio,lo(d,l),d.lineJoin="round";const h=this.Vs.bind(this);a!==void 0&&$T(e,s,a,n,i,h,NI),c&&function(u,m,y,v,g){const{horizontalPixelRatio:b,verticalPixelRatio:x,context:p}=u;let w=null;const j=Math.max(1,Math.floor(b))%2/2,S=y*x+j;for(let _=v.to-1;_>=v.from;--_){const k=m[_];if(k){const P=g(u,k);P!==w&&(p.beginPath(),w!==null&&p.fill(),p.fillStyle=P,w=P);const M=Math.round(k.nt*b)+j,T=k.st*x;p.moveTo(M,T),p.arc(M,T,S,0,2*Math.PI)}}p.fill()}(e,s,c,n,h)}}class VT extends zT{Vs(e,s){return s.lt}}function WT(t,e,s,n,i=0,a=e.length){let o=a-i;for(;0<o;){const l=o>>1,c=i+l;n(e[c],s)===t?(i=c+1,o-=l+1):o=l}return i}const Ld=WT.bind(null,!0),HT=WT.bind(null,!1);function SI(t,e){return t.ot<e}function CI(t,e){return e<t.ot}function KT(t,e,s){const n=e.Os(),i=e.ui(),a=Ld(t,n,SI),o=HT(t,i,CI);if(!s)return{from:a,to:o};let l=a,c=o;return a>0&&a<t.length&&t[a].ot>=n&&(l=a-1),o>0&&o<t.length&&t[o-1].ot<=i&&(c=o+1),{from:l,to:c}}class fy{constructor(e,s,n){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=s,this.Fs=n}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),s=this.Ns.St();if(this.qs(),s.Ni()||e.Ni())return;const n=s.Xs();if(n===null||this.Es.In().Ks()===0)return;const i=this.Es.Ct();i!==null&&(this.Ls=KT(this.zs,n,this.Fs),this.Gs(e,s,i.Vt),this.Js())}}class Zm extends fy{constructor(e,s){super(e,s,!0)}Gs(e,s,n){s.Qs(this.zs,ud(this.Ls)),e.te(this.zs,n,ud(this.Ls))}ie(e,s){return{ot:e,_t:s,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>{const n=s.Vt[3];return this.se(s.ee,n,e)})}}class TI extends Zm{constructor(e,s){super(e,s),this.js=new uy,this.re=new jI,this.he=new VT,this.js.Z([this.re,this.he])}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class kI extends jn{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(s),this.ae>=2&&Math.max(1,Math.floor(s))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(s)):this.ae;let i=null;const a=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*s);for(let o=this.zt.tt.from;o<this.zt.tt.to;++o){const l=this.zt.In[o];i!==l.ce&&(e.fillStyle=l.ce,i=l.ce);const c=Math.floor(.5*this.oe),d=Math.round(l.nt*s),h=d-c,u=this.oe,m=h+u-1,y=Math.min(l.de,l.fe),v=Math.max(l.de,l.fe),g=Math.round(y*n)-c,b=Math.round(v*n)+c,x=Math.max(b-g,this.oe);e.fillRect(h,g,u,x);const p=Math.ceil(1.5*this.ae);if(a){if(this.zt.ve){const _=d-p;let k=Math.max(g,Math.round(l.pe*n)-c),P=k+u-1;P>g+x-1&&(P=g+x-1,k=P-u+1),e.fillRect(_,k,h-_,P-k+1)}const w=d+p;let j=Math.max(g,Math.round(l.me*n)-c),S=j+u-1;S>g+x-1&&(S=g+x-1,j=S-u+1),e.fillRect(m+1,j,w-m,S-j+1)}}}_e(e){const s=Math.floor(e);return Math.max(s,Math.floor(function(n,i){return Math.floor(.3*n*i)}(ae(this.zt).le,e)))}}class GT extends fy{constructor(e,s){super(e,s,!1)}Gs(e,s,n){s.Qs(this.zs,ud(this.Ls)),e.be(this.zs,n,ud(this.Ls))}we(e,s,n){return{ot:e,ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>this.se(s.ee,s,e))}}class EI extends GT{constructor(){super(...arguments),this.js=new kI}se(e,s,n){return Object.assign(Object.assign({},this.we(e,s,n)),n.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class PI extends UT{constructor(){super(...arguments),this.Ts=new my}bs(e,s){const n=this.G;return this.Ts.ws(e,{Ms:s.ke,xs:s.ye,Ss:s.Ce,ks:s.Te,ys:e.bitmapSize.height,vs:n.vs})}}class _I extends zT{constructor(){super(...arguments),this.Pe=new my}Vs(e,s){const n=this.G;return this.Pe.ws(e,{Ms:s.Re,xs:s.Re,Ss:s.De,ks:s.De,ys:e.bitmapSize.height,vs:n.vs})}}class MI extends Zm{constructor(e,s){super(e,s),this.js=new uy,this.Ve=new PI,this.Oe=new _I,this.js.Z([this.Ve,this.Oe])}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const s=this.Es.W(),n=this.Es.Dt().Rt(s.baseValue.price,e.Vt),i=this.Ns.St().le();this.Ve.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineType,vs:n,ps:!1,tt:this.Ls,ds:i}),this.Oe.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineVisible?s.lineType:void 0,Ds:s.pointMarkersVisible?s.pointMarkersRadius||s.lineWidth/2+2:void 0,vs:n,tt:this.Ls,ds:i})}}class AI extends jn{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:s}=e;this.ae=function(a,o){if(a>=2.5&&a<=4)return Math.floor(3*o);const l=1-.2*Math.atan(Math.max(4,a)-4)/(.5*Math.PI),c=Math.floor(a*l*o),d=Math.floor(a*o),h=Math.min(c,d);return Math.max(Math.floor(o),h)}(this.zt.le,s),this.ae>=2&&Math.floor(s)%2!=this.ae%2&&this.ae--;const n=this.zt.In;this.zt.Be&&this.Ae(e,n,this.zt.tt),this.zt._i&&this.Ie(e,n,this.zt.tt);const i=this.ze(s);(!this.zt._i||this.ae>2*i)&&this.Le(e,n,this.zt.tt)}Ae(e,s,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:a,verticalPixelRatio:o}=e;let l="",c=Math.min(Math.floor(a),Math.floor(this.zt.le*a));c=Math.max(Math.floor(a),Math.min(c,this.ae));const d=Math.floor(.5*c);let h=null;for(let u=n.from;u<n.to;u++){const m=s[u];m.Ee!==l&&(i.fillStyle=m.Ee,l=m.Ee);const y=Math.round(Math.min(m.pe,m.me)*o),v=Math.round(Math.max(m.pe,m.me)*o),g=Math.round(m.de*o),b=Math.round(m.fe*o);let x=Math.round(a*m.nt)-d;const p=x+c-1;h!==null&&(x=Math.max(h+1,x),x=Math.min(x,p));const w=p-x+1;i.fillRect(x,g,w,y-g),i.fillRect(x,v+1,w,b-v),h=p}}ze(e){let s=Math.floor(1*e);this.ae<=2*s&&(s=Math.floor(.5*(this.ae-1)));const n=Math.max(Math.floor(e),s);return this.ae<=2*n?Math.max(Math.floor(e),Math.floor(1*e)):n}Ie(e,s,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:a,verticalPixelRatio:o}=e;let l="";const c=this.ze(a);let d=null;for(let h=n.from;h<n.to;h++){const u=s[h];u.Ne!==l&&(i.fillStyle=u.Ne,l=u.Ne);let m=Math.round(u.nt*a)-Math.floor(.5*this.ae);const y=m+this.ae-1,v=Math.round(Math.min(u.pe,u.me)*o),g=Math.round(Math.max(u.pe,u.me)*o);if(d!==null&&(m=Math.max(d+1,m),m=Math.min(m,y)),this.zt.le*a>2*c)fI(i,m,v,y-m+1,g-v+1,c);else{const b=y-m+1;i.fillRect(m,v,b,g-v+1)}d=y}}Le(e,s,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:a,verticalPixelRatio:o}=e;let l="";const c=this.ze(a);for(let d=n.from;d<n.to;d++){const h=s[d];let u=Math.round(Math.min(h.pe,h.me)*o),m=Math.round(Math.max(h.pe,h.me)*o),y=Math.round(h.nt*a)-Math.floor(.5*this.ae),v=y+this.ae-1;if(h.ce!==l){const g=h.ce;i.fillStyle=g,l=g}this.zt._i&&(y+=c,u+=c,v-=c,m-=c),u>m||i.fillRect(y,u,v-y+1,m-u+1)}}}class DI extends GT{constructor(){super(...arguments),this.js=new AI}se(e,s,n){return Object.assign(Object.assign({},this.we(e,s,n)),n.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class RI{constructor(e,s){this.Fe=e,this.Li=s}X(e,s,n){this.Fe.draw(e,this.Li,s,n)}}class op extends fy{constructor(e,s,n){super(e,s,!1),this.wn=n,this.js=new RI(this.wn.renderer(),i=>{const a=e.Ct();return a===null?null:e.Dt().Rt(i,a.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>Object.assign(Object.assign({ot:s.ee,nt:NaN},e.$s(s.ee)),{He:s.$e}))}Gs(e,s){s.Qs(this.zs,ud(this.Ls))}Js(){this.wn.update({bars:this.zs.map(OI),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function OI(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class II extends jn{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(s);const i=Math.max(1,Math.floor(n)),a=Math.round(this.zt.Ye*n)-Math.floor(i/2),o=a+i;for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const c=this.zt.it[l],d=this.Ue[l-this.zt.tt.from],h=Math.round(c.st*n);let u,m;e.fillStyle=c.ce,h<=a?(u=h,m=o):(u=a,m=h-Math.floor(i/2)+i),e.fillRect(d.Os,u,d.ui-d.Os+1,m-u)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const s=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),n=Math.round(this.zt.le*e)-s;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const o=this.zt.it[a],l=Math.round(o.nt*e);let c,d;if(n%2){const h=(n-1)/2;c=l-h,d=l+h}else{const h=n/2;c=l-h,d=l+h-1}this.Ue[a-this.zt.tt.from]={Os:c,ui:d,Ze:l,Xe:o.nt*e,ot:o.ot}}for(let a=this.zt.tt.from+1;a<this.zt.tt.to;a++){const o=this.Ue[a-this.zt.tt.from],l=this.Ue[a-this.zt.tt.from-1];o.ot===l.ot+1&&o.Os-l.ui!==s+1&&(l.Ze>l.Xe?l.ui=o.Os-s-1:o.Os=l.ui+s+1)}let i=Math.ceil(this.zt.le*e);for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const o=this.Ue[a-this.zt.tt.from];o.ui<o.Os&&(o.ui=o.Os);const l=o.ui-o.Os+1;i=Math.min(l,i)}if(s>0&&i<4)for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const o=this.Ue[a-this.zt.tt.from];o.ui-o.Os+1>i&&(o.Ze>o.Xe?o.ui-=1:o.Os+=1)}}}class LI extends Zm{constructor(){super(...arguments),this.js=new II}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,ae(this.Es.Ct()).Vt)};this.js.J(e)}}class FI extends Zm{constructor(){super(...arguments),this.js=new VT}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.W(),s={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(s)}}const $I=/[2-9]/g;class hd{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,s,n){return this.sr(e,s,n).width}Mi(e,s,n){const i=this.sr(e,s,n);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}sr(e,s,n){const i=n||$I,a=String(s).replace(i,"0");if(this.tr.has(a))return Xs(this.tr.get(a)).er;if(this.Ke===this.ir){const l=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(l),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const o=e.measureText(a);return e.restore(),o.width===0&&s.length||(this.tr.set(a,{er:o,rr:this.Ge}),this.Qe[this.Ge]=a,this.Ke++,this.Ge++),o}}class UI{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,s,n){this.hr=e,this.k=s,this.lr=n}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class qT{constructor(e,s,n){this.ur=e,this.ar=new hd(50),this.cr=s,this.F=n,this.j=-1,this.Wt=new UI(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const s=e.vr(this.cr)?e.pr():this.cr.Dt();if(s===null)return null;const n=e.mr(s);if(n==="overlay")return null;const i=this.F.br();return i.P!==this.j&&(this.j=i.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),i,n),this.Wt}}class BI extends jn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,s){var n;if(!(!((n=this.zt)===null||n===void 0)&&n.yt))return null;const{st:i,et:a,gr:o}=this.zt;return s>=i-a-7&&s<=i+a+7?{Mr:this.zt,gr:o}:null}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null||this.zt.yt===!1)return;const a=Math.round(this.zt.st*i);a<0||a>s.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*n),lo(e,this.zt.Nt),DT(e,a,0,s.width))}}class py{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new BI,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class zI extends py{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),s=e.Cr().Cr;if(s!==2&&s!==3)return;const n=this.Es.W();if(!n.baseLineVisible||!this.Es.yt())return;const i=this.Es.Ct();i!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(i.Vt,i.Vt),this.Sr.V=n.baseLineColor,this.Sr.et=n.baseLineWidth,this.Sr.Nt=n.baseLineStyle)}}class VI extends jn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){const i=this.zt;if(i===null)return;const a=Math.max(1,Math.floor(s)),o=a%2/2,l=Math.round(i.Xe.x*s)+o,c=i.Xe.y*n;e.fillStyle=i.Tr,e.beginPath();const d=Math.max(2,1.5*i.Pr)*s;e.arc(l,c,d,0,2*Math.PI,!1),e.fill(),e.fillStyle=i.Rr,e.beginPath(),e.arc(l,c,i.ht*s,0,2*Math.PI,!1),e.fill(),e.lineWidth=a,e.strokeStyle=i.Dr,e.beginPath(),e.arc(l,c,i.ht*s+a/2,0,2*Math.PI,!1),e.stroke()}}const WI=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function bw(t,e,s,n){return function(i,a){if(i==="transparent")return i;const o=cd(i),l=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${a*l})`}(t,s+(n-s)*e)}function ww(t,e){const s=t%2600/2600;let n;for(const c of WI)if(s>=c.Vr&&s<=c.Or){n=c;break}ha(n!==void 0,"Last price animation internal logic error");const i=(s-n.Vr)/(n.Or-n.Vr);return{Rr:bw(e,i,n.Ir,n.zr),Dr:bw(e,i,n.Lr,n.Er),ht:(a=i,o=n.Br,l=n.Ar,o+(l-o)*a)};var a,o,l}class HI{constructor(e){this.Wt=new VI,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),s=this.Wr-e;if(s>0)return void(s<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),s=e.Xs(),n=this.jr.Ct();if(s===null||n===null)return;const i=this.jr.Zr(!0);if(i.Xr||!s.Kr(i.ee))return;const a={x:e.It(i.ee),y:this.jr.Dt().Rt(i._t,n.Vt)},o=i.V,l=this.jr.W().lineWidth,c=ww(this.Gr(),o);this.Wt.J({Tr:o,Pr:l,Rr:c.Rr,Dr:c.Dr,ht:c.ht,Xe:a})}Yr(){const e=this.Wt.$e();if(e!==null){const s=ww(this.Gr(),e.Tr);e.Rr=s.Rr,e.Dr=s.Dr,e.ht=s.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function Ac(t,e){return BT(Math.min(Math.max(t,12),30)*e)}function md(t,e){switch(t){case"arrowDown":case"arrowUp":return Ac(e,1);case"circle":return Ac(e,.8);case"square":return Ac(e,.7)}}function QT(t){return function(e){const s=Math.ceil(e);return s%2!=0?s-1:s}(Ac(t,1))}function jw(t){return Math.max(Ac(t,.1),3)}function Nw(t,e,s){return e?t:s?Math.ceil(t/2):0}function XT(t,e,s,n,i){const a=md("square",s),o=(a-1)/2,l=t-o,c=e-o;return n>=l&&n<=l+a&&i>=c&&i<=c+a}function Sw(t,e,s,n){const i=(md("arrowUp",n)-1)/2*s.Jr,a=(BT(n/2)-1)/2*s.Jr;e.beginPath(),t?(e.moveTo(s.nt-i,s.st),e.lineTo(s.nt,s.st-i),e.lineTo(s.nt+i,s.st),e.lineTo(s.nt+a,s.st),e.lineTo(s.nt+a,s.st+i),e.lineTo(s.nt-a,s.st+i),e.lineTo(s.nt-a,s.st)):(e.moveTo(s.nt-i,s.st),e.lineTo(s.nt,s.st+i),e.lineTo(s.nt+i,s.st),e.lineTo(s.nt+a,s.st),e.lineTo(s.nt+a,s.st-i),e.lineTo(s.nt-a,s.st-i),e.lineTo(s.nt-a,s.st)),e.fill()}function KI(t,e,s,n,i,a){return XT(e,s,n,i,a)}class GI extends jn{constructor(){super(...arguments),this.zt=null,this.ar=new hd,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,s){this.j===e&&this.H===s||(this.j=e,this.H=s,this.Qr=Cl(e,s),this.ar.nr())}wr(e,s){if(this.zt===null||this.zt.tt===null)return null;for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const i=this.zt.it[n];if(QI(i,e,s))return{Mr:i.th,gr:i.gr}}return null}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n},i,a){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const l=this.zt.it[o];l.Kt!==void 0&&(l.Kt.Hi=this.ar.xi(e,l.Kt.ih),l.Kt.At=this.j,l.Kt.nt=l.nt-l.Kt.Hi/2),qI(l,e,s,n)}}}}function qI(t,e,s,n){e.fillStyle=t.V,t.Kt!==void 0&&function(i,a,o,l,c,d){i.save(),i.scale(c,d),i.fillText(a,o,l),i.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,s,n),function(i,a,o){if(i.Ks!==0){switch(i.nh){case"arrowDown":return void Sw(!1,a,o,i.Ks);case"arrowUp":return void Sw(!0,a,o,i.Ks);case"circle":return void function(l,c,d){const h=(md("circle",d)-1)/2;l.beginPath(),l.arc(c.nt,c.st,h*c.Jr,0,2*Math.PI,!1),l.fill()}(a,o,i.Ks);case"square":return void function(l,c,d){const h=md("square",d),u=(h-1)*c.Jr/2,m=c.nt-u,y=c.st-u;l.fillRect(m,y,h*c.Jr,h*c.Jr)}(a,o,i.Ks)}i.nh}}(t,e,function(i,a,o){const l=Math.max(1,Math.floor(a))%2/2;return{nt:Math.round(i.nt*a)+l,st:i.st*o,Jr:a}}(t,s,n))}function QI(t,e,s){return!(t.Kt===void 0||!function(n,i,a,o,l,c){const d=o/2;return l>=n&&l<=n+a&&c>=i-d&&c<=i+d}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,s))||function(n,i,a){if(n.Ks===0)return!1;switch(n.nh){case"arrowDown":case"arrowUp":return KI(0,n.nt,n.st,n.Ks,i,a);case"circle":return function(o,l,c,d,h){const u=2+md("circle",c)/2,m=o-d,y=l-h;return Math.sqrt(m*m+y*y)<=u}(n.nt,n.st,n.Ks,i,a);case"square":return XT(n.nt,n.st,n.Ks,i,a)}}(t,e,s)}function XI(t,e,s,n,i,a,o,l,c){const d=Ln(s)?s:s.Se,h=Ln(s)?s:s.Me,u=Ln(s)?s:s.xe,m=Ln(e.size)?Math.max(e.size,0):1,y=QT(l.le())*m,v=y/2;switch(t.Ks=y,e.position){case"inBar":return t.st=o.Rt(d,c),void(t.Kt!==void 0&&(t.Kt.st=t.st+v+a+.6*i));case"aboveBar":return t.st=o.Rt(h,c)-v-n.sh,t.Kt!==void 0&&(t.Kt.st=t.st-v-.6*i,n.sh+=1.2*i),void(n.sh+=y+a);case"belowBar":return t.st=o.Rt(u,c)+v+n.eh,t.Kt!==void 0&&(t.Kt.st=t.st+v+a+.6*i,n.eh+=1.2*i),void(n.eh+=y+a)}e.position}class YI{constructor(e,s){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new GI,this.jr=e,this.$i=s,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const s=this.$i.W().layout;return this.Wt._r(s.fontSize,s.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),s=jw(e),n=1.5*QT(e)+2*s,i=this.fh();this.ah={above:Nw(n,i.aboveBar,i.inBar),below:Nw(n,i.belowBar,i.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,s)=>(e[s.position]||(e[s.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),s=this.$i.St(),n=this.jr.dh();this.rh&&(this.zt.it=n.map(h=>({ot:h.time,nt:0,st:0,Ks:0,nh:h.shape,V:h.color,th:h.th,gr:h.id,Kt:void 0})),this.rh=!1);const i=this.$i.W().layout;this.zt.tt=null;const a=s.Xs();if(a===null)return;const o=this.jr.Ct();if(o===null||this.zt.it.length===0)return;let l=NaN;const c=jw(s.le()),d={sh:c,eh:c};this.zt.tt=KT(this.zt.it,a,!0);for(let h=this.zt.tt.from;h<this.zt.tt.to;h++){const u=n[h];u.time!==l&&(d.sh=c,d.eh=c,l=u.time);const m=this.zt.it[h];m.nt=s.It(u.time),u.text!==void 0&&u.text.length>0&&(m.Kt={ih:u.text,nt:0,st:0,Hi:0,At:0});const y=this.jr.ph(u.time);y!==null&&XI(m,u,y,d,i.fontSize,c,e,s,o.Vt)}this.ft=!1}}class JI extends py{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const s=this.Es.W();if(!s.priceLineVisible||!this.Es.yt())return;const n=this.Es.Zr(s.priceLineSource===0);n.Xr||(e.yt=!0,e.st=n.ki,e.V=this.Es.mh(n.V),e.et=s.priceLineWidth,e.Nt=s.priceLineStyle)}}class ZI extends Xm{constructor(e){super(),this.jt=e}zi(e,s,n){e.yt=!1,s.yt=!1;const i=this.jt;if(!i.yt())return;const a=i.W(),o=a.lastValueVisible,l=i.bh()!=="",c=a.seriesLastValueMode===0,d=i.Zr(!1);if(d.Xr)return;o&&(e.Kt=this.wh(d,o,c),e.yt=e.Kt.length!==0),(l||c)&&(s.Kt=this.gh(d,o,l,c),s.yt=s.Kt.length>0);const h=i.mh(d.V),u=qm(h);n.t=u.t,n.ki=d.ki,s.Ot=i.$t().Bt(d.ki/i.Dt().At()),e.Ot=h,e.V=u.i,s.V=u.i}gh(e,s,n,i){let a="";const o=this.jt.bh();return n&&o.length!==0&&(a+=`${o} `),s&&i&&(a+=this.jt.Dt().Mh()?e.xh:e.Sh),a.trim()}wh(e,s,n){return s?n?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function Cw(t,e,s,n){const i=Number.isFinite(e),a=Number.isFinite(s);return i&&a?t(e,s):i||a?i?e:s:n}class pr{constructor(e,s){this.kh=e,this.yh=s}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new pr(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new pr(Cw(Math.min,this.Ph(),e.Ph(),-1/0),Cw(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!Ln(e)||this.yh-this.kh===0)return;const s=.5*(this.yh+this.kh);let n=this.yh-s,i=this.kh-s;n*=e,i*=e,this.yh=s+n,this.kh=s+i}Oh(e){Ln(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new pr(e.minValue,e.maxValue)}}class Hh{constructor(e,s){this.Ih=e,this.zh=s||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Hh(pr.Ah(e.priceRange),e.margins)}}class eL extends py{constructor(e,s){super(e),this.Nh=s}yr(){const e=this.Sr;e.yt=!1;const s=this.Nh.W();if(!this.Es.yt()||!s.lineVisible)return;const n=this.Nh.Fh();n!==null&&(e.yt=!0,e.st=n,e.V=s.color,e.et=s.lineWidth,e.Nt=s.lineStyle,e.gr=this.Nh.W().id)}}class tL extends Xm{constructor(e,s){super(),this.jr=e,this.Nh=s}zi(e,s,n){e.yt=!1,s.yt=!1;const i=this.Nh.W(),a=i.axisLabelVisible,o=i.title!=="",l=this.jr;if(!a||!l.yt())return;const c=this.Nh.Fh();if(c===null)return;o&&(s.Kt=i.title,s.yt=!0),s.Ot=l.$t().Bt(c/l.Dt().At()),e.Kt=this.Wh(i.price),e.yt=!0;const d=qm(i.axisLabelColor||i.color);n.t=d.t;const h=i.axisLabelTextColor||d.i;e.V=h,s.V=h,n.ki=c}Wh(e){const s=this.jr.Ct();return s===null?"":this.jr.Dt().Fi(e,s.Vt)}}class sL{constructor(e,s){this.jr=e,this.cn=s,this.jh=new eL(e,this),this.ur=new tL(e,this),this.Hh=new qT(this.ur,e,e.$t())}$h(e){wn(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,s=e.Dt();if(e.$t().St().Ni()||s.Ni())return null;const n=e.Ct();return n===null?null:s.Rt(this.cn.price,n.Vt)}}class rL extends hy{constructor(e){super(),this.$i=e}$t(){return this.$i}}const nL={Bar:(t,e,s,n)=>{var i;const a=e.upColor,o=e.downColor,l=ae(t(s,n)),c=zo(l.Vt[0])<=zo(l.Vt[3]);return{ce:(i=l.V)!==null&&i!==void 0?i:c?a:o}},Candlestick:(t,e,s,n)=>{var i,a,o;const l=e.upColor,c=e.downColor,d=e.borderUpColor,h=e.borderDownColor,u=e.wickUpColor,m=e.wickDownColor,y=ae(t(s,n)),v=zo(y.Vt[0])<=zo(y.Vt[3]);return{ce:(i=y.V)!==null&&i!==void 0?i:v?l:c,Ne:(a=y.Ot)!==null&&a!==void 0?a:v?d:h,Ee:(o=y.Xh)!==null&&o!==void 0?o:v?u:m}},Custom:(t,e,s,n)=>{var i;return{ce:(i=ae(t(s,n)).V)!==null&&i!==void 0?i:e.color}},Area:(t,e,s,n)=>{var i,a,o,l;const c=ae(t(s,n));return{ce:(i=c.lt)!==null&&i!==void 0?i:e.lineColor,lt:(a=c.lt)!==null&&a!==void 0?a:e.lineColor,Ps:(o=c.Ps)!==null&&o!==void 0?o:e.topColor,Rs:(l=c.Rs)!==null&&l!==void 0?l:e.bottomColor}},Baseline:(t,e,s,n)=>{var i,a,o,l,c,d;const h=ae(t(s,n));return{ce:h.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(i=h.Re)!==null&&i!==void 0?i:e.topLineColor,De:(a=h.De)!==null&&a!==void 0?a:e.bottomLineColor,ke:(o=h.ke)!==null&&o!==void 0?o:e.topFillColor1,ye:(l=h.ye)!==null&&l!==void 0?l:e.topFillColor2,Ce:(c=h.Ce)!==null&&c!==void 0?c:e.bottomFillColor1,Te:(d=h.Te)!==null&&d!==void 0?d:e.bottomFillColor2}},Line:(t,e,s,n)=>{var i,a;const o=ae(t(s,n));return{ce:(i=o.V)!==null&&i!==void 0?i:e.color,lt:(a=o.V)!==null&&a!==void 0?a:e.color}},Histogram:(t,e,s,n)=>{var i;return{ce:(i=ae(t(s,n)).V)!==null&&i!==void 0?i:e.color}}};class iL{constructor(e){this.Kh=(s,n)=>n!==void 0?n.Vt:this.jr.In().Gh(s),this.jr=e,this.Jh=nL[e.Qh()]}$s(e,s){return this.Jh(this.Kh,this.jr.W(),e,s)}}var Tw;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(Tw||(Tw={}));const Ei=30;class aL{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,s=0){const n=this.hl(e,s);return n===null?null:Object.assign(Object.assign({},this.al(n)),{ee:this.rl(n)})}ne(){return this.tl}ol(e,s,n){if(this.Ni())return null;let i=null;for(const a of n)i=yu(i,this._l(e,s,a));return i}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,s){const n=this.ul(e);if(n===null&&s!==0)switch(s){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return n}cl(e){let s=this.fl(e);return s>0&&(s-=1),s!==this.tl.length&&this.rl(s)<e?s:null}dl(e){const s=this.vl(e);return s!==this.tl.length&&e<this.rl(s)?s:null}ul(e){const s=this.fl(e);return s===this.tl.length||e<this.tl[s].ee?null:s}fl(e){return Ld(this.tl,e,(s,n)=>s.ee<n)}vl(e){return HT(this.tl,e,(s,n)=>s.ee>n)}pl(e,s,n){let i=null;for(let a=e;a<s;a++){const o=this.tl[a].Vt[n];Number.isNaN(o)||(i===null?i={ml:o,bl:o}:(o<i.ml&&(i.ml=o),o>i.bl&&(i.bl=o)))}return i}_l(e,s,n){if(this.Ni())return null;let i=null;const a=ae(this.el()),o=ae(this.An()),l=Math.max(e,a),c=Math.min(s,o),d=Math.ceil(l/Ei)*Ei,h=Math.max(d,Math.floor(c/Ei)*Ei);{const m=this.fl(l),y=this.vl(Math.min(c,d,s));i=yu(i,this.pl(m,y,n))}let u=this.il.get(n);u===void 0&&(u=new Map,this.il.set(n,u));for(let m=Math.max(d+1,l);m<h;m+=Ei){const y=Math.floor(m/Ei);let v=u.get(y);if(v===void 0){const g=this.fl(y*Ei),b=this.vl((y+1)*Ei-1);v=this.pl(g,b,n),u.set(y,v)}i=yu(i,v)}{const m=this.fl(h),y=this.vl(c);i=yu(i,this.pl(m,y,n))}return i}}function yu(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class oL{constructor(e){this.wl=e}X(e,s,n){this.wl.draw(e)}gl(e,s,n){var i,a;(a=(i=this.wl).drawBackground)===null||a===void 0||a.call(i,e)}}class lp{constructor(e){this.tr=null,this.wn=e}gt(){var e;const s=this.wn.renderer();if(s===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===s)return this.tr.xl;const n=new oL(s);return this.tr={Ml:s,xl:n},n}Sl(){var e,s,n;return(n=(s=(e=this.wn).zOrder)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:"normal"}}function YT(t){var e,s,n,i,a;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(n=(s=t.visible)===null||s===void 0?void 0:s.call(t))===null||n===void 0||n,hi:(a=(i=t.tickVisible)===null||i===void 0?void 0:i.call(t))===null||a===void 0||a}}class lL{constructor(e,s){this.Wt=new LT,this.kl=e,this.yl=s}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},YT(this.kl))),this.Wt}}class cL extends Xm{constructor(e,s){super(),this.kl=e,this.Li=s}zi(e,s,n){const i=YT(this.kl);n.t=i.t,e.V=i.V;const a=2/12*this.Li.P();n.wi=a,n.gi=a,n.ki=i.ki,n.Si=i.Si,e.Kt=i.Kt,e.yt=i.yt,e.hi=i.hi}}class dL{constructor(e,s){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=s}Ol(){return this.Vl}Vn(){var e,s;(s=(e=this.Vl).updateAllViews)===null||s===void 0||s.call(e)}Pn(){var e,s,n,i;const a=(n=(s=(e=this.Vl).paneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Cl)===null||i===void 0?void 0:i.Ml)===a)return this.Cl.xl;const o=a.map(l=>new lp(l));return this.Cl={Ml:a,xl:o},o}Qi(){var e,s,n,i;const a=(n=(s=(e=this.Vl).timeAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Tl)===null||i===void 0?void 0:i.Ml)===a)return this.Tl.xl;const o=this.jr.$t().St(),l=a.map(c=>new lL(c,o));return this.Tl={Ml:a,xl:l},l}Rn(){var e,s,n,i;const a=(n=(s=(e=this.Vl).priceAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Pl)===null||i===void 0?void 0:i.Ml)===a)return this.Pl.xl;const o=this.jr.Dt(),l=a.map(c=>new cL(c,o));return this.Pl={Ml:a,xl:l},l}Bl(){var e,s,n,i;const a=(n=(s=(e=this.Vl).priceAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Rl)===null||i===void 0?void 0:i.Ml)===a)return this.Rl.xl;const o=a.map(l=>new lp(l));return this.Rl={Ml:a,xl:o},o}Al(){var e,s,n,i;const a=(n=(s=(e=this.Vl).timeAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Dl)===null||i===void 0?void 0:i.Ml)===a)return this.Dl.xl;const o=a.map(l=>new lp(l));return this.Dl={Ml:a,xl:o},o}Il(e,s){var n,i,a;return(a=(i=(n=this.Vl).autoscaleInfo)===null||i===void 0?void 0:i.call(n,e,s))!==null&&a!==void 0?a:null}wr(e,s){var n,i,a;return(a=(i=(n=this.Vl).hitTest)===null||i===void 0?void 0:i.call(n,e,s))!==null&&a!==void 0?a:null}}function cp(t,e,s,n){t.forEach(i=>{e(i).forEach(a=>{a.Sl()===s&&n.push(a)})})}function dp(t){return t.Pn()}function uL(t){return t.Bl()}function hL(t){return t.Al()}class gy extends rL{constructor(e,s,n,i,a){super(e),this.zt=new aL,this.jh=new JI(this),this.zl=[],this.Ll=new zI(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=s,this.$l=n;const o=new ZI(this);this.rn=[o],this.Hh=new qT(o,this,e),n!=="Area"&&n!=="Line"&&n!=="Baseline"||(this.El=new HI(this)),this.Ul(),this.ql(a)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const s={Xr:!0},n=this.Dt();if(this.$t().St().Ni()||n.Ni()||this.zt.Ni())return s;const i=this.$t().St().Xs(),a=this.Ct();if(i===null||a===null)return s;let o,l;if(e){const u=this.zt.sl();if(u===null)return s;o=u,l=u.ee}else{const u=this.zt.ll(i.ui(),-1);if(u===null||(o=this.zt.Gh(u.ee),o===null))return s;l=u.ee}const c=o.Vt[3],d=this.Us().$s(l,{Vt:o}),h=n.Rt(c,a.Vt);return{Xr:!1,_t:c,Kt:n.Fi(c,a.Vt),xh:n.Yl(c),Sh:n.Zl(c,a.Vt),V:d.ce,ki:h,ee:l}}Us(){return this.Nl!==null||(this.Nl=new iL(this)),this.Nl}W(){return this.cn}$h(e){const s=e.priceScaleId;s!==void 0&&s!==this.cn.priceScaleId&&this.$t().Xl(this,s),wn(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,s){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(s&&s.ta?this.El.$r():e.length===0&&this.El.Hr());const n=this.$t().dr(this);this.$t().ia(n),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const s=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(s),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const s=new sL(this,e);return this.zl.push(s),this.$t().Gl(this),s}ra(e){const s=this.zl.indexOf(e);s!==-1&&this.zl.splice(s,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const s=e.Os();return this.zt.ll(s,1)}In(){return this.zt}ph(e){const s=this.zt.Gh(e);return s===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3]}:s.Vt[3]}aa(e){const s=[];cp(this.Hl,dp,"top",s);const n=this.El;return n!==null&&n.yt()&&(this.jl===null&&n.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),n.Ur(),s.unshift(n)),s}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const s=this.zl.map(n=>n.qh());return e.push(...s),cp(this.Hl,dp,"normal",e),e}ua(){return this.ca(dp,"bottom")}da(e){return this.ca(uL,e)}fa(e){return this.ca(hL,e)}va(e,s){return this.Hl.map(n=>n.wr(e,s)).filter(n=>n!==null)}Ji(e){return[this.Hh,...this.zl.map(s=>s.Yh())]}Rn(e,s){if(s!==this.Yi&&!this._a())return[];const n=[...this.rn];for(const i of this.zl)n.push(i.Zh());return this.Hl.forEach(i=>{n.push(...i.Rn())}),n}Qi(){const e=[];return this.Hl.forEach(s=>{e.push(...s.Qi())}),e}Il(e,s){if(this.cn.autoscaleInfoProvider!==void 0){const n=this.cn.autoscaleInfoProvider(()=>{const i=this.pa(e,s);return i===null?null:i.Bh()});return Hh.Ah(n)}return this.pa(e,s)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const s of this.rn)s.bt();for(const s of this.zl)s.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(s=>s.Vn())}Dt(){return ae(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const s=this.zt.Gh(e);return s===null?null:{_t:s.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new dL(e,this))}ya(e){this.Hl=this.Hl.filter(s=>s.Ol()!==e)}Ca(){if(this.wn instanceof op)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof op)return e=>this.wn.je(e)}_a(){return!Ym(this.Dt().Pa())}pa(e,s){if(!dd(e)||!dd(s)||this.zt.Ni())return null;const n=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],i=this.zt.ol(e,s,n);let a=i!==null?new pr(i.ml,i.bl):null;if(this.Qh()==="Histogram"){const l=this.cn.base,c=new pr(l,l);a=a!==null?a.ts(c):c}let o=this.dn.uh();return this.Hl.forEach(l=>{const c=l.Il(e,s);if(c!=null&&c.priceRange){const y=new pr(c.priceRange.minValue,c.priceRange.maxValue);a=a!==null?a.ts(y):y}var d,h,u,m;c!=null&&c.margins&&(d=o,h=c.margins,o={above:Math.max((u=d==null?void 0:d.above)!==null&&u!==void 0?u:0,h.above),below:Math.max((m=d==null?void 0:d.below)!==null&&m!==void 0?m:0,h.below)})}),new Hh(a,o)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const s=this.cn.crosshairMarkerBackgroundColor;if(s.length!==0)return s}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new vI(this.cn.priceFormat.precision);break;case"percent":this.wa=new FT(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new Jm(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const s=ae(this.zt.el());this.Wl=this.Fl.map((n,i)=>{const a=ae(e.Va(n.time,!0)),o=a<s?1:-1;return{time:ae(this.zt.ll(a,o)).ee,position:n.position,shape:n.shape,color:n.color,id:n.id,th:i,text:n.text,size:n.size,originalTime:n.originalTime}})}ql(e){switch(this.dn=new YI(this,this.$t()),this.$l){case"Bar":this.wn=new EI(this,this.$t());break;case"Candlestick":this.wn=new DI(this,this.$t());break;case"Line":this.wn=new FI(this,this.$t());break;case"Custom":this.wn=new op(this,this.$t(),Xs(e));break;case"Area":this.wn=new TI(this,this.$t());break;case"Baseline":this.wn=new MI(this,this.$t());break;case"Histogram":this.wn=new LI(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,s){const n=[];return cp(this.Hl,e,s,n),n}}class mL{constructor(e){this.cn=e}Oa(e,s,n){let i=e;if(this.cn.mode===0)return i;const a=n.vn(),o=a.Ct();if(o===null)return i;const l=a.Rt(e,o),c=n.Ba().filter(h=>h instanceof gy).reduce((h,u)=>{if(n.vr(u)||!u.yt())return h;const m=u.Dt(),y=u.In();if(m.Ni()||!y.Kr(s))return h;const v=y.Gh(s);if(v===null)return h;const g=zo(u.Ct());return h.concat([m.Rt(v.Vt[3],g.Vt)])},[]);if(c.length===0)return i;c.sort((h,u)=>Math.abs(h-l)-Math.abs(u-l));const d=c[0];return i=a.pn(d,o),i}}class fL extends jn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null)return;const a=Math.max(1,Math.floor(n));e.lineWidth=a,function(o,l){o.save(),o.lineWidth%2&&o.translate(.5,.5),l(),o.restore()}(e,()=>{const o=ae(this.zt);if(o.Aa){e.strokeStyle=o.Ia,lo(e,o.za),e.beginPath();for(const l of o.La){const c=Math.round(l.Ea*n);e.moveTo(c,-a),e.lineTo(c,s.height+a)}e.stroke()}if(o.Na){e.strokeStyle=o.Fa,lo(e,o.Wa),e.beginPath();for(const l of o.ja){const c=Math.round(l.Ea*i);e.moveTo(-a,c),e.lineTo(s.width+a,c)}e.stroke()}})}}class pL{constructor(e){this.Wt=new fL,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,s={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(n=>({Ea:n.coord}))};this.Wt.J(s),this.ft=!1}return this.Wt}}class gL{constructor(e){this.wn=new pL(e)}qh(){return this.wn}}const up={$a:4,Ua:1e-4};function Vo(t,e){const s=100*(t-e)/e;return e<0?-s:s}function xL(t,e){const s=Vo(t.Ph(),e),n=Vo(t.Rh(),e);return new pr(s,n)}function Dc(t,e){const s=100*(t-e)/e+100;return e<0?-s:s}function yL(t,e){const s=Dc(t.Ph(),e),n=Dc(t.Rh(),e);return new pr(s,n)}function Kh(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const n=Math.log10(s+e.Ua)+e.$a;return t<0?-n:n}function Rc(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const n=Math.pow(10,s-e.$a)-e.Ua;return t<0?-n:n}function oc(t,e){if(t===null)return null;const s=Kh(t.Ph(),e),n=Kh(t.Rh(),e);return new pr(s,n)}function vu(t,e){if(t===null)return null;const s=Rc(t.Ph(),e),n=Rc(t.Rh(),e);return new pr(s,n)}function hp(t){if(t===null)return up;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return up;const s=Math.ceil(Math.abs(Math.log10(e))),n=up.$a+s;return{$a:n,Ua:1/Math.pow(10,n)}}class mp{constructor(e,s){if(this.qa=e,this.Ya=s,function(n){if(n<0)return!1;for(let i=n;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let n=this.qa;n!==1;){if(n%2==0)this.Za.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),n/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,s,n){const i=this.qa===0?0:1/this.qa;let a=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-s)))),o=0,l=this.Ya[0];for(;;){const u=xu(a,i,1e-14)&&a>i+1e-14,m=xu(a,n*l,1e-14),y=xu(a,1,1e-14);if(!(u&&m&&y))break;a/=l,l=this.Ya[++o%this.Ya.length]}if(a<=i+1e-14&&(a=i),a=Math.max(1,a),this.Za.length>0&&(c=a,d=1,h=1e-14,Math.abs(c-d)<h))for(o=0,l=this.Za[0];xu(a,n*l,1e-14)&&a>i+1e-14;)a/=l,l=this.Za[++o%this.Za.length];var c,d,h;return a}}class kw{constructor(e,s,n,i){this.Ka=[],this.Li=e,this.qa=s,this.Ga=n,this.Ja=i}Xa(e,s){if(e<s)throw new Error("high < low");const n=this.Li.At(),i=(e-s)*this.Qa()/n,a=new mp(this.qa,[2,2.5,2]),o=new mp(this.qa,[2,2,2.5]),l=new mp(this.qa,[2.5,2,2]),c=[];return c.push(a.Xa(e,s,i),o.Xa(e,s,i),l.Xa(e,s,i)),function(d){if(d.length<1)throw Error("array is empty");let h=d[0];for(let u=1;u<d.length;++u)d[u]<h&&(h=d[u]);return h}(c)}io(){const e=this.Li,s=e.Ct();if(s===null)return void(this.Ka=[]);const n=e.At(),i=this.Ga(n-1,s),a=this.Ga(0,s),o=this.Li.W().entireTextOnly?this.no()/2:0,l=o,c=n-1-o,d=Math.max(i,a),h=Math.min(i,a);if(d===h)return void(this.Ka=[]);let u=this.Xa(d,h),m=d%u;m+=m<0?u:0;const y=d>=h?1:-1;let v=null,g=0;for(let b=d-m;b>h;b-=u){const x=this.Ja(b,s,!0);v!==null&&Math.abs(x-v)<this.Qa()||x<l||x>c||(g<this.Ka.length?(this.Ka[g].Ea=x,this.Ka[g].so=e.eo(b)):this.Ka.push({Ea:x,so:e.eo(b)}),g++,v=x,e.ro()&&(u=this.Xa(b*y,h)))}this.Ka.length=g}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function JT(t){return t.slice().sort((e,s)=>ae(e.Xi())-ae(s.Xi()))}var Ew;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(Ew||(Ew={}));const Pw=new FT,_w=new Jm(100,1);class vL{constructor(e,s,n,i){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new is,this.vo=new is,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=_w,this.xo=hp(null),this.So=e,this.cn=s,this.ko=n,this.yo=i,this.Co=new kw(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(wn(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const s=Xs(e.scaleMargins.top),n=Xs(e.scaleMargins.bottom);if(s<0||s>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${s}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(s+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${s+n}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const s=this.Cr();let n=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),s.Cr===1&&e.Cr!==s.Cr&&(function(a,o){if(a===null)return!1;const l=Rc(a.Ph(),o),c=Rc(a.Rh(),o);return isFinite(l)&&isFinite(c)}(this.Ih,this.xo)?(n=vu(this.Ih,this.xo),n!==null&&this.Ao(n)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==s.Cr&&(n=oc(this.Ih,this.xo),n!==null&&this.Ao(n));const i=s.Cr!==this.cn.mode;i&&(s.Cr===2||this.Mh())&&this.Ra(),i&&(s.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&s.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(s,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,s){const n=this.Ih;(s||n===null&&e!==null||n!==null&&!n.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,s){return this.Mh()?e=Vo(e,s):this.Oo()&&(e=Dc(e,s)),this.Po(e,s)}te(e,s,n){this.Wo();const i=this.Fo(),a=ae(this.Lh()),o=a.Ph(),l=a.Rh(),c=this.Eo()-1,d=this.Bo(),h=c/(l-o),u=n===void 0?0:n.from,m=n===void 0?e.length:n.to,y=this.Ho();for(let v=u;v<m;v++){const g=e[v],b=g._t;if(isNaN(b))continue;let x=b;y!==null&&(x=y(g._t,s));const p=i+h*(x-o),w=d?p:this.ho-1-p;g.st=w}}be(e,s,n){this.Wo();const i=this.Fo(),a=ae(this.Lh()),o=a.Ph(),l=a.Rh(),c=this.Eo()-1,d=this.Bo(),h=c/(l-o),u=n===void 0?0:n.from,m=n===void 0?e.length:n.to,y=this.Ho();for(let v=u;v<m;v++){const g=e[v];let b=g.ge,x=g.Me,p=g.xe,w=g.Se;y!==null&&(b=y(g.ge,s),x=y(g.Me,s),p=y(g.xe,s),w=y(g.Se,s));let j=i+h*(b-o),S=d?j:this.ho-1-j;g.pe=S,j=i+h*(x-o),S=d?j:this.ho-1-j,g.de=S,j=i+h*(p-o),S=d?j:this.ho-1-j,g.fe=S,j=i+h*(w-o),S=d?j:this.ho-1-j,g.me=S}}pn(e,s){const n=this.To(e,s);return this.$o(n,s)}$o(e,s){let n=e;return this.Mh()?n=function(i,a){return a<0&&(i=-i),i/100*a+a}(n,s):this.Oo()&&(n=function(i,a){return i-=100,a<0&&(i=-i),i/100*a+a}(n,s)),n}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let s=0;s<this.po.length;s++){const n=this.po[s];n.Xi()===null&&n.Ki(s+1),e.push(n)}return e=JT(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const s=this.po.indexOf(e);if(s===-1)throw new Error("source is not attached to scale");this.po.splice(s,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const s of this.po){const n=s.Ct();n!==null&&(e===null||n.la<e.la)&&(e=n)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const s=this.Co.Ha();return this.bo={Ha:s,Xo:e},this.fo.m(),s}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=ae(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let s=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const n=ae(this.ao).Th();s=Math.max(s,.1),n.Vh(s),this.Ao(n)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=ae(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const s=ae(this.Lh()).Dh()/(this.Eo()-1);let n=e-this.Mo;this.Bo()&&(n*=-1);const i=n*s,a=ae(this.ao).Th();a.Oh(i),this.Ao(a,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,s){switch(this.cn.mode){case 2:return this.s_(Vo(e,s));case 3:return this.ba().format(Dc(e,s));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,ae(this.e_()).ba())}Zl(e,s){return e=Vo(e,s),this.s_(e,Pw)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let s=100;e!==null&&(s=Math.round(1/e.ma())),this.wa=_w,this.Mh()?(this.wa=Pw,s=100):this.Oo()?(this.wa=new Jm(100,1),s=100):e!==null&&(this.wa=e.ba()),this.Co=new kw(this,s,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,s){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?Kh(e,this.xo):e;const n=ae(this.Lh()),i=this.Fo()+(this.Eo()-1)*(e-n.Ph())/n.Dh();return this.jo(i)}To(e,s){if(this.Wo(),this.Ni())return 0;const n=this.jo(e),i=ae(this.Lh()),a=i.Ph()+i.Dh()*((n-this.Fo())/(this.Eo()-1));return this.ro()?Rc(a,this.xo):a}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let s=null;const n=this.r_();let i=0,a=0;for(const c of n){if(!c.yt())continue;const d=c.Ct();if(d===null)continue;const h=c.Il(e.Os(),e.ui());let u=h&&h.Lh();if(u!==null){switch(this.cn.mode){case 1:u=oc(u,this.xo);break;case 2:u=xL(u,d.Vt);break;case 3:u=yL(u,d.Vt)}if(s=s===null?u:s.ts(ae(u)),h!==null){const m=h.Eh();m!==null&&(i=Math.max(i,m.above),a=Math.max(a,m.below))}}}if(i===this.co&&a===this.do||(this.co=i,this.do=a,this.bo=null,this.Do()),s!==null){if(s.Ph()===s.Rh()){const c=this.e_(),d=5*(c===null||this.Mh()||this.Oo()?1:c.ma());this.ro()&&(s=vu(s,this.xo)),s=new pr(s.Ph()-d,s.Rh()+d),this.ro()&&(s=oc(s,this.xo))}if(this.ro()){const c=vu(s,this.xo),d=hp(c);if(o=d,l=this.xo,o.$a!==l.$a||o.Ua!==l.Ua){const h=this.ao!==null?vu(this.ao,this.xo):null;this.xo=d,s=oc(c,d),h!==null&&(this.ao=oc(h,d))}}this.Ao(s)}else this.Ih===null&&(this.Ao(new pr(-.5,.5)),this.xo=hp(null));var o,l;this.oo._o=!0}Ho(){return this.Mh()?Vo:this.Oo()?Dc:this.ro()?e=>Kh(e,this.xo):null}a_(e,s,n){return s===void 0?(n===void 0&&(n=this.ba()),n.format(e)):s(e)}Wh(e,s){return this.a_(e,this.yo.priceFormatter,s)}s_(e,s){return this.a_(e,this.yo.percentageFormatter,s)}}class bL{constructor(e,s){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new is,this.yl=e,this.$i=s,this.d_=new gL(this);const n=s.W();this.f_=this.v_("left",n.leftPriceScale),this.p_=this.v_("right",n.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(n)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const s=Array.from(this.o_.values());for(const n of s){const i=ae(n[0].Dt());i.$h(e.overlayPriceScales),e.localization&&i.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?Xs(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(s=>{if(this.vr(s)){const n=s.Dt();n!==null&&n.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const s=e.Dt();return s===null||this.f_!==s&&this.p_!==s}qo(e,s,n){const i=n!==void 0?n:this.C_().y_+1;this.T_(e,s,i)}Zo(e){const s=this.po.indexOf(e);ha(s!==-1,"removeDataSource: invalid data source"),this.po.splice(s,1);const n=ae(e.Dt()).Pa();if(this.o_.has(n)){const a=Xs(this.o_.get(n)),o=a.indexOf(e);o!==-1&&(a.splice(o,1),a.length===0&&this.o_.delete(n))}const i=e.Dt();i&&i.Ba().indexOf(e)>=0&&i.Zo(e),i!==null&&(i.Yo(),this.P_(i)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,s){e.Go(s)}O_(e,s){e.Jo(s),this.k_()}B_(e){e.Qo()}A_(e,s){e.t_(s)}I_(e,s){e.i_(s),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const s=this.yl.Xs();e.Ro({Wn:!0}),s!==null&&e.h_(s),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=JT(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const s=e.r_();if(s&&s.length>0&&!this.yl.Ni()){const n=this.yl.Xs();n!==null&&e.h_(n)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let s=0,n=0;for(let i=0;i<e.length;i++){const a=e[i].Xi();a!==null&&(a<s&&(s=a),a>n&&(n=a))}return{H_:s,y_:n}}T_(e,s,n){let i=this.w_(s);if(i===null&&(i=this.v_(s,this.$i.W().overlayPriceScales)),this.po.push(e),!Ym(s)){const a=this.o_.get(s)||[];a.push(e),this.o_.set(s,a)}i.qo(e),e.Gi(i),e.Ki(n),this.P_(i),this.mo=null}m_(e,s,n){s.Cr!==n.Cr&&this.L_(e)}v_(e,s){const n=Object.assign({visible:!0,autoScale:!0},li(s)),i=new vL(e,n,this.$i.W().layout,this.$i.W().localization);return i.Lo(this.At()),i}}class wL{constructor(e,s,n=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=s,this.ir=n}Y_(e){const s=e.time,n=this.q_.cacheKey(s),i=this.tr.get(n);if(i!==void 0)return i.Z_;if(this.Ke===this.ir){const o=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(Xs(o)),this.Je++,this.Ke--}const a=this.U_(e);return this.tr.set(n,{Z_:a,rr:this.Ge}),this.Qe.set(this.Ge,n),this.Ke++,this.Ge++,a}}class Oc{constructor(e,s){ha(e<=s,"right should be >= left"),this.X_=e,this.K_=s}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function Mw(t,e){return t===null||e===null?t===e:t.Ch(e)}class jL{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,s){this.nu(s),this.tr=null;for(let n=s;n<e.length;++n){const i=e[n];let a=this.J_.get(i.timeWeight);a===void 0&&(a=[],this.J_.set(i.timeWeight,a)),a.push({index:n,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}su(e,s){const n=Math.ceil(s/e);return this.tr!==null&&this.tr.eu===n||(this.tr={Ha:this.ru(n),eu:n}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const s=[];this.J_.forEach((n,i)=>{e<=n[0].index?s.push(i):n.splice(Ld(n,e,a=>a.index<e),1/0)});for(const n of s)this.J_.delete(n)}ru(e){let s=[];for(const n of Array.from(this.J_.keys()).sort((i,a)=>a-i)){if(!this.J_.get(n))continue;const i=s;s=[];const a=i.length;let o=0;const l=Xs(this.J_.get(n)),c=l.length;let d=1/0,h=-1/0;for(let u=0;u<c;u++){const m=l[u],y=m.index;for(;o<a;){const v=i[o],g=v.index;if(!(g<y)){d=g;break}o++,s.push(v),h=g,d=1/0}if(d-y>=e&&y-h>=e)s.push(m),h=y;else if(this.Q_)return i}for(;o<a;o++)s.push(i[o])}return s}}class Zo{constructor(e){this.hu=e}lu(){return this.hu===null?null:new Oc(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new Zo(null)}}function NL(t,e){return t.weight>e.weight?t:e}class SL{constructor(e,s,n,i){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new jL,this.du=new Map,this.fu=Zo.ou(),this.vu=!0,this.pu=new is,this.mu=new is,this.bu=new is,this.wu=null,this.gu=null,this.Mu=[],this.cn=s,this.yo=n,this.xu=s.rightOffset,this.Su=s.barSpacing,this.$i=e,this.q_=i,this.ku(),this.cu.tu(s.uniformDistribution)}W(){return this.cn}yu(e){wn(this.yo,e),this.Cu(),this.ku()}$h(e,s){var n;wn(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((n=e.barSpacing)!==null&&n!==void 0?n:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var s,n;return(n=(s=this.uu[e])===null||s===void 0?void 0:s.time)!==null&&n!==void 0?n:null}Ui(e){var s;return(s=this.uu[e])!==null&&s!==void 0?s:null}Va(e,s){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return s?this.uu.length-1:null;const n=Ld(this.uu,this.q_.key(e),(i,a)=>this.q_.key(i.time)<a);return this.q_.key(e)<this.q_.key(this.uu[n].time)?s?n:null:n}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const s={from:e.Os(),to:e.ui()};return this.Ou(s)}Ou(e){const s=Math.round(e.from),n=Math.round(e.to),i=ae(this.Bu()),a=ae(this.Au());return{from:ae(this.Ui(Math.max(i,s))),to:ae(this.Ui(Math.min(a,n)))}}Iu(e){return{from:ae(this.Va(e.from,!0)),to:ae(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const s=this.Du(),n=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&n!==0){const i=this.Su*e/n;this.Su=i}if(this.cn.fixLeftEdge&&s!==null&&s.Os()<=0){const i=n-e;this.xu-=Math.round(i/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!dd(e))return 0;const s=this.Eu()+this.xu-e;return this.__-(s+.5)*this.Su-1}Qs(e,s){const n=this.Eu(),i=s===void 0?0:s.from,a=s===void 0?e.length:s.to;for(let o=i;o<a;o++){const l=e[o].ot,c=n+this.xu-l,d=this.__-(c+.5)*this.Su-1;e[o].nt=d}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,s=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),n=Math.round(s/e),i=ae(this.Xs()),a=Math.max(i.Os(),i.Os()-n),o=Math.max(i.ui(),i.ui()-n),l=this.cu.su(e,s),c=this.Bu()+n,d=this.Au()-n,h=this.$u(),u=this.cn.fixLeftEdge||h,m=this.cn.fixRightEdge||h;let y=0;for(const v of l){if(!(a<=v.index&&v.index<=o))continue;let g;y<this.Mu.length?(g=this.Mu[y],g.coord=this.It(v.index),g.label=this.Uu(v),g.weight=v.weight):(g={needAlignCoordinate:!1,coord:this.It(v.index),label:this.Uu(v),weight:v.weight},this.Mu.push(g)),this.Su>s/2&&!h?g.needAlignCoordinate=!1:g.needAlignCoordinate=u&&v.index<=c||m&&v.index>=d,y++}return this.Mu.length=y,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,s){const n=this.Fu(e),i=this.le(),a=i+s*(i/10);this.Gn(a),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(n-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const s=s0(this.__-e,0,this.__),n=s0(this.__-ae(this.wo),0,this.__);s!==0&&n!==0&&this.Gn(this.wu.le*s/n)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const s=(this.Mo-e)/this.le();this.xu=ae(this.wu).Hu+s,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,s=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(s)||s<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.xu,i=performance.now();this.$i.Zn({Qu:a=>(a-i)/s>=1,tc:a=>{const o=(a-i)/s;return o>=1?e:n+(e-n)*o}})}bt(e,s){this.vu=!0,this.uu=e,this.cu.iu(e,s),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const s=e.G_();this.ju(this.__/s),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),s=this.Au();e!==null&&s!==null&&this.rc(new Oc(e,s+this.cn.rightOffset))}lc(e){const s=new Oc(e.from,e.to);this.rc(s)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:s}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||s.axisDoubleClickReset.time||s.axisPressedMouseMove.time||s.mouseWheel||s.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const s=this.ac(e),n=this.Eu()+this.xu-s;return Math.round(1e6*n)/1e6}ju(e){const s=this.Su;this.Su=e,this.zu(),s!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(Zo.ou());const e=this.Eu(),s=this.__/this.Su,n=this.xu+e,i=new Oc(n-s+1,n);this._c(new Zo(i))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const s=.5*this.__;this.Su>s&&(this.Su=s,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const s=this.dc();this.xu>s&&(this.xu=s,this.vu=!0)}cc(){const e=this.Bu(),s=this._u;return e===null||s===null?null:e-s-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let s=this.du.get(e.weight);return s===void 0&&(s=new wL(n=>this.fc(n),this.q_),this.du.set(e.weight,s)),s.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const s=this.fu;this.fu=e,Mw(s.lu(),this.fu.lu())||this.pu.m(),Mw(s.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const s=this.Xs();if(s===null)return;const n=s.Os()-e;if(n<0){const i=this.xu-n-1;this.Jn(i)}this.zu()}Pu(){this.Lu(),this.zu()}}class CL{X(e,s,n){e.useMediaCoordinateSpace(i=>this.K(i,s,n))}gl(e,s,n){e.useMediaCoordinateSpace(i=>this.vc(i,s,n))}vc(e,s,n){}}class TL extends CL{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:s,mediaSize:n}=e;let i=0;for(const o of this.zt.bc){if(o.Kt.length===0)continue;s.font=o.R;const l=this.wc(s,o.Kt);l>n.width?o.Zu=n.width/l:o.Zu=1,i+=o.gc*o.Zu}let a=0;switch(this.zt.Mc){case"top":a=0;break;case"center":a=Math.max((n.height-i)/2,0);break;case"bottom":a=Math.max(n.height-i,0)}s.fillStyle=this.zt.V;for(const o of this.zt.bc){s.save();let l=0;switch(this.zt.xc){case"left":s.textAlign="left",l=o.gc/2;break;case"center":s.textAlign="center",l=n.width/2;break;case"right":s.textAlign="right",l=n.width-1-o.gc/2}s.translate(l,a),s.textBaseline="top",s.font=o.R,s.scale(o.Zu,o.Zu),s.fillText(o.Kt,0,o.Sc),s.restore(),a+=o.gc*o.Zu}}wc(e,s){const n=this.kc(e.font);let i=n.get(s);return i===void 0&&(i=e.measureText(s).width,n.set(s,i)),i}kc(e){let s=this.mc.get(e);return s===void 0&&(s=new Map,this.mc.set(e,s)),s}}class kL{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new TL(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),s=this.Ft;s.yt=e.visible,s.yt&&(s.V=e.color,s.xc=e.horzAlign,s.Mc=e.vertAlign,s.bc=[{Kt:e.text,R:Cl(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class EL extends hy{constructor(e,s){super(),this.cn=s,this.wn=new kL(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var Aw,Dw,Rw,Ow,Iw;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(Aw||(Aw={}));class PL{constructor(e,s,n){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new is,this.Rc=new is,this.Dc=null,this.Vc=e,this.cn=s,this.q_=n,this.Oc=new oI(this),this.yl=new SL(this,s.timeScale,this.cn.localization,n),this.vt=new yI(this,s.crosshair),this.Bc=new mL(s.crosshair),this.Ac=new EL(this,s.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(_s.es())}Uh(){this.Nc(_s.ss())}oa(){this.Nc(new _s(1))}Gl(e){const s=this.Fc(e);this.Nc(s)}Wc(){return this.Tc}jc(e){const s=this.Tc;this.Tc=e,s!==null&&this.Gl(s.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){wn(this.cn,e),this.yc.forEach(s=>s.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,s){if(e==="left")return void this.$h({leftPriceScale:s});if(e==="right")return void this.$h({rightPriceScale:s});const n=this.Uc(e);n!==null&&(n.Dt.$h(s),this.Pc.m())}Uc(e){for(const s of this.yc){const n=s.w_(e);if(n!==null)return{Ht:s,Dt:n}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,s){e.Lo(s),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(s=>s.S_(e)),this.Wu()}Ic(e){const s=new bL(this.yl,this);e!==void 0?this.yc.splice(e,0,s):this.yc.push(s);const n=e===void 0?this.yc.length-1:e,i=_s.es();return i.Nn(n,{Fn:0,Wn:!0}),this.Nc(i),s}V_(e,s,n){e.V_(s,n)}O_(e,s,n){e.O_(s,n),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,s){e.B_(s),this.Nc(this.Gc(e,2))}A_(e,s,n){s.Vo()||e.A_(s,n)}I_(e,s,n){s.Vo()||(e.I_(s,n),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,s){s.Vo()||(e.z_(s),this.Nc(this.Gc(e,2)))}E_(e,s){e.E_(s),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,s){const n=this.St();if(n.Ni()||s===0)return;const i=n.Hi();e=Math.max(1,Math.min(e,i)),n.Zu(e,s),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,s,n,i,a){this.vt.gn(e,s);let o=NaN,l=this.yl.Nu(e);const c=this.yl.Xs();c!==null&&(l=Math.min(Math.max(c.Os(),l),c.ui()));const d=i.vn(),h=d.Ct();h!==null&&(o=d.pn(s,h)),o=this.Bc.Oa(o,l,i),this.vt.kn(l,o,i),this.oa(),a||this.Rc.m(this.vt.xt(),{x:e,y:s},n)}ad(e,s,n){const i=n.vn(),a=i.Ct(),o=i.Rt(e,ae(a)),l=this.yl.Va(s,!0),c=this.yl.It(ae(l));this.ld(c,o,null,n,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const s=this.vt.xn(),n=this.vt.Sn();this.ld(s,n,null,e)}this.vt.Vn()}_d(e,s,n){const i=this.yl.mn(0);s!==void 0&&n!==void 0&&this.yl.bt(s,n);const a=this.yl.mn(0),o=this.yl.Eu(),l=this.yl.Xs();if(l!==null&&i!==null&&a!==null){const c=l.Kr(o),d=this.q_.key(i)>this.q_.key(a),h=e!==null&&e>o&&!d,u=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,m=c&&(n!==void 0||u)&&this.yl.W().shiftVisibleRangeOnNewBar;if(h&&!m){const y=e-o;this.yl.Jn(this.yl.Hu()-y)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const s=this.yc.find(n=>n.Uo().includes(e));return s===void 0?null:s}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,s,n){const i=this.yc[0],a=this.fd(s,e,i,n);return this.Cc.push(a),this.Cc.length===1?this.Kl():this.Uh(),a}vd(e){const s=this.dr(e),n=this.Cc.indexOf(e);ha(n!==-1,"Series not found"),this.Cc.splice(n,1),ae(s).Zo(e),e.S&&e.S()}Xl(e,s){const n=ae(this.dr(e));n.Zo(e);const i=this.Uc(s);if(i===null){const a=e.Xi();n.qo(e,s,a)}else{const a=i.Ht===n?e.Xi():void 0;i.Ht.qo(e,s,a)}}hc(){const e=_s.ss();e.$n(),this.Nc(e)}pd(e){const s=_s.ss();s.Yn(e),this.Nc(s)}Kn(){const e=_s.ss();e.Kn(),this.Nc(e)}Gn(e){const s=_s.ss();s.Gn(e),this.Nc(s)}Jn(e){const s=_s.ss();s.Jn(e),this.Nc(s)}Zn(e){const s=_s.ss();s.Zn(e),this.Nc(s)}Un(){const e=_s.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const s=this.Ec,n=this.zc;if(s===n)return s;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==n||this.Dc.Rs!==s)this.Dc={Ps:n,Rs:s,wd:new Map};else{const a=this.Dc.wd.get(e);if(a!==void 0)return a}const i=function(a,o,l){const[c,d,h,u]=cd(a),[m,y,v,g]=cd(o),b=[Ur(c+l*(m-c)),Ur(d+l*(y-d)),Ur(h+l*(v-h)),RT(u+l*(g-u))];return`rgba(${b[0]}, ${b[1]}, ${b[2]}, ${b[3]})`}(n,s,e/100);return this.Dc.wd.set(e,i),i}Gc(e,s){const n=new _s(s);if(e!==null){const i=this.yc.indexOf(e);n.Nn(i,{Fn:s})}return n}Fc(e,s){return s===void 0&&(s=2),this.Gc(this.dr(e),s)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(s=>s.j_().qh().bt())}fd(e,s,n,i){const a=new gy(this,e,s,n,i),o=e.priceScaleId!==void 0?e.priceScaleId:this.md();return n.qo(a,o),Ym(o)||a.$h(e),a}Lc(e){const s=this.cn.layout;return s.background.type==="gradient"?e===0?s.background.topColor:s.background.bottomColor:s.background.color}}function r0(t){return!Ln(t)&&!Id(t)}function ZT(t){return Ln(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(Dw||(Dw={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Rw||(Rw={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Ow||(Ow={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Iw||(Iw={}));const Lw=t=>t.getUTCFullYear();function _L(t,e,s){return e.replace(/yyyy/g,(n=>ci(Lw(n),4))(t)).replace(/yy/g,(n=>ci(Lw(n)%100,2))(t)).replace(/MMMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(t,s)).replace(/MMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(t,s)).replace(/MM/g,(n=>ci((i=>i.getUTCMonth()+1)(n),2))(t)).replace(/dd/g,(n=>ci((i=>i.getUTCDate())(n),2))(t))}class e4{constructor(e="yyyy-MM-dd",s="default"){this.gd=e,this.Md=s}Y_(e){return _L(e,this.gd,this.Md)}}class ML{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",ci(e.getUTCHours(),2)).replace("%m",ci(e.getUTCMinutes(),2)).replace("%s",ci(e.getUTCSeconds(),2))}}const AL={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class DL{constructor(e={}){const s=Object.assign(Object.assign({},AL),e);this.Td=new e4(s.Sd,s.Cd),this.Pd=new ML(s.kd),this.Rd=s.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function bu(t){return 60*t*60*1e3}function fp(t){return 60*t*1e3}const wu=[{Dd:(Fw=1,1e3*Fw),Vd:10},{Dd:fp(1),Vd:20},{Dd:fp(5),Vd:21},{Dd:fp(30),Vd:22},{Dd:bu(1),Vd:30},{Dd:bu(3),Vd:31},{Dd:bu(6),Vd:32},{Dd:bu(12),Vd:33}];var Fw;function $w(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let s=wu.length-1;s>=0;--s)if(Math.floor(e.getTime()/wu[s].Dd)!==Math.floor(t.getTime()/wu[s].Dd))return wu[s].Vd;return 0}function pp(t){let e=t;if(Id(t)&&(e=xy(t)),!r0(e))throw new Error("time must be of type BusinessDay");const s=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(s.getTime()/1e3),Bd:e}}function Uw(t){if(!ZT(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function xy(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function Bw(t){Id(t.time)&&(t.time=xy(t.time))}class zw{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(s){s.forEach(Bw)}(e):Bw(e)}createConverterToInternalObj(e){return ae(function(s){return s.length===0?null:r0(s[0].time)||Id(s[0].time)?pp:Uw}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const s=e;return s.Bd===void 0?new Date(1e3*s.Od).getTime():new Date(Date.UTC(s.Bd.year,s.Bd.month-1,s.Bd.day)).getTime()}convertHorzItemToInternal(e){return ZT(s=e)?Uw(s):r0(s)?pp(s):pp(xy(s));var s}updateFormatter(e){if(!this.cn)return;const s=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new DL({Sd:s,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new e4(s,e.locale)}formatHorzItem(e){const s=e;return this.Ad.Y_(new Date(1e3*s.Od))}formatTickmark(e,s){const n=function(a,o,l){switch(a){case 0:case 10:return o?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),i=this.cn.timeScale;if(i.tickMarkFormatter!==void 0){const a=i.tickMarkFormatter(e.originalTime,n,s.locale);if(a!==null)return a}return function(a,o,l){const c={};switch(o){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const d=a.Bd===void 0?new Date(1e3*a.Od):new Date(Date.UTC(a.Bd.year,a.Bd.month-1,a.Bd.day));return new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()).toLocaleString(l,c)}(e.time,n,s.locale)}maxTickMarkWeight(e){let s=e.reduce(NL,e[0]).weight;return s>30&&s<50&&(s=30),s}fillWeightsForPoints(e,s){(function(n,i=0){if(n.length===0)return;let a=i===0?null:n[i-1].time.Od,o=a!==null?new Date(1e3*a):null,l=0;for(let c=i;c<n.length;++c){const d=n[c],h=new Date(1e3*d.time.Od);o!==null&&(d.timeWeight=$w(h,o)),l+=d.time.Od-(a||d.time.Od),a=d.time.Od,o=h}if(i===0&&n.length>1){const c=Math.ceil(l/(n.length-1)),d=new Date(1e3*(n[0].time.Od-c));n[0].timeWeight=$w(new Date(1e3*n[0].time.Od),d)}})(e,s)}static Id(e){return wn({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Tl=typeof window<"u";function Vw(){return!!Tl&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function gp(){return!!Tl&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function n0(t){return t+t%2}function xp(t,e){return t.zd-e.zd}function yp(t,e,s){const n=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(n)*Math.min(Math.abs(n),s)}class RL{constructor(e,s,n,i){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=s,this.qd=n,this.rs=i}Yd(e,s){if(this.Ld!==null){if(this.Ld.ot===s)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:s,zd:e}}Vr(e,s){if(this.Ld===null||this.Ed===null||s-this.Ld.ot>50)return;let n=0;const i=yp(this.Ld,this.Ed,this.Ud),a=xp(this.Ld,this.Ed),o=[i],l=[a];if(n+=a,this.Nd!==null){const d=yp(this.Ed,this.Nd,this.Ud);if(Math.sign(d)===Math.sign(i)){const h=xp(this.Ed,this.Nd);if(o.push(d),l.push(h),n+=h,this.Fd!==null){const u=yp(this.Nd,this.Fd,this.Ud);if(Math.sign(u)===Math.sign(i)){const m=xp(this.Nd,this.Fd);o.push(u),l.push(m),n+=m}}}}let c=0;for(let d=0;d<o.length;++d)c+=l[d]/n*o[d];Math.abs(c)<this.$d||(this.Wd={zd:e,ot:s},this.Hd=c,this.jd=function(d,h){const u=Math.log(h);return Math.log(1*u/-d)/u}(Math.abs(c),this.qd))}tc(e){const s=ae(this.Wd),n=e-s.ot;return s.zd+this.Hd*(Math.pow(this.qd,n)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const s=e-ae(this.Wd).ot;return Math.min(s,this.jd)}}class OL{constructor(e,s){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=s,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return OT(cd(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function co(t,e){const s=ae(t.ownerDocument).createElement("canvas");t.appendChild(s);const n=K5(s,{options:{allowResizeObserver:!1},transform:(i,a)=>({width:Math.max(i.width,a.width),height:Math.max(i.height,a.height)})});return n.resizeCanvasElement(e),n}function uo(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function i0(t,e,s,n){t.gl&&t.gl(e,s,n)}function Zu(t,e,s,n){t.X(e,s,n)}function a0(t,e,s,n){const i=t(s,n);for(const a of i){const o=a.gt();o!==null&&e(o)}}function IL(t){Tl&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class yy{constructor(e,s,n){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!gp(),this.Af=i=>{this.If(i)},this.zf=i=>{if(this.Lf(i)){const a=this.Ef(i);if(++this._f,this.uf&&this._f>1){const{Nf:o}=this.Ff(Cn(i),this.cf);o<30&&!this.wf&&this.Wf(a,this.Hf.jf),this.$f()}}else{const a=this.Ef(i);if(++this.hf,this.lf&&this.hf>1){const{Nf:o}=this.Ff(Cn(i),this.af);o<5&&!this.bf&&this.Uf(a,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=s,this.cn=n,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const s=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",s)},this.Zf.addEventListener("mousemove",s),this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const s=this.Ef(e);this.Uf(s,this.Hf.tv),this.Bf=!0}iv(e){const s=vp(e.changedTouches,ae(this.Of));if(s===null||(this.Vf=ju(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const n=this.Ff(Cn(s),ae(this.pf)),{nv:i,sv:a,Nf:o}=n;if(this.mf||!(o<5)){if(!this.mf){const l=.5*i,c=a>=l&&!this.cn.ev(),d=l>a&&!this.cn.rv();c||d||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const l=this.Ef(e,s);this.Wf(l,this.Hf.hv),To(e)}}}lv(e){if(e.button!==0)return;const s=this.Ff(Cn(e),ae(this.vf)),{Nf:n}=s;if(n>=5&&(this.bf=!0,this.Yf()),this.bf){const i=this.Ef(e);this.Uf(i,this.Hf.av)}}Ff(e,s){const n=Math.abs(s.nt-e.nt),i=Math.abs(s.st-e.st);return{nv:n,sv:i,Nf:n+i}}ov(e){let s=vp(e.changedTouches,ae(this.Of));if(s===null&&e.touches.length===0&&(s=e.changedTouches[0]),s===null)return;this.Of=null,this.Vf=ju(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const n=this.Ef(e,s);if(this.Wf(n,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:i}=this.Ff(Cn(s),this.cf);i<30&&!this.wf&&this.Wf(n,this.Hf.jf),this.$f()}else this.wf||(this.Wf(n,this.Hf.uv),this.Hf.uv&&To(e));this._f===0&&To(e),e.touches.length===0&&this.ff&&(this.ff=!1,To(e))}If(e){if(e.button!==0)return;const s=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),Vw()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(s,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:n}=this.Ff(Cn(e),this.af);n<5&&!this.bf&&this.Uf(s,this.Hf.qf),this.Yf()}else this.bf||this.Uf(s,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const s=e.changedTouches[0];this.Of=s.identifier,this.Vf=ju(e);const n=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=Cn(s),this.yf&&(this.yf(),this.yf=null);{const a=this.iv.bind(this),o=this.ov.bind(this);this.yf=()=>{n.removeEventListener("touchmove",a),n.removeEventListener("touchend",o)},n.addEventListener("touchmove",a,{passive:!1}),n.addEventListener("touchend",o,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const i=this.Ef(e,s);this.Wf(i,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=Cn(s))}mv(e){if(e.button!==0)return;const s=this.Zf.ownerDocument.documentElement;Vw()&&s.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=Cn(e),this.kf&&(this.kf(),this.kf=null);{const i=this.lv.bind(this),a=this.If.bind(this);this.kf=()=>{s.removeEventListener("mousemove",i),s.removeEventListener("mouseup",a)},s.addEventListener("mousemove",i),s.addEventListener("mouseup",a)}if(this.Df=!0,this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=Cn(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,s=n=>{this.Hf.wv&&(n.composed&&this.Zf.contains(n.composedPath()[0])||n.target&&this.Zf.contains(n.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",s)},this.gf=()=>{e.removeEventListener("mousedown",s)},e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0})}gp()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),IL(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const s=Ww(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,s),To(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const s=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-s.left+(e[1].clientX-s.left))/2,st:(e[0].clientY-s.top+(e[1].clientY-s.top))/2},this.Tf=Ww(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const s=this.Ef(e);this.Uf(s,this.Hf.Pv),this.Bf=!gp()}vv(e){const s=vp(e.touches,ae(this.Of));if(s===null)return;const n=this.Ef(e,s);this.Wf(n,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:ju(e)<this.Vf+500}Wf(e,s){s&&s.call(this.Hf,e)}Uf(e,s){s&&s.call(this.Hf,e)}Ef(e,s){const n=s||e,i=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-i.left,localY:n.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:n.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&To(e)}}}}function Ww(t,e){const s=t.clientX-e.clientX,n=t.clientY-e.clientY;return Math.sqrt(s*s+n*n)}function To(t){t.cancelable&&t.preventDefault()}function Cn(t){return{nt:t.pageX,st:t.pageY}}function ju(t){return t.timeStamp||performance.now()}function vp(t,e){for(let s=0;s<t.length;++s)if(t[s].identifier===e)return t[s];return null}function Nu(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function LL(t,e,s){for(const n of t){const i=n.gt();if(i!==null&&i.wr){const a=i.wr(e,s);if(a!==null)return{Bv:n,Iv:a}}}return null}function bp(t,e){return s=>{var n,i,a,o;return((i=(n=s.Dt())===null||n===void 0?void 0:n.Pa())!==null&&i!==void 0?i:"")!==e?[]:(o=(a=s.da)===null||a===void 0?void 0:a.call(s,t))!==null&&o!==void 0?o:[]}}function Hw(t,e,s,n){if(!t.length)return;let i=0;const a=s/2,o=t[0].At(n,!0);let l=e===1?a-(t[0].Vi()-o/2):t[0].Vi()-o/2-a;l=Math.max(0,l);for(let c=1;c<t.length;c++){const d=t[c],h=t[c-1],u=h.At(n,!1),m=d.Vi(),y=h.Vi();if(e===1?m>y-u:m<y+u){const v=y-u*e;d.Oi(v);const g=v-e*u/2;if((e===1?g<0:g>s)&&l>0){const b=e===1?-1-g:g-s,x=Math.min(b,l);for(let p=i;p<t.length;p++)t[p].Oi(t[p].Vi()+e*x);l-=x}}else i=c,l=e===1?y-u-m:m-(y+u)}}class Kw{constructor(e,s,n,i){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new hd(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=s,this.ko=s.layout,this.Oc=n,this.qv=i==="left",this.Yv=bp("normal",i),this.Zv=bp("top",i),this.Xv=bp("bottom",i),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=co(this.Kv,zt({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const a=this.Gv.canvasElement;a.style.position="absolute",a.style.zIndex="1",a.style.left="0",a.style.top="0",this.Jv=co(this.Kv,zt({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const o=this.Jv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const l={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new yy(this.Jv.canvasElement,l,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),uo(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),uo(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const s=this.ap(),n=ae(this.Gv.canvasElement.getContext("2d"));n.save();const i=this.Li.Ha();n.font=this._p(),i.length>0&&(e=Math.max(this.Fv.xi(n,i[0].so),this.Fv.xi(n,i[i.length-1].so)));const a=this.up();for(let d=a.length;d--;){const h=this.Fv.xi(n,a[d].Kt());h>e&&(e=h)}const o=this.Li.Ct();if(o!==null&&this.Ev!==null&&(l=this.cn.crosshair).mode!==2&&l.horzLine.visible&&l.horzLine.labelVisible){const d=this.Li.pn(1,o),h=this.Li.pn(this.Ev.height-2,o);e=Math.max(e,this.Fv.xi(n,this.Li.Fi(Math.floor(Math.min(d,h))+.11111111111111,o)),this.Fv.xi(n,this.Li.Fi(Math.ceil(Math.max(d,h))-.11111111111111,o)))}var l;n.restore();const c=e||34;return n0(Math.ceil(s.C+s.T+s.A+s.I+5+c))}cp(e){this.Ev!==null&&qa(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return ae(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,ae(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const n=oo(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)}),this.tn.bp(n,this.Xv),this.wp(n),this.tn.bp(n,this.Yv),this.gp(n))}this.Jv.applySuggestedBitmapSize();const s=oo(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.Mp(s),this.tn.bp(s,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp();this.Nv=!0,s.V_(n,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp(),i=this.Li;s.O_(n,i,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),s=this.tn.fp(),n=this.Li;this.Nv&&(this.Nv=!1,e.B_(s,n))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp();this.Nv=!1,s.B_(n,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],s=this.Li===null?void 0:this.Li;return(n=>{for(let i=0;i<n.length;++i){const a=n[i].Rn(this.tn.fp(),s);for(let o=0;o<a.length;o++)e.push(a[o])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:s}){const{width:n,height:i}=s,a=this.tn.fp().$t(),o=a.q(),l=a.bd();o===l?Qm(e,0,0,n,i,o):IT(e,0,0,n,i,o,l)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:n}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const i=Math.max(1,Math.floor(this.ap().C*n));let a;a=this.qv?s.width-i:0,e.fillRect(a,0,i,s.height)}wp(e){if(this.Ev===null||this.Li===null)return;const s=this.Li.Ha(),n=this.Li.W(),i=this.ap(),a=this.qv?this.Ev.width-i.T:0;n.borderVisible&&n.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:l,verticalPixelRatio:c})=>{o.fillStyle=n.borderColor;const d=Math.max(1,Math.floor(c)),h=Math.floor(.5*c),u=Math.round(i.T*l);o.beginPath();for(const m of s)o.rect(Math.floor(a*l),Math.round(m.Ea*c)-h,u,d);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{var l;o.font=this._p(),o.fillStyle=(l=n.textColor)!==null&&l!==void 0?l:this.ko.textColor,o.textAlign=this.qv?"right":"left",o.textBaseline="middle";const c=this.qv?Math.round(a-i.A):Math.round(a+i.T+i.A),d=s.map(h=>this.Fv.Mi(o,h.so));for(let h=s.length;h--;){const u=s[h];o.fillText(u.so,c,u.Ea+d[h])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],s=this.Li.Uo().slice(),n=this.tn.fp(),i=this.ap();this.Li===n.pr()&&this.tn.fp().Uo().forEach(o=>{n.vr(o)&&s.push(o)});const a=this.Li;s.forEach(o=>{o.Rn(n,a).forEach(l=>{l.Oi(null),l.Bi()&&e.push(l)})}),e.forEach(o=>o.Oi(o.ki())),this.Li.W().alignLabels&&this.yp(e,i)}yp(e,s){if(this.Ev===null)return;const n=this.Ev.height/2,i=e.filter(o=>o.ki()<=n),a=e.filter(o=>o.ki()>n);i.sort((o,l)=>l.ki()-o.ki()),a.sort((o,l)=>o.ki()-l.ki());for(const o of e){const l=Math.floor(o.At(s)/2),c=o.ki();c>-l&&c<l&&o.Oi(l),c>this.Ev.height-l&&c<this.Ev.height+l&&o.Oi(this.Ev.height-l)}Hw(i,1,this.Ev.height,s),Hw(a,-1,this.Ev.height,s)}gp(e){if(this.Ev===null)return;const s=this.up(),n=this.ap(),i=this.qv?"right":"left";s.forEach(a=>{a.Ai()&&a.gt(ae(this.Li)).X(e,n,this.Fv,i)})}Mp(e){if(this.Ev===null||this.Li===null)return;const s=this.tn.$v().$t(),n=[],i=this.tn.fp(),a=s.Zc().Rn(i,this.Li);a.length&&n.push(a);const o=this.ap(),l=this.qv?"right":"left";n.forEach(c=>{c.forEach(d=>{d.gt(ae(this.Li)).X(e,o,this.Fv,l)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return Cl(this.ko.fontSize,this.ko.fontFamily)}}function FL(t,e){var s,n;return(n=(s=t.ua)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function Su(t,e){var s,n;return(n=(s=t.Pn)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function $L(t,e){var s,n;return(n=(s=t.Ji)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function UL(t,e){var s,n;return(n=(s=t.aa)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}class vy{constructor(e,s){this.Ev=zt({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new is,this.Op=new is,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=s,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(n),this.Gv=co(n,zt({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=co(n,zt({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const a=this.Jv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new yy(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),uo(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),uo(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return ae(this.Np)}qp(e){var s,n;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(vy.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(s=this.Pp)!==null&&s!==void 0?s:new OL(this.Wp,this.Qd),this.Pp.bt()):((n=this.Pp)===null||n===void 0||n.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(ae(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(ae(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const s=e.localX,n=e.localY;this.Gp(s,n,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var s;if(!this.Np)return;this.Kp();const n=e.localX,i=e.localY;this.Gp(n,i,e);const a=this.wr(n,i);this.Qd.Qp((s=a==null?void 0:a.Lv)!==null&&s!==void 0?s:null),this.$i().jc(a&&{Hc:a.Hc,Iv:a.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const s={x:e.localX,y:e.localY};this.rm(s,s,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,s){if(!this.Qd.W().handleScale.pinch)return;const n=5*(s-this.Bp);this.Bp=s,this.$i().Qc(e.nt,n)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const s=this.$i().Zc();this.Ip!==null&&s.yt()&&(this.Lp={x:s.Yt(),y:s.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const s=e.localX,n=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const i=ae(this.Lp),a=i.x+(s-this.Ip.x),o=i.y+(n-this.Ip.y);this.Gp(a,o,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,s){const n=this.Np;return n===null?null:function(i,a,o){const l=i.Uo(),c=function(d,h,u){var m,y;let v,g;for(const p of d){const w=(y=(m=p.va)===null||m===void 0?void 0:m.call(p,h,u))!==null&&y!==void 0?y:[];for(const j of w)b=j.zOrder,(!(x=v==null?void 0:v.zOrder)||b==="top"&&x!=="top"||b==="normal"&&x==="bottom")&&(v=j,g=p)}var b,x;return v&&g?{zv:v,Hc:g}:null}(l,a,o);if((c==null?void 0:c.zv.zOrder)==="top")return Nu(c);for(const d of l){if(c&&c.Hc===d&&c.zv.zOrder!=="bottom"&&!c.zv.isBackground)return Nu(c);const h=LL(d.Pn(i),a,o);if(h!==null)return{Hc:d,Bv:h.Bv,Iv:h.Iv};if(c&&c.Hc===d&&c.zv.zOrder!=="bottom"&&c.zv.isBackground)return Nu(c)}return c!=null&&c.zv?Nu(c):null}(n,e,s)}_m(e,s){ae(s==="left"?this.Cp:this.Tp).cp(zt({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){qa(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=ae(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const s of e.Ba())if(e.vr(s)){const n=s.Dt();n!==null&&e.P_(n),s.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const n=oo(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i)}),this.Np&&(this.fm(n,FL),this.vm(n),this.pm(n),this.fm(n,Su),this.fm(n,$L)))}this.Jv.applySuggestedBitmapSize();const s=oo(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.bm(s),this.fm(s,UL))}wm(){return this.Cp}gm(){return this.Tp}bp(e,s){this.fm(e,s)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,s){const n=s.localX,i=s.localY;e.M()&&e.m(this.$i().St().Nu(n),{x:n,y:i},s)}mp({context:e,bitmapSize:s}){const{width:n,height:i}=s,a=this.$i(),o=a.q(),l=a.bd();o===l?Qm(e,0,0,n,i,l):IT(e,0,0,n,i,o,l)}vm(e){const s=ae(this.Np).j_().qh().gt();s!==null&&s.X(e,!1)}pm(e){const s=this.$i().Yc();this.Mm(e,Su,i0,s),this.Mm(e,Su,Zu,s)}bm(e){this.Mm(e,Su,Zu,this.$i().Zc())}fm(e,s){const n=ae(this.Np).Uo();for(const i of n)this.Mm(e,s,i0,i);for(const i of n)this.Mm(e,s,Zu,i)}Mm(e,s,n,i){const a=ae(this.Np),o=a.$t().Wc(),l=o!==null&&o.Hc===i,c=o!==null&&l&&o.Iv!==void 0?o.Iv.Mr:void 0;a0(s,d=>n(d,e,l,c),i,a)}Zp(){if(this.Np===null)return;const e=this.Qd,s=this.Np.R_().W().visible,n=this.Np.D_().W().visible;s||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),n||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const i=e.$t().ud();s&&this.Cp===null&&(this.Cp=new Kw(this,e.W(),i,"left"),this.jp.appendChild(this.Cp.lp())),n&&this.Tp===null&&(this.Tp=new Kw(this,e.W(),i,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,s,n){this.$i().ld(this.Sm(e),this.km(s),n,ae(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,s,n){this.Ip=e,this.zp=!1,this.Gp(s.x,s.y,n);const i=this.$i().Zc();this.Lp={x:i.Yt(),y:i.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const s=this.$i(),n=this.fp();if(s.z_(n,n.vn()),this.Rp=null,this.Dp=!1,s.ed(),this.Ep!==null){const i=performance.now(),a=s.St();this.Ep.Vr(a.Hu(),i),this.Ep.Qu(i)||s.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)ae(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const s=this.$i(),n=s.St();if(n.Ni())return;const i=this.Qd.W(),a=i.handleScroll,o=i.kineticScroll;if((!a.pressedMouseMove||e.Dv)&&(!a.horzTouchDrag&&!a.vertTouchDrag||!e.Dv))return;const l=this.Np.vn(),c=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:c,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&o.touch||!e.Dv&&o.mouse){const d=n.le();this.Ep=new RL(.2/d,7/d,.997,15/d),this.Ep.Yd(n.Hu(),this.Rp.Od)}else this.Ep=null;l.Ni()||s.A_(this.Np,l,e.localY),s.nd(e.localX),this.Dp=!0}this.Dp&&(l.Ni()||s.I_(this.Np,l,e.localY),s.sd(e.localX),this.Ep!==null&&this.Ep.Yd(n.Hu(),c))}}class Gw{constructor(e,s,n,i,a){this.ft=!0,this.Ev=zt({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=n.ud,this.cn=s,this.Tm=i,this.Pm=a,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=co(this.Kv,zt({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),uo(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){qa(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const s=oo(this.Gv);s!==null&&s.useBitmapCoordinateSpace(n=>{this.mp(n),this.Ie(n)})}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const a=Math.floor(this.Oc.W().C*n),o=Math.floor(this.Oc.W().C*i),l=this.qv?s.width-a:0;e.fillRect(l,0,a,o)}mp({context:e,bitmapSize:s}){Qm(e,0,0,s.width,s.height,this.Pm())}}function by(t){return e=>{var s,n;return(n=(s=e.fa)===null||s===void 0?void 0:s.call(e,t))!==null&&n!==void 0?n:[]}}const BL=by("normal"),zL=by("top"),VL=by("bottom");class WL{constructor(e,s){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=zt({width:0,height:0}),this.Om=new is,this.Fv=new hd(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=s,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=co(this.Im,zt({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const n=this.Gv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Jv=co(this.Im,zt({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const i=this.Jv.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new yy(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),uo(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),uo(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,s,n){qa(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(zt({width:s,height:e.height})),this.Dm!==null&&this.Dm.cp(zt({width:n,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const n=oo(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i),this.$m(n,VL)}),this.wp(n),this.$m(n,BL)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const s=oo(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],s),this.$m(s,zL))}$m(e,s){const n=this.Qd.$t().wt();for(const i of n)a0(s,a=>i0(a,e,!1,void 0),i,void 0);for(const i of n)a0(s,a=>Zu(a,e,!1,void 0),i,void 0)}mp({context:e,bitmapSize:s}){Qm(e,0,0,s.width,s.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:s,verticalPixelRatio:n}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const i=Math.max(1,Math.floor(this.jm().C*n));e.fillRect(0,0,s.width,i)}}wp(e){const s=this.Qd.$t().St(),n=s.Ha();if(!n||n.length===0)return;const i=this.q_.maxTickMarkWeight(n),a=this.jm(),o=s.W();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:l,horizontalPixelRatio:c,verticalPixelRatio:d})=>{l.strokeStyle=this.qm(),l.fillStyle=this.qm();const h=Math.max(1,Math.floor(c)),u=Math.floor(.5*c);l.beginPath();const m=Math.round(a.T*d);for(let y=n.length;y--;){const v=Math.round(n[y].coord*c);l.rect(v-u,0,h,m)}l.fill()}),e.useMediaCoordinateSpace(({context:l})=>{const c=a.C+a.T+a.L+a.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.$(),l.font=this._p();for(const d of n)if(d.weight<i){const h=d.needAlignCoordinate?this.Ym(l,d.coord,d.label):d.coord;l.fillText(d.label,h,c)}this.Qd.W().timeScale.allowBoldLabels&&(l.font=this.Zm());for(const d of n)if(d.weight>=i){const h=d.needAlignCoordinate?this.Ym(l,d.coord,d.label):d.coord;l.fillText(d.label,h,c)}})}Ym(e,s,n){const i=this.Fv.xi(e,n),a=i/2,o=Math.floor(s-a)+.5;return o<0?s+=Math.abs(0-o):o+i>this.Ev.width&&(s-=Math.abs(this.Ev.width-(o+i))),s}Um(e,s){const n=this.jm();for(const i of e)for(const a of i.Qi())a.gt().X(s,n)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return Cl(this.j(),this.cn.fontFamily)}Zm(){return Cl(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new hd,Hm:0});const e=this.k,s=this._p();if(e.R!==s){const n=this.j();e.P=n,e.R=s,e.L=3*n/12,e.B=3*n/12,e.ji=9*n/12,e.N=0,e.Hm=4*n/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),s=e.W();s.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),s.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const n={ud:this.Qd.$t().ud()},i=()=>s.leftPriceScale.borderVisible&&e.St().W().borderVisible,a=()=>e.bd();s.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new Gw("left",s,n,i,a),this.Bm.appendChild(this.Rm.lp())),s.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new Gw("right",s,n,i,a),this.Am.appendChild(this.Dm.lp()))}}const HL=!!Tl&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Tl&&(!((wp=navigator==null?void 0:navigator.userAgentData)===null||wp===void 0)&&wp.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var wp;class KL{constructor(e,s,n){var i;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new is,this.Op=new is,this.Rc=new is,this.ib=null,this.nb=null,this.Jd=e,this.cn=s,this.q_=n,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(i=this.Xd).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),jp(this.cn)&&this.hb(!0),this.$i=new PL(this.Vc.bind(this),this.cn,n),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new WL(this,this.q_),this.sb.appendChild(this.ab.lp());const a=s.autoSize&&this.ob();let o=this.cn.width,l=this.cn.height;if(a||o===0||l===0){const c=e.getBoundingClientRect();o=o||c.width,l=l||c.height}this._b(o,l),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],ae(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,s,n=!1){if(this.ho===s&&this.__===e)return;const i=function(l){const c=Math.floor(l.width),d=Math.floor(l.height);return zt({width:c-c%2,height:d-d%2})}(zt({width:e,height:s}));this.ho=i.height,this.__=i.width;const a=this.ho+"px",o=this.__+"px";ae(this.Xd).style.height=a,ae(this.Xd).style.width=o,this.sb.style.height=a,this.sb.style.width=o,n?this.mb(_s.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=_s.es());for(let s=0;s<this.Xm.length;s++)this.Xm[s].vp(e.Hn(s).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const s=jp(this.cn);this.$i.$h(e);const n=jp(this.cn);n!==s&&this.hb(n),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),s=document.createElement("canvas");s.width=e.width,s.height=e.height;const n=ae(s.getContext("2d"));return this.gb(n),s}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:ae(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return Xs(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let s=0,n=0;const i=this.Xm[0],a=(l,c)=>{let d=0;for(let h=0;h<this.Xm.length;h++){const u=this.Xm[h],m=ae(l==="left"?u.wm():u.gm()),y=m.xp();e!==null&&m.Sp(e,c,d),d+=y.height}};this.xb()&&(a("left",0),s+=ae(i.wm()).xp().width);for(let l=0;l<this.Xm.length;l++){const c=this.Xm[l],d=c.xp();e!==null&&c.Sp(e,s,n),n+=d.height}s+=i.xp().width,this.Sb()&&(a("right",s),s+=ae(i.gm()).xp().width);const o=(l,c,d)=>{ae(l==="left"?this.ab.Lm():this.ab.Em()).Sp(ae(e),c,d)};if(this.cn.timeScale.visible){const l=this.ab.xp();if(e!==null){let c=0;this.xb()&&(o("left",c,n),c=ae(i.wm()).xp().width),this.ab.Sp(e,c,n),c+=l.width,this.Sb()&&o("right",c,n)}n+=l.height}return zt({width:s,height:n})}Pb(){let e=0,s=0,n=0;for(const v of this.Xm)this.xb()&&(s=Math.max(s,ae(v.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(n=Math.max(n,ae(v.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=v.M_();s=n0(s),n=n0(n);const i=this.__,a=this.ho,o=Math.max(i-s-n,0),l=this.cn.timeScale.visible;let c=l?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var d;c=(d=c)+d%2;const h=0+c,u=a<h?0:a-h,m=u/e;let y=0;for(let v=0;v<this.Xm.length;++v){const g=this.Xm[v];g.qp(this.$i.qc()[v]);let b=0,x=0;x=v===this.Xm.length-1?u-y:Math.round(g.M_()*m),b=Math.max(x,2),y+=b,g.cp(zt({width:o,height:b})),this.xb()&&g._m(s,"left"),this.Sb()&&g._m(n,"right"),g.fp()&&this.$i.Kc(g.fp(),b)}this.ab.Fm(zt({width:l?o:0,height:c}),l?s:0,l?n:0),this.$i.S_(o),this.Gm!==s&&(this.Gm=s),this.Jm!==n&&(this.Jm=n)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return HL?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const s=this.Rb(e),n=s*e.deltaX/100,i=-s*e.deltaY/100;if(e.cancelable&&e.preventDefault(),i!==0&&this.cn.handleScale.mouseWheel){const a=Math.sign(i)*Math.min(1,Math.abs(i)),o=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(o,a)}n!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*n)}mb(e,s){var n;const i=e.jn();i===3&&this.Db(),i!==3&&i!==2||(this.Vb(e),this.Ob(e,s),this.ab.bt(),this.Xm.forEach(a=>{a.Xp()}),((n=this.Qm)===null||n===void 0?void 0:n.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,s),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,s){for(const n of e.Qn())this.ns(n,s)}Vb(e){const s=this.$i.qc();for(let n=0;n<s.length;n++)e.Hn(n).Wn&&s[n].N_()}ns(e,s){const n=this.$i.St();switch(e.qn){case 0:n.hc();break;case 1:n.lc(e.Vt);break;case 2:n.Gn(e.Vt);break;case 3:n.Jn(e.Vt);break;case 4:n.qu();break;case 5:e.Vt.Qu(s)||n.Jn(e.Vt.tc(s))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(s=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const n=this.Qm;this.Qm=null,this.mb(n,s);for(const i of n.Qn())if(i.qn===5&&!i.Vt.Qu(s)){this.$t().Zn(i.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),s=e.length,n=this.Xm.length;for(let i=s;i<n;i++){const a=Xs(this.Xm.pop());this.sb.removeChild(a.lp()),a.lm().p(this),a.am().p(this),a.S()}for(let i=n;i<s;i++){const a=new vy(this,e[i]);a.lm().l(this.Bb.bind(this),this),a.am().l(this.Ab.bind(this),this),this.Xm.push(a),this.sb.insertBefore(a.lp(),this.ab.lp())}for(let i=0;i<s;i++){const a=e[i],o=this.Xm[i];o.fp()!==a?o.qp(a):o.Up()}this.cb(),this.Pb()}Ib(e,s,n){var i;const a=new Map;e!==null&&this.$i.wt().forEach(h=>{const u=h.In().ll(e);u!==null&&a.set(h,u)});let o;if(e!==null){const h=(i=this.$i.St().Ui(e))===null||i===void 0?void 0:i.originalTime;h!==void 0&&(o=h)}const l=this.$t().Wc(),c=l!==null&&l.Hc instanceof gy?l.Hc:void 0,d=l!==null&&l.Iv!==void 0?l.Iv.gr:void 0;return{zb:o,ee:e??void 0,Lb:s??void 0,Eb:c,Nb:a,Fb:d,Wb:n??void 0}}Bb(e,s,n){this.Vp.m(()=>this.Ib(e,s,n))}Ab(e,s,n){this.Op.m(()=>this.Ib(e,s,n))}lb(e,s,n){this.Rc.m(()=>this.Ib(e,s,n))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const s=e.find(n=>n.target===this.Jd);s&&this._b(s.contentRect.width,s.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function jp(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function GL(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function t4(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]])}return s}function qw(t,e,s,n){const i=s.value,a={ee:e,ot:t,Vt:[i,i,i,i],zb:n};return s.color!==void 0&&(a.V=s.color),a}function qL(t,e,s,n){const i=s.value,a={ee:e,ot:t,Vt:[i,i,i,i],zb:n};return s.lineColor!==void 0&&(a.lt=s.lineColor),s.topColor!==void 0&&(a.Ps=s.topColor),s.bottomColor!==void 0&&(a.Rs=s.bottomColor),a}function QL(t,e,s,n){const i=s.value,a={ee:e,ot:t,Vt:[i,i,i,i],zb:n};return s.topLineColor!==void 0&&(a.Re=s.topLineColor),s.bottomLineColor!==void 0&&(a.De=s.bottomLineColor),s.topFillColor1!==void 0&&(a.ke=s.topFillColor1),s.topFillColor2!==void 0&&(a.ye=s.topFillColor2),s.bottomFillColor1!==void 0&&(a.Ce=s.bottomFillColor1),s.bottomFillColor2!==void 0&&(a.Te=s.bottomFillColor2),a}function XL(t,e,s,n){const i={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:n};return s.color!==void 0&&(i.V=s.color),i}function YL(t,e,s,n){const i={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:n};return s.color!==void 0&&(i.V=s.color),s.borderColor!==void 0&&(i.Ot=s.borderColor),s.wickColor!==void 0&&(i.Xh=s.wickColor),i}function JL(t,e,s,n,i){const a=Xs(i)(s),o=Math.max(...a),l=Math.min(...a),c=a[a.length-1],d=[c,o,l,c],h=s,{time:u,color:m}=h;return{ee:e,ot:t,Vt:d,zb:n,$e:t4(h,["time","color"]),V:m}}function Cu(t){return t.Vt!==void 0}function Qw(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function Na(t){return(e,s,n,i,a,o)=>function(l,c){return c?c(l):(d=l).open===void 0&&d.value===void 0;var d}(n,o)?Qw({ot:e,ee:s,zb:i},n):Qw(t(e,s,n,i,a),n)}function Xw(t){return{Candlestick:Na(YL),Bar:Na(XL),Area:Na(qL),Baseline:Na(QL),Histogram:Na(qw),Line:Na(qw),Custom:Na(JL)}[t]}function Yw(t){return{ee:0,Hb:new Map,la:t}}function Jw(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function Zw(t){let e;return t.forEach(s=>{e===void 0&&(e=s.zb)}),Xs(e)}class ZL{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,s){let n=this.qb.size!==0,i=!1;const a=this.Yb.get(e);if(a!==void 0)if(this.Yb.size===1)n=!1,i=!0,this.qb.clear();else for(const c of this.Xb)c.pointData.Hb.delete(e)&&(i=!0);let o=[];if(s.length!==0){const c=s.map(y=>y.time),d=this.q_.createConverterToInternalObj(s),h=Xw(e.Qh()),u=e.Ca(),m=e.Ta();o=s.map((y,v)=>{const g=d(y.time),b=this.q_.key(g);let x=this.qb.get(b);x===void 0&&(x=Yw(g),this.qb.set(b,x),i=!0);const p=h(g,x.ee,y,c[v],u,m);return x.Hb.set(e,p),p})}n&&this.Gb(),this.Jb(e,o);let l=-1;if(i){const c=[];this.qb.forEach(d=>{c.push({timeWeight:0,time:d.la,pointData:d,originalTime:Zw(d.Hb)})}),c.sort((d,h)=>this.q_.key(d.time)-this.q_.key(h.time)),l=this.Qb(c)}return this.tw(e,l,function(c,d,h){const u=Jw(c,h),m=Jw(d,h);if(u!==void 0&&m!==void 0)return{ta:u.Ub>=m.Ub&&u.$b>=m.$b}}(this.Yb.get(e),a,this.q_))}vd(e){return this.Kb(e,[])}iw(e,s){const n=s;(function(g){g.zb===void 0&&(g.zb=g.time)})(n),this.q_.preprocessData(s);const i=this.q_.createConverterToInternalObj([s])(s.time),a=this.Zb.get(e);if(a!==void 0&&this.q_.key(i)<this.q_.key(a))throw new Error(`Cannot update oldest data, last time=${a}, new time=${i}`);let o=this.qb.get(this.q_.key(i));const l=o===void 0;o===void 0&&(o=Yw(i),this.qb.set(this.q_.key(i),o));const c=Xw(e.Qh()),d=e.Ca(),h=e.Ta(),u=c(i,o.ee,s,n.zb,d,h);o.Hb.set(e,u),this.nw(e,u);const m={ta:Cu(u)};if(!l)return this.tw(e,-1,m);const y={timeWeight:0,time:o.la,pointData:o,originalTime:Zw(o.Hb)},v=Ld(this.Xb,this.q_.key(y.time),(g,b)=>this.q_.key(g.time)<b);this.Xb.splice(v,0,y);for(let g=v;g<this.Xb.length;++g)Np(this.Xb[g].pointData,g);return this.q_.fillWeightsForPoints(this.Xb,v),this.tw(e,v,m)}nw(e,s){let n=this.Yb.get(e);n===void 0&&(n=[],this.Yb.set(e,n));const i=n.length!==0?n[n.length-1]:null;i===null||this.q_.key(s.ot)>this.q_.key(i.ot)?Cu(s)&&n.push(s):Cu(s)?n[n.length-1]=s:n.splice(-1,1),this.Zb.set(e,s.ot)}Jb(e,s){s.length!==0?(this.Yb.set(e,s.filter(Cu)),this.Zb.set(e,s[s.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let s=-1;for(let n=0;n<this.Xb.length&&n<e.length;++n){const i=this.Xb[n],a=e[n];if(this.q_.key(i.time)!==this.q_.key(a.time)){s=n;break}a.timeWeight=i.timeWeight,Np(a.pointData,n)}if(s===-1&&this.Xb.length!==e.length&&(s=Math.min(this.Xb.length,e.length)),s===-1)return-1;for(let n=s;n<e.length;++n)Np(e[n].pointData,n);return this.q_.fillWeightsForPoints(e,s),this.Xb=e,s}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(s=>{s.length!==0&&(e=Math.max(e,s[s.length-1].ee))}),e}tw(e,s,n){const i={ew:new Map,St:{Eu:this.sw()}};if(s!==-1)this.Yb.forEach((a,o)=>{i.ew.set(o,{$e:a,rw:o===e?n:void 0})}),this.Yb.has(e)||i.ew.set(e,{$e:[],rw:n}),i.St.hw=this.Xb,i.St.lw=s;else{const a=this.Yb.get(e);i.ew.set(e,{$e:a||[],rw:n})}return i}}function Np(t,e){t.ee=e,t.Hb.forEach(s=>{s.ee=e})}function wy(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function ej(t){const e=wy(t);return t.V!==void 0&&(e.color=t.V),e}function eF(t){const e=wy(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function tF(t){const e=wy(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function s4(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function sF(t){const e=s4(t);return t.V!==void 0&&(e.color=t.V),e}function rF(t){const e=s4(t),{V:s,Ot:n,Xh:i}=t;return s!==void 0&&(e.color=s),n!==void 0&&(e.borderColor=n),i!==void 0&&(e.wickColor=i),e}function o0(t){return{Area:eF,Line:ej,Baseline:tF,Histogram:ej,Bar:sF,Candlestick:rF,Custom:nF}[t]}function nF(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const iF={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},aF={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},oF={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:dy,attributionLogo:!0},Sp={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},lF={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},cF={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:dy,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function tj(){return{width:0,height:0,autoSize:!1,layout:oF,crosshair:iF,grid:aF,overlayPriceScales:Object.assign({},Sp),leftPriceScale:Object.assign(Object.assign({},Sp),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Sp),{visible:!0}),timeScale:lF,watermark:cF,localization:{locale:Tl?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class dF{constructor(e,s){this.aw=e,this.ow=s}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return Ym(this.ow)?this.aw.Mb(this.ow):0}Li(){return ae(this.aw.$t().Uc(this.ow)).Dt}}function sj(t,e,s){const n=t4(t,["time","originalTime"]),i=Object.assign({time:e},n);return s!==void 0&&(i.originalTime=s),i}const uF={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class hF{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class mF{constructor(e,s,n,i,a){this.uw=new is,this.Es=e,this.cw=s,this.dw=n,this.q_=a,this.fw=i}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().Rt(e,s.Vt)}coordinateToPrice(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().pn(e,s.Vt)}barsInLogicalRange(e){if(e===null)return null;const s=new Zo(new Oc(e.from,e.to)).lu(),n=this.Es.In();if(n.Ni())return null;const i=n.ll(s.Os(),1),a=n.ll(s.ui(),-1),o=ae(n.el()),l=ae(n.An());if(i!==null&&a!==null&&i.ee>a.ee)return{barsBefore:e.from-o,barsAfter:l-e.to};const c={barsBefore:i===null||i.ee===o?e.from-o:i.ee-o,barsAfter:a===null||a.ee===l?l-e.to:l-a.ee};return i!==null&&a!==null&&(c.from=i.zb,c.to=a.zb),c}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,s){const n=this.Es.In().ll(e,s);return n===null?null:o0(this.seriesType())(n)}data(){const e=o0(this.seriesType());return this.Es.In().ne().map(s=>e(s))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const s=e.map(n=>sj(n,this.q_.convertHorzItemToInternal(n.time),n.time));this.Es.na(s)}markers(){return this.Es.sa().map(e=>sj(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return li(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const s=wn(li(uF),e),n=this.Es.ea(s);return new hF(n)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class fF{constructor(e,s,n){this.ww=new is,this.mu=new is,this.Om=new is,this.$i=e,this.yl=e.St(),this.ab=s,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=n}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,s){s?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const s={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},n=this.yl.Iu(s);this.$i.pd(n)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){ha(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const s=this.$i.St();return s.Ni()?null:s.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const s=this.q_.convertHorzItemToInternal(e),n=this.yl.Va(s,!1);return n===null?null:this.yl.It(n)}coordinateToTime(e){const s=this.$i.St(),n=s.Nu(e),i=s.Ui(n);return i===null?null:i.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},li(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function pF(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(s){if(s>=1)return 0;let n=0;for(;n<8;n++){const i=Math.round(s);if(Math.abs(i-s)<1e-8)return n;s*=10}return n}(e.minMove))}function rj(t){return function(e){if(gu(e.handleScale)){const n=e.handleScale;e.handleScale={axisDoubleClickReset:{time:n,price:n},axisPressedMouseMove:{time:n,price:n},mouseWheel:n,pinch:n}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:n,axisDoubleClickReset:i}=e.handleScale;gu(n)&&(e.handleScale.axisPressedMouseMove={time:n,price:n}),gu(i)&&(e.handleScale.axisDoubleClickReset={time:i,price:i})}const s=e.handleScroll;gu(s)&&(e.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),t}class gF{constructor(e,s,n){this.Sw=new Map,this.kw=new Map,this.yw=new is,this.Cw=new is,this.Tw=new is,this.Pw=new ZL(s);const i=n===void 0?li(tj()):wn(li(tj()),rj(n));this.q_=s,this.aw=new KL(e,i,s),this.aw.lm().l(o=>{this.yw.M()&&this.yw.m(this.Rw(o()))},this),this.aw.am().l(o=>{this.Cw.M()&&this.Cw.m(this.Rw(o()))},this),this.aw.Xc().l(o=>{this.Tw.M()&&this.Tw.m(this.Rw(o()))},this);const a=this.aw.$t();this.Dw=new fF(a,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,s,n){this.autoSizeActive()||this.aw._b(e,s,n)}addCustomSeries(e,s){const n=zo(e),i=Object.assign(Object.assign({},MT),n.defaultOptions());return this.Vw("Custom",i,s,n)}addAreaSeries(e){return this.Vw("Area",Z5,e)}addBaselineSeries(e){return this.Vw("Baseline",eI,e)}addBarSeries(e){return this.Vw("Bar",Y5,e)}addCandlestickSeries(e={}){return function(s){s.borderColor!==void 0&&(s.borderUpColor=s.borderColor,s.borderDownColor=s.borderColor),s.wickColor!==void 0&&(s.wickUpColor=s.wickColor,s.wickDownColor=s.wickColor)}(e),this.Vw("Candlestick",X5,e)}addHistogramSeries(e){return this.Vw("Histogram",tI,e)}addLineSeries(e){return this.Vw("Line",J5,e)}removeSeries(e){const s=Xs(this.Sw.get(e)),n=this.Pw.vd(s);this.aw.$t().vd(s),this.Ow(n),this.Sw.delete(e),this.kw.delete(s)}pw(e,s){this.Ow(this.Pw.Kb(e,s))}bw(e,s){this.Ow(this.Pw.iw(e,s))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new dF(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(rj(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,s,n){const i=this.Sw.get(n);if(i===void 0)return;const a=this.aw.$t().dr(i);a!==null&&this.aw.$t().ad(e,s,a)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,s,n={},i){pF(n.priceFormat);const a=wn(li(AT),li(s),n),o=this.aw.$t().dd(e,a,i),l=new mF(o,this,this,this,this.q_);return this.Sw.set(l,o),this.kw.set(o,l),l}Ow(e){const s=this.aw.$t();s._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((n,i)=>i.J(n.$e,n.rw)),s.Wu()}Bw(e){return Xs(this.kw.get(e))}Rw(e){const s=new Map;e.Nb.forEach((i,a)=>{const o=a.Qh(),l=o0(o)(i);if(o!=="Custom")ha(GL(l));else{const c=a.Ta();ha(!c||c(l)===!1)}s.set(this.Bw(a),l)});const n=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:n,hoveredObjectId:e.Fb,seriesData:s,sourceEvent:e.Wb}}}function xF(t,e,s){let n;if(Id(t)){const a=document.getElementById(t);ha(a!==null,`Cannot find element in DOM with id=${t}`),n=a}else n=t;const i=new gF(n,e,s);return e.setOptions(i.options()),i}function yF(t,e){return xF(t,new zw,zw.Id(e))}Object.assign(Object.assign({},AT),MT);const r4=f.createContext(void 0);function jy({children:t,symbol:e="BTCUSDT",updateInterval:s=2e3}){const[n,i]=f.useState(null),[a,o]=f.useState(!0),[l,c]=f.useState(null),d=f.useCallback(async()=>{try{console.log(" [PriceContext] Fetching price for:",e);const u=await fetch(`/api/binance/price?symbol=${e}`);if(!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);const m=await u.json();if(m.success&&m.data)i(m.data),c(null),console.log(" [PriceContext] Price updated:",m.data.price);else throw new Error("Invalid response format")}catch(u){const m=u instanceof Error?u.message:"Unknown error";console.error(" [PriceContext] Error fetching price:",m),c(m)}finally{o(!1)}},[e]);f.useEffect(()=>{d()},[d]),f.useEffect(()=>{const u=setInterval(()=>{d()},s);return()=>clearInterval(u)},[d,s]);const h={priceData:n,isLoading:a,error:l,refreshPrice:d};return r.jsx(r4.Provider,{value:h,children:t})}function Kl(){const t=f.useContext(r4);if(t===void 0)throw new Error("usePrice must be used within a PriceProvider");return t}function Ny(){const{priceData:t}=Kl();if(!t)return{changeText:"+0.00%",changeColor:"#10B981",isPositive:!0};const e=t.priceChangePercent24h>=0;return{changeText:`${e?"+":""}${t.priceChangePercent24h.toFixed(2)}%`,changeColor:e?"#10B981":"#EF4444",isPositive:e,changeValue:t.priceChange24h,changePercent:t.priceChangePercent24h}}function Sy(){const{priceData:t}=Kl();return t?{high:t.high24h,low:t.low24h,volume:t.volume24h,quoteVolume:t.quoteVolume24h,openPrice:t.openPrice}:{high:0,low:0,volume:0,quoteVolume:0,openPrice:0}}function vF({symbol:t="BTCUSDT",interval:e="1m",height:s=400,containerId:n="lightweight_chart"}){const i=f.useRef(null),a=f.useRef(null),o=f.useRef(null),[l,c]=f.useState(!0),[d,h]=f.useState(null),{priceData:u}=Kl();return f.useEffect(()=>{if(!i.current)return;console.log(" [LightweightChart] Initializing chart for",t,e);let m=400;if(typeof s=="number")m=s;else if(typeof s=="string")if(s.includes("%"))m=i.current.clientHeight||window.innerHeight*.8;else if(s.includes("calc(")||s.includes("vh")){const b=i.current.clientHeight;b>50?m=b:m=Math.max(400,window.innerHeight-150)}else m=parseInt(s)||400;const y=yF(i.current,{width:i.current.clientWidth,height:m,layout:{background:{color:"#10121E"},textColor:"#D1D5DB",fontSize:11},grid:{vertLines:{color:"#1F2937",visible:!0},horzLines:{color:"#1F2937",visible:!0}},crosshair:{mode:0,vertLine:{visible:!1,labelVisible:!1},horzLine:{visible:!1,labelVisible:!1}},rightPriceScale:{borderColor:"#374151",width:45,scaleMargins:{top:.05,bottom:.05},minimumWidth:45,entireTextOnly:!1},timeScale:{borderColor:"#374151",timeVisible:!0,secondsVisible:!1},handleScroll:!1,handleScale:!1});a.current=y;const v=y.addCandlestickSeries({upColor:"#10B981",downColor:"#EF4444",borderUpColor:"#10B981",borderDownColor:"#EF4444",wickUpColor:"#10B981",wickDownColor:"#EF4444",priceLineVisible:!1,lastValueVisible:!1});o.current=v;try{const b=y.priceScale("right").getPriceLines();b&&b.length>0&&b.forEach(x=>{y.removePriceLine(x)})}catch{console.log("No price lines to remove")}const g=()=>{if(i.current&&a.current){let b=m;if(typeof s=="string"&&(s.includes("%")||s.includes("calc(")||s.includes("vh"))){const x=i.current.clientHeight;b=x>50?x:Math.max(400,window.innerHeight-150)}a.current.applyOptions({width:i.current.clientWidth,height:b})}};return window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g);try{a.current&&(a.current.remove(),a.current=null)}catch(b){console.error("Error cleaning up chart:",b)}}},[t,e,s]),f.useEffect(()=>{(async()=>{try{c(!0),h(null),console.log(" [LightweightChart] Fetching klines for",t,e);const y=await fetch(`/api/binance/klines?symbol=${t}&interval=${e}&limit=500`);if(!y.ok)throw new Error(`HTTP ${y.status}: ${y.statusText}`);const v=await y.json();if(!v.success||!v.data)throw new Error("Invalid response format");const g=v.data;console.log(" [LightweightChart] Received",g.length,"candles"),console.log(" [LightweightChart] Latest candle:",g[g.length-1]),o.current&&o.current.setData(g),a.current&&(a.current.timeScale().fitContent(),setTimeout(()=>{try{const b=a.current;if(b){const x=b.priceScale("right");x&&typeof x.removePriceLine=="function"&&console.log(" Attempting to clean up any automatic price lines")}}catch{}},100)),c(!1)}catch(y){const v=y instanceof Error?y.message:"Unknown error";console.error(" [LightweightChart] Error fetching klines:",v),h(v),c(!1)}})()},[t,e]),f.useEffect(()=>{if(!u||!o.current)return;console.log(" [LightweightChart] Updating last candle with real-time price:",u.price);const m=Math.floor(Date.now()/1e3);o.current.update({time:m,open:u.openPrice,high:u.high24h,low:u.low24h,close:u.price})},[u]),r.jsxs("div",{className:"relative w-full",style:{height:typeof s=="number"?`${s}px`:s},children:[l&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#10121E]/80 z-10",children:r.jsx("div",{className:"text-gray-400 text-sm",children:r.jsx("div",{className:"animate-pulse",children:"Loading chart data..."})})}),d&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#10121E]/80 z-10",children:r.jsxs("div",{className:"text-red-400 text-sm",children:["Error loading chart: ",d]})}),r.jsx("div",{ref:i,id:n,className:"w-full h-full"}),u&&!l&&r.jsxs("div",{className:"absolute top-2 left-2 bg-[#10121E]/80 backdrop-blur-sm px-3 py-2 rounded-lg border border-gray-700 z-20",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:t}),r.jsxs("div",{className:"text-lg font-bold text-white",children:["$",u.price.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),r.jsxs("div",{className:`text-sm ${u.priceChangePercent24h>=0?"text-green-400":"text-red-400"}`,children:[u.priceChangePercent24h>=0?"+":"",u.priceChangePercent24h.toFixed(2),"%"]})]})]})}class Gh extends f.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("ErrorBoundary caught an error:",e,s)}render(){var e;return this.state.hasError?this.props.fallback||r.jsx("div",{className:"flex items-center justify-center min-h-[400px] bg-[#10121E] text-white",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Something went wrong"}),r.jsx("p",{className:"text-gray-400 mb-4",children:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred"}),r.jsx("button",{onClick:()=>this.setState({hasError:!1,error:void 0}),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Try again"})]})}):this.props.children}}function bF(t){if(console.log(" formatSymbol called with:",{symbol:t,symbolType:typeof t,symbolLength:t==null?void 0:t.length,symbolIsUndefined:t===void 0,symbolIsNull:t===null,symbolIsEmpty:t===""}),!t)return console.log(" formatSymbol: No symbol provided, returning BTC/USDT"),"BTC/USDT";if(t.includes("/"))return console.log(" formatSymbol: Symbol already has slash, returning as-is:",t),t;if(t.endsWith("USDT")){const e=t.slice(0,-4)+"/USDT";return console.log(" formatSymbol: Formatted symbol:",t,"->",e),e}return console.log(" formatSymbol: Symbol does not end with USDT, returning as-is:",t),t}const wF=({trade:t,onClose:e})=>{const[s,n]=f.useState(!1),[i,a]=f.useState(()=>window.innerWidth<768),o=f.useCallback(()=>{n(!1),setTimeout(e,300)},[e]);if(f.useEffect(()=>{const d=()=>{a(window.innerWidth<768)};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),f.useEffect(()=>{if(t){n(!0);const d=setTimeout(o,25e3);return()=>clearTimeout(d)}},[t==null?void 0:t.id,o]),!t||!s)return null;const l=t.status==="won";let c=0;if(t.profit!==void 0&&t.profit!==null)c=t.profit,console.log(" NOTIFICATION: Using profit from WebSocket:",c);else if(l)c=t.payout-t.amount,console.log(" NOTIFICATION: Calculating win profit:",c,"=",t.payout,"-",t.amount);else{const d=(t.profitPercentage||15)/100;c=-(t.amount*d),console.log(" NOTIFICATION: Calculating loss profit:",c,"= -(",t.amount,"*",d,")")}return console.log("NOTIFICATION RENDER:",{tradeId:t.id,isMobile:i,screenWidth:window.innerWidth,isVisible:s,position:i?"centered":"top-right",tradeProfit:t.profit,tradeAmount:t.amount,tradePayout:t.payout,tradeProfilePercentage:t.profitPercentage,calculatedPnl:c,isWin:l}),r.jsxs(r.Fragment,{children:[i&&r.jsx("div",{className:"fixed inset-0 transition-opacity duration-300",style:{zIndex:2147483646,backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",opacity:s?1:0,pointerEvents:s?"auto":"none"},onClick:o}),r.jsx("div",{className:"trade-notification fixed transition-all duration-300",style:{zIndex:2147483647,top:i?"50%":"20px",left:i?"50%":"auto",right:i?"auto":"20px",transform:i?"translate(-50%, -50%)":"none",width:i?"80vw":"auto",maxWidth:i?"340px":"320px",minWidth:"280px",opacity:s?1:0,scale:s?1:.95,pointerEvents:"auto"},children:r.jsxs("div",{className:`rounded-xl shadow-2xl border-2 ${l?"bg-gradient-to-br from-emerald-900/95 via-green-800/95 to-teal-900/95 border-emerald-400 text-emerald-50":"bg-gradient-to-br from-red-900/95 via-rose-800/95 to-pink-900/95 border-red-400 text-red-50"}`,style:{padding:i?"18px":"20px"},children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("span",{className:"font-bold",style:{fontSize:"18px"},children:l?"TRADE WON!":"TRADE LOST"}),r.jsx("button",{onClick:o,className:"text-gray-300 hover:text-white flex items-center justify-center font-bold rounded-full bg-black/20 hover:bg-black/40 transition-colors",style:{width:"28px",height:"28px",fontSize:"14px"},children:""})]}),r.jsxs("div",{className:"space-y-2",style:{fontSize:"14px"},children:[r.jsxs("div",{className:"flex justify-between items-center bg-gray-800/40 rounded-lg",style:{padding:"10px 12px"},children:[r.jsx("span",{className:"text-gray-200",children:"Market:"}),r.jsx("span",{className:"font-bold",children:bF(t.symbol)})]}),r.jsxs("div",{className:"flex justify-between items-center bg-gray-800/40 rounded-lg",style:{padding:"10px 12px"},children:[r.jsx("span",{className:"text-gray-200",children:"Trade:"}),r.jsx("span",{className:"font-bold",children:t.direction==="up"?"BUY/UP":"SELL/DOWN"})]}),r.jsxs("div",{className:"flex justify-between items-center bg-gray-800/40 rounded-lg",style:{padding:"10px 12px"},children:[r.jsx("span",{className:"text-gray-200",children:"Amount:"}),r.jsxs("span",{className:"font-bold",children:[t.amount.toLocaleString()," USDT"]})]}),r.jsxs("div",{className:"flex justify-between items-center bg-gray-800/40 rounded-lg",style:{padding:"10px 12px"},children:[r.jsx("span",{className:"text-gray-200",children:"Entry Price:"}),r.jsx("span",{className:"font-mono",children:t.entryPrice.toFixed(2)})]}),r.jsxs("div",{className:"flex justify-between items-center bg-gray-800/40 rounded-lg",style:{padding:"10px 12px"},children:[r.jsx("span",{className:"text-gray-200",children:"Close Price:"}),r.jsx("span",{className:"font-mono",children:t.finalPrice.toFixed(2)})]}),r.jsxs("div",{className:"flex justify-between items-center bg-gray-800/40 rounded-lg",style:{padding:"10px 12px"},children:[r.jsx("span",{className:"text-gray-200",children:"Duration:"}),r.jsxs("span",{className:"font-bold",children:[t.duration||30," seconds"]})]}),r.jsxs("div",{className:"flex justify-between items-center bg-gray-800/40 rounded-lg",style:{padding:"10px 12px"},children:[r.jsx("span",{className:"text-gray-200",children:"Profit:"}),r.jsxs("span",{className:`font-bold ${l?"text-emerald-300":"text-red-300"}`,children:[l?"+"+c.toFixed(0):c.toFixed(0)," USDT"]})]})]})]})})]})};function nj({trade:t,onClose:e}){var s;return console.log(" UNIVERSAL NOTIFICATION: Rendering for trade:",t==null?void 0:t.id,"Status:",t==null?void 0:t.status),console.log(" UNIVERSAL NOTIFICATION: Trade symbol:",{symbol:t==null?void 0:t.symbol,symbolType:typeof(t==null?void 0:t.symbol),symbolLength:(s=t==null?void 0:t.symbol)==null?void 0:s.length,symbolIsUndefined:(t==null?void 0:t.symbol)===void 0,symbolIsNull:(t==null?void 0:t.symbol)===null,symbolIsEmpty:(t==null?void 0:t.symbol)===""}),r.jsx(wF,{trade:t,onClose:e})}function ij({trades:t,currentPrice:e}){return t.length===0?null:r.jsx("div",{className:"absolute top-2 left-2 z-50 space-y-2",children:t.map(s=>{const n=Math.max(0,Math.ceil((s.endTime-Date.now())/1e3)),i=e-s.entryPrice,a=s.direction==="up"&&i>0||s.direction==="down"&&i<0;return r.jsxs("div",{className:`px-3 py-2 rounded-lg backdrop-blur-sm border ${a?"bg-green-900/80 border-green-400 text-green-100":"bg-red-900/80 border-red-400 text-red-100"} text-xs min-w-[200px]`,children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("span",{className:`font-bold ${s.direction==="up"?"text-green-300":"text-red-300"}`,children:[s.direction.toUpperCase()," $",s.amount]}),r.jsxs("span",{className:"text-yellow-300 font-bold",children:[n,"s"]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{children:["Entry: $",s.entryPrice.toFixed(2)]}),r.jsxs("span",{className:`font-bold ${i>=0?"text-green-300":"text-red-300"}`,children:[i>=0?"+":"","$",i.toFixed(2)]})]}),r.jsx("div",{className:"text-center mt-1",children:r.jsxs("span",{className:`text-xs ${a?"text-green-300":"text-red-300"}`,children:[a?" WINNING":" LOSING","  ",s.profitPercentage,"%"]})})]},s.id)})})}const Cp=t=>{try{const e=new(window.AudioContext||window.webkitAudioContext),s=(n,i,a=.1)=>{const o=e.createOscillator(),l=e.createGain();o.connect(l),l.connect(e.destination),o.frequency.setValueAtTime(n,e.currentTime),o.type="sine",l.gain.setValueAtTime(0,e.currentTime),l.gain.linearRampToValueAtTime(a,e.currentTime+.01),l.gain.exponentialRampToValueAtTime(.001,e.currentTime+i),o.start(e.currentTime),o.stop(e.currentTime+i)};switch(t){case"win":s(523,.2),setTimeout(()=>s(659,.2),100),setTimeout(()=>s(784,.3),200);break;case"lose":s(523,.3),setTimeout(()=>s(466,.3),150),setTimeout(()=>s(392,.4),300);break;case"place":s(800,.1);break}}catch(e){console.log("Audio not available:",e)}},jF=["BTCUSDT","ETHUSDT","BNBUSDT","SOLUSDT","XRPUSDT","ADAUSDT","LTCUSDT","TONUSDT","DOGEUSDT","AVAXUSDT","DOTUSDT","LINKUSDT","POLUSDT","UNIUSDT","ATOMUSDT","FILUSDT","TRXUSDT","ETCUSDT","XLMUSDT"];function n4(t=jF,e=5e3){const[s,n]=f.useState({}),[i,a]=f.useState(!0),[o,l]=f.useState(null),c=f.useCallback(async u=>{try{const m=await fetch(`/api/binance/price?symbol=${u}`);if(!m.ok)throw new Error(`HTTP ${m.status}: ${m.statusText}`);const y=await m.json();if(y.success&&y.data)return y.data;throw new Error("Invalid response format")}catch(m){return console.error(` [MultiSymbolPrice] Error fetching ${u}:`,m),null}},[]),d=f.useCallback(async()=>{try{console.log(" [MultiSymbolPrice] Fetching prices for:",t);const u=t.map(g=>c(g).then(b=>({symbol:g,data:b}))),m=await Promise.all(u),y={};let v=0;if(m.forEach(({symbol:g,data:b})=>{b&&(y[g]=b,v++)}),v>0)n(y),l(null),console.log(` [MultiSymbolPrice] Updated ${v}/${t.length} symbols`);else throw new Error("Failed to fetch any price data")}catch(u){const m=u instanceof Error?u.message:"Unknown error";console.error(" [MultiSymbolPrice] Error fetching prices:",m),l(m)}finally{a(!1)}},[t,c]),h=f.useCallback(u=>s[u]||null,[s]);return f.useEffect(()=>{d()},[d]),f.useEffect(()=>{const u=setInterval(()=>{d()},e);return()=>clearInterval(u)},[d,e]),{priceData:s,isLoading:i,error:o,refreshPrices:d,getPriceForSymbol:h}}function NF({selectedSymbol:t,setSelectedSymbol:e}){var _t,F,ee,Pe,ot,Kt,Ft,rr;const{user:s}=Ss(),{lastMessage:n,subscribe:i,connected:a,sendMessage:o}=Fm(),l=Ir(),c=Wn();f.useEffect(()=>{console.log(" WebSocket connection status:",a?"CONNECTED":"DISCONNECTED")},[a]),f.useEffect(()=>{console.log(" WEBSOCKET STATUS:",{connected:a,hasLastMessage:!!n}),console.log(a?" WebSocket is connected and ready":" WebSocket is NOT connected")},[a,n]);const{priceData:d}=Kl(),{changeText:h,changeColor:u,isPositive:m}=Ny(),{high:y,low:v,volume:g}=Sy(),{getPriceForSymbol:b}=n4(),[x,p]=f.useState("tradingview");console.log(" OPTIONS PAGE - User data:",{id:s==null?void 0:s.id,role:s==null?void 0:s.role,verificationStatus:s==null?void 0:s.verificationStatus,username:s==null?void 0:s.username}),console.log(" OPTIONS PAGE - Price from context:",d==null?void 0:d.price);const[w,j]=f.useState(""),[S,_]=f.useState("open"),[k,P]=f.useState("30s"),[M,T]=f.useState(100),[E,I]=f.useState(0),[V,G]=f.useState(0),[A,R]=f.useState(!1),[$,O]=f.useState([]),[U,J]=f.useState([]),[Q,Oe]=f.useState(null),[ge,He]=f.useState(""),se=f.useRef(new Map),ze=f.useRef(new Set),ce=N=>{var _e;if(console.log(" TRIGGER: Starting notification trigger for trade:",N.id,"Amount:",N.amount),!N.amount||N.amount<=0){console.log(" TRIGGER: Skipping notification - invalid amount:",N.amount);return}if(!N.id){console.log(" TRIGGER: Skipping notification - no trade ID");return}if(N.startTime&&typeof N.startTime=="number"){const Be=Date.now()-N.startTime,gt=(N.duration||30)*1e3+3e4;if(Be>gt){console.log(" TRIGGER: Skipping notification - trade is too old:",Be,"ms (max allowed:",gt,"ms)");return}}console.log(" TRIGGER: Symbol information:",{symbol:N.symbol,symbolType:typeof N.symbol,symbolLength:(_e=N.symbol)==null?void 0:_e.length,symbolIsUndefined:N.symbol===void 0,symbolIsNull:N.symbol===null,symbolIsEmpty:N.symbol===""});const B=Date.now(),me=N.id.includes("test-"),Z=se.current.get(N.id);if(Z&&B-Z<5e3&&!me){console.log(" TRIGGER: Duplicate notification prevented for trade:",N.id,"Last notification was",B-Z,"ms ago");return}se.current.set(N.id,B);const re=B-10*60*1e3;for(const[Be,gt]of se.current.entries())gt<re&&se.current.delete(Be);document.querySelectorAll('[data-mobile-notification="true"]').forEach(Be=>Be.remove());const Le=`trade-${N.id}`;He(Le),console.log(" TRIGGER: About to call setCompletedTrade with:",{id:N.id,amount:N.amount,duration:N.duration,status:N.status}),ze.current.add(N.id),Oe(N),localStorage.setItem("completedTrade",JSON.stringify(N)),console.log(" TRIGGER: Notification set for trade:",N.id),console.log(" TRIGGER: Full trade object being displayed:",JSON.stringify({id:N.id,amount:N.amount,entryPrice:N.entryPrice,currentPrice:N.currentPrice,status:N.status,duration:N.duration,profitPercentage:N.profitPercentage},null,2)),setTimeout(()=>{Oe(null),localStorage.removeItem("completedTrade"),ze.current.delete(N.id)},25e3)};f.useEffect(()=>{typeof window<"u"&&(window.simulateRealTradeCompletion=()=>{if(console.log(" SIMULATING REAL TRADE COMPLETION..."),!(s!=null&&s.id)){console.log(" No user logged in");return}const N={type:"trade_completed",data:{tradeId:"simulated-"+Date.now(),userId:s.id,result:"win",exitPrice:51e3,profitAmount:10,newBalance:1e3,timestamp:new Date().toISOString()}};console.log(" Mock trade completion message:",N),console.log(" This should trigger the notification system...");const B={id:N.data.tradeId,symbol:"BTC/USDT",direction:"up",amount:100,entryPrice:5e4,currentPrice:51e3,status:"won",duration:30,profitPercentage:10,payout:110,profit:10};console.log(" Triggering notification directly..."),ce(B)},window.testMobileNotification=()=>{console.log(" GLOBAL: Testing mobile notification from console");const N={id:"console-test-"+Date.now(),direction:"up",amount:100,entryPrice:5e4,currentPrice:51e3,status:"won",payout:110,profitPercentage:10};ce(N)},window.testNotificationNow=()=>{console.log(" IMMEDIATE: Testing notification immediately");const N={id:"immediate-test-"+Date.now(),symbol:"BTC/USDT",direction:"up",amount:100,entryPrice:114420.87,currentPrice:114904.29,status:"won",duration:30,profitPercentage:10,payout:110,profit:10};console.log(" IMMEDIATE: Calling triggerNotification with:",N),ce(N)},window.testWebSocketNotification=async()=>{console.log(" WEBSOCKET TEST: Requesting server to send WebSocket notification");try{const B=await(await fetch("/api/test/websocket-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s==null?void 0:s.id})})).json();console.log(" WEBSOCKET TEST: Server response:",B)}catch(N){console.error(" WEBSOCKET TEST: Error:",N)}},window.simulateTradeCompleted=()=>{console.log(" SIMULATE: Creating fake trade_completed message");const N={type:"trade_completed",data:{tradeId:"simulate-"+Date.now(),userId:s==null?void 0:s.id,result:"win",exitPrice:5e4,profitAmount:10,newBalance:1e3,timestamp:new Date().toISOString()}};console.log(" SIMULATE: Fake message created:",N),console.log(" SIMULATE: This would trigger the notification if WebSocket was working");const B={id:N.data.tradeId,symbol:"BTC/USDT",direction:"up",amount:100,entryPrice:49e3,currentPrice:N.data.exitPrice,status:"won",duration:30,profitPercentage:10,payout:110,profit:N.data.profitAmount};console.log(" SIMULATE: Triggering notification with simulated trade:",B),ce(B)},window.testDirectNotification=()=>{console.log(" GLOBAL: Creating direct DOM notification from console"),document.querySelectorAll('[data-mobile-notification="true"]').forEach(me=>me.remove());const B={id:"flow-test-"+Date.now(),direction:"up",amount:100,entryPrice:5e4,currentPrice:51e3,status:"won",payout:110,profitPercentage:10,symbol:"BTC/USDT",duration:30,profit:10};console.log(" GLOBAL: Testing complete notification flow with trade:",B),ce(B)},window.testTradeCompletion=()=>{console.log(" GLOBAL: Simulating trade completion WebSocket message");const N={type:"trigger_mobile_notification",data:{tradeId:"mock-test-"+Date.now(),userId:s==null?void 0:s.id,direction:"up",amount:100,entryPrice:5e4,currentPrice:51e3,status:"won",payout:110,profitPercentage:10,symbol:"BTC/USDT",duration:30}};console.log(" GLOBAL: Simulating WebSocket message:",N)},window.testOldDirectNotification=()=>{console.log(" GLOBAL: Creating direct DOM notification from console"),document.querySelectorAll('[data-mobile-notification="true"]').forEach(me=>me.remove());const B=document.createElement("div");B.setAttribute("data-mobile-notification","true"),B.style.cssText=`
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          z-index: 999999999 !important;
          background-color: rgba(0, 0, 0, 0.95) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 16px !important;
          visibility: visible !important;
          opacity: 1 !important;
          pointer-events: auto !important;
        `,B.innerHTML=`
          <div style="
            background-color: #1a1b3a;
            border-radius: 16px;
            padding: 20px;
            max-width: 320px;
            width: 90%;
            border: 3px solid #10b981;
            color: white;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
            text-align: center;
          ">
            <div style="font-size: 20px; font-weight: bold; color: #10b981; margin-bottom: 16px;">
               CONSOLE TEST SUCCESS!
            </div>
            <div style="margin-bottom: 16px; color: #9ca3af;">
              This notification was triggered from the browser console.
            </div>
            <button onclick="this.closest('[data-mobile-notification]').remove()" style="
              background-color: #10b981;
              color: white;
              border: none;
              border-radius: 8px;
              padding: 12px 24px;
              font-size: 14px;
              font-weight: bold;
              cursor: pointer;
              width: 100%;
            ">
              Close Console Test
            </button>
          </div>
        `,document.body.appendChild(B),console.log(" GLOBAL: Direct notification created from console")},window.forceNotificationTest=()=>{console.log(" FORCE: Creating notification directly via DOM manipulation"),document.querySelectorAll('[data-mobile-notification="true"]').forEach(me=>me.remove());const B=document.createElement("div");B.setAttribute("data-mobile-notification","true"),B.style.cssText=`
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 999999;
          font-family: Arial, sans-serif;
        `,B.innerHTML=`
          <div style="
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 16px;
            padding: 24px;
            max-width: 350px;
            width: 90%;
            border: 1px solid #3a3d5a;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            text-align: center;
            color: white;
          ">
            <div style="font-size: 20px; font-weight: bold; color: #10b981; margin-bottom: 16px;">
               Trade Won!
            </div>
            <div style="font-size: 12px; color: #9ca3af; margin-bottom: 16px;">
              Market: BTC/USDT
            </div>
            <div style="background: #2a2d47; border-radius: 8px; padding: 12px; margin-bottom: 16px; border: 1px solid #3a3d5a;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 12px;">
                <span style="color: #9ca3af;">Trade:</span>
                <span style="color: #10b981; font-weight: bold;">BUY UP</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 12px;">
                <span style="color: #9ca3af;">Amount:</span>
                <span style="color: white; font-weight: bold;">100 USDT</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 12px;">
                <span style="color: #9ca3af;">Entry Price:</span>
                <span style="color: white; font-weight: bold;">115,520.39</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 12px;">
                <span style="color: #9ca3af;">Close Price:</span>
                <span style="color: white; font-weight: bold;">115,904.29</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 12px;">
                <span style="color: #9ca3af;">Duration:</span>
                <span style="color: white; font-weight: bold;">30 seconds</span>
              </div>
              <div style="display: flex; justify-content: space-between; font-size: 12px;">
                <span style="color: #9ca3af;">Profit:</span>
                <span style="color: #10b981; font-weight: bold;">+10</span>
              </div>
            </div>
            <button onclick="this.parentElement.parentElement.remove()" style="
              background: #10b981;
              color: white;
              border: none;
              border-radius: 8px;
              padding: 12px 24px;
              font-weight: bold;
              cursor: pointer;
              width: 100%;
            ">
              Close Notification
            </button>
          </div>
        `,document.body.appendChild(B),console.log(" FORCE: Notification created and added to DOM"),setTimeout(()=>{B.parentNode&&(B.remove(),console.log(" FORCE: Auto-removed notification"))},3e4)},console.log(" GLOBAL FUNCTIONS AVAILABLE:"),console.log("- testMobileNotification() - Test React notification"),console.log("- testDirectNotification() - Test direct DOM notification"),console.log("- forceNotificationTest() - Force create notification (GUARANTEED TO WORK)"))},[]);const[Ke,je]=f.useState(()=>{const N=localStorage.getItem("currentTradingMode");return N==="win"||N==="lose"||N==="normal"?N:"normal"}),[Ve,Me]=f.useState(!1),[De,pt]=f.useState(null),K=f.useRef([]),[pe,st]=f.useState(!1),qe=async()=>{if(s!=null&&s.id){st(!0);try{l.invalidateQueries({queryKey:[`/api/users/${s.id}/trades`]}),console.log(" Invalidated React Query cache for trade history to prevent conflicts")}catch(N){console.error(" Error invalidating React Query cache:",N)}try{localStorage.removeItem(`tradeHistory_${s.id}`),console.log(" Cleared any existing localStorage trade history cache")}catch(N){console.error(" Error clearing localStorage cache:",N)}console.log(" Loading fresh trade history from server (no caching)");try{const N=await fetch(`/api/users/${s.id}/trades`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(N.ok){const B=await N.json();console.log(" Loaded trade history from server:",B.length),console.log(" Raw server trades:",B),console.log(" Raw server trades before filtering:",B);const me=B.filter(Z=>{const re=Z.result&&(Z.result==="win"||Z.result==="lose"||Z.result==="won"||Z.result==="lost"),xe=Z.status!=="pending"&&Z.result!=="pending";return console.log(` Trade ${Z.id}: result=${Z.result}, status=${Z.status}, hasResult=${re}, notPending=${xe}`),re&&xe}).map(Z=>{const re=parseFloat(Z.entry_price||"0");let xe=parseFloat(Z.exit_price||"0");const Le=Z.result==="win"||Z.result==="won";if(console.log(` Trade ${Z.id}: Entry=${re}, Exit=${xe}, Status=${Z.status}, Result=${Z.result}`),!xe||xe===0){console.log(` Missing exit price for trade ${Z.id}, generating consistent fallback`);const gt=((parseInt(Z.id.toString().slice(-6))||123456)*9301+49297)%233280/233280,Mt=.005,Cs=1e-4,At=Mt-Cs,as=gt*At+Cs;let Rs=1;Z.direction==="up"?Rs=Le?1:-1:Z.direction==="down"&&(Rs=Le?-1:1),xe=re*(1+as*Rs);const xr=.01;Math.abs(xe-re)<xr&&(xe=re+Rs*xr),console.log(` Generated fallback exit price for trade ${Z.id}: ${xe}`)}else console.log(` Using stored exit price for trade ${Z.id}: ${xe}`);const _e={id:Z.id,symbol:Z.symbol||"BTCUSDT",amount:parseFloat(Z.amount),direction:Z.direction,duration:Z.duration||30,entryPrice:re,currentPrice:xe,payout:Le?parseFloat(Z.amount)+parseFloat(Z.profit_loss||"0"):0,status:Le?"won":"lost",endTime:Z.updated_at||Z.created_at,startTime:Z.created_at,profit:parseFloat(Z.profit_loss||"0"),profitPercentage:(()=>{const Be=Z.duration||30;return Be===30?10:Be===60?15:Be===90?20:Be===120?25:Be===180?30:Be===240?50:Be===300?75:Be===600?100:10})()};return console.log(` Formatted trade ${Z.id}:`,_e),_e});console.log(" Formatted trades count:",me.length),J(me),console.log(" Trade history loaded fresh from server (no caching):",s.id)}else console.log(" Failed to load trade history from server, using cached data")}catch(N){console.error(" Error loading trade history from server, using cached data:",N)}finally{st(!1)}}};f.useEffect(()=>{qe()},[s==null?void 0:s.id]),f.useEffect(()=>{const N=()=>{const B=localStorage.getItem("currentTradingMode");B&&(B==="win"||B==="lose"||B==="normal")&&(je(B),console.log(` Synced trading mode from localStorage: ${B.toUpperCase()}`))};return N(),window.addEventListener("storage",N),()=>{window.removeEventListener("storage",N)}},[]);const Wt=(d==null?void 0:d.price.toFixed(2))||"0.00";d!=null&&d.price;const ut=(d==null?void 0:d.price)||E||166373.87,D=["BTCUSDT","ETHUSDT","XRPUSDT","LTCUSDT","BNBUSDT","SOLUSDT","TONUSDT","DOGEUSDT","ADAUSDT","TRXUSDT","LINKUSDT","AVAXUSDT","SUIUSDT","SHIBUSDT","BCHUSDT","DOTUSDT","XLMUSDT"].map(N=>{const B=b(N),me=N===t,Z=me&&d?d.price:(B==null?void 0:B.price)||0,re=me&&d?d.priceChangePercent24h:(B==null?void 0:B.priceChangePercent24h)||0,xe=re>=0?`+${re.toFixed(2)}%`:`${re.toFixed(2)}%`;return{symbol:N.replace("USDT","/USDT"),coin:N.replace("USDT",""),rawSymbol:N,price:Z.toString(),priceChangePercent24h:xe}}),H=D.filter(N=>N.coin.toLowerCase().includes(w.toLowerCase())||N.symbol.toLowerCase().includes(w.toLowerCase())),X=D.find(N=>N.rawSymbol===t)||D[0],ve=N=>{console.log(" Selected trading pair:",N),e(N),j("")},oe=N=>{console.log(" TradingView symbol changed to:",N),console.log(" Current selected symbol:",t),console.log(" Available trading pairs:",D.map(Z=>Z.rawSymbol));const B=N.replace("BINANCE:","").replace("COINBASE:",""),me=D.find(Z=>Z.rawSymbol===B);me?(console.log(" Found matching pair:",me),console.log(" Setting selected symbol to:",B),e(B),j("")):(console.log(" Symbol not found in trading pairs:",B),console.log(" Available symbols:",D.map(Z=>Z.rawSymbol).join(", ")))},te=N=>{if(j(N),N.length>0){const B=D.filter(me=>me.coin.toLowerCase()===N.toLowerCase());B.length===1&&(console.log(" Auto-selecting exact match:",B[0].rawSymbol),e(B[0].rawSymbol))}},[Se,Re]=f.useState({sellOrders:[],buyOrders:[]});f.useEffect(()=>{if(d!=null&&d.price){const N=d.price;K.current.push(N),K.current.length>1e3&&(K.current=K.current.slice(-1e3));const B=Ze(N);Re(B),console.log(" Price update from context:",N.toFixed(2)),console.log(" Order book data generated:",{sellOrders:B.sellOrders.length,buyOrders:B.buyOrders.length,firstSell:B.sellOrders[0],firstBuy:B.buyOrders[0]})}},[d==null?void 0:d.price]);const Ze=N=>{const B=[],me=[];for(let Z=0;Z<8;Z++){const re=(Z+1)*(Math.random()*.5+.1),xe=N+re,Le=(Math.random()*2+.1).toFixed(4),_e=(xe*parseFloat(Le)).toFixed(2);B.push({price:xe.toFixed(2),volume:Le,turnover:_e})}for(let Z=0;Z<8;Z++){const re=(Z+1)*(Math.random()*.5+.1),xe=N-re,Le=(Math.random()*2+.1).toFixed(4),_e=(xe*parseFloat(Le)).toFixed(2);me.push({price:xe.toFixed(2),volume:Le,turnover:_e})}return{sellOrders:B,buyOrders:me}},{data:ht}=ns({queryKey:["/api/market-data"],refetchInterval:5e3}),{data:ts}=ns({queryKey:["/api/balances"],enabled:!!s,refetchInterval:2e3,staleTime:0,gcTime:0,queryFn:async()=>{var me;console.log(" OPTIONS: Fetching balance from /api/balances for user:",s==null?void 0:s.id,s==null?void 0:s.username),console.log(" OPTIONS: Auth token:",((me=localStorage.getItem("authToken"))==null?void 0:me.substring(0,30))+"...");const N=await fetch("/api/balances",{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(console.log(" OPTIONS: Response status:",N.status,N.statusText),!N.ok){const Z=await N.text();throw console.error(" OPTIONS: Balance API failed:",N.status,Z),new Error(`Failed to fetch balance: ${N.status} ${Z}`)}const B=await N.json();return console.log(" OPTIONS: Balance API response:",B),B}});let Je=0;if(console.log(" OPTIONS PAGE - User:",s==null?void 0:s.id,"UserBalances:",ts),s&&ts&&Array.isArray(ts)){console.log(" OPTIONS - RAW userBalances (array):",ts);const N=ts.find(B=>B.symbol==="USDT");Je=Number((N==null?void 0:N.available)||0),console.log(" OPTIONS - Using standardized array format:",Je,N)}else s?(console.log(" OPTIONS - userBalances is not in expected array format:",typeof ts,ts),console.log(" OPTIONS - User authenticated but no balance data")):console.log(" OPTIONS - No user authenticated");isNaN(Je)&&(console.warn(" OPTIONS - Balance is NaN, setting to 0"),Je=0),console.log(" OPTIONS - Final balance:",Je),f.useEffect(()=>{var N;(n==null?void 0:n.type)==="balance_update"&&(console.log(" OPTIONS: Real-time balance update received:",n.data),console.log(" OPTIONS: Current user ID:",s==null?void 0:s.id,"Update for user:",(N=n.data)==null?void 0:N.userId),l.invalidateQueries({queryKey:["/api/balances"]}),l.invalidateQueries({queryKey:["/api/auth"]}),l.removeQueries({queryKey:["/api/balances"]}),setTimeout(()=>{l.refetchQueries({queryKey:["/api/balances"]})},100))},[n,l,s==null?void 0:s.id]);const ie=ht==null?void 0:ht.find(N=>N.symbol==="BTCUSDT"),tr=ie?parseFloat(ie.price):0,z=ut;f.useEffect(()=>{const N=()=>{const me=z,Z=Ze(me);Re(Z),console.log(" Order book updated with price:",me.toFixed(2))};N();const B=setInterval(N,3e4);return()=>clearInterval(B)},[z,Wt]),f.useEffect(()=>{},[tr,Wt]),f.useEffect(()=>{a&&(s!=null&&s.id)&&(i(["BTCUSDT"]),console.log(" Subscribed to BTCUSDT price updates"),o({type:"subscribe_user_balance",userId:s.id}),console.log(" Subscribed to balance updates for user:",s.id))},[a,i,o,s==null?void 0:s.id]),f.useEffect(()=>{var N;if((n==null?void 0:n.type)==="price_update"&&((N=n.data)==null?void 0:N.symbol)==="BTCUSDT"){const B=parseFloat(n.data.price);if(B>0){I(B),K.current.push(B),K.current.length>1e3&&(K.current=K.current.slice(-1e3));const me=Ze(B);Re(me),console.log(" WebSocket Price Update:",B.toFixed(2))}}},[n]),f.useEffect(()=>{var N;(n==null?void 0:n.type)==="balance_update"&&((N=n.data)==null?void 0:N.userId)===(s==null?void 0:s.id)&&(console.log(" Real-time balance update received:",n.data),l.invalidateQueries({queryKey:["/api/balances"]}),n.data.changeType!=="trade_start"&&console.log(` Balance updated: ${n.data.newBalance} USDT (${n.data.change>0?"+":""}${n.data.change})`))},[n,s==null?void 0:s.id,l]);const Te=f.useRef(new Set);f.useEffect(()=>{var me,Z,re,xe,Le,_e,Be,gt,Mt,Cs,At,as,Rs,xr,ji,nr,ql,Ql,Xl,C,Y,ue;if(!n||!(s!=null&&s.id))return;const N=`${n.type}-${((me=n.data)==null?void 0:me.tradeId)||((Z=n.data)==null?void 0:Z.id)||"unknown"}-${((re=n.data)==null?void 0:re.userId)||"unknown"}-${((xe=n.data)==null?void 0:xe.timestamp)||Date.now()}`;console.log(" WEBSOCKET DEBUG: Checking message:",n==null?void 0:n.type,"userId match:",((Le=n==null?void 0:n.data)==null?void 0:Le.userId)===(s==null?void 0:s.id)),console.log(" WEBSOCKET DEBUG: Message ID:",N),console.log(" WEBSOCKET DEBUG: Full message:",n),console.log(" WEBSOCKET DEBUG: Current user ID:",s==null?void 0:s.id),console.log(" WEBSOCKET DEBUG: Active trades count:",$.length);const B=N.includes("test-");if(Te.current.has(N)&&!B){console.log(" WEBSOCKET DEBUG: Message already processed, skipping:",N);return}if(Te.current.size>100){const ne=Array.from(Te.current).slice(-50);Te.current=new Set(ne),console.log(" WEBSOCKET DEBUG: Cleaned up processed messages cache")}if(n&&(console.log(" ALL WEBSOCKET MESSAGES:",{type:n.type,data:n.data,timestamp:new Date().toISOString()}),n.type==="trade_completed"&&(console.log(" TRADE COMPLETION MESSAGE RECEIVED!"),console.log(" Message type:",n.type),console.log(" Message data:",n.data),console.log(" User ID from message:",(_e=n.data)==null?void 0:_e.userId),console.log(" Current user ID:",s==null?void 0:s.id),console.log(" User IDs match:",((Be=n.data)==null?void 0:Be.userId)===(s==null?void 0:s.id)),console.log(" Will process message:",((gt=n.data)==null?void 0:gt.userId)===(s==null?void 0:s.id))),n.type==="balance_update"&&console.log(" BALANCE UPDATE DETAILS:",{type:n.type,userId:(Mt=n.data)==null?void 0:Mt.userId,currentUserId:s==null?void 0:s.id,userMatch:((Cs=n.data)==null?void 0:Cs.userId)===(s==null?void 0:s.id),data:n.data,activeTrades:$.length,change:(At=n.data)==null?void 0:At.change,changeType:(as=n.data)==null?void 0:as.changeType,newBalance:(Rs=n.data)==null?void 0:Rs.newBalance,oldBalance:(xr=n.data)==null?void 0:xr.oldBalance}),n.type&&n.type.toLowerCase().includes("trade")&&(console.log(" TRADE MESSAGE DETECTED:",n),console.log(" Message type:",n.type),console.log(" Message data:",n.data),console.log(" User ID from message:",(ji=n.data)==null?void 0:ji.userId),console.log(" Current user ID:",s==null?void 0:s.id),console.log(" User IDs match:",((nr=n.data)==null?void 0:nr.userId)===(s==null?void 0:s.id)))),(n==null?void 0:n.type)==="trigger_mobile_notification"&&((ql=n.data)==null?void 0:ql.userId)===(s==null?void 0:s.id)){const q=`${n.type}-${(Ql=n.data)==null?void 0:Ql.tradeId}`;if(Te.current.has(q)){console.log(" WEBSOCKET: Skipping duplicate trigger_mobile_notification message");return}if(ze.current.has((Xl=n.data)==null?void 0:Xl.tradeId)){console.log(" WEBSOCKET: Skipping trigger_mobile_notification - already notified via trade_completed"),Te.current.add(q);return}Te.current.add(q),console.log(" WEBSOCKET: trigger_mobile_notification received:",n.data);const{tradeId:ne,direction:Qe,amount:mt,entryPrice:Os,currentPrice:Fr,status:Gn,payout:$r,profitPercentage:wo,symbol:sn,duration:Ni,profitAmount:ys}=n.data;if(!mt||mt<=0){console.log(" WEBSOCKET: Skipping trigger_mobile_notification - invalid amount:",mt);return}console.log(" WEBSOCKET: Fetching trade data from database for trigger_mobile_notification..."),(async()=>{try{const Gt=new AbortController,zs=setTimeout(()=>Gt.abort(),5e3),ss=await fetch(`/api/trades/${ne}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},signal:Gt.signal});if(clearTimeout(zs),!ss.ok)throw new Error(`Failed to fetch trade: ${ss.status}`);const bt=await ss.json();console.log(" WEBSOCKET:  Found trade in database for trigger_mobile_notification:",bt);const Ct=parseFloat(bt.amount),Ot=bt.duration||30,Ts=bt.result,Is=parseFloat(bt.profit||bt.profitAmount||0),qn=parseFloat(bt.entry_price||bt.entryPrice||0),yr=parseFloat(bt.exit_price||bt.exitPrice||0);console.log(" WEBSOCKET: Database trade data extracted for trigger_mobile_notification:",{amount:Ct,duration:Ot,result:Ts,profit:Is,entryPrice:qn,exitPrice:yr});const ff=(ks=>ks===30?10:ks===60?15:ks===90?20:ks===120?25:ks===180?30:ks===240?50:ks===300?75:ks===600?100:10)(Ot),Qn={id:ne,symbol:sn||"BTC/USDT",direction:Qe||"up",amount:Ct,entryPrice:qn,currentPrice:yr,status:Ts==="win"||Ts==="won"?"won":"lost",duration:Ot,profitPercentage:ff,payout:Ts==="win"||Ts==="won"?Ct*(1+ff/100):0,profit:Is,startTime:Date.now()-Ot*1e3,endTime:Date.now()};console.log(" WEBSOCKET:  Created notificationTrade with DATABASE values:",{amount:Qn.amount,duration:Qn.duration,status:Qn.status,profit:Qn.profit,profitPercentage:Qn.profitPercentage}),console.log(" WEBSOCKET:  Triggering notification from trigger_mobile_notification with database data"),ce(Qn)}catch(Gt){console.error(" WEBSOCKET:  Error fetching trade data for trigger_mobile_notification:",Gt),console.log(" WEBSOCKET:  Falling back to WebSocket data for trigger_mobile_notification");const zs={id:ne,symbol:sn||"BTC/USDT",direction:Qe||"up",amount:mt,entryPrice:Os||5e4,currentPrice:Fr||Os||5e4,status:Gn||"won",duration:Ni||30,profitPercentage:wo||(()=>{const ss=Ni||30;return ss===30?10:ss===60?15:ss===90?20:ss===120?25:ss===180?30:ss===240?50:ss===300?75:ss===600?100:10})(),payout:$r||0,profit:ys,startTime:Date.now()-(Ni||30)*1e3,endTime:Date.now()};ce(zs)}})()}if((n==null?void 0:n.type)==="trade_completed"&&((C=n.data)==null?void 0:C.userId)===(s==null?void 0:s.id)){Te.current.add(N),console.log(" WEBSOCKET:  CRITICAL - Trade completion notification received!"),console.log(" WEBSOCKET: Trade completion notification received:",n.data),console.log(" WEBSOCKET: Amount from message:",(Y=n.data)==null?void 0:Y.amount,"Type:",typeof((ue=n.data)==null?void 0:ue.amount));const{tradeId:q,result:ne,exitPrice:Qe,profitAmount:mt,newBalance:Os,symbol:Fr,direction:Gn,amount:$r,entryPrice:wo,duration:sn,profitPercentage:Ni}=n.data;console.log(" WEBSOCKET MESSAGE FULL DATA:",n.data),console.log(" WEBSOCKET profitAmount:",mt,"Type:",typeof mt),console.log(" WEBSOCKET DESTRUCTURED VALUES:",{tradeId:q,result:ne,amount:$r,amountType:typeof $r,duration:sn,durationType:typeof sn,profitAmount:mt,profitPercentage:Ni,symbol:Fr,symbolType:typeof Fr,symbolLength:Fr==null?void 0:Fr.length,direction:Gn}),console.log(" WEBSOCKET: CRITICAL VALUES FOR NOTIFICATION:",{amount:$r,duration:sn,result:ne,profitAmount:mt,profitPercentage:Ni});const ys=$.find(Gt=>Gt.id===q);if(console.log(" WEBSOCKET: Looking for active trade:",q,"Found:",!!ys),console.log(" WEBSOCKET: Current active trades:",$.map(Gt=>({id:Gt.id,amount:Gt.amount,duration:Gt.duration}))),!ys){console.log(" WEBSOCKET: CRITICAL - Active trade not found! Using fallback code"),console.log(" WEBSOCKET: WebSocket tradeId:",q,"Type:",typeof q),console.log(" WEBSOCKET: Active trade IDs:",$.map(zs=>({id:zs.id,idType:typeof zs.id})));const Gt=$.find(zs=>zs.id.includes(q)||q.includes(zs.id));Gt&&console.log(" WEBSOCKET: Found partial match:",Gt.id)}if(ys)console.log(" WEBSOCKET: Fetching trade data from database BEFORE creating notification..."),(async()=>{try{const Gt=new AbortController,zs=setTimeout(()=>Gt.abort(),5e3),ss=await fetch(`/api/trades/${q}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},signal:Gt.signal});if(clearTimeout(zs),!ss.ok)throw new Error(`Failed to fetch trade: ${ss.status}`);const bt=await ss.json();console.log(" WEBSOCKET:  Found trade in database:",bt);const Ct=parseFloat(bt.amount),Ot=bt.duration||30,Ts=bt.result,Is=parseFloat(bt.profit||bt.profitAmount||0),qn=parseFloat(bt.entry_price||bt.entryPrice||0),yr=parseFloat(bt.exit_price||bt.exitPrice||0),ja=bt.symbol;console.log(" WEBSOCKET: Database trade data extracted:",{amount:Ct,duration:Ot,result:Ts,profit:Is,entryPrice:qn,exitPrice:yr,symbol:ja});const Qn=(Si=>Si===30?10:Si===60?15:Si===90?20:Si===120?25:Si===180?30:Si===240?50:Si===300?75:Si===600?100:10)(Ot),ks={id:q,symbol:ja||Fr||ys.symbol,direction:Gn||ys.direction,startTime:ys.startTime,endTime:ys.endTime,duration:Ot,amount:Ct,entryPrice:qn,currentPrice:yr,status:Ts==="win"||Ts==="won"?"won":"lost",payout:Ts==="win"||Ts==="won"?Ct*(1+Qn/100):0,profit:Is,profitPercentage:Qn};console.log(" WEBSOCKET:  Created completedTrade with DATABASE values:",{amount:ks.amount,duration:ks.duration,status:ks.status,profit:ks.profit,profitPercentage:ks.profitPercentage,entryPrice:ks.entryPrice,currentPrice:ks.currentPrice}),console.log(" WEBSOCKET:  Triggering notification with database data"),ce(ks)}catch(Gt){console.error(" WEBSOCKET:  Error fetching trade data:",Gt),console.log(" WEBSOCKET:  Falling back to WebSocket data");const zs=ne==="win",bt=Ni||(Is=>Is===30?10:Is===60?15:Is===90?20:Is===120?25:Is===180?30:Is===240?50:Is===300?75:Is===600?100:10)(sn||30),Ct=$r!==void 0&&$r>0?$r:ys.amount,Ot=wo!==void 0&&wo>0?wo:ys.entryPrice,Ts={id:ys.id,symbol:Fr||ys.symbol,direction:Gn||ys.direction,startTime:ys.startTime,endTime:ys.endTime,duration:sn||ys.duration,amount:Ct,entryPrice:Ot,currentPrice:Qe||ys.currentPrice,status:zs?"won":"lost",payout:zs?Ct*(1+bt/100):0,profit:mt,profitPercentage:bt};ce(Ts)}})();else{console.log(" WEBSOCKET:  CRITICAL - FALLBACK CODE TRIGGERED! Active trade not found, using WebSocket data for notification"),console.log(" WEBSOCKET: Fallback amount from message:",$r,"profitAmount:",mt),console.log(" WEBSOCKET: FALLBACK - This is where the wrong data might be coming from!");const Gt=ne==="win",ss=Ni||(Ot=>Ot===30?10:Ot===60?15:Ot===90?20:Ot===120?25:Ot===180?30:Ot===240?50:Ot===300?75:Ot===600?100:10)(sn||30);let bt=$r;(!bt||bt<=0)&&(bt=Math.abs(mt)/(Gt?ss/100:1),console.log(" WEBSOCKET: Calculated amount from profit:",bt));const Ct={id:q,symbol:Fr||"BTC/USDT",direction:Gn||"up",amount:bt,entryPrice:wo||Qe*(Gt?.99:1.01),currentPrice:Qe,status:Gt?"won":"lost",duration:sn||30,profitPercentage:ss,payout:Gt?bt*(1+ss/100):0,profit:mt,startTime:Date.now()-(sn||30)*1e3,endTime:Date.now()};console.log(" WEBSOCKET FALLBACK: Fetching trade data from database to verify notification data..."),(async()=>{try{const Ot=new AbortController,Ts=setTimeout(()=>Ot.abort(),5e3),Is=await fetch(`/api/users/${s==null?void 0:s.id}/trades`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},signal:Ot.signal});clearTimeout(Ts);const qn=await Is.json();console.log(" WEBSOCKET FALLBACK: Fetched",qn.length,"trades from database");const yr=qn.find(ja=>ja.id===q);yr?(console.log(" WEBSOCKET FALLBACK: Found trade in database:",yr),Ct.amount=parseFloat(yr.amount),Ct.duration=yr.duration||30,Ct.status=yr.result==="win"||yr.result==="won"?"won":"lost",Ct.symbol=yr.symbol||Ct.symbol,console.log(" WEBSOCKET FALLBACK: Updated fallbackTrade with database values:",{amount:Ct.amount,duration:Ct.duration,status:Ct.status,symbol:Ct.symbol})):(console.log(" WEBSOCKET FALLBACK: Trade NOT found in database! Using WebSocket data"),console.log(" WEBSOCKET FALLBACK: Looking for tradeId:",q),console.log(" WEBSOCKET FALLBACK: Available trade IDs:",qn.map(ja=>ja.id))),console.log(" WEBSOCKET: Triggering fallback notification with database data:",Ct),console.log(" WEBSOCKET: CRITICAL - FALLBACK Notification will show:",{amount:Ct.amount,duration:Ct.duration,status:Ct.status,profit:Ct.profit}),ce(Ct)}catch(Ot){console.error(" WEBSOCKET FALLBACK: Error fetching trade data, using WebSocket data:",Ot),console.log(" WEBSOCKET FALLBACK: Falling back to WebSocket data:",{amount:Ct.amount,duration:Ct.duration,status:Ct.status}),ce(Ct)}})(),O(Ot=>Ot.filter(Ts=>Ts.id!==q)),l.invalidateQueries({queryKey:["/api/balances"]}),l.invalidateQueries({queryKey:[`/api/users/${s==null?void 0:s.id}/trades`]}),l.invalidateQueries({queryKey:[`/api/users/${s==null?void 0:s.id}/transactions`]}),console.log(" WEBSOCKET: Refreshing trade history after trade completion..."),setTimeout(()=>{s!=null&&s.id&&qe()},1e3)}}console.log(" AGGRESSIVE FALLBACK: Disabled - using only main trade_completed handler and polling")},[n,s==null?void 0:s.id,$,l]),f.useEffect(()=>{if($.length===0)return;console.log(" POLLING: Checking",$.length,"active trades:",$.map(B=>({id:B.id,amount:B.amount})));const N=setInterval(async()=>{try{const B=await fetch(`/api/users/${s==null?void 0:s.id}/trades`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(B.ok){const me=await B.json();$.forEach(Z=>{console.log(" POLLING: Checking active trade:",{id:Z.id,amount:Z.amount});const re=me.find(xe=>xe.id===Z.id);if(re&&re.status==="completed"&&re.result!=="pending"){if(console.log(" POLLING: Found completed trade:",re),console.log(" POLLING: Server trade amount:",re.amount,"Type:",typeof re.amount),console.log(" POLLING: Active trade amount:",Z.amount,"Type:",typeof Z.amount),ze.current.has(re.id)){console.log(" POLLING: Skipping - already notified via WebSocket");return}const xe=re.result==="win",Le=At=>At===30?10:At===60?15:At===90?20:At===120?25:At===180?30:At===240?50:At===300?75:At===600?100:10,_e=Z.profitPercentage||Le(Z.duration||30),Be=parseFloat(re.amount)||Z.amount,gt=parseFloat(re.entry_price)||Z.entryPrice,Mt=parseFloat(re.exit_price)||Z.currentPrice||Z.entryPrice,Cs={id:Z.id,direction:Z.direction,duration:Z.duration,startTime:Z.startTime,endTime:Z.endTime,profitPercentage:_e,symbol:re.symbol||Z.symbol,amount:Be,entryPrice:gt,currentPrice:Mt,status:xe?"won":"lost",payout:xe?Be*(1+_e/100):0,profit:xe?Be*_e/100:-(Be*_e/100)};console.log(" POLLING: Setting completed trade notification:",Cs),ce(Cs),O(At=>At.filter(as=>as.id!==Z.id)),l.invalidateQueries({queryKey:["/api/balances"]}),l.invalidateQueries({queryKey:[`/api/users/${s==null?void 0:s.id}/trades`]}),l.invalidateQueries({queryKey:[`/api/users/${s==null?void 0:s.id}/transactions`]}),console.log(" POLLING: Refreshing trade history after trade completion..."),setTimeout(()=>{qe()},1e3)}})}}catch(B){console.error(" POLLING: Error checking trade completion:",B)}},2e3);return()=>clearInterval(N)},[$,s==null?void 0:s.id,l]),f.useEffect(()=>{if((n==null?void 0:n.type)==="trading_control_update"||(n==null?void 0:n.type)==="trading_mode_update"){const{userId:N,controlType:B,tradingMode:me,username:Z,message:re}=n.data||{},xe=B||me;let Le="user-1";(s==null?void 0:s.email)==="angela.soenoko@gmail.com"?Le="user-angela":(s==null?void 0:s.email)==="amdsnkstudio@metachrome.io"?Le="user-1":s!=null&&s.id&&(Le=s.id),console.log(" Real-time trading control update received:",{userId:N,controlType:xe,username:Z,currentUserId:Le,message:re}),N===Le&&(console.log(` IMMEDIATE EFFECT: Trading mode changed to ${xe.toUpperCase()} for current user!`),je(xe),localStorage.setItem("currentTradingMode",xe||"normal"))}},[n,s]);const St=async(N,B,me)=>{const Z=_e=>_e===30?10:_e===60?15:_e===90?20:_e===120?25:_e===180?30:_e===240?50:_e===300?75:_e===600?100:10,re=N.profitPercentage||Z(N.duration||30),xe=B?N.amount*re/100:-(N.amount*re/100),Le={...N,status:B?"won":"lost",currentPrice:me,payout:B?N.amount*(1+re/100):0,profit:xe};console.log(" COMPLETE TRADE: Updated trade object:",Le);try{(await fetch("/api/trades/complete",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({tradeId:N.id,userId:(s==null?void 0:s.id)||"user-1",won:B,amount:N.amount,payout:Le.payout,profit:xe,finalPrice:me})})).ok?(l.invalidateQueries({queryKey:["/api/balances"]}),l.invalidateQueries({queryKey:[`/api/users/${s==null?void 0:s.id}/trades`]}),l.invalidateQueries({queryKey:[`/api/users/${s==null?void 0:s.id}/transactions`]}),console.log(` Balance updated: Trade ${B?"WON":"LOST"} - Amount: ${N.amount} USDT`),console.log(" COMPLETE TRADE: Refreshing trade history after API completion..."),setTimeout(()=>{s!=null&&s.id&&qe()},1500)):console.error("Failed to update balance after trade completion")}catch(_e){console.error("Error updating balance:",_e)}return console.log(" COMPLETE TRADE: Setting up fallback notification check"),setTimeout(async()=>{try{console.log(" FALLBACK: Checking server result for trade:",N.id);const _e=await fetch(`/api/users/${s==null?void 0:s.id}/trades`);if(_e.ok){const gt=(await _e.json()).find(Mt=>Mt.id===N.id);if(gt&&gt.status==="completed"){console.log(" FALLBACK: Found completed trade with server result:",gt);const Mt=gt.result==="win",Cs=nr=>nr===30?10:nr===60?15:nr===90?20:nr===120?25:nr===180?30:nr===240?50:nr===300?75:nr===600?100:10,At=N.profitPercentage||Cs(N.duration||30),as=parseFloat(gt.amount)||N.amount,Rs=parseFloat(gt.entry_price)||N.entryPrice,xr=parseFloat(gt.exit_price)||me,ji={id:N.id,direction:N.direction,duration:N.duration,startTime:N.startTime,endTime:N.endTime,profitPercentage:At,symbol:N.symbol,amount:as,entryPrice:Rs,currentPrice:xr,status:Mt?"won":"lost",payout:Mt?as*(1+At/100):0,profit:Mt?as*At/100:-(as*At/100)};console.log(" FALLBACK: Triggering notification with server result:",ji),ce(ji)}}}catch(_e){console.error(" FALLBACK: Error checking server result:",_e)}},2e3),Le};f.useEffect(()=>{try{const N=Date.now();let B=!1;$.length>0&&console.log(` USEEFFECT: Checking ${$.length} active trades at ${new Date(N).toLocaleTimeString()}`),O(Z=>{const re=[];return Z.forEach(xe=>{const Le=Math.max(0,Math.ceil((xe.endTime-N)/1e3));if(console.log(` TRADE CHECK: ID=${xe.id}, timeRemaining=${Le}, status=${xe.status}, endTime=${xe.endTime}, now=${N}`),Le===0&&xe.status==="active"){console.log(` TRADE EXPIRED: Trade ${xe.id} has expired! Starting completion...`);const _e=z||xe.entryPrice,Be=_e-xe.entryPrice;let gt=xe.direction==="up"&&Be>0||xe.direction==="down"&&Be<0;St(xe,gt,_e).then(Mt=>{console.log(" TRADE COMPLETED: Trade completed, waiting for WebSocket notification for trade:",Mt.id)}).catch(Mt=>{console.error(" Trade completion failed:",Mt)}),B=!0;try{typeof Cp=="function"&&Cp(gt?"win":"lose")}catch(Mt){console.error("Sound play error:",Mt)}}else re.push({...xe,currentPrice:E||xe.entryPrice})}),re});const me=$.find(Z=>Z.status==="active");if(me){const Z=Math.max(0,Math.ceil((me.endTime-N)/1e3));G(Z),R(Z>0)}else B||(G(0),R(!1))}catch(N){console.error("Trade management error:",N),R(!1),G(0)}},[z,$]),f.useEffect(()=>{const N=setInterval(()=>{const B=Date.now();$.forEach(me=>{Math.max(0,Math.ceil((me.endTime-B)/1e3))===0&&me.status==="active"&&G(re=>re)})},1e3);return()=>clearInterval(N)},[$]);const kt={"30s":{minAmount:100,profit:10},"60s":{minAmount:1e3,profit:15},"90s":{minAmount:5e3,profit:20},"120s":{minAmount:1e4,profit:25},"180s":{minAmount:3e4,profit:30},"240s":{minAmount:5e4,profit:50},"300s":{minAmount:1e5,profit:75},"600s":{minAmount:2e5,profit:100}},Dt=N=>{var B;return((B=kt[N])==null?void 0:B.profit)||10},xs=N=>{var B;return((B=kt[N])==null?void 0:B.minAmount)||100},Kn=(N,B)=>{const me=xs(B);return N>=me},sr=async N=>{var B,me;try{if(!Kn(M,k)){const gt=xs(k);alert(`You cannot follow this market, please recharge your deposit. Minimum amount for ${k} is ${gt.toLocaleString()} USDT`);return}if(Je<M){alert("Insufficient balance");return}if($.length>=3){alert("Maximum 3 active trades allowed");return}const Z=parseInt(k.replace("s","")),re=ut;console.log(" Current user for trade:",s);let xe="user-1";if((s==null?void 0:s.email)==="angela.soenoko@gmail.com"?xe="user-angela-1758195715":(s==null?void 0:s.email)==="amdsnkstudio@metachrome.io"?xe="user-1":s!=null&&s.id&&(xe=s.id),console.log(" Trading with user ID:",xe),!re||re<=0){alert("Price data not available. Please wait a moment and try again.");return}console.log(" TRADE DEBUG: About to place trade:",{userId:xe,symbol:t,direction:N,amount:M,duration:Z,entryPrice:re});const Le={userId:xe,symbol:t,direction:N,amount:M.toString(),duration:Z,entryPrice:re};console.log(" CLIENT: Sending trade with amount:",M,"Type:",typeof M),console.log(" CLIENT: Full payload:",JSON.stringify(Le,null,2));const _e=await fetch("/api/trades/options",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify(Le)});if(!_e.ok){const gt=await _e.text();throw new Error(gt||"Failed to place trade")}const Be=await _e.json();if(console.log(" TRADE DEBUG: Trade placement response:",Be),Be.success){console.log(" TRADE DEBUG: Trade placed successfully, trade ID:",(B=Be.trade)==null?void 0:B.id);const gt=Date.now(),Mt=Dt(k),Cs={id:((me=Be.trade)==null?void 0:me.id)||`trade_${gt}_${Math.random().toString(36).substring(2,11)}`,symbol:t,direction:N,entryPrice:re,amount:M,duration:Z,startTime:gt,endTime:gt+Z*1e3,profitPercentage:Mt,status:"active"};O(At=>[...At,Cs]),G(Z),R(!0),l.invalidateQueries({queryKey:["/api/balances"]}),s!=null&&s.id&&(localStorage.removeItem(`tradeHistory_${s.id}`),console.log(" Cleared trade history cache to prevent conflicts"));try{Cp("place")}catch(At){console.warn("Sound play failed:",At)}console.log(" Trade Executed:",{direction:N.toUpperCase(),amount:`${M} USDT`,duration:k,entryPrice:`$${re.toFixed(2)}`,potentialProfit:`${Mt}%`,potentialPayout:`${(M*(1+Mt/100)).toFixed(2)} USDT`})}else throw new Error(Be.message||"Failed to place trade")}catch(Z){console.error("Trade execution error:",Z);const re=Z instanceof Error?Z.message:"Please try again.";alert(`Failed to execute trade: ${re}`)}};try{return c?r.jsxs("div",{className:"min-h-screen bg-[#10121E] text-white pb-20",children:[r.jsx(ny,{}),r.jsxs("div",{className:"bg-[#10121E] px-4 py-2 border-b border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-bold text-base",children:X.symbol}),r.jsxs("div",{className:"text-white text-lg font-bold",children:[ut.toFixed(2)," USDT"]}),r.jsx("div",{className:`text-xs font-semibold ${u}`,children:h||(ie==null?void 0:ie.priceChangePercent24h)||"+0.00%"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-gray-400 text-xs",children:"24h Vol"}),r.jsx("div",{className:"text-white text-sm font-bold",children:ie!=null&&ie.volume24h?(parseFloat(ie.volume24h)/1e6).toFixed(2)+"M":"0.00M"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2 text-xs",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400",children:"24h High"}),r.jsx("div",{className:"text-white font-medium",children:(ie==null?void 0:ie.high24h)||"119,558"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400",children:"24h Low"}),r.jsx("div",{className:"text-white font-medium",children:(ie==null?void 0:ie.low24h)||"117,205"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400",children:"Volume"}),r.jsx("div",{className:"text-white font-medium",children:ie!=null&&ie.volume24h?(parseFloat(ie.volume24h)/1e3).toFixed(0)+"K":"681K"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400",children:"Turnover"}),r.jsx("div",{className:"text-white font-medium",children:ie!=null&&ie.volume24h?(parseFloat(ie.volume24h)*parseFloat(ie.price)/1e6).toFixed(0)+"M":"80.5M"})]})]})]}),r.jsx("div",{className:"bg-gray-800/50 px-4 py-2 border-b border-gray-600",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Symbol:"}),r.jsxs("select",{value:t,onChange:N=>{const B=N.target.value;e(B),oe(B)},className:"bg-gray-700 text-white text-sm font-medium rounded-md px-3 py-1.5 border border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[r.jsx("option",{value:"BTCUSDT",children:"BTC/USDT"}),r.jsx("option",{value:"ETHUSDT",children:"ETH/USDT"}),r.jsx("option",{value:"XRPUSDT",children:"XRP/USDT"}),r.jsx("option",{value:"LTCUSDT",children:"LTC/USDT"}),r.jsx("option",{value:"BNBUSDT",children:"BNB/USDT"}),r.jsx("option",{value:"SOLUSDT",children:"SOL/USDT"}),r.jsx("option",{value:"TONUSDT",children:"TON/USDT"}),r.jsx("option",{value:"DOGEUSDT",children:"DOGE/USDT"}),r.jsx("option",{value:"ADAUSDT",children:"ADA/USDT"}),r.jsx("option",{value:"TRXUSDT",children:"TRX/USDT"}),r.jsx("option",{value:"LINKUSDT",children:"LINK/USDT"}),r.jsx("option",{value:"AVAXUSDT",children:"AVAX/USDT"}),r.jsx("option",{value:"SUIUSDT",children:"SUI/USDT"}),r.jsx("option",{value:"SHIBUSDT",children:"SHIB/USDT"}),r.jsx("option",{value:"BCHUSDT",children:"BCH/USDT"}),r.jsx("option",{value:"DOTUSDT",children:"DOT/USDT"}),r.jsx("option",{value:"XLMUSDT",children:"XLM/USDT"})]})]})}),r.jsxs("div",{className:"bg-[#10121E] relative w-full mobile-chart-container",style:{height:"380px"},children:[r.jsx(ij,{trades:$,currentPrice:ut}),r.jsx("div",{className:"absolute top-2 right-2 z-10",children:r.jsx("select",{value:t,onChange:N=>{const B=N.target.value;e(B),oe(B)},className:"bg-gray-800/90 text-white text-xs font-medium rounded px-2 py-1 border border-gray-600/50 focus:border-blue-500 focus:outline-none min-w-[90px] max-w-[120px] backdrop-blur-sm",style:{backgroundColor:"rgba(31, 41, 55, 0.9)"},children:D.map(N=>r.jsxs("option",{value:N.rawSymbol,className:"bg-gray-800 text-white",children:[N.coin,"/USDT"]},N.rawSymbol))})}),r.jsx("div",{className:"w-full h-full",children:r.jsx(Gh,{children:r.jsx(Wh,{type:"chart",symbol:`BINANCE:${t}`,height:380,interval:"1",theme:"dark",container_id:"options_mobile_tradingview_chart",onSymbolChange:oe})})})]}),r.jsxs("div",{className:"bg-[#10121E] min-h-screen flex",children:[r.jsxs("div",{className:"w-1/2 border-r border-gray-700",children:[r.jsx("div",{className:"p-2 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("div",{className:"text-white font-bold text-sm",children:X.symbol}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-bold text-white text-sm",children:[E>0?E.toFixed(2):z>0?z.toFixed(2):"Loading..."," USDT"]}),r.jsxs("div",{className:`text-xs ${m?"text-green-400":"text-red-400"}`,children:[h," (",u,")"]})]})]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-1 p-1.5 text-xs text-gray-400 border-b border-gray-700",children:[r.jsx("span",{children:"Price"}),r.jsx("span",{children:"Volume"}),r.jsx("span",{children:"Total"})]}),r.jsxs("div",{className:"h-[300px] overflow-y-auto",children:[r.jsx("div",{className:"space-y-0",children:Se.sellOrders.slice(0,8).map((N,B)=>r.jsxs("div",{className:"grid grid-cols-3 gap-1 px-2 py-1 text-xs hover:bg-gray-800",children:[r.jsx("span",{className:"text-red-400 font-mono",children:N.price}),r.jsx("span",{className:"text-gray-300 font-mono",children:N.volume}),r.jsx("span",{className:"text-gray-400 font-mono",children:N.turnover})]},B))}),r.jsx("div",{className:"px-2 py-2 border-y border-gray-600",children:r.jsx("div",{className:"text-center",children:r.jsxs("span",{className:`text-sm font-bold ${m?"text-green-400":"text-red-400"}`,children:[ut.toFixed(2)," USDT"]})})}),r.jsx("div",{className:"space-y-0",children:Se.buyOrders.slice(0,8).map((N,B)=>r.jsxs("div",{className:"grid grid-cols-3 gap-1 px-2 py-1 text-xs hover:bg-gray-800",children:[r.jsx("span",{className:"text-green-400 font-mono",children:N.price}),r.jsx("span",{className:"text-gray-300 font-mono",children:N.volume}),r.jsx("span",{className:"text-gray-400 font-mono",children:N.turnover})]},B))})]})]}),r.jsxs("div",{className:"w-1/2",children:[r.jsxs("div",{className:"px-3 py-2 border-b border-gray-700",children:[r.jsx("h3",{className:"text-white font-bold mb-2 text-sm",children:"Market Statistics"}),r.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"24h Change"}),r.jsx("span",{className:`font-semibold ${(_t=ie==null?void 0:ie.priceChangePercent24h)!=null&&_t.startsWith("-")?"text-red-400":"text-green-400"}`,children:(ie==null?void 0:ie.priceChangePercent24h)||"0.00%"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"24h High"}),r.jsx("span",{className:"text-white font-semibold",children:(ie==null?void 0:ie.high24h)||E.toFixed(2)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"24h Low"}),r.jsx("span",{className:"text-white font-semibold",children:(ie==null?void 0:ie.low24h)||E.toFixed(2)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"24h Volume"}),r.jsx("span",{className:"text-white font-semibold",children:ie!=null&&ie.volume24h?(parseFloat(ie.volume24h)/1e6).toFixed(2)+"M":"0.00"})]})]})]}),r.jsxs("div",{className:"px-3 py-2 border-b border-gray-700",children:[r.jsx("h3",{className:"text-white font-bold mb-2 text-sm",children:"My Orders"}),r.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:$.length>0?$.map(N=>{const B=Math.max(0,Math.ceil(((N.expiryTime||N.endTime)-Date.now())/1e3)),me=B>0?B/N.duration*100:0;return r.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${N.direction==="up"?"bg-green-400":"bg-red-400"}`}),r.jsx("span",{className:"text-white text-xs font-medium",children:X.symbol}),r.jsx("span",{className:`text-xs px-1 py-0.5 rounded ${N.direction==="up"?"bg-green-900 text-green-400":"bg-red-900 text-red-400"}`,children:N.direction.toUpperCase()})]}),r.jsxs("span",{className:"text-white font-bold text-xs",children:["$",N.amount]})]}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[r.jsxs("span",{children:["Entry: $",N.entryPrice]}),r.jsxs("span",{children:["Current: $",ut.toFixed(2)]})]}),B>0?r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsxs("span",{className:"text-gray-400",children:[B,"s"]}),r.jsx("span",{className:`font-medium ${N.direction==="up"&&ut>N.entryPrice||N.direction==="down"&&ut<N.entryPrice?"text-green-400":"text-red-400"}`,children:N.direction==="up"&&ut>N.entryPrice||N.direction==="down"&&ut<N.entryPrice?"Winning":"Losing"})]}),r.jsx("div",{className:"w-full bg-gray-700 rounded-full h-0.5",children:r.jsx("div",{className:"bg-blue-500 h-0.5 rounded-full transition-all duration-1000",style:{width:`${me}%`}})})]}):r.jsx("div",{className:"text-center",children:r.jsx("span",{className:`text-xs font-bold ${N.direction==="up"&&(N.exitPrice||N.currentPrice||0)>N.entryPrice||N.direction==="down"&&(N.exitPrice||N.currentPrice||0)<N.entryPrice?"text-green-400":"text-red-400"}`,children:N.direction==="up"&&(N.exitPrice||N.currentPrice||0)>N.entryPrice||N.direction==="down"&&(N.exitPrice||N.currentPrice||0)<N.entryPrice?"WON":"LOST"})})]},N.id)}):r.jsx("div",{className:"text-center py-2",children:r.jsx("div",{className:"text-gray-400 text-xs",children:"No active trades"})})})]}),r.jsxs("div",{className:"px-3 py-2",children:[r.jsx("h3",{className:"text-white font-bold mb-2 text-sm",children:"Trading Pairs"}),r.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:H.slice(0,6).map((N,B)=>{var Le;const me=!((Le=N.priceChangePercent24h)!=null&&Le.startsWith("-")),re={BTC:{icon:"",bg:"bg-orange-500"},ETH:{icon:"",bg:"bg-purple-500"},BNB:{icon:"B",bg:"bg-yellow-600"},SOL:{icon:"S",bg:"bg-purple-600"},XRP:{icon:"",bg:"bg-gray-600"},ADA:{icon:"A",bg:"bg-blue-500"}}[N.coin]||{icon:N.coin[0],bg:"bg-gray-500"},xe=parseFloat(N.price).toFixed(N.price.includes(".")&&parseFloat(N.price)<1?4:2);return r.jsxs("div",{onClick:()=>ve(N.rawSymbol),className:`flex items-center justify-between p-1.5 hover:bg-[#1a1b2e] rounded cursor-pointer transition-colors ${t===N.rawSymbol?"bg-blue-600/20 border border-blue-500/30":""}`,children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-white font-bold text-xs ${re.bg}`,children:re.icon}),r.jsx("div",{children:r.jsx("div",{className:"text-white text-xs font-medium",children:N.symbol})})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-white text-xs",children:xe}),r.jsx("div",{className:`text-xs ${me?"text-green-400":"text-red-400"}`,children:N.priceChangePercent24h})]})]},B)})})]})]})]}),r.jsxs("div",{className:"px-3 py-2 space-y-2 bg-[#10121E]",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:"Current Price:"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${a?"bg-green-400 animate-pulse":"bg-red-400"}`}),r.jsx("span",{className:"text-xs text-gray-500",children:a?"Live":"Offline"})]})]}),r.jsxs("span",{className:"text-white font-bold text-sm",children:[E>0?E.toFixed(2):z>0?z.toFixed(2):"Loading..."," USDT"]})]}),r.jsxs("div",{className:"flex items-center justify-between mt-1",children:[r.jsx("span",{className:"text-gray-400 text-xs",children:"Balance:"}),s?r.jsxs("span",{className:"text-green-400 font-bold text-sm",children:[Je.toFixed(2)," USDT"]}):r.jsx("span",{className:"text-yellow-400 font-bold text-xs",children:"Sign in required"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Duration & Profit"}),r.jsx("div",{className:"grid grid-cols-4 gap-1",children:[{duration:"30s",profit:"10%"},{duration:"60s",profit:"15%"},{duration:"90s",profit:"20%"},{duration:"120s",profit:"25%"},{duration:"180s",profit:"30%"},{duration:"240s",profit:"50%"},{duration:"300s",profit:"75%"},{duration:"600s",profit:"100%"}].map(N=>r.jsxs("button",{onClick:()=>{P(N.duration);const B=xs(N.duration);M<B&&T(B)},className:`py-1 px-1 rounded text-center transition-colors ${k===N.duration?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:text-white"}`,disabled:A,children:[r.jsx("div",{className:"text-xs font-medium",children:N.duration}),r.jsx("div",{className:"text-[9px] text-green-400",children:N.profit})]},N.duration))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:["Amount (USDT) - Min: ",xs(k).toLocaleString()]}),r.jsx("div",{className:"grid grid-cols-3 gap-1 mb-1.5",children:[100,500,1e3,2e3,5e3,1e4].map(N=>r.jsx("button",{onClick:()=>T(N),className:`py-1 px-2 rounded text-xs font-medium transition-colors ${M===N?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:text-white"}`,disabled:A,children:N},N))}),r.jsxs("button",{onClick:()=>{const N=Math.floor(Je)||0;T(N)},className:`w-full py-1 px-2 rounded text-xs font-medium transition-colors mb-1.5 ${M===Math.floor(Je||0)?"bg-purple-600 text-white":"bg-gray-800 text-gray-400 hover:text-white"}`,disabled:A,children:["Max (",Math.floor(Je||0)," USDT)"]}),r.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:M,onChange:N=>{const B=N.target.value.replace(/[^0-9.]/g,""),me=parseFloat(B)||0;T(me)},onBlur:N=>{const B=parseFloat(N.target.value)||0;B<100?T(100):B>(Je||0)&&T(Math.floor(Je||0))},className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1.5 text-white text-xs focus:border-blue-500 focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:`Enter amount (Min: 100, Max: ${Math.floor(Je||0)})`})]}),!s&&r.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg p-3 mb-2 text-center",children:[r.jsx("div",{className:"text-white font-bold text-base mb-1",children:" Login to Trade"}),r.jsx("div",{className:"text-white/80 text-xs mb-2",children:"Sign in to start options trading and earn up to 15% profit"}),r.jsx("a",{href:"/login",className:"inline-block bg-white text-purple-600 font-bold py-1.5 px-4 rounded-lg hover:bg-gray-100 transition-colors text-sm",children:"Login Now"})]}),(!(s!=null&&s.verificationStatus)||(s==null?void 0:s.verificationStatus)==="unverified")&&(s==null?void 0:s.role)!=="super_admin"?r.jsx("div",{className:"bg-yellow-900/50 border border-yellow-600/50 rounded-lg p-3 mb-2",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-yellow-100 font-semibold mb-1 text-sm",children:" Verification Required"}),r.jsx("div",{className:"text-yellow-200 text-xs mb-2",children:"Upload your verification documents to start trading"}),r.jsx("a",{href:"/profile",className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1.5 rounded text-xs",children:"Upload Documents"})]})}):(s==null?void 0:s.verificationStatus)==="pending"?r.jsx("div",{className:"bg-blue-900/50 border border-blue-600/50 rounded-lg p-3 mb-2",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-blue-100 font-semibold mb-1 text-sm",children:" Verification Pending"}),r.jsx("div",{className:"text-blue-200 text-xs",children:"Your documents are being reviewed. Trading will be enabled once approved."})]})}):r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>sr("up"),disabled:$.length>=3||M<100||Je<M,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white py-3 rounded font-medium text-base transition-colors relative",children:"Buy/Up"}),r.jsx("button",{onClick:()=>sr("down"),disabled:$.length>=3||M<100||Je<M,className:"bg-red-500 hover:bg-red-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white py-3 rounded font-medium text-base transition-colors relative",children:"Sell/Down"})]}),V>0&&r.jsx("div",{className:"text-center py-2",children:r.jsxs("div",{className:"text-yellow-400 font-bold",children:["Next trade available in: ",V,"s"]})})]}),r.jsxs("div",{className:"bg-[#10121E] border-t border-gray-700 min-h-[200px]",children:[r.jsx("div",{className:"flex items-center justify-between border-b border-gray-700 px-4 py-3",children:r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("button",{onClick:()=>_("open"),className:`pb-1 text-sm font-medium ${S==="open"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:["Active Trades(",$.length,")"]}),r.jsxs("button",{onClick:()=>_("history"),className:`pb-1 text-sm font-medium ${S==="history"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:["Trade History(",U.length,")"]}),S==="history"&&r.jsxs("button",{onClick:()=>{console.log(" MANUAL REFRESH: User clicked refresh button"),st(!0),qe()},disabled:pe,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[r.jsx("svg",{className:`w-4 h-4 ${pe?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r.jsx("span",{children:pe?"Refreshing...":"Refresh"})]})]})}),r.jsxs("div",{className:"px-4 py-2 max-h-[300px] overflow-y-auto",children:[S==="open"&&r.jsx(r.Fragment,{children:$.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[r.jsx("div",{className:"w-16 h-16 mb-4 opacity-50",children:r.jsxs("svg",{viewBox:"0 0 64 64",className:"w-full h-full text-gray-600",children:[r.jsx("circle",{cx:"32",cy:"32",r:"30",fill:"none",stroke:"currentColor",strokeWidth:"2"}),r.jsx("path",{d:"M32 16v16l8 8",stroke:"currentColor",strokeWidth:"2",fill:"none"})]})}),r.jsx("div",{className:"text-gray-400 text-sm",children:"No active trades"})]}):$.map(N=>{const B=Math.max(0,Math.ceil((N.endTime-Date.now())/1e3)),me=z-N.entryPrice,Z=N.direction==="up"&&me>0||N.direction==="down"&&me<0,re=Z?N.amount*(1+N.profitPercentage/100)-N.amount:-(N.amount*N.profitPercentage/100);return r.jsxs("div",{className:"bg-gray-800 rounded p-3 mb-2",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("span",{className:`font-bold text-sm ${N.direction==="up"?"text-green-400":"text-red-400"}`,children:[N.direction==="up"?"BUY":"SELL","  ",N.amount," USDT"]}),r.jsxs("span",{className:"text-yellow-400 font-bold text-sm",children:[B,"s"]})]}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-300",children:[r.jsxs("span",{children:["Entry: ",N.entryPrice.toFixed(2)]}),r.jsxs("span",{children:["Current: ",E.toFixed(2)]}),r.jsxs("span",{className:`font-bold ${Z?"text-green-400":"text-red-400"}`,children:[re>0?"+":"",re.toFixed(2)," USDT"]})]})]},N.id)})}),S==="history"&&r.jsx(r.Fragment,{children:pe?r.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[r.jsx("div",{className:"w-8 h-8 mb-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),r.jsx("div",{className:"text-gray-400 text-sm",children:"Loading trade history..."})]}):U.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[r.jsx("div",{className:"w-16 h-16 mb-4 opacity-50",children:r.jsxs("svg",{viewBox:"0 0 64 64",className:"w-full h-full text-gray-600",children:[r.jsx("circle",{cx:"32",cy:"32",r:"30",fill:"none",stroke:"currentColor",strokeWidth:"2"}),r.jsx("path",{d:"M32 16v16l8 8",stroke:"currentColor",strokeWidth:"2",fill:"none"})]})}),r.jsx("div",{className:"text-gray-400 text-sm",children:"No trade history"}),r.jsx("div",{className:"text-gray-500 text-xs mt-2",children:"Complete some trades to see your history here"})]}):r.jsx("div",{className:"space-y-2",children:U.map(N=>{const me=(Be=>Be===30?10:Be===60?15:Be===90?20:Be===120?25:Be===180?30:Be===240?50:Be===300?75:Be===600?100:10)(N.duration||30),Z=N.profit!==void 0?N.profit:N.status==="won"?N.amount*me/100:-N.amount,re=N.symbol?N.symbol.replace("USDT","/USDT"):"BTC/USDT",xe=new Date(N.endTime),Le=xe.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),_e=xe.toLocaleTimeString("en-US",{hour12:!0,hour:"2-digit",minute:"2-digit",second:"2-digit"});return r.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-gray-400 text-xs font-medium",children:re}),r.jsx("span",{className:`font-bold text-sm ${N.status==="won"?"text-green-400":"text-red-400"}`,children:N.status==="won"?" WON":" LOST"})]}),r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("span",{className:`font-bold text-sm ${N.direction==="up"?"text-green-400":"text-red-400"}`,children:[N.direction==="up"?"BUY":"SELL","  ",N.amount," USDT"]}),r.jsxs("span",{className:`font-bold text-xs ${N.status==="won"?"text-green-400":"text-red-400"}`,children:[N.status==="won"?"+":"",Z.toFixed(2)," USDT"]})]}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[r.jsxs("span",{children:["Entry: ",N.entryPrice.toFixed(2)]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{children:Le}),r.jsx("div",{children:_e})]})]})]},N.id)})})})]})]}),r.jsx(ld,{}),r.jsx(Lh,{}),Q&&console.log(" RENDER: Mobile notification with completedTrade:",{id:Q.id,amount:Q.amount,duration:Q.duration,status:Q.status,entryPrice:Q.entryPrice,currentPrice:Q.currentPrice,profit:Q.profit,profitPercentage:Q.profitPercentage,fullObject:JSON.stringify(Q)}),r.jsx(nj,{trade:Q?{id:Q.id,direction:Q.direction,amount:Q.amount,entryPrice:Q.entryPrice,finalPrice:Q.currentPrice||Q.entryPrice,status:Q.status,payout:Q.payout||(Q.status==="won"?Q.amount+Q.amount*(Q.profitPercentage||10)/100:0),profitPercentage:Q.profitPercentage||10,profit:Q.profit,symbol:Q.symbol||"BTC/USDT",duration:Q.duration||30}:null,onClose:()=>{console.log(" NOTIFICATION: onClose called (mobile)"),Oe(null),localStorage.removeItem("completedTrade")}},ge)]}):r.jsxs("div",{className:"min-h-screen bg-gray-900",children:[r.jsx(iy,{}),r.jsx("div",{className:"bg-[#10121E] px-4 py-3 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-bold text-lg",children:X.symbol}),r.jsx("div",{className:"text-white text-2xl font-bold",children:parseFloat(X.price).toFixed(2)}),r.jsxs("div",{className:"text-gray-400 text-sm",children:[parseFloat(X.price).toFixed(2)," USDT"]})]}),r.jsx("div",{className:`text-lg font-semibold ${(F=X.priceChangePercent24h)!=null&&F.startsWith("-")?"text-red-400":"text-green-400"}`,children:X.priceChangePercent24h||"+0.00%"}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"Change 24h"}),r.jsxs("div",{className:`text-white font-semibold ${(d==null?void 0:d.priceChange24h)>=0?"text-green-400":"text-red-400"}`,children:[((ee=d==null?void 0:d.priceChange24h)==null?void 0:ee.toFixed(2))||"0.00"," ",(d==null?void 0:d.priceChangePercent24h)>=0?"+":"",((Pe=d==null?void 0:d.priceChangePercent24h)==null?void 0:Pe.toFixed(2))||"0.00","%"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"24h High"}),r.jsx("div",{className:"text-white",children:((ot=d==null?void 0:d.high24h)==null?void 0:ot.toFixed(2))||(ie==null?void 0:ie.high24h)||E.toFixed(2)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"24h Low"}),r.jsx("div",{className:"text-white",children:((Kt=d==null?void 0:d.low24h)==null?void 0:Kt.toFixed(2))||(ie==null?void 0:ie.low24h)||E.toFixed(2)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"Volume 24h (BTC)"}),r.jsx("div",{className:"text-white",children:d!=null&&d.volume24h?(parseFloat(d.volume24h.toString())/1e6).toFixed(2)+"M":ie!=null&&ie.volume24h?(parseFloat(ie.volume24h)/1e6).toFixed(2)+"M":"0.00"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"Turnover 24h (USDT)"}),r.jsx("div",{className:"text-white",children:d!=null&&d.volume24h&&(d!=null&&d.price)?(parseFloat(d.volume24h.toString())*d.price/1e6).toFixed(2)+"M":ie!=null&&ie.volume24h?(parseFloat(ie.volume24h)*parseFloat(ie.price)/1e6).toFixed(2)+"M":"0.00"})]})]})]})}),r.jsxs("div",{className:"bg-[#10121E] flex",children:[r.jsxs("div",{className:"w-64 border-r border-gray-700",children:[r.jsxs("div",{className:"p-3 border-b border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-white font-bold",children:X.symbol}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"font-bold text-white text-lg",children:parseFloat(X.price).toFixed(2)}),r.jsx("div",{className:`text-sm font-semibold ${(Ft=X.priceChangePercent24h)!=null&&Ft.startsWith("-")?"text-red-400":"text-green-400"}`,children:X.priceChangePercent24h||"+0.00%"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-sm"}),r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-sm"}),r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-sm"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"text-white text-sm",children:"0.01"}),r.jsx("span",{className:"text-gray-400",children:""})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 p-2 text-xs text-gray-400 border-b border-gray-700",children:[r.jsx("span",{children:"Price (USDT)"}),r.jsx("span",{children:"Volume (BTC)"}),r.jsx("span",{children:"Turnover"})]}),r.jsxs("div",{className:"h-[400px] overflow-y-auto","data-orderbook":"desktop",children:[r.jsx("div",{className:"space-y-0",children:Se.sellOrders.length>0?Se.sellOrders.map((N,B)=>r.jsxs("div",{className:"grid grid-cols-3 gap-2 px-2 py-1 text-xs hover:bg-gray-800","data-order-type":"sell",children:[r.jsx("span",{style:{color:"rgb(248, 113, 113)",fontWeight:"500"},"data-field":"price",children:N.price}),r.jsx("span",{style:{color:"rgb(209, 213, 219)"},"data-field":"volume",children:N.volume}),r.jsx("span",{style:{color:"rgb(209, 213, 219)"},"data-field":"turnover",children:N.turnover})]},B)):r.jsx("div",{className:"text-gray-400 text-center py-4",children:"Loading sell orders..."})}),r.jsx("div",{className:`p-2 my-1 ${m?"bg-green-900/20":"bg-red-900/20"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-bold text-white text-lg",children:ut.toFixed(2)}),r.jsx("span",{className:`${m?"text-green-400":"text-red-400"}`,children:m?"":""}),r.jsxs("span",{className:"text-gray-400 text-sm",children:[ut.toFixed(2)," USDT"]})]})}),r.jsx("div",{className:"space-y-0",children:Se.buyOrders.length>0?Se.buyOrders.map((N,B)=>r.jsxs("div",{className:"grid grid-cols-3 gap-2 px-2 py-1 text-xs hover:bg-gray-800","data-order-type":"buy",children:[r.jsx("span",{style:{color:"rgb(74, 222, 128)",fontWeight:"500"},"data-field":"price",children:N.price}),r.jsx("span",{style:{color:"rgb(209, 213, 219)"},"data-field":"volume",children:N.volume}),r.jsx("span",{style:{color:"rgb(209, 213, 219)"},"data-field":"turnover",children:N.turnover})]},B)):r.jsx("div",{className:"text-gray-400 text-center py-4",children:"Loading buy orders..."})})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx("div",{className:"p-2 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs("div",{className:"text-xs text-gray-400",children:["Chart Sync: ",r.jsx("span",{className:"text-green-400",children:"Active"})]})}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[!1,r.jsx("button",{onClick:()=>p("tradingview"),className:`text-xs transition-colors ${x==="tradingview"?"text-white bg-purple-600 px-2 py-1 rounded":"text-gray-400 hover:text-white"}`,children:"Trading view"}),x==="tradingview"&&r.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Quick select:"}),r.jsx("button",{onClick:()=>{console.log(" Manual symbol change to BTCUSDT"),D.find(B=>B.rawSymbol==="BTCUSDT")&&e("BTCUSDT")},className:"text-xs text-orange-400 hover:text-orange-300 px-1",children:"BTC"}),r.jsx("button",{onClick:()=>{console.log(" Manual symbol change to ETHUSDT"),D.find(B=>B.rawSymbol==="ETHUSDT")&&e("ETHUSDT")},className:"text-xs text-blue-400 hover:text-blue-300 px-1",children:"ETH"}),r.jsx("button",{onClick:()=>{console.log(" Manual symbol change to SOLUSDT"),D.find(B=>B.rawSymbol==="SOLUSDT")&&e("SOLUSDT")},className:"text-xs text-green-400 hover:text-green-300 px-1",children:"SOL"})]}),r.jsx("button",{onClick:()=>p("depth"),className:`text-xs transition-colors ${x==="depth"?"text-white bg-purple-600 px-2 py-1 rounded":"text-gray-400 hover:text-white"}`,children:"Depth"})]})})]})}),r.jsxs("div",{className:"h-[500px] relative bg-[#000000] p-1",children:[r.jsx(ij,{trades:$,currentPrice:(d==null?void 0:d.price)||E}),!1,x==="tradingview"&&r.jsxs("div",{className:"relative h-full",children:[r.jsx("div",{className:"absolute top-2 right-2 z-10",children:r.jsxs("select",{value:t,onChange:N=>{const B=N.target.value;e(B),oe(B)},className:"bg-gray-800/90 text-white text-xs font-medium rounded px-2 py-1 border border-gray-600/50 focus:border-blue-500 focus:outline-none min-w-[90px] max-w-[120px] backdrop-blur-sm",style:{backgroundColor:"rgba(31, 41, 55, 0.9)"},children:[r.jsx("option",{value:"BTCUSDT",className:"bg-gray-800 text-white",children:"BTC/USDT"}),r.jsx("option",{value:"ETHUSDT",className:"bg-gray-800 text-white",children:"ETH/USDT"}),r.jsx("option",{value:"XRPUSDT",className:"bg-gray-800 text-white",children:"XRP/USDT"}),r.jsx("option",{value:"LTCUSDT",className:"bg-gray-800 text-white",children:"LTC/USDT"}),r.jsx("option",{value:"BNBUSDT",className:"bg-gray-800 text-white",children:"BNB/USDT"}),r.jsx("option",{value:"SOLUSDT",className:"bg-gray-800 text-white",children:"SOL/USDT"}),r.jsx("option",{value:"TONUSDT",className:"bg-gray-800 text-white",children:"TON/USDT"}),r.jsx("option",{value:"DOGEUSDT",className:"bg-gray-800 text-white",children:"DOGE/USDT"}),r.jsx("option",{value:"ADAUSDT",className:"bg-gray-800 text-white",children:"ADA/USDT"}),r.jsx("option",{value:"TRXUSDT",className:"bg-gray-800 text-white",children:"TRX/USDT"}),r.jsx("option",{value:"LINKUSDT",className:"bg-gray-800 text-white",children:"LINK/USDT"}),r.jsx("option",{value:"AVAXUSDT",className:"bg-gray-800 text-white",children:"AVAX/USDT"}),r.jsx("option",{value:"SUIUSDT",className:"bg-gray-800 text-white",children:"SUI/USDT"}),r.jsx("option",{value:"SHIBUSDT",className:"bg-gray-800 text-white",children:"SHIB/USDT"}),r.jsx("option",{value:"BCHUSDT",className:"bg-gray-800 text-white",children:"BCH/USDT"}),r.jsx("option",{value:"DOTUSDT",className:"bg-gray-800 text-white",children:"DOT/USDT"}),r.jsx("option",{value:"XLMUSDT",className:"bg-gray-800 text-white",children:"XLM/USDT"})]})}),r.jsx(Gh,{children:r.jsx(Wh,{type:"chart",symbol:`BINANCE:${t}`,height:490,interval:"1",theme:"dark",container_id:"options_tradingview_chart",onSymbolChange:oe})})]}),x==="depth"&&r.jsxs("div",{className:"w-full h-full p-4",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"text-white text-lg font-bold mb-1",children:"Market Depth Chart"}),r.jsxs("div",{className:"text-gray-400 text-sm",children:["Real-time order book visualization for ",t]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 h-[400px]",children:[r.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[r.jsx("div",{className:"text-green-400 text-sm font-bold mb-3 text-center",children:"Buy Orders (Bids)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 text-xs text-gray-400 border-b border-gray-600 pb-1",children:[r.jsx("span",{children:"Price"}),r.jsx("span",{className:"text-center",children:"Amount"}),r.jsx("span",{className:"text-right",children:"Total"})]}),Se.buyOrders.slice(0,15).map((N,B)=>r.jsxs("div",{className:"grid grid-cols-3 text-xs hover:bg-gray-700/50 p-1 rounded",children:[r.jsx("span",{className:"text-green-400 font-mono",children:N.price}),r.jsx("span",{className:"text-gray-300 font-mono text-center",children:N.volume}),r.jsx("span",{className:"text-gray-300 font-mono text-right",children:N.turnover})]},B))]})]}),r.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[r.jsx("div",{className:"text-red-400 text-sm font-bold mb-3 text-center",children:"Sell Orders (Asks)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-3 text-xs text-gray-400 border-b border-gray-600 pb-1",children:[r.jsx("span",{children:"Price"}),r.jsx("span",{className:"text-center",children:"Amount"}),r.jsx("span",{className:"text-right",children:"Total"})]}),Se.sellOrders.slice(0,15).map((N,B)=>r.jsxs("div",{className:"grid grid-cols-3 text-xs hover:bg-gray-700/50 p-1 rounded",children:[r.jsx("span",{className:"text-red-400 font-mono",children:N.price}),r.jsx("span",{className:"text-gray-300 font-mono text-center",children:N.volume}),r.jsx("span",{className:"text-gray-300 font-mono text-right",children:N.turnover})]},B))]})]})]}),r.jsx("div",{className:"text-center mt-4",children:r.jsxs("div",{className:"inline-flex items-center space-x-2 bg-gray-700/50 px-4 py-2 rounded-lg",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Current Price:"}),r.jsxs("span",{className:"text-white font-bold text-lg",children:[ut.toFixed(2)," USDT"]}),r.jsxs("span",{className:`text-sm ${(d==null?void 0:d.priceChangePercent24h)>=0?"text-green-400":"text-red-400"}`,children:[(d==null?void 0:d.priceChangePercent24h)>=0?"+":"",((rr=d==null?void 0:d.priceChangePercent24h)==null?void 0:rr.toFixed(2))||"0.00","%"]})]})})]})]}),r.jsxs("div",{className:"p-4 border-t border-gray-700",children:[r.jsxs("div",{className:"mb-4 p-3 bg-gray-800 rounded",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-gray-400",children:"Current Price:"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-green-400 animate-pulse":"bg-red-400"}`}),r.jsx("span",{className:"text-xs text-gray-500",children:a?"Live":"Offline"})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs("span",{className:"text-white font-bold text-lg",children:[E>0?E.toFixed(2):z>0?z.toFixed(2):"Loading..."," USDT"]})})]}),r.jsxs("div",{className:"flex items-center justify-between mt-1",children:[r.jsx("span",{className:"text-gray-400",children:"Balance:"}),s?r.jsxs("span",{className:"text-green-400 font-bold",children:[Je.toFixed(2)," USDT"]}):r.jsx("span",{className:"text-yellow-400 font-bold",children:"Sign in required"})]}),!1,A&&$.length>0&&r.jsx("div",{className:"mt-3 space-y-2",children:$.map(N=>{const B=Math.max(0,Math.ceil((N.endTime-Date.now())/1e3)),me=z-N.entryPrice,Z=N.direction==="up"&&me>0||N.direction==="down"&&me<0;return r.jsxs("div",{className:"p-2 bg-gray-700 rounded text-sm",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:`font-bold ${N.direction==="up"?"text-green-400":"text-red-400"}`,children:[N.direction==="up"?"BUY":"SELL"," ",N.amount," USDT"]}),r.jsxs("span",{className:"text-yellow-400 font-bold",children:[B,"s"]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-1",children:[r.jsxs("span",{className:"text-gray-400",children:["Entry: ",N.entryPrice.toFixed(2)," USDT"]}),r.jsxs("span",{className:`font-bold ${Z?"text-green-400":"text-red-400"}`,children:[me>0?"+":"",me.toFixed(2)," USDT"]})]}),r.jsx("div",{className:"text-center mt-1",children:r.jsxs("span",{className:`text-xs ${Z?"text-green-400":"text-red-400"}`,children:[Z?" WINNING":" LOSING","  Profit: ",N.profitPercentage,"%"]})})]},N.id)})})]}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[{duration:"30s",profit:"10%"},{duration:"60s",profit:"15%"},{duration:"90s",profit:"20%"},{duration:"120s",profit:"25%"},{duration:"180s",profit:"30%"},{duration:"240s",profit:"50%"},{duration:"300s",profit:"75%"},{duration:"600s",profit:"100%"}].map(N=>r.jsxs("button",{onClick:()=>{P(N.duration);const B=xs(N.duration);M<B&&T(B)},className:`p-2 rounded text-center border transition-colors ${k===N.duration?"bg-blue-600 border-blue-500 text-white":"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700"}`,disabled:A,children:[r.jsx("div",{className:"text-sm font-medium",children:N.duration}),r.jsx("div",{className:"text-xs text-green-400",children:N.profit})]},N.duration))}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"text-gray-400 text-sm mb-2",children:["Minimum buy: ",xs(k).toLocaleString()," USDT | Selected: ",M," USDT"]}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mb-2",children:[100,500,1e3,2e3].map(N=>r.jsx("button",{onClick:()=>T(N),className:`p-2 rounded text-sm transition-colors ${M===N?"bg-blue-600 border-blue-500 text-white":"bg-gray-800 border border-gray-600 text-gray-300 hover:bg-gray-700"}`,disabled:A,children:N},N))}),r.jsx("div",{className:"grid grid-cols-1 gap-2 mb-2",children:r.jsxs("button",{onClick:()=>{const N=Math.floor(Je)||0;T(N)},className:`p-2 rounded text-sm transition-colors ${M===Math.floor(Je||0)?"bg-blue-600 border-blue-500 text-white":"bg-gray-800 border border-gray-600 text-gray-300 hover:bg-gray-700"}`,disabled:A,children:["Max (",Math.floor(Je||0)," USDT)"]})}),r.jsx("div",{className:"mt-2",children:r.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:M,onChange:N=>{const B=N.target.value.replace(/[^0-9.]/g,""),me=parseFloat(B)||0;T(me)},onBlur:N=>{const B=parseFloat(N.target.value)||0;B<100?T(100):B>(Je||0)&&T(Math.floor(Je||0))},className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-blue-500 focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:`Enter amount (Min: 100, Max: ${Math.floor(Je||0)})`})})]}),r.jsx("div",{className:"text-gray-400 text-sm mb-4",children:s?r.jsxs(r.Fragment,{children:["Available: ",(Je||0).toFixed(2)," USDT | Active Trades: ",$.length,"/3"]}):r.jsx(r.Fragment,{children:"Sign in to view balance and start trading"})}),!1,s?(!(s!=null&&s.verificationStatus)||(s==null?void 0:s.verificationStatus)==="unverified")&&(s==null?void 0:s.role)!=="super_admin"?r.jsx("div",{className:"space-y-4",children:r.jsx("div",{className:"bg-yellow-900/50 border border-yellow-600/50 rounded-lg p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-yellow-100 font-semibold mb-2",children:" Verification Required"}),r.jsx("div",{className:"text-yellow-200 text-sm mb-3",children:"Upload your verification documents to start trading"}),r.jsx("a",{href:"/profile",className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded text-sm",children:"Upload Documents"})]})})}):(s==null?void 0:s.verificationStatus)==="pending"?r.jsx("div",{className:"space-y-4",children:r.jsx("div",{className:"bg-blue-900/50 border border-blue-600/50 rounded-lg p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-blue-100 font-semibold mb-2",children:" Verification Pending"}),r.jsx("div",{className:"text-blue-200 text-sm",children:"Your documents are being reviewed. Trading will be enabled once approved."})]})})}):r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>sr("up"),disabled:$.length>=3||M<100||Je<M,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white py-4 rounded font-medium text-lg transition-colors relative",children:[r.jsx("div",{children:"Buy/Up"}),r.jsxs("div",{className:"text-xs mt-1",children:["Profit: ",Dt(k),"%  Payout: +",(M*Dt(k)/100).toFixed(0)," USDT"]})]}),r.jsxs("button",{onClick:()=>sr("down"),disabled:$.length>=3||M<100||Je<M,className:"bg-red-500 hover:bg-red-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white py-4 rounded font-medium text-lg transition-colors relative",children:[r.jsx("div",{children:"Sell/Down"}),r.jsxs("div",{className:"text-xs mt-1",children:["Profit: ",Dt(k),"%  Payout: +",(M*Dt(k)/100).toFixed(0)," USDT"]})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("button",{disabled:!0,className:"bg-gray-600 cursor-not-allowed text-white py-4 rounded font-medium text-lg",children:[r.jsx("div",{children:"Buy Up"}),r.jsx("div",{className:"text-xs mt-1",children:"Sign in required"})]}),r.jsxs("button",{disabled:!0,className:"bg-gray-600 cursor-not-allowed text-white py-4 rounded font-medium text-lg",children:[r.jsx("div",{children:"Buy Down"}),r.jsx("div",{className:"text-xs mt-1",children:"Sign in required"})]})]}),r.jsx("p",{className:"text-center text-yellow-400 text-sm",children:r.jsx("a",{href:"/login",className:"underline hover:text-yellow-300",children:"Sign in to start options trading"})})]})]})]}),r.jsxs("div",{className:"w-80 border-l border-gray-700",children:[r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"relative",children:[r.jsx("svg",{className:"absolute left-3 top-3 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),r.jsx("input",{type:"text",placeholder:"Search coins (e.g. ETH, BTC, SOL)",value:w,onChange:N=>te(N.target.value),className:"w-full bg-[#1a1b2e] text-white pl-10 pr-4 py-2 rounded border border-gray-700 focus:border-blue-500 focus:outline-none text-sm"})]})}),r.jsx("div",{className:"px-4 mb-4",children:r.jsxs("div",{className:"flex space-x-6",children:[r.jsx("button",{className:"text-gray-400 text-sm hover:text-white",children:"Favorites"}),r.jsx("button",{className:"text-gray-400 text-sm hover:text-white",children:"Spot"}),r.jsx("button",{className:"text-blue-400 text-sm border-b-2 border-blue-400 pb-1",children:"Options"})]})}),r.jsx("div",{className:"px-4 space-y-2 mb-6 max-h-[300px] overflow-y-auto",children:H.length>0?H.map((N,B)=>{var Le;const me=!((Le=N.priceChangePercent24h)!=null&&Le.startsWith("-")),re={BTC:{icon:"",bg:"bg-orange-500"},ETH:{icon:"",bg:"bg-purple-500"},BNB:{icon:"B",bg:"bg-yellow-600"},SOL:{icon:"S",bg:"bg-purple-600"},XRP:{icon:"",bg:"bg-gray-600"},ADA:{icon:"A",bg:"bg-blue-500"},DOGE:{icon:"D",bg:"bg-yellow-500"},POL:{icon:"P",bg:"bg-purple-700"},DOT:{icon:"",bg:"bg-pink-500"},AVAX:{icon:"A",bg:"bg-red-500"}}[N.coin]||{icon:N.coin[0],bg:"bg-gray-500"},xe=parseFloat(N.price).toFixed(N.price.includes(".")&&parseFloat(N.price)<1?6:2);return r.jsxs("div",{onClick:()=>ve(N.rawSymbol),className:`flex items-center justify-between p-2 hover:bg-[#1a1b2e] rounded cursor-pointer transition-colors ${t===N.rawSymbol?"bg-blue-600/20 border border-blue-500/30":""}`,children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ${re.bg}`,children:re.icon}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white text-sm font-medium",children:N.symbol}),r.jsx("div",{className:"text-gray-400 text-xs",children:N.coin})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-white text-sm",children:xe}),r.jsx("div",{className:`text-xs ${me?"text-green-400":"text-red-400"}`,children:N.priceChangePercent24h})]})]},B)}):r.jsxs("div",{className:"text-center text-gray-400 py-4",children:[r.jsx("div",{className:"text-sm",children:"No coins found"}),r.jsx("div",{className:"text-xs mt-1",children:"Try searching for BTC, ETH, SOL, etc."})]})}),r.jsxs("div",{className:"border-t border-gray-700",children:[r.jsx("div",{className:"px-4 py-3",children:r.jsx("div",{className:"text-white font-medium text-sm",children:"Latest transaction"})}),r.jsx("div",{className:"px-4 py-2 border-b border-gray-700",children:r.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[r.jsx("span",{children:"Time"}),r.jsx("span",{children:"Price (USDT)"}),r.jsx("span",{children:"Amount"})]})}),r.jsx("div",{className:"h-[200px] overflow-y-auto px-4",children:r.jsx("div",{className:"space-y-1 py-2",children:U.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"No recent transactions"}),r.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Complete some trades to see transactions here"})]}):U.slice(0,8).map((N,B)=>{const me=N.symbol?N.symbol.replace("USDT","/USDT"):"BTC/USDT",Z=new Date(N.endTime),re=Z.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit"}),xe=Z.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});return r.jsxs("div",{className:"bg-gray-800/30 rounded px-2 py-2 mb-1.5 hover:bg-gray-800/50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-gray-400 text-xs font-medium",children:me}),r.jsx("span",{className:`text-xs font-bold ${N.status==="won"?"text-green-400":"text-red-400"}`,children:N.status==="won"?" WON":" LOST"})]}),r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:`font-medium ${N.direction==="up"?"text-green-400":"text-red-400"}`,children:N.direction==="up"?"BUY":"SELL"}),r.jsxs("span",{className:"text-gray-300",children:[N.amount.toFixed(0)," USDT"]})]}),r.jsxs("div",{className:"text-gray-400 font-mono text-right",children:[r.jsx("div",{children:re}),r.jsx("div",{children:xe})]})]})]},B)})})})]})]})]}),r.jsxs("div",{className:"bg-[#10121E] border-t border-gray-700 min-h-[200px]",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-gray-700 px-4 py-3",children:[r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("button",{onClick:()=>_("open"),className:`pb-1 text-sm font-medium ${S==="open"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:["Active Trades(",$.length,")"]}),r.jsxs("button",{onClick:()=>_("history"),className:`pb-1 text-sm font-medium ${S==="history"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:["Trade History(",U.length,")"]}),S==="history"&&r.jsxs("button",{onClick:()=>{console.log(" MANUAL REFRESH: User clicked refresh button"),st(!0),qe()},disabled:pe,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[r.jsx("svg",{className:`w-4 h-4 ${pe?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r.jsx("span",{children:pe?"Refreshing...":"Refresh"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("label",{className:"flex items-center text-sm text-gray-400",children:[r.jsx("input",{type:"checkbox",className:"mr-2"}),"Hide other trading pairs"]}),S==="history"&&r.jsxs("button",{onClick:()=>{console.log(" Manual refresh triggered"),s!=null&&s.id&&(async()=>{st(!0);try{const B=await fetch(`/api/users/${s.id}/trades`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(B.ok){const me=await B.json();console.log(" Refreshed trade history:",me.length);const Z=me.filter(re=>re.result&&re.result!=="pending"&&re.status==="completed").map(re=>{const xe=parseFloat(re.entry_price||"0");let Le=parseFloat(re.exit_price||"0");const _e=re.result==="win";if(console.log(` Trade ${re.id}: Entry=${xe}, Exit=${Le}, Status=${re.status}, Result=${re.result}`),!Le||Le===0){console.log(` Missing exit price for trade ${re.id}, generating consistent fallback`);const gt=((parseInt(re.id.toString().slice(-6))||123456)*9301+49297)%233280/233280,Mt=.005,Cs=1e-4,At=Mt-Cs,as=gt*At+Cs;let Rs=1;re.direction==="up"?Rs=_e?1:-1:re.direction==="down"&&(Rs=_e?-1:1),Le=xe*(1+as*Rs);const xr=.01;Math.abs(Le-xe)<xr&&(Le=xe+Rs*xr),console.log(` Generated fallback exit price for trade ${re.id}: ${Le}`)}else console.log(` Using stored exit price for trade ${re.id}: ${Le}`);return{id:re.id,symbol:re.symbol||"BTCUSDT",amount:parseFloat(re.amount),direction:re.direction,duration:re.duration||30,entryPrice:xe,currentPrice:Le,payout:_e?parseFloat(re.amount)+parseFloat(re.profit_loss||"0"):0,status:_e?"won":"lost",endTime:re.updated_at||re.created_at,startTime:re.created_at,profit:parseFloat(re.profit_loss||"0")}});J(Z)}}catch(B){console.error(" Error refreshing trade history:",B)}finally{st(!1)}})()},className:"text-gray-400 hover:text-white flex items-center space-x-1",disabled:pe,children:[r.jsx("svg",{className:`w-4 h-4 ${pe?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r.jsx("span",{className:"text-xs",children:"Refresh"})]}),r.jsx("button",{className:"text-gray-400 hover:text-white",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),r.jsx("div",{className:"px-4 py-2 border-b border-gray-700",children:r.jsxs("div",{className:"grid grid-cols-8 gap-2 text-xs text-gray-400",children:[r.jsx("span",{className:"truncate",children:"Market/Direction"}),r.jsx("span",{className:"truncate text-center",children:"Entry Price"}),r.jsx("span",{className:"truncate text-center",children:"Current Price"}),r.jsx("span",{className:"truncate text-center",children:"Amount"}),r.jsx("span",{className:"truncate text-center",children:"Profit/Loss %"}),r.jsx("span",{className:"truncate text-center",children:"P&L (USDT)"}),r.jsx("span",{className:"truncate text-center",children:"Date & Time"}),r.jsx("span",{className:"truncate text-center",children:"Status"})]})}),r.jsxs("div",{className:"py-2 max-h-[300px] overflow-y-auto",children:[S==="open"&&r.jsx(r.Fragment,{children:$.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[r.jsx("div",{className:"w-16 h-16 mb-4 opacity-50",children:r.jsxs("svg",{viewBox:"0 0 64 64",className:"w-full h-full text-gray-600",children:[r.jsx("circle",{cx:"32",cy:"32",r:"30",fill:"none",stroke:"currentColor",strokeWidth:"2"}),r.jsx("path",{d:"M32 16v16l8 8",stroke:"currentColor",strokeWidth:"2",fill:"none"})]})}),r.jsx("div",{className:"text-gray-400 text-sm",children:"No active trades"})]}):$.map(N=>{const B=Math.max(0,Math.ceil((N.endTime-Date.now())/1e3)),me=z-N.entryPrice,Z=N.direction==="up"&&me>0||N.direction==="down"&&me<0,re=_e=>_e===30?10:_e===60?15:_e===90?20:_e===120?25:_e===180?30:_e===240?50:_e===300?75:_e===600?100:10,xe=N.profitPercentage||re(N.duration||30),Le=Z?N.amount*(1+N.profitPercentage/100)-N.amount:-(N.amount*xe/100);return r.jsxs("div",{className:"grid grid-cols-8 gap-2 text-xs border-b border-gray-800 hover:bg-gray-800/30 max-w-full overflow-hidden px-4 trade-row",children:[r.jsxs("div",{className:"flex flex-col min-w-0",children:[r.jsx("span",{className:"text-gray-400 text-xs truncate",children:t.replace("USDT","/USDT")}),r.jsx("span",{className:`font-bold truncate ${N.direction==="up"?"text-green-400":"text-red-400"}`,children:N.direction==="up"?"BUY":"SELL"})]}),r.jsx("span",{className:"text-gray-300 truncate text-center",children:N.entryPrice.toFixed(2)}),r.jsx("span",{className:"text-white truncate text-center",children:E.toFixed(2)}),r.jsx("span",{className:"text-gray-300 truncate text-center",children:N.amount}),r.jsxs("span",{className:"text-gray-300 truncate text-center",children:[N.profitPercentage,"%"]}),r.jsxs("span",{className:`font-bold truncate text-center ${Z?"text-green-400":"text-red-400"}`,children:[Le>0?"+":"",Le.toFixed(2)]}),r.jsxs("span",{className:"text-yellow-400 font-bold truncate text-center",children:[B,"s"]}),r.jsx("span",{className:`font-bold truncate text-center ${Z?"text-green-400":"text-red-400"}`,children:Z?"":""})]},N.id)})}),S==="history"&&r.jsx(r.Fragment,{children:pe?r.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[r.jsx("div",{className:"w-8 h-8 mb-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),r.jsx("div",{className:"text-gray-400 text-sm",children:"Loading trade history..."})]}):U.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[r.jsx("div",{className:"w-16 h-16 mb-4 opacity-50",children:r.jsxs("svg",{viewBox:"0 0 64 64",className:"w-full h-full text-gray-600",children:[r.jsx("circle",{cx:"32",cy:"32",r:"30",fill:"none",stroke:"currentColor",strokeWidth:"2"}),r.jsx("path",{d:"M32 16v16l8 8",stroke:"currentColor",strokeWidth:"2",fill:"none"})]})}),r.jsx("div",{className:"text-gray-400 text-sm",children:"No trade history"}),r.jsx("div",{className:"text-gray-500 text-xs mt-2",children:"Complete some trades to see your history here"})]}):r.jsx(r.Fragment,{children:r.jsx("div",{className:"mb-6",children:U.map(N=>{var _e;const me=(Be=>Be===30?10:Be===60?15:Be===90?20:Be===120?25:Be===180?30:Be===240?50:Be===300?75:Be===600?100:10)(N.duration||30),Z=N.profit!==void 0?N.profit:N.status==="won"?N.amount*me/100:-N.amount,re=new Date(N.endTime).toLocaleTimeString(),xe=N.symbol?N.symbol.replace("USDT","/USDT"):"BTC/USDT",Le=new Date(N.endTime).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return r.jsxs("div",{className:"grid grid-cols-8 gap-2 text-xs border-b border-gray-800 hover:bg-gray-800/30 max-w-full overflow-hidden px-4 trade-row",children:[r.jsxs("div",{className:"flex flex-col min-w-0",children:[r.jsx("span",{className:"text-gray-400 text-xs truncate",children:xe}),r.jsx("span",{className:`font-bold truncate ${N.direction==="up"?"text-green-400":"text-red-400"}`,children:N.direction==="up"?"BUY":"SELL"})]}),r.jsx("span",{className:"text-gray-300 text-center",children:N.entryPrice.toFixed(2)}),r.jsx("span",{className:"text-gray-300 text-center",children:((_e=N.currentPrice)==null?void 0:_e.toFixed(2))||"N/A"}),r.jsx("span",{className:"text-gray-300 text-center",children:N.amount}),r.jsxs("span",{className:"text-gray-300 text-center",children:[me,"%"]}),r.jsxs("span",{className:`font-bold text-center ${N.status==="won"?"text-green-400":"text-red-400"}`,children:[N.status==="won"?"+":"",Z.toFixed(2)]}),r.jsx("span",{className:"text-gray-400 text-xs text-center",children:new Date(N.endTime).toLocaleString("en-US",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),r.jsx("span",{className:`font-bold text-center ${N.status==="won"?"text-green-400":"text-red-400"}`,children:N.status==="won"?"WIN":"LOSE"})]},N.id)})})})})]})]}),r.jsx(ld,{}),!1,Q&&console.log(" RENDER: Desktop notification with completedTrade:",{id:Q.id,amount:Q.amount,duration:Q.duration,status:Q.status,entryPrice:Q.entryPrice,currentPrice:Q.currentPrice,profit:Q.profit,profitPercentage:Q.profitPercentage,fullObject:JSON.stringify(Q)}),r.jsx(nj,{trade:Q?{id:Q.id,direction:Q.direction,amount:Q.amount,entryPrice:Q.entryPrice,finalPrice:Q.currentPrice||Q.entryPrice,status:Q.status,payout:Q.payout||(Q.status==="won"?Q.amount+Q.amount*(Q.profitPercentage||10)/100:0),profitPercentage:Q.profitPercentage||10,profit:Q.profit,symbol:Q.symbol||"BTC/USDT",duration:Q.duration||30}:null,onClose:()=>{console.log(" NOTIFICATION: onClose called"),Oe(null),localStorage.removeItem("completedTrade")}},ge),Ve&&De&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-5 z-[999999]",onClick:()=>{Me(!1),document.body.style.overflow="auto"},children:r.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 max-w-sm w-full text-white relative",onClick:N=>N.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-5",children:[r.jsx("div",{className:"text-lg font-bold",children:De.symbol}),r.jsx("button",{onClick:()=>{Me(!1),document.body.style.overflow="auto"},className:"bg-transparent border-0 text-white text-2xl cursor-pointer p-0 w-6 h-6",children:""})]}),r.jsxs("div",{className:"text-center mb-5",children:[r.jsxs("div",{className:`text-4xl font-bold mb-2 ${De.pnl>=0?"text-green-400":"text-red-400"}`,children:[De.pnl>=0?"+":"",De.pnl.toFixed(0)," USDT"]}),r.jsx("div",{className:"text-gray-400 text-base",children:"Settlement completed"})]}),r.jsxs("div",{className:"mb-5",children:[r.jsxs("div",{className:"flex justify-between mb-3",children:[r.jsx("span",{className:"text-gray-400",children:"Current price :"}),r.jsx("span",{children:De.currentPrice})]}),r.jsxs("div",{className:"flex justify-between mb-3",children:[r.jsx("span",{className:"text-gray-400",children:"Time :"}),r.jsx("span",{children:De.duration})]}),r.jsxs("div",{className:"flex justify-between mb-3",children:[r.jsx("span",{className:"text-gray-400",children:"Side :"}),r.jsx("span",{className:De.side==="Buy Up"?"text-green-400":"text-red-400",children:De.side})]}),r.jsxs("div",{className:"flex justify-between mb-3",children:[r.jsx("span",{className:"text-gray-400",children:"Amount :"}),r.jsxs("span",{children:[De.amount," USDT"]})]}),r.jsxs("div",{className:"flex justify-between mb-3",children:[r.jsx("span",{className:"text-gray-400",children:"Price :"}),r.jsxs("span",{children:[De.price.toFixed(2)," USDT"]})]})]}),r.jsx("div",{className:"text-gray-400 text-sm leading-relaxed",children:"The ultimate price for each option contract is determined by the system's settlement process."})]})})]})}catch(N){return console.error("OptionsPage render error:",N),r.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-400 text-xl mb-4",children:" Trading Page Error"}),r.jsx("div",{className:"text-gray-300 mb-4",children:"Something went wrong. Please refresh the page."}),r.jsx("button",{onClick:()=>window.location.reload(),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded",children:"Refresh Page"})]})})}}function aj(){return r.jsx(SF,{})}function SF(){const[t,e]=f.useState("BTCUSDT");return r.jsxs(r.Fragment,{children:[r.jsx("style",{children:`
        .trade-row {
          padding-top: 0.75rem;
          padding-bottom: 0.75rem;
          padding-right: 10px;
        }
      `}),r.jsx(jy,{symbol:t,updateInterval:2e3,children:r.jsx(NF,{selectedSymbol:t,setSelectedSymbol:e})})]})}function CF(){var _t;const{user:t}=Ss(),{toast:e}=Zs(),s=Ir(),{lastMessage:n,subscribe:i,connected:a,sendMessage:o}=Fm(),l=Wn(),[c,d]=f.useState(""),[h,u]=f.useState("open"),[m,y]=f.useState("buy"),[v,g]=f.useState("limit"),[b,x]=f.useState("LTCUSDT"),[p,w]=f.useState("tradingview"),[j,S]=f.useState([]),[_,k]=f.useState([]),P=f.useRef(!1),{priceData:M}=Kl(),{changeText:T,changeColor:E,isPositive:I}=Ny(),{high:V,low:G,volume:A}=Sy(),{getPriceForSymbol:R}=n4(),$=R(b),O=($==null?void 0:$.price)||(M==null?void 0:M.price)||0,U=O.toFixed(2),J=F=>{const ee=R(F);return ee?{price:ee.price.toFixed(F.includes("SHIB")?8:2),change:`${ee.priceChangePercent24h>=0?"+":""}${ee.priceChangePercent24h.toFixed(2)}%`,isPositive:ee.priceChangePercent24h>=0}:{price:"0.00",change:"+0.00%",isPositive:!0}};f.useEffect(()=>(console.log(" SpotPage mounted"),console.log(" User:",t),console.log(" SpotPage - Price from context:",M==null?void 0:M.price),console.log(" SpotPage - Selected symbol:",b),console.log(" SpotPage - Selected symbol price data:",$),console.log(" SpotPage - Current price:",O),()=>{console.log(" SpotPage unmounted")}),[t,M,b,$,O]),f.useEffect(()=>{t&&!P.current&&(Q(),P.current=!0)},[t]);const Q=async()=>{if(t)try{const F=localStorage.getItem(`orderHistory_${t.id||"user-1"}`);if(F){const Pe=JSON.parse(F);k(Pe),console.log(" Loaded order history from localStorage:",Pe.length,"orders");return}const ee=[{id:"1",symbol:"BTC/USDT",type:"buy",orderType:"limit",amount:"0.001",price:"110,750.00",total:"110.75",status:"filled",time:new Date(Date.now()-36e5).toLocaleString(),fee:"0.11"},{id:"2",symbol:"ETH/USDT",type:"sell",orderType:"market",amount:"0.05",price:"3,577.42",total:"178.87",status:"filled",time:new Date(Date.now()-72e5).toLocaleString(),fee:"0.18"},{id:"3",symbol:"BTC/USDT",type:"buy",orderType:"limit",amount:"0.0005",price:"110,500.00",total:"55.25",status:"filled",time:new Date(Date.now()-108e5).toLocaleString(),fee:"0.06"},{id:"4",symbol:"SOL/USDT",type:"buy",orderType:"market",amount:"2.5",price:"245.67",total:"614.18",status:"filled",time:new Date(Date.now()-144e5).toLocaleString(),fee:"0.61"},{id:"5",symbol:"XRP/USDT",type:"sell",orderType:"limit",amount:"100",price:"3.18",total:"318.00",status:"filled",time:new Date(Date.now()-18e6).toLocaleString(),fee:"0.32"}];k(ee),localStorage.setItem(`orderHistory_${t.id||"user-1"}`,JSON.stringify(ee)),console.log(" Created initial order history:",ee.length,"orders")}catch(F){console.error(" Error loading order history:",F)}},Oe=F=>{if(t)try{localStorage.setItem(`orderHistory_${t.id||"user-1"}`,JSON.stringify(F)),console.log(" Saved order history to localStorage:",F.length,"orders")}catch(ee){console.error(" Error saving order history:",ee)}},ge=[{symbol:"BTC/USDT",coin:"BTC",rawSymbol:"BTCUSDT",...J("BTCUSDT"),icon:"",iconBg:"bg-orange-500"},{symbol:"ETH/USDT",coin:"ETH",rawSymbol:"ETHUSDT",...J("ETHUSDT"),icon:"",iconBg:"bg-purple-500"},{symbol:"XRP/USDT",coin:"XRP",rawSymbol:"XRPUSDT",...J("XRPUSDT"),icon:"",iconBg:"bg-gray-600"},{symbol:"LTC/USDT",coin:"LTC",rawSymbol:"LTCUSDT",...J("LTCUSDT"),icon:"",iconBg:"bg-gray-500"},{symbol:"BNB/USDT",coin:"BNB",rawSymbol:"BNBUSDT",...J("BNBUSDT"),icon:"B",iconBg:"bg-yellow-600"},{symbol:"SOL/USDT",coin:"SOL",rawSymbol:"SOLUSDT",...J("SOLUSDT"),icon:"S",iconBg:"bg-purple-600"},{symbol:"TON/USDT",coin:"TON",rawSymbol:"TONUSDT",...J("TONUSDT"),icon:"T",iconBg:"bg-blue-600"},{symbol:"DOGE/USDT",coin:"DOGE",rawSymbol:"DOGEUSDT",...J("DOGEUSDT"),icon:"D",iconBg:"bg-yellow-500"},{symbol:"ADA/USDT",coin:"ADA",rawSymbol:"ADAUSDT",...J("ADAUSDT"),icon:"A",iconBg:"bg-blue-500"},{symbol:"TRX/USDT",coin:"TRX",rawSymbol:"TRXUSDT",...J("TRXUSDT"),icon:"",iconBg:"bg-red-600"},{symbol:"LINK/USDT",coin:"LINK",rawSymbol:"LINKUSDT",...J("LINKUSDT"),icon:"",iconBg:"bg-blue-700"},{symbol:"AVAX/USDT",coin:"AVAX",rawSymbol:"AVAXUSDT",...J("AVAXUSDT"),icon:"A",iconBg:"bg-red-500"},{symbol:"DOT/USDT",coin:"DOT",rawSymbol:"DOTUSDT",...J("DOTUSDT"),icon:"",iconBg:"bg-pink-500"},{symbol:"POL/USDT",coin:"POL",rawSymbol:"POLUSDT",...J("POLUSDT"),icon:"P",iconBg:"bg-purple-700"},{symbol:"UNI/USDT",coin:"UNI",rawSymbol:"UNIUSDT",...J("UNIUSDT"),icon:"",iconBg:"bg-pink-600"},{symbol:"ATOM/USDT",coin:"ATOM",rawSymbol:"ATOMUSDT",...J("ATOMUSDT"),icon:"",iconBg:"bg-blue-600"},{symbol:"FIL/USDT",coin:"FIL",rawSymbol:"FILUSDT",...J("FILUSDT"),icon:"F",iconBg:"bg-gray-600"},{symbol:"ETC/USDT",coin:"ETC",rawSymbol:"ETCUSDT",...J("ETCUSDT"),icon:"E",iconBg:"bg-green-600"},{symbol:"XLM/USDT",coin:"XLM",rawSymbol:"XLMUSDT",...J("XLMUSDT"),icon:"",iconBg:"bg-indigo-500"}],He=ge.filter(F=>F.coin.toLowerCase().includes(c.toLowerCase())||F.symbol.toLowerCase().includes(c.toLowerCase())),se=ge.find(F=>F.rawSymbol===b)||ge[0],ze=F=>{console.log(" Selected trading pair:",F),x(F),d("")},ce=F=>{if(d(F),F.length>0){const ee=ge.filter(Pe=>Pe.coin.toLowerCase()===F.toLowerCase());ee.length===1&&(console.log(" Auto-selecting exact match:",ee[0].rawSymbol),x(ee[0].rawSymbol))}},Ke=F=>{console.log(" SPOT: TradingView symbol changed to:",F),console.log(" SPOT: Current selected symbol:",b),console.log(" SPOT: Available trading pairs:",ge.map(ot=>ot.rawSymbol));const ee=F.replace("BINANCE:","").replace("COINBASE:",""),Pe=ge.find(ot=>ot.rawSymbol===ee);console.log(" SPOT: Clean symbol:",ee),console.log(" SPOT: Matching pair:",Pe),Pe?(console.log(" SPOT: Found matching pair:",Pe),x(ee)):console.log(" SPOT: Symbol not found in trading pairs, keeping current:",b)},[je,Ve]=f.useState(""),[Me,De]=f.useState(""),[pt,K]=f.useState(0),[pe,st]=f.useState(""),[qe,Wt]=f.useState(""),[ut,D]=f.useState(0),[H,X]=f.useState(""),[ve,oe]=f.useState(""),{data:te}=ns({queryKey:["/api/balances"],enabled:!!t,refetchInterval:2e3,staleTime:0,gcTime:0,queryFn:async()=>{var Pe;console.log(" SPOT: Fetching balance from /api/balances for user:",t==null?void 0:t.id,t==null?void 0:t.username),console.log(" SPOT: Auth token:",((Pe=localStorage.getItem("authToken"))==null?void 0:Pe.substring(0,30))+"...");const F=await fetch("/api/balances",{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(console.log(" SPOT: Response status:",F.status,F.statusText),!F.ok){const ot=await F.text();throw console.error(" SPOT: Balance API failed:",F.status,ot),new Error(`Failed to fetch balance: ${F.status} ${ot}`)}const ee=await F.json();return console.log(" SPOT: Balance API response:",ee),ee}}),{data:Se}=ns({queryKey:["/api/spot/orders"],enabled:!!t,queryFn:async()=>{const F=await fetch("/api/spot/orders");if(!F.ok)throw new Error("Failed to fetch orders");return F.json()}}),[Re,Ze]=f.useState(0),[ht,ts]=f.useState(.5);f.useEffect(()=>{if(!t)return;const F=localStorage.getItem(`balances_${t.id||"user-1"}`);if(F){const{usdt:ee,btc:Pe}=JSON.parse(F);Ze(ee),ts(Pe),console.log(" Loaded balances from localStorage:",{usdt:ee,btc:Pe});return}if(te&&Array.isArray(te)){const ee=te.find(Ft=>Ft.symbol==="USDT"),Pe=te.find(Ft=>Ft.symbol==="BTC"),ot=parseFloat((ee==null?void 0:ee.available)||"0"),Kt=parseFloat((Pe==null?void 0:Pe.available)||"0.5");Ze(ot),ts(Kt),localStorage.setItem(`balances_${t.id||"user-1"}`,JSON.stringify({usdt:ot,btc:Kt})),console.log(" SPOT: Updated balances from API and saved to localStorage:",{usdtData:ee,btcData:Pe,newUsdtBalance:ot,newBtcBalance:Kt})}},[te,t]),console.log(" SPOT PAGE BALANCE DEBUG:",{user:t==null?void 0:t.id,balances:te,usdtBalance:Re,btcBalance:ht,"balances?.USDT":te==null?void 0:te.USDT,"balances?.USDT?.available":(_t=te==null?void 0:te.USDT)==null?void 0:_t.available,"Array.isArray(balances?.balances)":Array.isArray(te==null?void 0:te.balances),"Array.isArray(balances)":Array.isArray(te),"typeof balances":typeof te,"balances keys":te?Object.keys(te):"null"}),typeof window<"u"&&console.log(` SPOT PAGE: Displaying balance ${Re} USDT`),f.useEffect(()=>{a&&(t!=null&&t.id)&&(o({type:"subscribe_user_balance",userId:t.id}),console.log(" SPOT: Subscribed to balance updates for user:",t.id))},[a,o,t==null?void 0:t.id]),f.useEffect(()=>{var F;(n==null?void 0:n.type)==="balance_update"&&(console.log(" SPOT: Real-time balance update received:",n.data),console.log(" SPOT: Current user ID:",t==null?void 0:t.id,"Update for user:",(F=n.data)==null?void 0:F.userId),s.invalidateQueries({queryKey:["/api/balances"]}),s.invalidateQueries({queryKey:["/api/auth"]}),s.removeQueries({queryKey:["/api/balances"]}),setTimeout(()=>{s.refetchQueries({queryKey:["/api/balances"]})},100))},[n,s,t==null?void 0:t.id]);const{data:Je}=ns({queryKey:["/api/market-data"],refetchInterval:5e3,queryFn:async()=>{const F=await fetch("/api/market-data");if(!F.ok)throw new Error("Failed to fetch market data");return F.json()}}),ie=Je==null?void 0:Je.find(F=>F.symbol===b);ie&&parseFloat(ie.price);const tr=Ms({mutationFn:async F=>{var N;if(!(t!=null&&t.id))throw new Error("User not authenticated");const ee=F.type==="limit"?parseFloat(F.price):O,Pe=parseFloat(F.amount),ot=ee*Pe,Kt=await fetch("/api/spot/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({userId:t.id,symbol:b,side:"buy",amount:Pe,price:ee,type:F.type||"market"})});if(!Kt.ok){const B=await Kt.json();throw new Error(B.message||"Failed to place buy order")}const Ft=await Kt.json();return{order:{id:((N=Ft.order)==null?void 0:N.id)||Date.now().toString(),symbol:b,type:"buy",orderType:F.type,amount:Pe.toFixed(6),price:ee.toFixed(2),total:ot.toFixed(2),status:"filled",time:new Date().toLocaleString(),fee:(ot*.001).toFixed(2)},executionPrice:ee,amount:Pe,total:ot,apiResult:Ft}},onSuccess:F=>{const{order:ee,executionPrice:Pe,amount:ot,total:Kt,apiResult:Ft}=F;k(rr=>{const N=[ee,...rr];return Oe(N),N}),s.invalidateQueries({queryKey:["/api/balances"]}),e({title:"Buy order completed!",description:`Bought ${ot.toFixed(6)} BTC at $${Pe.toFixed(2)}. New balance: ${(Re-Kt).toFixed(2)} USDT`,duration:5e3}),De(""),K(0),console.log(" Buy order completed:",ee)},onError:F=>{e({title:"Failed to place buy order",description:F.message,variant:"destructive"})}}),z=Ms({mutationFn:async F=>{var N;if(!(t!=null&&t.id))throw new Error("User not authenticated");const ee=F.type==="limit"?parseFloat(F.price):O,Pe=parseFloat(F.amount),ot=ee*Pe,Kt=await fetch("/api/spot/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({userId:t.id,symbol:b,side:"sell",amount:Pe,price:ee,type:F.type||"market"})});if(!Kt.ok){const B=await Kt.json();throw new Error(B.message||"Failed to place sell order")}const Ft=await Kt.json();return{order:{id:((N=Ft.order)==null?void 0:N.id)||Date.now().toString(),symbol:b,type:"sell",orderType:F.type,amount:Pe.toFixed(6),price:ee.toFixed(2),total:ot.toFixed(2),status:"filled",time:new Date().toLocaleString(),fee:(ot*.001).toFixed(2)},executionPrice:ee,amount:Pe,total:ot,apiResult:Ft}},onSuccess:F=>{const{order:ee,executionPrice:Pe,amount:ot,total:Kt,apiResult:Ft}=F;k(rr=>{const N=[ee,...rr];return Oe(N),N}),s.invalidateQueries({queryKey:["/api/balances"]}),e({title:"Sell order completed!",description:`Sold ${ot.toFixed(6)} BTC at $${Pe.toFixed(2)}. New balance: ${(Re+Kt).toFixed(2)} USDT`,duration:5e3}),Wt(""),D(0),console.log(" Sell order completed:",ee)},onError:F=>{e({title:"Failed to place sell order",description:F.message,variant:"destructive"})}});f.useEffect(()=>{var F;(n==null?void 0:n.type)==="balance_update"&&((F=n.data)==null?void 0:F.userId)===(t==null?void 0:t.id)&&(console.log(" Real-time balance update received in Spot page:",n.data),s.invalidateQueries({queryKey:["/api/balances"]}),(n.data.changeType==="spot_buy"||n.data.changeType==="spot_sell")&&e({title:"Balance Updated",description:`${n.data.changeType==="spot_buy"?"Buy":"Sell"} order completed. New balance: ${n.data.newBalance} USDT`}))},[n,t==null?void 0:t.id,s,e]),f.useEffect(()=>{a&&(t!=null&&t.id)&&console.log(" Subscribing to balance updates for user:",t.id)},[a,t==null?void 0:t.id]);const Te=()=>{const F=parseFloat(je)||0,ee=parseFloat(Me)||0;return(F*ee).toFixed(2)},St=()=>{const F=parseFloat(pe)||0,ee=parseFloat(qe)||0;return(F*ee).toFixed(2)};f.useEffect(()=>{je&&Me?X(Te()):Me||X("")},[je,Me]),f.useEffect(()=>{pe&&qe?oe(St()):qe||oe("")},[pe,qe]);const kt=F=>{K(F);const ee=parseFloat(je)||O,ot=(Re/ee*F/100).toFixed(6);De(ot)},Dt=F=>{D(F);const ee=(ht*F/100).toFixed(6);Wt(ee)},xs=()=>{console.log(" Buy button clicked!"),console.log("User:",t),console.log("USDT Balance:",Re),console.log("Buy Amount:",Me),console.log("Buy Price:",je);const F=parseFloat(je),ee=parseFloat(Me);if(!ee||ee<=0){e({title:"Please enter a valid amount",variant:"destructive"});return}if(v==="limit"&&(!F||F<=0)){e({title:"Please enter a valid price",variant:"destructive"});return}const Pe=v==="limit"?F*ee:O*ee;if(console.log("Calculated total:",Pe),Pe>Re){e({title:`Insufficient USDT balance. Need ${Pe.toFixed(2)} but have ${Re.toFixed(2)}`,variant:"destructive"});return}console.log(" All validations passed, placing order..."),tr.mutate({type:v,amount:ee.toString(),price:v==="limit"?F.toString():void 0,total:Pe.toString()})},Kn=()=>{console.log(" Sell button clicked!"),console.log("User:",t),console.log("BTC Balance:",ht),console.log("Sell Amount:",qe),console.log("Sell Price:",pe);const F=parseFloat(pe),ee=parseFloat(qe);if(!ee||ee<=0){e({title:"Please enter a valid amount",variant:"destructive"});return}if(v==="limit"&&(!F||F<=0)){e({title:"Please enter a valid price",variant:"destructive"});return}if(ee>ht){e({title:`Insufficient BTC balance. Need ${ee.toFixed(6)} but have ${ht.toFixed(6)}`,variant:"destructive"});return}const Pe=v==="limit"?F*ee:O*ee;console.log("Calculated total:",Pe),console.log(" All validations passed, placing sell order..."),z.mutate({type:v,amount:ee.toString(),price:v==="limit"?F.toString():void 0,total:Pe.toString()})};f.useEffect(()=>{O>0&&(je||Ve(U),pe||st(U))},[O,je,pe,U]);const sr=F=>{var Kt;let ee=F;(!ee||isNaN(ee)||ee<=0)&&(ee=((Kt=R(b))==null?void 0:Kt.price)||(M==null?void 0:M.price)||166373.87),console.log(" Order Book - Base price:",F,"Safe price:",ee,"Symbol:",b);const Pe=[],ot=[];for(let Ft=0;Ft<14;Ft++){const rr=(Ft+1)*(Math.random()*.5+.1),N=ee+rr,B=(Math.random()*2+.1).toFixed(4),me=(N*parseFloat(B)).toFixed(2);Pe.push({price:N.toFixed(2),volume:B,turnover:me})}for(let Ft=0;Ft<14;Ft++){const rr=(Ft+1)*(Math.random()*.5+.1),N=ee-rr,B=(Math.random()*2+.1).toFixed(4),me=(N*parseFloat(B)).toFixed(2);ot.push({price:N.toFixed(2),volume:B,turnover:me})}return{sellOrders:Pe,buyOrders:ot}};return l?r.jsxs("div",{className:"min-h-screen bg-[#10121E] text-white pb-20",children:[r.jsx(ny,{}),r.jsxs("div",{className:"bg-[#10121E] px-4 py-2 border-b border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-bold text-lg",children:se.symbol}),r.jsxs("div",{className:"text-white text-xl font-bold",children:["$",se.price]}),r.jsx("div",{className:"text-sm font-semibold",style:{color:se.isPositive?"#10b981":"#ef4444"},children:se.change})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-gray-400 text-xs",children:"24h Vol"}),r.jsx("div",{className:"text-white text-sm font-bold",children:ie!=null&&ie.volume24h?(parseFloat(ie.volume24h)/1e6).toFixed(1)+"M BTC":"1.2M BTC"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-3 text-xs",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400",children:"24h High"}),r.jsx("div",{className:"text-white font-medium",children:(ie==null?void 0:ie.high24h)||"119,558"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400",children:"24h Low"}),r.jsx("div",{className:"text-white font-medium",children:(ie==null?void 0:ie.low24h)||"117,205"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400",children:"Volume"}),r.jsx("div",{className:"text-white font-medium",children:ie!=null&&ie.volume24h?(parseFloat(ie.volume24h)/1e3).toFixed(0)+"K":"681K"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400",children:"Turnover"}),r.jsx("div",{className:"text-white font-medium",children:ie!=null&&ie.volume24h?(parseFloat(ie.volume24h)*parseFloat(ie.price)/1e6).toFixed(0)+"M":"80.5M"})]})]})]}),r.jsxs("div",{className:"bg-[#10121E] relative w-full mobile-chart-container",style:{height:"450px"},children:[r.jsx("div",{className:"absolute top-2 right-2 z-10",children:r.jsx("select",{value:b,onChange:F=>{const ee=F.target.value;x(ee),Ke(ee)},className:"bg-gray-800/90 text-white text-xs font-medium rounded px-2 py-1 border border-gray-600/50 focus:border-blue-500 focus:outline-none min-w-[90px] max-w-[120px] backdrop-blur-sm",style:{backgroundColor:"rgba(31, 41, 55, 0.9)"},children:ge.map(F=>r.jsxs("option",{value:F.rawSymbol,className:"bg-gray-800 text-white",children:[F.coin,"/USDT"]},F.rawSymbol))})}),r.jsx("div",{className:"w-full h-full",children:r.jsx(Gh,{children:r.jsx(Wh,{type:"chart",symbol:`BINANCE:${b}`,height:450,interval:"1",theme:"dark",container_id:"spot_mobile_tradingview_chart",onSymbolChange:Ke})})})]}),r.jsxs("div",{className:"bg-[#10121E] min-h-screen",children:[r.jsxs("div",{className:"px-4 py-2 border-b border-gray-700",children:[r.jsx("h3",{className:"text-white font-bold mb-2",children:"Market Statistics"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"Current Price"}),r.jsxs("div",{className:"text-white font-bold text-lg",children:["$",U]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"24h Change"}),r.jsx("div",{className:"font-semibold",style:{color:E},children:T})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"24h Volume"}),r.jsx("div",{className:"text-white font-semibold",children:"2,847.32 BTC"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"Market Cap"}),r.jsx("div",{className:"text-white font-semibold",children:"$1.2T"})]})]})]}),r.jsxs("div",{className:"px-4 py-3 border-b border-gray-700",children:[r.jsx("h3",{className:"text-white font-bold mb-3",children:"Order Book"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-red-400 text-sm font-medium mb-2",children:"Sell Orders"}),r.jsx("div",{className:"space-y-1",children:sr(O).sellOrders.slice(0,5).map((F,ee)=>r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-red-400",children:F.price}),r.jsx("span",{className:"text-gray-400",children:F.amount})]},ee))})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-green-400 text-sm font-medium mb-2",children:"Buy Orders"}),r.jsx("div",{className:"space-y-1",children:sr(O).buyOrders.slice(0,5).map((F,ee)=>r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-green-400",children:F.price}),r.jsx("span",{className:"text-gray-400",children:F.amount})]},ee))})]})]})]}),r.jsxs("div",{className:"px-4 py-3 border-b border-gray-700",children:[r.jsx("h3",{className:"text-white font-bold mb-3",children:"Market Overview"}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{symbol:"BTC/USDT",price:U,change:T},{symbol:"ETH/USDT",price:"3,456.78",change:"+1.23%"},{symbol:"BNB/USDT",price:"712.45",change:"-0.45%"},{symbol:"ADA/USDT",price:"0.8272",change:"+0.60%"}].map((F,ee)=>r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-white text-sm font-medium",children:F.symbol}),r.jsxs("div",{className:"text-white text-lg font-bold",children:["$",F.price]}),r.jsx("div",{className:`text-xs font-medium ${F.change.startsWith("-")?"text-red-400":"text-green-400"}`,children:F.change})]},ee))})]}),r.jsxs("div",{className:"px-4 py-4 space-y-4",children:[r.jsxs("div",{className:"flex bg-gray-800 rounded-lg p-1",children:[r.jsx("button",{onClick:()=>y("buy"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${m==="buy"?"bg-green-600 text-white":"text-gray-400 hover:text-white"}`,children:"Buy"}),r.jsx("button",{onClick:()=>y("sell"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${m==="sell"?"bg-red-600 text-white":"text-gray-400 hover:text-white"}`,children:"Sell"})]}),r.jsxs("div",{className:"flex space-x-6 mb-4",children:[r.jsx("button",{onClick:()=>g("limit"),className:`pb-2 text-sm font-medium ${v==="limit"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:"Limit order"}),r.jsx("button",{onClick:()=>g("market"),className:`pb-2 text-sm font-medium ${v==="market"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:"Market order"})]}),m==="buy"?r.jsxs("div",{className:"space-y-4",children:[v==="limit"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Price (USDT)"}),r.jsx("input",{type:"number",value:je,onChange:F=>Ve(F.target.value),placeholder:U,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-green-500 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Amount (BTC)"}),r.jsx("input",{type:"number",value:Me,onChange:F=>De(F.target.value),placeholder:"0.00",className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-green-500 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Total (USDT)"}),r.jsx("div",{className:"text-white bg-gray-800 border border-gray-700 rounded-lg px-3 py-2",children:Te()})]}),r.jsx("div",{className:"space-y-1 text-xs text-gray-300 bg-[#1a1b2e] p-2 rounded",children:t?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"font-medium",children:["Available ",Re.toFixed(2)," USDT"]}),r.jsx("span",{className:"text-blue-400",children:""})]}),r.jsxs("div",{className:"text-green-400 font-medium",children:["Can buy  ",(Re/O).toFixed(6)," BTC"]})]}):r.jsx("div",{className:"text-center text-yellow-400",children:"Sign in to view balance"})}),r.jsx(W,{onClick:xs,disabled:!Me||Me==="0"||!t,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded-lg transition-colors",children:t?"Buy BTC":"Login to Trade"})]}):r.jsxs("div",{className:"space-y-4",children:[v==="limit"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Price (USDT)"}),r.jsx("input",{type:"number",value:pe,onChange:F=>st(F.target.value),placeholder:U,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-red-500 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Amount (BTC)"}),r.jsx("input",{type:"number",value:qe,onChange:F=>Wt(F.target.value),placeholder:"0.00",className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-red-500 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Total (USDT)"}),r.jsx("div",{className:"text-white bg-gray-800 border border-gray-700 rounded-lg px-3 py-2",children:St()})]}),r.jsx("div",{className:"space-y-1 text-xs text-gray-300 bg-[#1a1b2e] p-2 rounded",children:t?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"font-medium",children:["Available ",ht.toFixed(6)," BTC"]}),r.jsx("span",{className:"text-blue-400",children:""})]}),r.jsxs("div",{className:"text-red-400 font-medium",children:["Available  ",(ht*O).toFixed(2)," USDT"]})]}):r.jsx("div",{className:"text-center text-yellow-400",children:"Sign in to view balance"})}),r.jsx(W,{onClick:Kn,disabled:!qe||qe==="0"||!t,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded-lg transition-colors",children:t?"Sell BTC":"Login to Trade"})]})]}),r.jsxs("div",{className:"px-4 py-4",children:[r.jsx("h3",{className:"text-white font-bold mb-3",children:"Recent Orders"}),r.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[_.slice(0,5).map(F=>r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("span",{className:`text-sm font-medium ${F.type==="buy"?"text-green-400":"text-red-400"}`,children:[F.type.toUpperCase()," ",F.symbol]}),r.jsxs("div",{className:"text-xs text-gray-400",children:[F.amount," @ $",F.price]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:`text-sm font-medium ${F.status==="filled"?"text-green-400":F.status==="cancelled"?"text-red-400":"text-yellow-400"}`,children:F.status}),r.jsxs("div",{className:"text-xs text-gray-400",children:["$",F.total]})]})]}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:F.time})]},F.id)),_.length===0&&r.jsx("div",{className:"text-center text-gray-400 py-4",children:"No recent orders"})]})]})]}),r.jsx(ld,{}),r.jsx(Lh,{})]}):r.jsxs("div",{className:"min-h-screen bg-gray-900",children:[r.jsx(iy,{}),r.jsx("div",{className:"bg-[#10121E] flex min-h-screen",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"bg-[#10121E] px-4 py-3 border-b border-gray-700",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-bold text-lg",children:se.symbol}),r.jsxs("div",{className:"text-white text-2xl font-bold",children:["$",se.price]}),r.jsxs("div",{className:"text-gray-400 text-sm",children:["$ ",se.price]})]}),r.jsx("div",{className:"text-lg font-semibold",style:{color:se.isPositive?"#10b981":"#ef4444"},children:se.change}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"Change 24h"}),r.jsx("div",{className:"text-white",style:{color:se.isPositive?"#10b981":"#ef4444"},children:se.change})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"24h High"}),r.jsx("div",{className:"text-white",children:b==="BTCUSDT"?V?V.toFixed(2):"119558.19":(parseFloat(se.price)*1.02).toFixed(2)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"24h Low"}),r.jsx("div",{className:"text-white",children:b==="BTCUSDT"?G?G.toFixed(2):"117204.65":(parseFloat(se.price)*.98).toFixed(2)})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-gray-400",children:["Volume 24h (",se.coin,")"]}),r.jsx("div",{className:"text-white",children:b==="BTCUSDT"?A?A.toFixed(2):"681.35":(Math.random()*1e3+500).toFixed(2)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"Turnover 24h (USDT)"}),r.jsx("div",{className:"text-white",children:b==="BTCUSDT"?"80520202.92":(parseFloat(se.price)*(Math.random()*1e6+5e5)).toFixed(2)})]})]})]})})}),r.jsxs("div",{className:"flex min-h-[900px]",children:[r.jsxs("div",{className:"w-56 bg-[#10121E] border-r border-gray-700 min-h-[900px]",children:[r.jsxs("div",{className:"p-3 border-b border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-white font-bold text-lg",children:b.replace("USDT","/USDT")}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-bold",style:{color:E},children:["$",U]}),r.jsx("div",{className:"text-gray-400 text-sm",children:"Change 24h"}),r.jsx("div",{className:"text-sm",style:{color:E},children:T})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-4 h-4 bg-green-600 rounded-sm"}),r.jsx("div",{className:"w-4 h-4 bg-red-600 rounded-sm"}),r.jsx("div",{className:"w-4 h-4 bg-yellow-600 rounded-sm"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"text-white text-sm",children:"0.01"}),r.jsx("span",{className:"text-gray-400",children:""})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 p-2 text-xs text-gray-400 border-b border-gray-700",children:[r.jsx("span",{children:"Price (USDT)"}),r.jsxs("span",{children:["Volume (",b.replace("USDT",""),")"]}),r.jsx("span",{children:"Turnover"})]}),r.jsxs("div",{className:"flex-1 min-h-[650px] overflow-y-auto",children:[r.jsx("div",{className:"space-y-0",children:sr(O).sellOrders.map((F,ee)=>r.jsxs("div",{className:"grid grid-cols-3 gap-2 px-2 py-1 text-xs hover:bg-[#3a3d57]",children:[r.jsx("span",{className:"text-red-400",children:F.price}),r.jsx("span",{className:"text-gray-300",children:F.volume}),r.jsx("span",{className:"text-gray-300",children:F.turnover})]},ee))}),r.jsx("div",{className:"bg-[#10121E] p-2 my-1",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-bold text-lg",style:{color:E},children:U}),r.jsx("span",{style:{color:E},children:I?"":""}),r.jsxs("span",{className:"text-gray-400 text-sm",children:["$",U]})]})}),r.jsx("div",{className:"space-y-0",children:sr(O).buyOrders.map((F,ee)=>r.jsxs("div",{className:"grid grid-cols-3 gap-2 px-2 py-1 text-xs hover:bg-[#3a3d57]",children:[r.jsx("span",{className:"text-green-400",children:F.price}),r.jsx("span",{className:"text-gray-300",children:F.volume}),r.jsx("span",{className:"text-gray-300",children:F.turnover})]},ee))})]})]}),r.jsxs("div",{className:"flex-1 bg-[#10121E] flex flex-col",children:[r.jsx("div",{className:"p-2 border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs("div",{className:"text-xs text-gray-400",children:["Chart Sync: ",r.jsx("span",{className:"text-green-400",children:"Active"})]})}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[!1,r.jsx("button",{onClick:()=>w("tradingview"),className:`text-xs transition-colors ${p==="tradingview"?"text-white bg-blue-600 px-2 py-1 rounded":"text-gray-400 hover:text-white"}`,children:"Trading view"}),r.jsx("button",{onClick:()=>w("depth"),className:`text-xs transition-colors ${p==="depth"?"text-white bg-blue-600 px-2 py-1 rounded":"text-gray-400 hover:text-white"}`,children:"Depth"})]}),r.jsx("button",{className:"text-gray-400 hover:text-white",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})]})}),r.jsxs("div",{className:"h-[500px] relative bg-[#10121E] p-1",children:[!1,p==="tradingview"&&r.jsxs("div",{className:"relative h-full",children:[r.jsx("div",{className:"absolute top-2 right-2 z-10",children:r.jsx("select",{value:b,onChange:F=>{const ee=F.target.value;x(ee),Ke(ee)},className:"bg-gray-800/90 text-white text-xs font-medium rounded px-2 py-1 border border-gray-600/50 focus:border-blue-500 focus:outline-none min-w-[90px] max-w-[120px] backdrop-blur-sm",style:{backgroundColor:"rgba(31, 41, 55, 0.9)"},children:ge.map(F=>r.jsxs("option",{value:F.rawSymbol,className:"bg-gray-800 text-white",children:[F.coin,"/USDT"]},F.rawSymbol))})}),r.jsx(Gh,{children:r.jsx(Wh,{type:"chart",symbol:`BINANCE:${b}`,height:490,interval:"1",theme:"dark",container_id:"spot_tradingview_chart",onSymbolChange:Ke})})]}),p==="depth"&&r.jsxs("div",{className:"w-full h-full p-4",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"text-white text-lg font-bold mb-1",children:"Market Depth Chart"}),r.jsxs("div",{className:"text-gray-400 text-sm",children:["Real-time order book visualization for ",b]})]}),r.jsx("div",{className:"w-full h-[400px] bg-gray-800 rounded-lg flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400 text-lg mb-2",children:""}),r.jsx("div",{className:"text-gray-400 text-sm",children:"Market Depth Chart"}),r.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Coming Soon"})]})})]})]}),r.jsxs("div",{className:"bg-[#10121E] p-4 min-h-[450px] flex-shrink-0",children:[r.jsxs("div",{className:"flex space-x-6 mb-6",children:[r.jsx("button",{onClick:()=>g("limit"),className:`pb-2 text-sm font-medium ${v==="limit"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:"Limit order"}),r.jsx("button",{onClick:()=>g("market"),className:`pb-2 text-sm font-medium ${v==="market"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:"Market order"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[v==="limit"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Price"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",className:"w-full bg-[#1a1b2e] text-white px-3 py-2 rounded border border-gray-700 focus:border-blue-500 focus:outline-none pr-12",value:je,onChange:F=>Ve(F.target.value),placeholder:U}),r.jsx("span",{className:"absolute right-3 top-2 text-gray-400 text-sm",children:"USDT"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",className:"w-full bg-[#1a1b2e] text-white px-3 py-2 rounded border border-gray-700 focus:border-blue-500 focus:outline-none pr-12",value:Me,onChange:F=>{console.log("Buy amount changed:",F.target.value),De(F.target.value),K(0)},placeholder:"0.00000000",step:"0.000001"}),r.jsx("span",{className:"absolute right-3 top-2 text-gray-400 text-sm",children:"BTC"})]})]}),r.jsxs("div",{className:"relative py-4",children:[r.jsxs("div",{className:"flex items-center justify-between relative",children:[r.jsx("div",{className:`w-2 h-2 rounded-full z-10 ${pt>0?"bg-green-400":"bg-gray-400"}`,style:{left:`${pt}%`}}),r.jsx("div",{className:"absolute left-0 right-0 top-1/2 transform -translate-y-1/2 h-0.5 bg-gray-600"}),r.jsx("div",{className:"absolute h-0.5 bg-green-400 top-1/2 transform -translate-y-1/2",style:{width:`${pt}%`}})]}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-300 mt-2",children:[r.jsx("button",{onClick:()=>kt(0),className:`hover:text-white transition-colors ${pt===0?"text-green-400":""}`,children:"0"}),r.jsx("button",{onClick:()=>kt(25),className:`hover:text-white transition-colors ${pt===25?"text-green-400":""}`,children:"25%"}),r.jsx("button",{onClick:()=>kt(50),className:`hover:text-white transition-colors ${pt===50?"text-green-400":""}`,children:"50%"}),r.jsx("button",{onClick:()=>kt(75),className:`hover:text-white transition-colors ${pt===75?"text-green-400":""}`,children:"75%"}),r.jsx("button",{onClick:()=>kt(100),className:`hover:text-white transition-colors ${pt===100?"text-green-400":""}`,children:"100%"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Turnover"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",className:"w-full bg-[#1a1b2e] text-white px-3 py-2 rounded border border-gray-700 focus:border-blue-500 focus:outline-none pr-12",value:H,onChange:F=>{console.log("Buy turnover changed:",F.target.value),X(F.target.value);const ee=parseFloat(F.target.value)||0,Pe=parseFloat(je)||O;if(Pe>0){const ot=(ee/Pe).toFixed(6);console.log("Calculated buy amount:",ot),De(ot)}},placeholder:"0.00"}),r.jsx("span",{className:"absolute right-3 top-2 text-gray-400 text-sm",children:"USDT"})]})]}),r.jsx("div",{className:"space-y-1 text-xs text-gray-300 bg-[#1a1b2e] p-2 rounded",children:t?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"font-medium",children:["Available ",Re.toFixed(2)," USDT"]}),r.jsx("span",{className:"text-blue-400",children:""})]}),r.jsxs("div",{className:"text-green-400 font-medium",children:["Can buy  ",(Re/O).toFixed(6)," BTC"]})]}):r.jsx("div",{className:"text-center text-yellow-400",children:"Sign in to view balance"})}),t?r.jsx("button",{onClick:xs,disabled:tr.isPending,className:"w-full bg-green-500 hover:bg-green-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white py-3 rounded font-medium",children:tr.isPending?"Placing...":"Buy(BTC)"}):r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{disabled:!0,className:"w-full bg-gray-600 cursor-not-allowed text-white py-3 rounded font-medium",children:"Buy(BTC)"}),r.jsx("p",{className:"text-center text-yellow-400 text-sm",children:r.jsx("a",{href:"/login",className:"underline hover:text-yellow-300",children:"Sign in to start trading"})})]})]}),r.jsxs("div",{className:"space-y-4",children:[v==="limit"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Price"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",className:"w-full bg-[#1a1b2e] text-white px-3 py-2 rounded border border-gray-700 focus:border-blue-500 focus:outline-none pr-12",value:pe,onChange:F=>st(F.target.value),placeholder:U}),r.jsx("span",{className:"absolute right-3 top-2 text-gray-400 text-sm",children:"USDT"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",className:"w-full bg-[#1a1b2e] text-white px-3 py-2 rounded border border-gray-700 focus:border-blue-500 focus:outline-none pr-12",value:qe,onChange:F=>{console.log("Sell amount changed:",F.target.value),Wt(F.target.value),D(0)},placeholder:"0.00000000",step:"0.000001"}),r.jsx("span",{className:"absolute right-3 top-2 text-gray-400 text-sm",children:"BTC"})]})]}),r.jsxs("div",{className:"relative py-4",children:[r.jsxs("div",{className:"flex items-center justify-between relative",children:[r.jsx("div",{className:`w-2 h-2 rounded-full z-10 ${ut>0?"bg-red-400":"bg-gray-400"}`,style:{left:`${ut}%`}}),r.jsx("div",{className:"absolute left-0 right-0 top-1/2 transform -translate-y-1/2 h-0.5 bg-gray-600"}),r.jsx("div",{className:"absolute h-0.5 bg-red-400 top-1/2 transform -translate-y-1/2",style:{width:`${ut}%`}})]}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-300 mt-2",children:[r.jsx("button",{onClick:()=>Dt(0),className:`hover:text-white transition-colors ${ut===0?"text-red-400":""}`,children:"0"}),r.jsx("button",{onClick:()=>Dt(25),className:`hover:text-white transition-colors ${ut===25?"text-red-400":""}`,children:"25%"}),r.jsx("button",{onClick:()=>Dt(50),className:`hover:text-white transition-colors ${ut===50?"text-red-400":""}`,children:"50%"}),r.jsx("button",{onClick:()=>Dt(75),className:`hover:text-white transition-colors ${ut===75?"text-red-400":""}`,children:"75%"}),r.jsx("button",{onClick:()=>Dt(100),className:`hover:text-white transition-colors ${ut===100?"text-red-400":""}`,children:"100%"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Turnover"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",className:"w-full bg-[#1a1b2e] text-white px-3 py-2 rounded border border-gray-700 focus:border-blue-500 focus:outline-none pr-12",value:ve,onChange:F=>{console.log("Sell turnover changed:",F.target.value),oe(F.target.value);const ee=parseFloat(F.target.value)||0,Pe=parseFloat(pe)||O;if(Pe>0){const ot=(ee/Pe).toFixed(6);console.log("Calculated sell amount:",ot),Wt(ot)}},placeholder:"0.00"}),r.jsx("span",{className:"absolute right-3 top-2 text-gray-400 text-sm",children:"USDT"})]})]}),r.jsx("div",{className:"space-y-1 text-xs text-gray-300 bg-[#1a1b2e] p-2 rounded",children:t?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"font-medium",children:["Available ",ht.toFixed(6)," BTC"]}),r.jsx("span",{className:"text-blue-400",children:""})]}),r.jsxs("div",{className:"text-red-400 font-medium",children:["Available  ",(ht*O).toFixed(2)," USDT"]})]}):r.jsx("div",{className:"text-center text-yellow-400",children:"Sign in to view balance"})}),t?r.jsx("button",{onClick:Kn,disabled:z.isPending,className:"w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white py-3 rounded font-medium",children:z.isPending?"Placing...":"Sell (BTC)"}):r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{disabled:!0,className:"w-full bg-gray-600 cursor-not-allowed text-white py-3 rounded font-medium",children:"Sell (BTC)"}),r.jsx("p",{className:"text-center text-yellow-400 text-sm",children:r.jsx("a",{href:"/login",className:"underline hover:text-yellow-300",children:"Sign in to start trading"})})]})]})]})]})]}),r.jsxs("div",{className:"w-72 bg-[#10121E] border-l border-gray-700 min-h-[900px] flex flex-col",children:[r.jsx("div",{className:"p-4 flex-shrink-0",children:r.jsxs("div",{className:"relative",children:[r.jsx("svg",{className:"absolute left-3 top-3 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),r.jsx("input",{type:"text",placeholder:"Search coins (e.g. ETH, BTC, SOL)",value:c,onChange:F=>ce(F.target.value),className:"w-full bg-[#1a1b2e] text-white pl-10 pr-4 py-2 rounded border border-gray-700 focus:border-blue-500 focus:outline-none text-sm"})]})}),r.jsx("div",{className:"px-4 mb-4 flex-shrink-0",children:r.jsxs("div",{className:"flex space-x-6",children:[r.jsx("button",{className:"text-gray-400 text-sm hover:text-white",children:"Favorites"}),r.jsx("button",{className:"text-blue-400 text-sm border-b-2 border-blue-400 pb-1",children:"Spot"}),r.jsx("button",{className:"text-gray-400 text-sm hover:text-white",children:"Options"})]})}),r.jsx("div",{className:"px-4 space-y-2 mb-6 max-h-[300px] overflow-y-auto flex-shrink-0",children:He.length>0?He.map((F,ee)=>r.jsxs("div",{onClick:()=>ze(F.rawSymbol),className:`flex items-center justify-between p-2 hover:bg-[#1a1b2e] rounded cursor-pointer transition-colors ${b===F.rawSymbol?"bg-blue-600/20 border border-blue-500/30":""}`,children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ${F.iconBg}`,children:F.icon}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white text-sm font-medium",children:F.symbol}),r.jsx("div",{className:"text-gray-400 text-xs",children:F.coin})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-white text-sm",children:F.price}),r.jsx("div",{className:`text-xs ${F.isPositive?"text-green-400":"text-red-400"}`,children:F.change})]})]},ee)):r.jsxs("div",{className:"text-center text-gray-400 py-4",children:[r.jsx("div",{className:"text-sm",children:"No coins found"}),r.jsx("div",{className:"text-xs mt-1",children:"Try searching for BTC, ETH, SOL, etc."})]})}),r.jsxs("div",{className:"flex-1 flex flex-col min-h-0 border-t border-gray-700",children:[r.jsx("div",{className:"px-4 py-3 flex-shrink-0",children:r.jsx("div",{className:"text-white font-medium text-sm",children:"Latest transaction"})}),r.jsx("div",{className:"px-4 py-2 border-b border-gray-700 flex-shrink-0",children:r.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[r.jsx("span",{children:"Time"}),r.jsx("span",{children:"Price (USDT)"}),r.jsx("span",{children:"Amount"})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto px-4",children:r.jsx("div",{className:"space-y-1 py-2",children:[{time:new Date().toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:U,amount:"0.0080",type:"buy"},{time:new Date(Date.now()-1e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:U,amount:"0.0001700",type:"buy"},{time:new Date(Date.now()-2e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:U,amount:"0.1000",type:"sell"},{time:new Date(Date.now()-3e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:U,amount:"0.0004200",type:"buy"},{time:new Date(Date.now()-5e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:U,amount:"0.0047",type:"sell"},{time:new Date(Date.now()-6e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:U,amount:"0.0016",type:"buy"},{time:new Date(Date.now()-7e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:O.toFixed(2),amount:"0.00070000",type:"sell"},{time:new Date(Date.now()-8e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:O.toFixed(2),amount:"0.0243",type:"buy"},{time:new Date(Date.now()-9e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:(O-.01).toFixed(2),amount:"0.0089",type:"buy"},{time:new Date(Date.now()-1e4).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:(O-.01).toFixed(2),amount:"0.0156",type:"sell"},{time:new Date(Date.now()-11e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:(O-.02).toFixed(2),amount:"0.0034",type:"buy"},{time:new Date(Date.now()-12e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:(O-.02).toFixed(2),amount:"0.0078",type:"sell"},{time:new Date(Date.now()-13e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:(O-.03).toFixed(2),amount:"0.0092",type:"buy"},{time:new Date(Date.now()-14e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:(O-.03).toFixed(2),amount:"0.0067",type:"sell"},{time:new Date(Date.now()-15e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:(O-.04).toFixed(2),amount:"0.0123",type:"buy"},{time:new Date(Date.now()-16e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:(O-.04).toFixed(2),amount:"0.0045",type:"sell"},{time:new Date(Date.now()-17e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:(O-.05).toFixed(2),amount:"0.0234",type:"buy"},{time:new Date(Date.now()-18e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:(O-.05).toFixed(2),amount:"0.0087",type:"sell"},{time:new Date(Date.now()-19e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:(O-.06).toFixed(2),amount:"0.0156",type:"buy"},{time:new Date(Date.now()-2e4).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8),price:(O-.06).toFixed(2),amount:"0.0098",type:"sell"}].map((F,ee)=>r.jsxs("div",{className:"flex justify-between text-xs py-1 hover:bg-gray-800/50 rounded px-2 -mx-2",children:[r.jsx("span",{className:"text-gray-400 font-mono",children:F.time}),r.jsx("span",{className:`font-mono ${F.type==="buy"?"text-green-400":"text-red-400"}`,children:F.price}),r.jsx("span",{className:"text-gray-300 font-mono",children:F.amount})]},ee))})})]})]})]})]})}),r.jsxs("div",{className:"bg-[#10121E] border-t border-gray-700 min-h-[300px]",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-gray-700 px-4 py-3",children:[r.jsx("div",{className:"flex items-center space-x-6",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("button",{onClick:()=>u("open"),className:`pb-1 text-sm font-medium ${h==="open"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:["Open orders(",j.length,")"]}),r.jsxs("button",{onClick:()=>u("history"),className:`pb-1 text-sm font-medium ${h==="history"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:["Order history(",_.length,")"]})]})}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("label",{className:"flex items-center space-x-2 text-gray-400 text-sm",children:[r.jsx("input",{type:"checkbox",className:"rounded"}),r.jsx("span",{children:"Hide other trading pairs"})]}),r.jsx("button",{className:"text-gray-400 hover:text-white",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),r.jsxs("div",{className:"grid grid-cols-7 gap-2 px-4 py-3 text-gray-400 text-xs font-medium border-b border-gray-700",children:[r.jsx("div",{className:"truncate",children:"Trading pair"}),r.jsx("div",{className:"truncate text-center",children:"Type"}),r.jsx("div",{className:"truncate text-center",children:"Price"}),r.jsx("div",{className:"truncate text-center",children:"Amount"}),r.jsx("div",{className:"truncate text-center",children:"Total"}),r.jsx("div",{className:"truncate text-center",children:"Status"}),r.jsx("div",{className:"truncate text-center",children:"Time"})]}),r.jsx("div",{className:"min-h-[200px]",children:h==="open"?j.length>0?r.jsx("div",{className:"space-y-2",children:j.map(F=>r.jsxs("div",{className:"grid grid-cols-7 gap-2 px-4 py-3 text-sm hover:bg-gray-800/50 max-w-full overflow-hidden",children:[r.jsx("div",{className:"text-white truncate",children:F.symbol}),r.jsxs("div",{className:`${F.type==="buy"?"text-green-400":"text-red-400"} truncate text-center`,children:[F.type.toUpperCase()," / ",F.orderType.toUpperCase()]}),r.jsx("div",{className:"text-white truncate text-center",children:F.price}),r.jsx("div",{className:"text-white truncate text-center",children:F.amount}),r.jsx("div",{className:"text-white truncate text-center",children:F.total}),r.jsx("div",{className:"text-yellow-400 truncate text-center",children:"Pending"}),r.jsx("div",{className:"text-gray-400 truncate text-center",children:F.time})]},F.id))}):r.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[r.jsx("div",{className:"w-16 h-16 mb-4 opacity-50",children:r.jsxs("svg",{viewBox:"0 0 64 64",className:"w-full h-full text-gray-500",children:[r.jsx("circle",{cx:"32",cy:"32",r:"30",fill:"none",stroke:"currentColor",strokeWidth:"2"}),r.jsx("path",{d:"M32 16v16l8 8",stroke:"currentColor",strokeWidth:"2",fill:"none"})]})}),r.jsx("div",{className:"text-gray-400 text-sm",children:"No open orders"})]}):_.length>0?r.jsx("div",{className:"space-y-2",children:_.map(F=>r.jsxs("div",{className:"grid grid-cols-7 gap-2 px-4 py-3 text-sm hover:bg-gray-800/50 max-w-full overflow-hidden",children:[r.jsx("div",{className:"text-white truncate",children:F.symbol}),r.jsxs("div",{className:`${F.type==="buy"?"text-green-400":"text-red-400"} truncate text-center`,children:[F.type.toUpperCase()," / ",F.orderType.toUpperCase()]}),r.jsxs("div",{className:"text-white truncate text-center",children:["$",F.price]}),r.jsx("div",{className:"text-white truncate text-center",children:F.amount}),r.jsxs("div",{className:"text-white truncate text-center",children:["$",F.total]}),r.jsx("div",{className:"text-green-400 truncate text-center",children:"Filled"}),r.jsx("div",{className:"text-gray-400 truncate text-center",children:F.time})]},F.id))}):r.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[r.jsx("div",{className:"w-16 h-16 mb-4 opacity-50",children:r.jsxs("svg",{viewBox:"0 0 64 64",className:"w-full h-full text-gray-500",children:[r.jsx("path",{fill:"currentColor",d:"M32 8C18.7 8 8 18.7 8 32s10.7 24 24 24 24-10.7 24-24S45.3 8 32 8zm0 44c-11 0-20-9-20-20s9-20 20-20 20 9 20 20-9 20-20 20z"}),r.jsx("path",{fill:"currentColor",d:"M32 16c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm0 28c-6.6 0-12-5.4-12-12s5.4-12 12-12 12 5.4 12 12-5.4 12-12 12z"}),r.jsx("circle",{fill:"currentColor",cx:"32",cy:"32",r:"4"})]})}),r.jsx("div",{className:"text-gray-400 text-sm",children:"No order history"})]})})]})]})}function TF(){return r.jsx(jy,{symbol:"BTCUSDT",updateInterval:2e3,children:r.jsx(CF,{})})}function oj(t,[e,s]){return Math.min(s,Math.max(e,t))}function kF(t){const e=f.useRef({value:t,previous:t});return f.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var EF=[" ","Enter","ArrowUp","ArrowDown"],PF=[" ","Enter"],ho="Select",[ef,tf,_F]=Tm(ho),[Gl]=Zr(ho,[_F,Hl]),sf=Hl(),[MF,va]=Gl(ho),[AF,DF]=Gl(ho),i4=t=>{const{__scopeSelect:e,children:s,open:n,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:u,disabled:m,required:y,form:v}=t,g=sf(e),[b,x]=f.useState(null),[p,w]=f.useState(null),[j,S]=f.useState(!1),_=$m(d),[k,P]=ca({prop:n,defaultProp:i??!1,onChange:a,caller:ho}),[M,T]=ca({prop:o,defaultProp:l,onChange:c,caller:ho}),E=f.useRef(null),I=b?v||!!b.closest("form"):!0,[V,G]=f.useState(new Set),A=Array.from(V).map(R=>R.props.value).join(";");return r.jsx(aC,{...g,children:r.jsxs(MF,{required:y,scope:e,trigger:b,onTriggerChange:x,valueNode:p,onValueNodeChange:w,valueNodeHasChildren:j,onValueNodeHasChildrenChange:S,contentId:xn(),value:M,onValueChange:T,open:k,onOpenChange:P,dir:_,triggerPointerDownPosRef:E,disabled:m,children:[r.jsx(ef.Provider,{scope:e,children:r.jsx(AF,{scope:t.__scopeSelect,onNativeOptionAdd:f.useCallback(R=>{G($=>new Set($).add(R))},[]),onNativeOptionRemove:f.useCallback(R=>{G($=>{const O=new Set($);return O.delete(R),O})},[]),children:s})}),I?r.jsxs(P4,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:u,value:M,onChange:R=>T(R.target.value),disabled:m,form:v,children:[M===void 0?r.jsx("option",{value:""}):null,Array.from(V)]},A):null]})})};i4.displayName=ho;var a4="SelectTrigger",o4=f.forwardRef((t,e)=>{const{__scopeSelect:s,disabled:n=!1,...i}=t,a=sf(s),o=va(a4,s),l=o.disabled||n,c=Nt(e,o.onTriggerChange),d=tf(s),h=f.useRef("touch"),[u,m,y]=M4(g=>{const b=d().filter(w=>!w.disabled),x=b.find(w=>w.value===o.value),p=A4(b,g,x);p!==void 0&&o.onValueChange(p.value)}),v=g=>{l||(o.onOpenChange(!0),y()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return r.jsx(Vx,{asChild:!0,...a,children:r.jsx(We.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":_4(o.value)?"":void 0,...i,ref:c,onClick:we(i.onClick,g=>{g.currentTarget.focus(),h.current!=="mouse"&&v(g)}),onPointerDown:we(i.onPointerDown,g=>{h.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(v(g),g.preventDefault())}),onKeyDown:we(i.onKeyDown,g=>{const b=u.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(b&&g.key===" ")&&EF.includes(g.key)&&(v(),g.preventDefault())})})})});o4.displayName=a4;var l4="SelectValue",c4=f.forwardRef((t,e)=>{const{__scopeSelect:s,className:n,style:i,children:a,placeholder:o="",...l}=t,c=va(l4,s),{onValueNodeHasChildrenChange:d}=c,h=a!==void 0,u=Nt(e,c.onValueNodeChange);return Ns(()=>{d(h)},[d,h]),r.jsx(We.span,{...l,ref:u,style:{pointerEvents:"none"},children:_4(c.value)?r.jsx(r.Fragment,{children:o}):a})});c4.displayName=l4;var RF="SelectIcon",d4=f.forwardRef((t,e)=>{const{__scopeSelect:s,children:n,...i}=t;return r.jsx(We.span,{"aria-hidden":!0,...i,ref:e,children:n||""})});d4.displayName=RF;var OF="SelectPortal",u4=t=>r.jsx(Pd,{asChild:!0,...t});u4.displayName=OF;var mo="SelectContent",h4=f.forwardRef((t,e)=>{const s=va(mo,t.__scopeSelect),[n,i]=f.useState();if(Ns(()=>{i(new DocumentFragment)},[]),!s.open){const a=n;return a?yo.createPortal(r.jsx(m4,{scope:t.__scopeSelect,children:r.jsx(ef.Slot,{scope:t.__scopeSelect,children:r.jsx("div",{children:t.children})})}),a):null}return r.jsx(f4,{...t,ref:e})});h4.displayName=mo;var nn=10,[m4,ba]=Gl(mo),IF="SelectContentImpl",LF=io("SelectContent.RemoveScroll"),f4=f.forwardRef((t,e)=>{const{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:u,collisionBoundary:m,collisionPadding:y,sticky:v,hideWhenDetached:g,avoidCollisions:b,...x}=t,p=va(mo,s),[w,j]=f.useState(null),[S,_]=f.useState(null),k=Nt(e,ce=>j(ce)),[P,M]=f.useState(null),[T,E]=f.useState(null),I=tf(s),[V,G]=f.useState(!1),A=f.useRef(!1);f.useEffect(()=>{if(w)return qx(w)},[w]),Gx();const R=f.useCallback(ce=>{const[Ke,...je]=I().map(De=>De.ref.current),[Ve]=je.slice(-1),Me=document.activeElement;for(const De of ce)if(De===Me||(De==null||De.scrollIntoView({block:"nearest"}),De===Ke&&S&&(S.scrollTop=0),De===Ve&&S&&(S.scrollTop=S.scrollHeight),De==null||De.focus(),document.activeElement!==Me))return},[I,S]),$=f.useCallback(()=>R([P,w]),[R,P,w]);f.useEffect(()=>{V&&$()},[V,$]);const{onOpenChange:O,triggerPointerDownPosRef:U}=p;f.useEffect(()=>{if(w){let ce={x:0,y:0};const Ke=Ve=>{var Me,De;ce={x:Math.abs(Math.round(Ve.pageX)-(((Me=U.current)==null?void 0:Me.x)??0)),y:Math.abs(Math.round(Ve.pageY)-(((De=U.current)==null?void 0:De.y)??0))}},je=Ve=>{ce.x<=10&&ce.y<=10?Ve.preventDefault():w.contains(Ve.target)||O(!1),document.removeEventListener("pointermove",Ke),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",Ke),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ke),document.removeEventListener("pointerup",je,{capture:!0})}}},[w,O,U]),f.useEffect(()=>{const ce=()=>O(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[O]);const[J,Q]=M4(ce=>{const Ke=I().filter(Me=>!Me.disabled),je=Ke.find(Me=>Me.ref.current===document.activeElement),Ve=A4(Ke,ce,je);Ve&&setTimeout(()=>Ve.ref.current.focus())}),Oe=f.useCallback((ce,Ke,je)=>{const Ve=!A.current&&!je;(p.value!==void 0&&p.value===Ke||Ve)&&(M(ce),Ve&&(A.current=!0))},[p.value]),ge=f.useCallback(()=>w==null?void 0:w.focus(),[w]),He=f.useCallback((ce,Ke,je)=>{const Ve=!A.current&&!je;(p.value!==void 0&&p.value===Ke||Ve)&&E(ce)},[p.value]),se=n==="popper"?l0:p4,ze=se===l0?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:u,collisionBoundary:m,collisionPadding:y,sticky:v,hideWhenDetached:g,avoidCollisions:b}:{};return r.jsx(m4,{scope:s,content:w,viewport:S,onViewportChange:_,itemRefCallback:Oe,selectedItem:P,onItemLeave:ge,itemTextRefCallback:He,focusSelectedItem:$,selectedItemText:T,position:n,isPositioned:V,searchRef:J,children:r.jsx(Vm,{as:LF,allowPinchZoom:!0,children:r.jsx(Um,{asChild:!0,trapped:p.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:we(i,ce=>{var Ke;(Ke=p.trigger)==null||Ke.focus({preventScroll:!0}),ce.preventDefault()}),children:r.jsx(Ul,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:r.jsx(se,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:ce=>ce.preventDefault(),...x,...ze,onPlaced:()=>G(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:we(x.onKeyDown,ce=>{const Ke=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!Ke&&ce.key.length===1&&Q(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let Ve=I().filter(Me=>!Me.disabled).map(Me=>Me.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(Ve=Ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const Me=ce.target,De=Ve.indexOf(Me);Ve=Ve.slice(De+1)}setTimeout(()=>R(Ve)),ce.preventDefault()}})})})})})})});f4.displayName=IF;var FF="SelectItemAlignedPosition",p4=f.forwardRef((t,e)=>{const{__scopeSelect:s,onPlaced:n,...i}=t,a=va(mo,s),o=ba(mo,s),[l,c]=f.useState(null),[d,h]=f.useState(null),u=Nt(e,k=>h(k)),m=tf(s),y=f.useRef(!1),v=f.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:x,focusSelectedItem:p}=o,w=f.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&g&&b&&x){const k=a.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),M=a.valueNode.getBoundingClientRect(),T=x.getBoundingClientRect();if(a.dir!=="rtl"){const Me=T.left-P.left,De=M.left-Me,pt=k.left-De,K=k.width+pt,pe=Math.max(K,P.width),st=window.innerWidth-nn,qe=oj(De,[nn,Math.max(nn,st-pe)]);l.style.minWidth=K+"px",l.style.left=qe+"px"}else{const Me=P.right-T.right,De=window.innerWidth-M.right-Me,pt=window.innerWidth-k.right-De,K=k.width+pt,pe=Math.max(K,P.width),st=window.innerWidth-nn,qe=oj(De,[nn,Math.max(nn,st-pe)]);l.style.minWidth=K+"px",l.style.right=qe+"px"}const E=m(),I=window.innerHeight-nn*2,V=g.scrollHeight,G=window.getComputedStyle(d),A=parseInt(G.borderTopWidth,10),R=parseInt(G.paddingTop,10),$=parseInt(G.borderBottomWidth,10),O=parseInt(G.paddingBottom,10),U=A+R+V+O+$,J=Math.min(b.offsetHeight*5,U),Q=window.getComputedStyle(g),Oe=parseInt(Q.paddingTop,10),ge=parseInt(Q.paddingBottom,10),He=k.top+k.height/2-nn,se=I-He,ze=b.offsetHeight/2,ce=b.offsetTop+ze,Ke=A+R+ce,je=U-Ke;if(Ke<=He){const Me=E.length>0&&b===E[E.length-1].ref.current;l.style.bottom="0px";const De=d.clientHeight-g.offsetTop-g.offsetHeight,pt=Math.max(se,ze+(Me?ge:0)+De+$),K=Ke+pt;l.style.height=K+"px"}else{const Me=E.length>0&&b===E[0].ref.current;l.style.top="0px";const pt=Math.max(He,A+g.offsetTop+(Me?Oe:0)+ze)+je;l.style.height=pt+"px",g.scrollTop=Ke-He+g.offsetTop}l.style.margin=`${nn}px 0`,l.style.minHeight=J+"px",l.style.maxHeight=I+"px",n==null||n(),requestAnimationFrame(()=>y.current=!0)}},[m,a.trigger,a.valueNode,l,d,g,b,x,a.dir,n]);Ns(()=>w(),[w]);const[j,S]=f.useState();Ns(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const _=f.useCallback(k=>{k&&v.current===!0&&(w(),p==null||p(),v.current=!1)},[w,p]);return r.jsx(UF,{scope:s,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:_,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:r.jsx(We.div,{...i,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});p4.displayName=FF;var $F="SelectPopperPosition",l0=f.forwardRef((t,e)=>{const{__scopeSelect:s,align:n="start",collisionPadding:i=nn,...a}=t,o=sf(s);return r.jsx(Wx,{...o,...a,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});l0.displayName=$F;var[UF,Cy]=Gl(mo,{}),c0="SelectViewport",g4=f.forwardRef((t,e)=>{const{__scopeSelect:s,nonce:n,...i}=t,a=ba(c0,s),o=Cy(c0,s),l=Nt(e,a.onViewportChange),c=f.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),r.jsx(ef.Slot,{scope:s,children:r.jsx(We.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:we(i.onScroll,d=>{const h=d.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&u){const y=Math.abs(c.current-h.scrollTop);if(y>0){const v=window.innerHeight-nn*2,g=parseFloat(u.style.minHeight),b=parseFloat(u.style.height),x=Math.max(g,b);if(x<v){const p=x+y,w=Math.min(v,p),j=p-w;u.style.height=w+"px",u.style.bottom==="0px"&&(h.scrollTop=j>0?j:0,u.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});g4.displayName=c0;var x4="SelectGroup",[BF,zF]=Gl(x4),VF=f.forwardRef((t,e)=>{const{__scopeSelect:s,...n}=t,i=xn();return r.jsx(BF,{scope:s,id:i,children:r.jsx(We.div,{role:"group","aria-labelledby":i,...n,ref:e})})});VF.displayName=x4;var y4="SelectLabel",v4=f.forwardRef((t,e)=>{const{__scopeSelect:s,...n}=t,i=zF(y4,s);return r.jsx(We.div,{id:i.id,...n,ref:e})});v4.displayName=y4;var qh="SelectItem",[WF,b4]=Gl(qh),w4=f.forwardRef((t,e)=>{const{__scopeSelect:s,value:n,disabled:i=!1,textValue:a,...o}=t,l=va(qh,s),c=ba(qh,s),d=l.value===n,[h,u]=f.useState(a??""),[m,y]=f.useState(!1),v=Nt(e,p=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,p,n,i)}),g=xn(),b=f.useRef("touch"),x=()=>{i||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(WF,{scope:s,value:n,disabled:i,textId:g,isSelected:d,onItemTextChange:f.useCallback(p=>{u(w=>w||((p==null?void 0:p.textContent)??"").trim())},[]),children:r.jsx(ef.ItemSlot,{scope:s,value:n,disabled:i,textValue:h,children:r.jsx(We.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:we(o.onFocus,()=>y(!0)),onBlur:we(o.onBlur,()=>y(!1)),onClick:we(o.onClick,()=>{b.current!=="mouse"&&x()}),onPointerUp:we(o.onPointerUp,()=>{b.current==="mouse"&&x()}),onPointerDown:we(o.onPointerDown,p=>{b.current=p.pointerType}),onPointerMove:we(o.onPointerMove,p=>{var w;b.current=p.pointerType,i?(w=c.onItemLeave)==null||w.call(c):b.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:we(o.onPointerLeave,p=>{var w;p.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:we(o.onKeyDown,p=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&p.key===" "||(PF.includes(p.key)&&x(),p.key===" "&&p.preventDefault())})})})})});w4.displayName=qh;var vc="SelectItemText",j4=f.forwardRef((t,e)=>{const{__scopeSelect:s,className:n,style:i,...a}=t,o=va(vc,s),l=ba(vc,s),c=b4(vc,s),d=DF(vc,s),[h,u]=f.useState(null),m=Nt(e,x=>u(x),c.onItemTextChange,x=>{var p;return(p=l.itemTextRefCallback)==null?void 0:p.call(l,x,c.value,c.disabled)}),y=h==null?void 0:h.textContent,v=f.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=d;return Ns(()=>(g(v),()=>b(v)),[g,b,v]),r.jsxs(r.Fragment,{children:[r.jsx(We.span,{id:c.textId,...a,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?yo.createPortal(a.children,o.valueNode):null]})});j4.displayName=vc;var N4="SelectItemIndicator",S4=f.forwardRef((t,e)=>{const{__scopeSelect:s,...n}=t;return b4(N4,s).isSelected?r.jsx(We.span,{"aria-hidden":!0,...n,ref:e}):null});S4.displayName=N4;var d0="SelectScrollUpButton",C4=f.forwardRef((t,e)=>{const s=ba(d0,t.__scopeSelect),n=Cy(d0,t.__scopeSelect),[i,a]=f.useState(!1),o=Nt(e,n.onScrollButtonChange);return Ns(()=>{if(s.viewport&&s.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=s.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),i?r.jsx(k4,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=s;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});C4.displayName=d0;var u0="SelectScrollDownButton",T4=f.forwardRef((t,e)=>{const s=ba(u0,t.__scopeSelect),n=Cy(u0,t.__scopeSelect),[i,a]=f.useState(!1),o=Nt(e,n.onScrollButtonChange);return Ns(()=>{if(s.viewport&&s.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;a(h)};const c=s.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),i?r.jsx(k4,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=s;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});T4.displayName=u0;var k4=f.forwardRef((t,e)=>{const{__scopeSelect:s,onAutoScroll:n,...i}=t,a=ba("SelectScrollButton",s),o=f.useRef(null),l=tf(s),c=f.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),Ns(()=>{var h;const d=l().find(u=>u.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),r.jsx(We.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:we(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:we(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:we(i.onPointerLeave,()=>{c()})})}),HF="SelectSeparator",E4=f.forwardRef((t,e)=>{const{__scopeSelect:s,...n}=t;return r.jsx(We.div,{"aria-hidden":!0,...n,ref:e})});E4.displayName=HF;var h0="SelectArrow",KF=f.forwardRef((t,e)=>{const{__scopeSelect:s,...n}=t,i=sf(s),a=va(h0,s),o=ba(h0,s);return a.open&&o.position==="popper"?r.jsx(Hx,{...i,...n,ref:e}):null});KF.displayName=h0;var GF="SelectBubbleInput",P4=f.forwardRef(({__scopeSelect:t,value:e,...s},n)=>{const i=f.useRef(null),a=Nt(n,i),o=kF(e);return f.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const u=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(u)}},[o,e]),r.jsx(We.select,{...s,style:{...r2,...s.style},ref:a,defaultValue:e})});P4.displayName=GF;function _4(t){return t===""||t===void 0}function M4(t){const e=gr(t),s=f.useRef(""),n=f.useRef(0),i=f.useCallback(o=>{const l=s.current+o;e(l),function c(d){s.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=f.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,i,a]}function A4(t,e,s){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=s?t.indexOf(s):-1;let o=qF(t,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==s));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==s?c:void 0}function qF(t,e){return t.map((s,n)=>t[(e+n)%t.length])}var QF=i4,D4=o4,XF=c4,YF=d4,JF=u4,R4=h4,ZF=g4,O4=v4,I4=w4,e$=j4,t$=S4,L4=C4,F4=T4,$4=E4;const Dn=QF,Rn=XF,un=f.forwardRef(({className:t,children:e,...s},n)=>r.jsxs(D4,{ref:n,className:Ue("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[e,r.jsx(YF,{asChild:!0,children:r.jsx(gi,{className:"h-4 w-4 opacity-50"})})]}));un.displayName=D4.displayName;const U4=f.forwardRef(({className:t,...e},s)=>r.jsx(L4,{ref:s,className:Ue("flex cursor-default items-center justify-center py-1",t),...e,children:r.jsx(NA,{className:"h-4 w-4"})}));U4.displayName=L4.displayName;const B4=f.forwardRef(({className:t,...e},s)=>r.jsx(F4,{ref:s,className:Ue("flex cursor-default items-center justify-center py-1",t),...e,children:r.jsx(gi,{className:"h-4 w-4"})}));B4.displayName=F4.displayName;const hn=f.forwardRef(({className:t,children:e,position:s="popper",...n},i)=>r.jsx(JF,{children:r.jsxs(R4,{ref:i,className:Ue("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...n,children:[r.jsx(U4,{}),r.jsx(ZF,{className:Ue("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),r.jsx(B4,{})]})}));hn.displayName=R4.displayName;const s$=f.forwardRef(({className:t,...e},s)=>r.jsx(O4,{ref:s,className:Ue("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));s$.displayName=O4.displayName;const wt=f.forwardRef(({className:t,children:e,...s},n)=>r.jsxs(I4,{ref:n,className:Ue("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(t$,{children:r.jsx(C2,{className:"h-4 w-4"})})}),r.jsx(e$,{children:e})]}));wt.displayName=I4.displayName;const r$=f.forwardRef(({className:t,...e},s)=>r.jsx($4,{ref:s,className:Ue("-mx-1 my-1 h-px bg-muted",t),...e}));r$.displayName=$4.displayName;var Ty="Progress",ky=100,[n$]=Zr(Ty),[i$,a$]=n$(Ty),z4=f.forwardRef((t,e)=>{const{__scopeProgress:s,value:n=null,max:i,getValueLabel:a=o$,...o}=t;(i||i===0)&&!lj(i)&&console.error(l$(`${i}`,"Progress"));const l=lj(i)?i:ky;n!==null&&!cj(n,l)&&console.error(c$(`${n}`,"Progress"));const c=cj(n,l)?n:null,d=Qh(c)?a(c,l):void 0;return r.jsx(i$,{scope:s,value:c,max:l,children:r.jsx(We.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Qh(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":H4(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});z4.displayName=Ty;var V4="ProgressIndicator",W4=f.forwardRef((t,e)=>{const{__scopeProgress:s,...n}=t,i=a$(V4,s);return r.jsx(We.div,{"data-state":H4(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:e})});W4.displayName=V4;function o$(t,e){return`${Math.round(t/e*100)}%`}function H4(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Qh(t){return typeof t=="number"}function lj(t){return Qh(t)&&!isNaN(t)&&t>0}function cj(t,e){return Qh(t)&&!isNaN(t)&&t<=e&&t>=0}function l$(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${ky}\`.`}function c$(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${ky} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var K4=z4,d$=W4;const G4=f.forwardRef(({className:t,value:e,...s},n)=>r.jsx(K4,{ref:n,className:Ue("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:r.jsx(d$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));G4.displayName=K4.displayName;function u$(){const{user:t}=Ss(),{toast:e}=Zs(),s=Ir(),{lastMessage:n}=Fm(),[i,a]=f.useState("BTCUSDT"),[o,l]=f.useState(30),[c,d]=f.useState(""),[h,u]=f.useState(null),[m,y]=f.useState("0"),{data:v}=ns({queryKey:["/api/market-data"],refetchInterval:5e3}),{data:g}=ns({queryKey:["/api/options-settings"]}),{data:b}=ns({queryKey:["/api/trades/active"],enabled:!!t}),{data:x}=ns({queryKey:["/api/balances"],enabled:!!t}),p=Ms({mutationFn:async T=>{var V;console.log(" TRADING PAGE: Placing trade with data:",T),console.log(" TRADING PAGE: User ID:",t==null?void 0:t.id),console.log(" TRADING PAGE: Auth token:",((V=localStorage.getItem("authToken"))==null?void 0:V.substring(0,30))+"...");const E=await fetch("/api/trades",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({userId:t==null?void 0:t.id,symbol:T.symbol,type:T.type,direction:T.direction,amount:T.amount,duration:T.duration})});if(console.log(" TRADING PAGE: Response status:",E.status),!E.ok){const G=await E.text();throw console.error(" TRADING PAGE: Error response:",G),new Error(G||"Failed to place trade")}const I=await E.json();return console.log(" TRADING PAGE: Success response:",I),I},onSuccess:()=>{e({title:"Trade Placed Successfully",description:"Your binary options trade has been placed."}),s.invalidateQueries({queryKey:["/api/trades/active"]}),s.invalidateQueries({queryKey:["/api/balances"]}),d("")},onError:T=>{e({title:"Trade Failed",description:T.message||"Failed to place trade.",variant:"destructive"})}});f.useEffect(()=>{if((n==null?void 0:n.type)==="price_update"&&n.data){const T=n.data;T.symbol===i&&y(T.price)}},[n,i]),f.useEffect(()=>{if(v){const T=v.find(E=>E.symbol===i);T&&y(T.price)}},[v,i]),f.useEffect(()=>{const T=setInterval(()=>{if(b){const E=new Date().getTime();b.forEach(I=>{const V=new Date(I.expiresAt).getTime();Math.max(0,V-E)===0&&s.invalidateQueries({queryKey:["/api/trades/active"]})})}},1e3);return()=>clearInterval(T)},[b,s]);const w=v==null?void 0:v.find(T=>T.symbol===i),j=(g==null?void 0:g.filter(T=>T.isActive))||[],S=j.find(T=>T.duration===o),_=Array.isArray(x)?x.find(T=>T.symbol==="USDT"):null,k=T=>{if(!t){e({title:"Login Required",description:"Please login to place trades.",variant:"destructive"});return}if(!c||parseFloat(c)<parseFloat((S==null?void 0:S.minAmount)||"0")){e({title:"Invalid Amount",description:`Minimum amount is ${S==null?void 0:S.minAmount} USDT`,variant:"destructive"});return}p.mutate({symbol:i,type:"options",direction:T,amount:c,duration:o})},P=T=>{const E=new Date().getTime(),I=new Date(T).getTime(),V=Math.max(0,I-E);return Math.floor(V/1e3)},M=T=>{const E=Math.floor(T/60),I=T%60;return`${E}:${I.toString().padStart(2,"0")}`};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"METACHROME Binary Options Trading"}),r.jsx("p",{className:"text-gray-300",children:"Trade binary options with customizable durations and admin-controlled outcomes"})]}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs(de,{className:"bg-slate-800/90 border-purple-500/20",children:[r.jsx(nt,{children:r.jsxs(it,{className:"text-white flex items-center gap-2",children:[r.jsx(ur,{className:"w-5 h-5 text-purple-400"}),"Market Selection"]})}),r.jsx(he,{className:"space-y-4",children:r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:v==null?void 0:v.map(T=>r.jsxs(W,{variant:i===T.symbol?"default":"outline",className:`p-4 h-auto flex flex-col items-start ${i===T.symbol?"bg-purple-600 hover:bg-purple-700":"bg-slate-700/50 hover:bg-slate-700"}`,onClick:()=>a(T.symbol),children:[r.jsx("div",{className:"font-semibold text-white",children:T.symbol.replace("USDT","/USDT")}),r.jsxs("div",{className:"text-sm text-gray-300",children:["$",parseFloat(T.price).toLocaleString()]}),r.jsxs("div",{className:`text-xs flex items-center gap-1 ${parseFloat(T.priceChangePercent24h)>=0?"text-green-400":"text-red-400"}`,children:[parseFloat(T.priceChangePercent24h)>=0?r.jsx(Hg,{className:"w-3 h-3"}):r.jsx(Wg,{className:"w-3 h-3"}),parseFloat(T.priceChangePercent24h).toFixed(2),"%"]})]},T.symbol))})})]}),r.jsx(de,{className:"bg-slate-800/90 border-purple-500/20",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:i.replace("USDT","/USDT")}),r.jsxs("div",{className:"text-4xl font-bold text-purple-400 mb-4",children:["$",parseFloat(m).toLocaleString()]}),w&&r.jsxs("div",{className:`flex items-center justify-center gap-2 ${parseFloat(w.priceChangePercent24h)>=0?"text-green-400":"text-red-400"}`,children:[parseFloat(w.priceChangePercent24h)>=0?r.jsx(ur,{className:"w-5 h-5"}):r.jsx(rd,{className:"w-5 h-5"}),r.jsxs("span",{className:"font-semibold",children:[parseFloat(w.priceChangePercent24h).toFixed(2),"% ($",parseFloat(w.priceChange24h).toFixed(2),")"]})]})]})})}),r.jsxs(de,{className:"bg-slate-800/90 border-purple-500/20",children:[r.jsx(nt,{children:r.jsx(it,{className:"text-white",children:"Place Binary Options Trade"})}),r.jsxs(he,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration"}),r.jsxs(Dn,{value:o.toString(),onValueChange:T=>l(parseInt(T)),children:[r.jsx(un,{className:"bg-slate-700 border-slate-600 text-white",children:r.jsx(Rn,{})}),r.jsx(hn,{className:"bg-slate-700 border-slate-600",children:j.map(T=>r.jsxs(wt,{value:T.duration.toString(),children:[T.duration," seconds - Min: $",T.minAmount," - Profit: ",T.profitPercentage,"%"]},T.id))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Amount (USDT)"}),r.jsx(Ee,{type:"number",value:c,onChange:T=>d(T.target.value),placeholder:"Enter amount",className:"bg-slate-700 border-slate-600 text-white",min:(S==null?void 0:S.minAmount)||"0",step:"0.01"}),r.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Min: $",(S==null?void 0:S.minAmount)||"0"," | Available: $",(_==null?void 0:_.available)||"0"]})]})]}),S&&r.jsx("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-300",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Profit Percentage:"})," ",S.profitPercentage,"%"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Potential Profit:"})," $",c?(parseFloat(c)*parseFloat(S.profitPercentage)/100).toFixed(2):"0.00"]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(W,{onClick:()=>k("up"),disabled:p.isPending||!t,className:"bg-green-600 hover:bg-green-700 text-white h-12 text-lg font-semibold",children:[r.jsx(Hg,{className:"w-5 h-5 mr-2"}),"UP / CALL"]}),r.jsxs(W,{onClick:()=>k("down"),disabled:p.isPending||!t,className:"bg-red-600 hover:bg-red-700 text-white h-12 text-lg font-semibold",children:[r.jsx(Wg,{className:"w-5 h-5 mr-2"}),"DOWN / PUT"]})]}),!t&&r.jsx("div",{className:"text-center text-yellow-400",children:"Please login to place trades"})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(de,{className:"bg-slate-800/90 border-purple-500/20",children:[r.jsx(nt,{children:r.jsx(it,{className:"text-white",children:"Active Trades"})}),r.jsx(he,{className:"space-y-4",children:b&&b.length>0?b.map(T=>{const E=P(T.expiresAt),I=(T.duration-E)/T.duration*100;return r.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-white",children:T.symbol.replace("USDT","/USDT")}),r.jsxs("div",{className:"text-sm text-gray-300",children:["$",T.amount," USDT"]})]}),r.jsx(xt,{variant:T.direction==="up"?"default":"destructive",className:T.direction==="up"?"bg-green-600":"bg-red-600",children:T.direction.toUpperCase()})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-300",children:"Time Left:"}),r.jsx("span",{className:"text-white font-mono",children:M(E)})]}),r.jsx(G4,{value:I,className:"h-2"}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-300",children:"Entry Price:"}),r.jsxs("span",{className:"text-white",children:["$",parseFloat(T.price).toFixed(2)]})]})]})]},T.id)}):r.jsx("div",{className:"text-gray-400 text-center py-8",children:"No active trades"})})]}),t&&r.jsxs(de,{className:"bg-slate-800/90 border-purple-500/20",children:[r.jsx(nt,{children:r.jsx(it,{className:"text-white",children:"Account Balance"})}),r.jsxs(he,{children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:["$",(_==null?void 0:_.available)||"0.00"," USDT"]}),r.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:["Locked: $",(_==null?void 0:_.locked)||"0.00"," USDT"]})]})]})]})]})]})})}var rf="Dialog",[q4]=Zr(rf),[h$,Nn]=q4(rf),Q4=t=>{const{__scopeDialog:e,children:s,open:n,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,l=f.useRef(null),c=f.useRef(null),[d,h]=ca({prop:n,defaultProp:i??!1,onChange:a,caller:rf});return r.jsx(h$,{scope:e,triggerRef:l,contentRef:c,contentId:xn(),titleId:xn(),descriptionId:xn(),open:d,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(u=>!u),[h]),modal:o,children:s})};Q4.displayName=rf;var X4="DialogTrigger",Y4=f.forwardRef((t,e)=>{const{__scopeDialog:s,...n}=t,i=Nn(X4,s),a=Nt(e,i.triggerRef);return r.jsx(We.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":_y(i.open),...n,ref:a,onClick:we(t.onClick,i.onOpenToggle)})});Y4.displayName=X4;var Ey="DialogPortal",[m$,J4]=q4(Ey,{forceMount:void 0}),Z4=t=>{const{__scopeDialog:e,forceMount:s,children:n,container:i}=t,a=Nn(Ey,e);return r.jsx(m$,{scope:e,forceMount:s,children:f.Children.map(n,o=>r.jsx(en,{present:s||a.open,children:r.jsx(Pd,{asChild:!0,container:i,children:o})}))})};Z4.displayName=Ey;var Xh="DialogOverlay",ek=f.forwardRef((t,e)=>{const s=J4(Xh,t.__scopeDialog),{forceMount:n=s.forceMount,...i}=t,a=Nn(Xh,t.__scopeDialog);return a.modal?r.jsx(en,{present:n||a.open,children:r.jsx(p$,{...i,ref:e})}):null});ek.displayName=Xh;var f$=io("DialogOverlay.RemoveScroll"),p$=f.forwardRef((t,e)=>{const{__scopeDialog:s,...n}=t,i=Nn(Xh,s);return r.jsx(Vm,{as:f$,allowPinchZoom:!0,shards:[i.contentRef],children:r.jsx(We.div,{"data-state":_y(i.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),fo="DialogContent",tk=f.forwardRef((t,e)=>{const s=J4(fo,t.__scopeDialog),{forceMount:n=s.forceMount,...i}=t,a=Nn(fo,t.__scopeDialog);return r.jsx(en,{present:n||a.open,children:a.modal?r.jsx(g$,{...i,ref:e}):r.jsx(x$,{...i,ref:e})})});tk.displayName=fo;var g$=f.forwardRef((t,e)=>{const s=Nn(fo,t.__scopeDialog),n=f.useRef(null),i=Nt(e,s.contentRef,n);return f.useEffect(()=>{const a=n.current;if(a)return qx(a)},[]),r.jsx(sk,{...t,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:we(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:we(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:we(t.onFocusOutside,a=>a.preventDefault())})}),x$=f.forwardRef((t,e)=>{const s=Nn(fo,t.__scopeDialog),n=f.useRef(!1),i=f.useRef(!1);return r.jsx(sk,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(n.current||(l=s.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=s.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),sk=f.forwardRef((t,e)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,l=Nn(fo,s),c=f.useRef(null),d=Nt(e,c);return Gx(),r.jsxs(r.Fragment,{children:[r.jsx(Um,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:r.jsx(Ul,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":_y(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(y$,{titleId:l.titleId}),r.jsx(b$,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Py="DialogTitle",rk=f.forwardRef((t,e)=>{const{__scopeDialog:s,...n}=t,i=Nn(Py,s);return r.jsx(We.h2,{id:i.titleId,...n,ref:e})});rk.displayName=Py;var nk="DialogDescription",ik=f.forwardRef((t,e)=>{const{__scopeDialog:s,...n}=t,i=Nn(nk,s);return r.jsx(We.p,{id:i.descriptionId,...n,ref:e})});ik.displayName=nk;var ak="DialogClose",ok=f.forwardRef((t,e)=>{const{__scopeDialog:s,...n}=t,i=Nn(ak,s);return r.jsx(We.button,{type:"button",...n,ref:e,onClick:we(t.onClick,()=>i.onOpenChange(!1))})});ok.displayName=ak;function _y(t){return t?"open":"closed"}var lk="DialogTitleWarning",[_7,ck]=kM(lk,{contentName:fo,titleName:Py,docsSlug:"dialog"}),y$=({titleId:t})=>{const e=ck(lk),s=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return f.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},v$="DialogDescriptionWarning",b$=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ck(v$).contentName}}.`;return f.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},w$=Q4,j$=Y4,N$=Z4,dk=ek,uk=tk,hk=rk,mk=ik,S$=ok;const el=w$,dj=j$,C$=N$,fk=f.forwardRef(({className:t,...e},s)=>r.jsx(dk,{ref:s,className:Ue("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));fk.displayName=dk.displayName;const Qa=f.forwardRef(({className:t,children:e,...s},n)=>r.jsxs(C$,{children:[r.jsx(fk,{}),r.jsxs(uk,{ref:n,className:Ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[e,r.jsxs(S$,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Bl,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Qa.displayName=uk.displayName;const Xa=({className:t,...e})=>r.jsx("div",{className:Ue("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Xa.displayName="DialogHeader";const Ya=f.forwardRef(({className:t,...e},s)=>r.jsx(hk,{ref:s,className:Ue("text-lg font-semibold leading-none tracking-tight",t),...e}));Ya.displayName=hk.displayName;const T$=f.forwardRef(({className:t,...e},s)=>r.jsx(mk,{ref:s,className:Ue("text-sm text-muted-foreground",t),...e}));T$.displayName=mk.displayName;var k$="Label",pk=f.forwardRef((t,e)=>r.jsx(We.label,{...t,ref:e,onMouseDown:s=>{var i;s.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));pk.displayName=k$;var gk=pk;const E$=Pm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Bt=f.forwardRef(({className:t,...e},s)=>r.jsx(gk,{ref:s,className:Ue(E$(),t),...e}));Bt.displayName=gk.displayName;var Fd={},P$=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},xk={},Lr={};let My;const _$=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Lr.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Lr.getSymbolTotalCodewords=function(e){return _$[e]};Lr.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Lr.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');My=e};Lr.isKanjiModeEnabled=function(){return typeof My<"u"};Lr.toSJIS=function(e){return My(e)};var nf={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+s)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(nf);function yk(){this.buffer=[],this.length=0}yk.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let s=0;s<e;s++)this.putBit((t>>>e-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var M$=yk;function $d(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}$d.prototype.set=function(t,e,s,n){const i=t*this.size+e;this.data[i]=s,n&&(this.reservedBit[i]=!0)};$d.prototype.get=function(t,e){return this.data[t*this.size+e]};$d.prototype.xor=function(t,e,s){this.data[t*this.size+e]^=s};$d.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var A$=$d,vk={};(function(t){const e=Lr.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,a=e(n),o=a===145?26:Math.ceil((a-13)/(2*i-2))*2,l=[a-7];for(let c=1;c<i-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},t.getPositions=function(n){const i=[],a=t.getRowColCoords(n),o=a.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||i.push([a[l],a[c]]);return i}})(vk);var bk={};const D$=Lr.getSymbolSize,uj=7;bk.getPositions=function(e){const s=D$(e);return[[0,0],[s-uj,0],[0,s-uj]]};var wk={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const a=i.size;let o=0,l=0,c=0,d=null,h=null;for(let u=0;u<a;u++){l=c=0,d=h=null;for(let m=0;m<a;m++){let y=i.get(u,m);y===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=y,l=1),y=i.get(m,u),y===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=y,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const a=i.size;let o=0;for(let l=0;l<a-1;l++)for(let c=0;c<a-1;c++){const d=i.get(l,c)+i.get(l,c+1)+i.get(l+1,c)+i.get(l+1,c+1);(d===4||d===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const a=i.size;let o=0,l=0,c=0;for(let d=0;d<a;d++){l=c=0;for(let h=0;h<a;h++)l=l<<1&2047|i.get(d,h),h>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|i.get(h,d),h>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let a=0;const o=i.data.length;for(let c=0;c<o;c++)a+=i.data[c];return Math.abs(Math.ceil(a*100/o/5)-10)*e.N4};function s(n,i,a){switch(n){case t.Patterns.PATTERN000:return(i+a)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return a%3===0;case t.Patterns.PATTERN011:return(i+a)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(a/3))%2===0;case t.Patterns.PATTERN101:return i*a%2+i*a%3===0;case t.Patterns.PATTERN110:return(i*a%2+i*a%3)%2===0;case t.Patterns.PATTERN111:return(i*a%3+(i+a)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,a){const o=a.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)a.isReserved(c,l)||a.xor(c,l,s(i,c,l))},t.getBestMask=function(i,a){const o=Object.keys(t.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){a(d),t.applyMask(d,i);const h=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(d,i),h<c&&(c=h,l=d)}return l}})(wk);var af={};const Gi=nf,Tu=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ku=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];af.getBlocksCount=function(e,s){switch(s){case Gi.L:return Tu[(e-1)*4+0];case Gi.M:return Tu[(e-1)*4+1];case Gi.Q:return Tu[(e-1)*4+2];case Gi.H:return Tu[(e-1)*4+3];default:return}};af.getTotalCodewordsCount=function(e,s){switch(s){case Gi.L:return ku[(e-1)*4+0];case Gi.M:return ku[(e-1)*4+1];case Gi.Q:return ku[(e-1)*4+2];case Gi.H:return ku[(e-1)*4+3];default:return}};var jk={},of={};const Ic=new Uint8Array(512),Yh=new Uint8Array(256);(function(){let e=1;for(let s=0;s<255;s++)Ic[s]=e,Yh[e]=s,e<<=1,e&256&&(e^=285);for(let s=255;s<512;s++)Ic[s]=Ic[s-255]})();of.log=function(e){if(e<1)throw new Error("log("+e+")");return Yh[e]};of.exp=function(e){return Ic[e]};of.mul=function(e,s){return e===0||s===0?0:Ic[Yh[e]+Yh[s]]};(function(t){const e=of;t.mul=function(n,i){const a=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<i.length;l++)a[o+l]^=e.mul(n[o],i[l]);return a},t.mod=function(n,i){let a=new Uint8Array(n);for(;a.length-i.length>=0;){const o=a[0];for(let c=0;c<i.length;c++)a[c]^=e.mul(i[c],o);let l=0;for(;l<a.length&&a[l]===0;)l++;a=a.slice(l)}return a},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let a=0;a<n;a++)i=t.mul(i,new Uint8Array([1,e.exp(a)]));return i}})(jk);const Nk=jk;function Ay(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Ay.prototype.initialize=function(e){this.degree=e,this.genPoly=Nk.generateECPolynomial(this.degree)};Ay.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(e.length+this.degree);s.set(e);const n=Nk.mod(s,this.genPoly),i=this.degree-n.length;if(i>0){const a=new Uint8Array(this.degree);return a.set(n,i),a}return n};var R$=Ay,Sk={},wa={},Dy={};Dy.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Hn={};const Ck="[0-9]+",O$="[A-Z $%*+\\-./:]+";let fd="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";fd=fd.replace(/u/g,"\\u");const I$="(?:(?![A-Z0-9 $%*+\\-./:]|"+fd+`)(?:.|[\r
]))+`;Hn.KANJI=new RegExp(fd,"g");Hn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Hn.BYTE=new RegExp(I$,"g");Hn.NUMERIC=new RegExp(Ck,"g");Hn.ALPHANUMERIC=new RegExp(O$,"g");const L$=new RegExp("^"+fd+"$"),F$=new RegExp("^"+Ck+"$"),$$=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Hn.testKanji=function(e){return L$.test(e)};Hn.testNumeric=function(e){return F$.test(e)};Hn.testAlphanumeric=function(e){return $$.test(e)};(function(t){const e=Dy,s=Hn;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(a,o){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?a.ccBits[0]:o<27?a.ccBits[1]:a.ccBits[2]},t.getBestModeForData=function(a){return s.testNumeric(a)?t.NUMERIC:s.testAlphanumeric(a)?t.ALPHANUMERIC:s.testKanji(a)?t.KANJI:t.BYTE},t.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},t.isValid=function(a){return a&&a.bit&&a.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(a,o){if(t.isValid(a))return a;try{return n(a)}catch{return o}}})(wa);(function(t){const e=Lr,s=af,n=nf,i=wa,a=Dy,o=7973,l=e.getBCHDigit(o);function c(m,y,v){for(let g=1;g<=40;g++)if(y<=t.getCapacity(g,v,m))return g}function d(m,y){return i.getCharCountIndicator(m,y)+4}function h(m,y){let v=0;return m.forEach(function(g){const b=d(g.mode,y);v+=b+g.getBitsLength()}),v}function u(m,y){for(let v=1;v<=40;v++)if(h(m,v)<=t.getCapacity(v,y,i.MIXED))return v}t.from=function(y,v){return a.isValid(y)?parseInt(y,10):v},t.getCapacity=function(y,v,g){if(!a.isValid(y))throw new Error("Invalid QR Code version");typeof g>"u"&&(g=i.BYTE);const b=e.getSymbolTotalCodewords(y),x=s.getTotalCodewordsCount(y,v),p=(b-x)*8;if(g===i.MIXED)return p;const w=p-d(g,y);switch(g){case i.NUMERIC:return Math.floor(w/10*3);case i.ALPHANUMERIC:return Math.floor(w/11*2);case i.KANJI:return Math.floor(w/13);case i.BYTE:default:return Math.floor(w/8)}},t.getBestVersionForData=function(y,v){let g;const b=n.from(v,n.M);if(Array.isArray(y)){if(y.length>1)return u(y,b);if(y.length===0)return 1;g=y[0]}else g=y;return c(g.mode,g.getLength(),b)},t.getEncodedBits=function(y){if(!a.isValid(y)||y<7)throw new Error("Invalid QR Code version");let v=y<<12;for(;e.getBCHDigit(v)-l>=0;)v^=o<<e.getBCHDigit(v)-l;return y<<12|v}})(Sk);var Tk={};const m0=Lr,kk=1335,U$=21522,hj=m0.getBCHDigit(kk);Tk.getEncodedBits=function(e,s){const n=e.bit<<3|s;let i=n<<10;for(;m0.getBCHDigit(i)-hj>=0;)i^=kk<<m0.getBCHDigit(i)-hj;return(n<<10|i)^U$};var Ek={};const B$=wa;function kl(t){this.mode=B$.NUMERIC,this.data=t.toString()}kl.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};kl.prototype.getLength=function(){return this.data.length};kl.prototype.getBitsLength=function(){return kl.getBitsLength(this.data.length)};kl.prototype.write=function(e){let s,n,i;for(s=0;s+3<=this.data.length;s+=3)n=this.data.substr(s,3),i=parseInt(n,10),e.put(i,10);const a=this.data.length-s;a>0&&(n=this.data.substr(s),i=parseInt(n,10),e.put(i,a*3+1))};var z$=kl;const V$=wa,Tp=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function El(t){this.mode=V$.ALPHANUMERIC,this.data=t}El.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};El.prototype.getLength=function(){return this.data.length};El.prototype.getBitsLength=function(){return El.getBitsLength(this.data.length)};El.prototype.write=function(e){let s;for(s=0;s+2<=this.data.length;s+=2){let n=Tp.indexOf(this.data[s])*45;n+=Tp.indexOf(this.data[s+1]),e.put(n,11)}this.data.length%2&&e.put(Tp.indexOf(this.data[s]),6)};var W$=El;const H$=wa;function Pl(t){this.mode=H$.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Pl.getBitsLength=function(e){return e*8};Pl.prototype.getLength=function(){return this.data.length};Pl.prototype.getBitsLength=function(){return Pl.getBitsLength(this.data.length)};Pl.prototype.write=function(t){for(let e=0,s=this.data.length;e<s;e++)t.put(this.data[e],8)};var K$=Pl;const G$=wa,q$=Lr;function _l(t){this.mode=G$.KANJI,this.data=t}_l.getBitsLength=function(e){return e*13};_l.prototype.getLength=function(){return this.data.length};_l.prototype.getBitsLength=function(){return _l.getBitsLength(this.data.length)};_l.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let s=q$.toSJIS(this.data[e]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),t.put(s,13)}};var Q$=_l,Pk={exports:{}};(function(t){var e={single_source_shortest_paths:function(s,n,i){var a={},o={};o[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var c,d,h,u,m,y,v,g,b;!l.empty();){c=l.pop(),d=c.value,u=c.cost,m=s[d]||{};for(h in m)m.hasOwnProperty(h)&&(y=m[h],v=u+y,g=o[h],b=typeof o[h]>"u",(b||g>v)&&(o[h]=v,l.push(h,v),a[h]=d))}if(typeof i<"u"&&typeof o[i]>"u"){var x=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(x)}return a},extract_shortest_path_from_predecessor_list:function(s,n){for(var i=[],a=n;a;)i.push(a),s[a],a=s[a];return i.reverse(),i},find_path:function(s,n,i){var a=e.single_source_shortest_paths(s,n,i);return e.extract_shortest_path_from_predecessor_list(a,i)},PriorityQueue:{make:function(s){var n=e.PriorityQueue,i={},a;s=s||{};for(a in n)n.hasOwnProperty(a)&&(i[a]=n[a]);return i.queue=[],i.sorter=s.sorter||n.default_sorter,i},default_sorter:function(s,n){return s.cost-n.cost},push:function(s,n){var i={value:s,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Pk);var X$=Pk.exports;(function(t){const e=wa,s=z$,n=W$,i=K$,a=Q$,o=Hn,l=Lr,c=X$;function d(x){return unescape(encodeURIComponent(x)).length}function h(x,p,w){const j=[];let S;for(;(S=x.exec(w))!==null;)j.push({data:S[0],index:S.index,mode:p,length:S[0].length});return j}function u(x){const p=h(o.NUMERIC,e.NUMERIC,x),w=h(o.ALPHANUMERIC,e.ALPHANUMERIC,x);let j,S;return l.isKanjiModeEnabled()?(j=h(o.BYTE,e.BYTE,x),S=h(o.KANJI,e.KANJI,x)):(j=h(o.BYTE_KANJI,e.BYTE,x),S=[]),p.concat(w,j,S).sort(function(k,P){return k.index-P.index}).map(function(k){return{data:k.data,mode:k.mode,length:k.length}})}function m(x,p){switch(p){case e.NUMERIC:return s.getBitsLength(x);case e.ALPHANUMERIC:return n.getBitsLength(x);case e.KANJI:return a.getBitsLength(x);case e.BYTE:return i.getBitsLength(x)}}function y(x){return x.reduce(function(p,w){const j=p.length-1>=0?p[p.length-1]:null;return j&&j.mode===w.mode?(p[p.length-1].data+=w.data,p):(p.push(w),p)},[])}function v(x){const p=[];for(let w=0;w<x.length;w++){const j=x[w];switch(j.mode){case e.NUMERIC:p.push([j,{data:j.data,mode:e.ALPHANUMERIC,length:j.length},{data:j.data,mode:e.BYTE,length:j.length}]);break;case e.ALPHANUMERIC:p.push([j,{data:j.data,mode:e.BYTE,length:j.length}]);break;case e.KANJI:p.push([j,{data:j.data,mode:e.BYTE,length:d(j.data)}]);break;case e.BYTE:p.push([{data:j.data,mode:e.BYTE,length:d(j.data)}])}}return p}function g(x,p){const w={},j={start:{}};let S=["start"];for(let _=0;_<x.length;_++){const k=x[_],P=[];for(let M=0;M<k.length;M++){const T=k[M],E=""+_+M;P.push(E),w[E]={node:T,lastCount:0},j[E]={};for(let I=0;I<S.length;I++){const V=S[I];w[V]&&w[V].node.mode===T.mode?(j[V][E]=m(w[V].lastCount+T.length,T.mode)-m(w[V].lastCount,T.mode),w[V].lastCount+=T.length):(w[V]&&(w[V].lastCount=T.length),j[V][E]=m(T.length,T.mode)+4+e.getCharCountIndicator(T.mode,p))}}S=P}for(let _=0;_<S.length;_++)j[S[_]].end=0;return{map:j,table:w}}function b(x,p){let w;const j=e.getBestModeForData(x);if(w=e.from(p,j),w!==e.BYTE&&w.bit<j.bit)throw new Error('"'+x+'" cannot be encoded with mode '+e.toString(w)+`.
 Suggested mode is: `+e.toString(j));switch(w===e.KANJI&&!l.isKanjiModeEnabled()&&(w=e.BYTE),w){case e.NUMERIC:return new s(x);case e.ALPHANUMERIC:return new n(x);case e.KANJI:return new a(x);case e.BYTE:return new i(x)}}t.fromArray=function(p){return p.reduce(function(w,j){return typeof j=="string"?w.push(b(j,null)):j.data&&w.push(b(j.data,j.mode)),w},[])},t.fromString=function(p,w){const j=u(p,l.isKanjiModeEnabled()),S=v(j),_=g(S,w),k=c.find_path(_.map,"start","end"),P=[];for(let M=1;M<k.length-1;M++)P.push(_.table[k[M]].node);return t.fromArray(y(P))},t.rawSplit=function(p){return t.fromArray(u(p,l.isKanjiModeEnabled()))}})(Ek);const lf=Lr,kp=nf,Y$=M$,J$=A$,Z$=vk,eU=bk,f0=wk,p0=af,tU=R$,Jh=Sk,sU=Tk,rU=wa,Ep=Ek;function nU(t,e){const s=t.size,n=eU.getPositions(e);for(let i=0;i<n.length;i++){const a=n[i][0],o=n[i][1];for(let l=-1;l<=7;l++)if(!(a+l<=-1||s<=a+l))for(let c=-1;c<=7;c++)o+c<=-1||s<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?t.set(a+l,o+c,!0,!0):t.set(a+l,o+c,!1,!0))}}function iU(t){const e=t.size;for(let s=8;s<e-8;s++){const n=s%2===0;t.set(s,6,n,!0),t.set(6,s,n,!0)}}function aU(t,e){const s=Z$.getPositions(e);for(let n=0;n<s.length;n++){const i=s[n][0],a=s[n][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?t.set(i+o,a+l,!0,!0):t.set(i+o,a+l,!1,!0)}}function oU(t,e){const s=t.size,n=Jh.getEncodedBits(e);let i,a,o;for(let l=0;l<18;l++)i=Math.floor(l/3),a=l%3+s-8-3,o=(n>>l&1)===1,t.set(i,a,o,!0),t.set(a,i,o,!0)}function Pp(t,e,s){const n=t.size,i=sU.getEncodedBits(e,s);let a,o;for(a=0;a<15;a++)o=(i>>a&1)===1,a<6?t.set(a,8,o,!0):a<8?t.set(a+1,8,o,!0):t.set(n-15+a,8,o,!0),a<8?t.set(8,n-a-1,o,!0):a<9?t.set(8,15-a-1+1,o,!0):t.set(8,15-a-1,o,!0);t.set(n-8,8,1,!0)}function lU(t,e){const s=t.size;let n=-1,i=s-1,a=7,o=0;for(let l=s-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,l-c)){let d=!1;o<e.length&&(d=(e[o]>>>a&1)===1),t.set(i,l-c,d),a--,a===-1&&(o++,a=7)}if(i+=n,i<0||s<=i){i-=n,n=-n;break}}}function cU(t,e,s){const n=new Y$;s.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),rU.getCharCountIndicator(c.mode,t)),c.write(n)});const i=lf.getSymbolTotalCodewords(t),a=p0.getTotalCodewordsCount(t,e),o=(i-a)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(o-n.getLengthInBits())/8;for(let c=0;c<l;c++)n.put(c%2?17:236,8);return dU(n,t,e)}function dU(t,e,s){const n=lf.getSymbolTotalCodewords(e),i=p0.getTotalCodewordsCount(e,s),a=n-i,o=p0.getBlocksCount(e,s),l=n%o,c=o-l,d=Math.floor(n/o),h=Math.floor(a/o),u=h+1,m=d-h,y=new tU(m);let v=0;const g=new Array(o),b=new Array(o);let x=0;const p=new Uint8Array(t.buffer);for(let k=0;k<o;k++){const P=k<c?h:u;g[k]=p.slice(v,v+P),b[k]=y.encode(g[k]),v+=P,x=Math.max(x,P)}const w=new Uint8Array(n);let j=0,S,_;for(S=0;S<x;S++)for(_=0;_<o;_++)S<g[_].length&&(w[j++]=g[_][S]);for(S=0;S<m;S++)for(_=0;_<o;_++)w[j++]=b[_][S];return w}function uU(t,e,s,n){let i;if(Array.isArray(t))i=Ep.fromArray(t);else if(typeof t=="string"){let d=e;if(!d){const h=Ep.rawSplit(t);d=Jh.getBestVersionForData(h,s)}i=Ep.fromString(t,d||40)}else throw new Error("Invalid data");const a=Jh.getBestVersionForData(i,s);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=a;else if(e<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const o=cU(e,s,i),l=lf.getSymbolSize(e),c=new J$(l);return nU(c,e),iU(c),aU(c,e),Pp(c,s,0),e>=7&&oU(c,e),lU(c,o),isNaN(n)&&(n=f0.getBestMask(c,Pp.bind(null,c,s))),f0.applyMask(n,c),Pp(c,s,n),{modules:c,version:e,errorCorrectionLevel:s,maskPattern:n,segments:i}}xk.create=function(e,s){if(typeof e>"u"||e==="")throw new Error("No input text");let n=kp.M,i,a;return typeof s<"u"&&(n=kp.from(s.errorCorrectionLevel,kp.M),i=Jh.from(s.version),a=f0.from(s.maskPattern),s.toSJISFunc&&lf.setToSJISFunction(s.toSJISFunc)),uU(e,i,n,a)};var _k={},Ry={};(function(t){function e(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let n=s.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+s);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(a){return[a,a]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,a=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:a,scale:a?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const a=t.getScale(n,i);return Math.floor((n+i.margin*2)*a)},t.qrToImageData=function(n,i,a){const o=i.modules.size,l=i.modules.data,c=t.getScale(o,a),d=Math.floor((o+a.margin*2)*c),h=a.margin*c,u=[a.color.light,a.color.dark];for(let m=0;m<d;m++)for(let y=0;y<d;y++){let v=(m*d+y)*4,g=a.color.light;if(m>=h&&y>=h&&m<d-h&&y<d-h){const b=Math.floor((m-h)/c),x=Math.floor((y-h)/c);g=u[l[b*o+x]?1:0]}n[v++]=g.r,n[v++]=g.g,n[v++]=g.b,n[v]=g.a}}})(Ry);(function(t){const e=Ry;function s(i,a,o){i.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=o,a.width=o,a.style.height=o+"px",a.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(a,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=n()),c=e.getOptions(c);const h=e.getImageWidth(a.modules.size,c),u=d.getContext("2d"),m=u.createImageData(h,h);return e.qrToImageData(m.data,a,c),s(u,d,h),u.putImageData(m,0,0),d},t.renderToDataURL=function(a,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=t.render(a,o,c),h=c.type||"image/png",u=c.rendererOpts||{};return d.toDataURL(h,u.quality)}})(_k);var Mk={};const hU=Ry;function mj(t,e){const s=t.a/255,n=e+'="'+t.hex+'"';return s<1?n+" "+e+'-opacity="'+s.toFixed(2).slice(1)+'"':n}function _p(t,e,s){let n=t+e;return typeof s<"u"&&(n+=" "+s),n}function mU(t,e,s){let n="",i=0,a=!1,o=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%e),d=Math.floor(l/e);!c&&!a&&(a=!0),t[l]?(o++,l>0&&c>0&&t[l-1]||(n+=a?_p("M",c+s,.5+d+s):_p("m",i,0),i=0,a=!1),c+1<e&&t[l+1]||(n+=_p("h",o),o=0)):i++}return n}Mk.render=function(e,s,n){const i=hU.getOptions(s),a=e.modules.size,o=e.modules.data,l=a+i.margin*2,c=i.color.light.a?"<path "+mj(i.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+mj(i.color.dark,"stroke")+' d="'+mU(o,a,i.margin)+'"/>',h='viewBox="0 0 '+l+" "+l+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+h+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof n=="function"&&n(null,m),m};const fU=P$,g0=xk,Ak=_k,pU=Mk;function Oy(t,e,s,n,i){const a=[].slice.call(arguments,1),o=a.length,l=typeof a[o-1]=="function";if(!l&&!fU())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(i=s,s=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=s,s=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(s=e,e=n=void 0):o===2&&!e.getContext&&(n=s,s=e,e=void 0),new Promise(function(c,d){try{const h=g0.create(s,n);c(t(h,e,n))}catch(h){d(h)}})}try{const c=g0.create(s,n);i(null,t(c,e,n))}catch(c){i(c)}}Fd.create=g0.create;Fd.toCanvas=Oy.bind(null,Ak.render);Fd.toDataURL=Oy.bind(null,Ak.renderToDataURL);Fd.toString=Oy.bind(null,function(t,e,s){return pU.render(t,s)});const Dk=({value:t,size:e=128,className:s=""})=>{const n=f.useRef(null);return f.useEffect(()=>{n.current&&t&&Fd.toCanvas(n.current,t,{width:e,margin:1,color:{dark:"#000000",light:"#FFFFFF"}},i=>{i&&console.error("QR Code generation error:",i)})},[t,e]),r.jsx("div",{className:`inline-block bg-white p-1 rounded ${s}`,children:r.jsx("canvas",{ref:n,className:"block",style:{width:e,height:e}})})};var Rk="https://js.stripe.com/v3",gU=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var xU=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Rk,'"]')),s=0;s<e.length;s++){var n=e[s];if(gU.test(n.src))return n}return null},fj=function(e){var s="",n=document.createElement("script");n.src="".concat(Rk).concat(s);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(n),n},yU=function(e,s){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:s})},lc=null,Eu=null,Pu=null,vU=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},bU=function(e,s){return function(){window.Stripe?e(window.Stripe):s(new Error("Stripe.js not available"))}},wU=function(e){return lc!==null?lc:(lc=new Promise(function(s,n){if(typeof window>"u"||typeof document>"u"){s(null);return}if(window.Stripe){s(window.Stripe);return}try{var i=xU();if(!(i&&e)){if(!i)i=fj(e);else if(i&&Pu!==null&&Eu!==null){var a;i.removeEventListener("load",Pu),i.removeEventListener("error",Eu),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=fj(e)}}Pu=bU(s,n),Eu=vU(n),i.addEventListener("load",Pu),i.addEventListener("error",Eu)}catch(o){n(o);return}}),lc.catch(function(s){return lc=null,Promise.reject(s)}))},jU=function(e,s,n){if(e===null)return null;var i=e.apply(void 0,s);return yU(i,n),i},cc,Ok=!1,Ik=function(){return cc||(cc=wU(null).catch(function(e){return cc=null,Promise.reject(e)}),cc)};Promise.resolve().then(function(){return Ik()}).catch(function(t){Ok||console.warn(t)});var Lk=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];Ok=!0;var i=Date.now();return Ik().then(function(a){return jU(a,s,i)})},Fk={exports:{}},NU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",SU=NU,CU=SU;function $k(){}function Uk(){}Uk.resetWarningCache=$k;var TU=function(){function t(n,i,a,o,l,c){if(c!==CU){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Uk,resetWarningCache:$k};return s.PropTypes=s,s};Fk.exports=TU();var kU=Fk.exports;const qt=E0(kU);function pj(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function gj(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?pj(Object(s),!0).forEach(function(n){Bk(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):pj(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function eh(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?eh=function(e){return typeof e}:eh=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eh(t)}function Bk(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function zk(t,e){return EU(t)||PU(t,e)||_U(t,e)||MU()}function EU(t){if(Array.isArray(t))return t}function PU(t,e){var s=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(s!=null){var n=[],i=!0,a=!1,o,l;try{for(s=s.call(t);!(i=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(c){a=!0,l=c}finally{try{!i&&s.return!=null&&s.return()}finally{if(a)throw l}}return n}}function _U(t,e){if(t){if(typeof t=="string")return xj(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return xj(t,e)}}function xj(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function MU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var vr=function(e,s,n){var i=!!n,a=ye.useRef(n);ye.useEffect(function(){a.current=n},[n]),ye.useEffect(function(){if(!i||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(s,o),function(){e.off(s,o)}},[i,s,e,a])},x0=function(e){var s=ye.useRef(e);return ye.useEffect(function(){s.current=e},[e]),s.current},Ml=function(e){return e!==null&&eh(e)==="object"},AU=function(e){return Ml(e)&&typeof e.then=="function"},DU=function(e){return Ml(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},yj="[object Object]",RU=function t(e,s){if(!Ml(e)||!Ml(s))return e===s;var n=Array.isArray(e),i=Array.isArray(s);if(n!==i)return!1;var a=Object.prototype.toString.call(e)===yj,o=Object.prototype.toString.call(s)===yj;if(a!==o)return!1;if(!a&&!n)return e===s;var l=Object.keys(e),c=Object.keys(s);if(l.length!==c.length)return!1;for(var d={},h=0;h<l.length;h+=1)d[l[h]]=!0;for(var u=0;u<c.length;u+=1)d[c[u]]=!0;var m=Object.keys(d);if(m.length!==l.length)return!1;var y=e,v=s,g=function(x){return t(y[x],v[x])};return m.every(g)},Vk=function(e,s,n){return Ml(e)?Object.keys(e).reduce(function(i,a){var o=!Ml(s)||!RU(e[a],s[a]);return n.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):o?gj(gj({},i||{}),{},Bk({},a,e[a])):i},null):null},Wk="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",vj=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wk;if(e===null||DU(e))return e;throw new Error(s)},OU=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wk;if(AU(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return vj(i,s)})};var n=vj(e,s);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},IU=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},cf=ye.createContext(null);cf.displayName="ElementsContext";var Hk=function(e,s){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(s," in an <Elements> provider."));return e},Kk=function(e){var s=e.stripe,n=e.options,i=e.children,a=ye.useMemo(function(){return OU(s)},[s]),o=ye.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(n):null}}),l=zk(o,2),c=l[0],d=l[1];ye.useEffect(function(){var m=!0,y=function(g){d(function(b){return b.stripe?b:{stripe:g,elements:g.elements(n)}})};return a.tag==="async"&&!c.stripe?a.stripePromise.then(function(v){v&&m&&y(v)}):a.tag==="sync"&&!c.stripe&&y(a.stripe),function(){m=!1}},[a,c,n]);var h=x0(s);ye.useEffect(function(){h!==null&&h!==s&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[h,s]);var u=x0(n);return ye.useEffect(function(){if(c.elements){var m=Vk(n,u,["clientSecret","fonts"]);m&&c.elements.update(m)}},[n,u,c.elements]),ye.useEffect(function(){IU(c.stripe)},[c.stripe]),ye.createElement(cf.Provider,{value:c},i)};Kk.propTypes={stripe:qt.any,options:qt.object};var LU=function(e){var s=ye.useContext(cf);return Hk(s,e)},FU=function(){var e=LU("calls useElements()"),s=e.elements;return s};qt.func.isRequired;var Gk=ye.createContext(null);Gk.displayName="CustomCheckoutSdkContext";var $U=function(e,s){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(s," in an <CustomCheckoutProvider> provider."));return e},UU=ye.createContext(null);UU.displayName="CustomCheckoutContext";qt.any,qt.shape({clientSecret:qt.string.isRequired,elementsOptions:qt.object}).isRequired;var y0=function(e){var s=ye.useContext(Gk),n=ye.useContext(cf);if(s&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return s?$U(s,e):Hk(n,e)},BU=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},us=function(e,s){var n="".concat(BU(e),"Element"),i=function(c){var d=c.id,h=c.className,u=c.options,m=u===void 0?{}:u,y=c.onBlur,v=c.onFocus,g=c.onReady,b=c.onChange,x=c.onEscape,p=c.onClick,w=c.onLoadError,j=c.onLoaderStart,S=c.onNetworksChange,_=c.onConfirm,k=c.onCancel,P=c.onShippingAddressChange,M=c.onShippingRateChange,T=y0("mounts <".concat(n,">")),E="elements"in T?T.elements:null,I="customCheckoutSdk"in T?T.customCheckoutSdk:null,V=ye.useState(null),G=zk(V,2),A=G[0],R=G[1],$=ye.useRef(null),O=ye.useRef(null);vr(A,"blur",y),vr(A,"focus",v),vr(A,"escape",x),vr(A,"click",p),vr(A,"loaderror",w),vr(A,"loaderstart",j),vr(A,"networkschange",S),vr(A,"confirm",_),vr(A,"cancel",k),vr(A,"shippingaddresschange",P),vr(A,"shippingratechange",M),vr(A,"change",b);var U;g&&(e==="expressCheckout"?U=g:U=function(){g(A)}),vr(A,"ready",U),ye.useLayoutEffect(function(){if($.current===null&&O.current!==null&&(E||I)){var Q=null;I?Q=I.createElement(e,m):E&&(Q=E.create(e,m)),$.current=Q,R(Q),Q&&Q.mount(O.current)}},[E,I,m]);var J=x0(m);return ye.useEffect(function(){if($.current){var Q=Vk(m,J,["paymentRequest"]);Q&&"update"in $.current&&$.current.update(Q)}},[m,J]),ye.useLayoutEffect(function(){return function(){if($.current&&typeof $.current.destroy=="function")try{$.current.destroy(),$.current=null}catch{}}},[]),ye.createElement("div",{id:d,className:h,ref:O})},a=function(c){y0("mounts <".concat(n,">"));var d=c.id,h=c.className;return ye.createElement("div",{id:d,className:h})},o=s?a:i;return o.propTypes={id:qt.string,className:qt.string,onChange:qt.func,onBlur:qt.func,onFocus:qt.func,onReady:qt.func,onEscape:qt.func,onClick:qt.func,onLoadError:qt.func,onLoaderStart:qt.func,onNetworksChange:qt.func,onConfirm:qt.func,onCancel:qt.func,onShippingAddressChange:qt.func,onShippingRateChange:qt.func,options:qt.object},o.displayName=n,o.__elementType=e,o},hs=typeof window>"u",zU=ye.createContext(null);zU.displayName="EmbeddedCheckoutProviderContext";var VU=function(){var e=y0("calls useStripe()"),s=e.stripe;return s};us("auBankAccount",hs);var bj=us("card",hs);us("cardNumber",hs);us("cardExpiry",hs);us("cardCvc",hs);us("fpxBank",hs);us("iban",hs);us("idealBank",hs);us("p24Bank",hs);us("epsBank",hs);us("payment",hs);us("expressCheckout",hs);us("currencySelector",hs);us("paymentRequestButton",hs);us("linkAuthentication",hs);us("address",hs);us("shippingAddress",hs);us("paymentMethodMessaging",hs);us("affirmMessage",hs);us("afterpayClearpayMessage",hs);class WU{constructor(){this.publishableKey="pk_test_51234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",this.publishableKey&&this.publishableKey!=="pk_test_your_key_here"?this.stripe=Lk(this.publishableKey):this.stripe=Promise.resolve(null)}async createPaymentIntent(e,s){try{const n=await fetch("/api/payments/create-intent",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:e,currency:s.toLowerCase()})});if(!n.ok){const i=await n.json();throw new Error(i.message||"Failed to create payment intent")}return await n.json()}catch(n){throw console.error("Payment intent creation failed:",n),n}}async confirmPayment(e,s){try{const n=await this.stripe;if(!n)throw new Error("Stripe not loaded");return await n.confirmPayment({clientSecret:e,confirmParams:{return_url:`${window.location.origin}/wallet?payment=success`},...s&&{paymentMethod:s}})}catch(n){throw console.error("Payment confirmation failed:",n),n}}async createPaymentMethod(e){try{const s=await this.stripe;if(!s)throw new Error("Stripe not loaded");const{error:n,paymentMethod:i}=await s.createPaymentMethod({type:"card",card:e});if(n)throw new Error(n.message);return i}catch(s){throw console.error("Payment method creation failed:",s),s}}async getStripe(){return await this.stripe}}const HU=new WU,KU="pk_test_51234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",wj=Lk(KU);function GU({amount:t,currency:e,onSuccess:s,onError:n}){const i=VU(),a=FU(),{toast:o}=Zs(),[l,c]=f.useState(!1),[d,h]=f.useState("");f.useEffect(()=>{(async()=>{try{const{clientSecret:v}=await HU.createPaymentIntent(t,e);h(v)}catch(v){n(v instanceof Error?v.message:"Failed to initialize payment")}})()},[t,e,n]);const u=async y=>{if(y.preventDefault(),!i||!a||!d)return;c(!0);const v=a.getElement(bj);if(!v){c(!1);return}try{const{error:g,paymentIntent:b}=await i.confirmCardPayment(d,{payment_method:{card:v}});g?(n(g.message||"Payment failed"),o({title:"Payment Failed",description:g.message,variant:"destructive"})):b.status==="succeeded"&&(s(b.id),o({title:"Payment Successful",description:`Successfully processed payment of ${t} ${e.toUpperCase()}`}))}catch(g){n(g instanceof Error?g.message:"Payment processing failed")}finally{c(!1)}},m={style:{base:{fontSize:"16px",color:"#ffffff",backgroundColor:"transparent","::placeholder":{color:"#9ca3af"}},invalid:{color:"#ef4444"}}};return r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Bt,{className:"text-gray-300 mb-2 block",children:"Card Information"}),r.jsx("div",{className:"p-3 border border-gray-600 rounded-lg bg-gray-700",children:r.jsx(bj,{options:m})})]}),r.jsxs("div",{className:"text-sm text-gray-400",children:[r.jsxs("p",{children:["Amount: ",t," ",e.toUpperCase()]}),r.jsx("p",{className:"mt-1",children:"Your payment is secured by Stripe"})]}),r.jsx(W,{type:"submit",disabled:!i||l||!d,className:"w-full bg-green-600 hover:bg-green-700",children:l?"Processing...":`Pay ${t} ${e.toUpperCase()}`})]})}function qU({amount:t,currency:e,onSuccess:s,onError:n}){return wj?r.jsx(Kk,{stripe:wj,children:r.jsx(GU,{amount:t,currency:e,onSuccess:s,onError:n})}):r.jsxs("div",{className:"text-center p-4 text-gray-400",children:[r.jsx("p",{children:"Credit card payments are currently unavailable."}),r.jsx("p",{className:"text-sm mt-2",children:"Please use cryptocurrency deposits instead."})]})}function QU(){var oe,te,Se,Re,Ze,ht,ts,Je,ie,tr;const[t,e]=f.useState("Balance"),[s,n]=f.useState(!0),i=Wn(),[a,o]=f.useState(""),[l,c]=f.useState(""),[d,h]=f.useState(""),[u,m]=f.useState("USDT-TRC20"),[y,v]=f.useState("ERC20"),[g,b]=f.useState(""),[x,p]=f.useState(null),w=f.useRef(null),[j,S]=f.useState(!1),[_,k]=f.useState(!1),[P,M]=f.useState(!1),[T,E]=f.useState(""),[I,V]=f.useState(""),[G,A]=f.useState(null),{toast:R}=Zs(),{user:$}=Ss(),{data:O=[]}=ns({queryKey:[`/api/users/${$==null?void 0:$.id}/trades`],enabled:!!($!=null&&$.id),queryFn:async()=>{try{const z=await fetch(`/api/users/${$.id}/trades`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!z.ok)return console.log("Trade history API failed, using empty array"),[];const Te=await z.json();return console.log(" Trade history fetched for withdrawal validation:",Te),Array.isArray(Te)?Te:[]}catch(z){return console.error("Failed to fetch trade history:",z),[]}}}),U=O.filter(z=>z.status==="completed"||z.result==="win"||z.result==="lose").length,{data:J=[]}=ns({queryKey:[`/api/users/${$==null?void 0:$.id}/withdrawals`],enabled:!!($!=null&&$.id),queryFn:async()=>{try{const z=await fetch(`/api/users/${$.id}/withdrawals`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!z.ok)return console.log("Withdrawal history API failed, using empty array"),[];const Te=await z.json();return console.log(" Withdrawal history fetched:",Te),Array.isArray(Te)?Te:[]}catch(z){return console.error("Failed to fetch withdrawal history:",z),[]}},refetchInterval:3e4}),{data:Q=[]}=ns({queryKey:[`/api/users/${$==null?void 0:$.id}/deposits`],enabled:!!($!=null&&$.id),queryFn:async()=>{try{const z=await fetch(`/api/users/${$.id}/deposits`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!z.ok)return console.log("Deposit history API failed, using empty array"),[];const Te=await z.json();return console.log(" Deposit history fetched:",Te),Array.isArray(Te)?Te:[]}catch(z){return console.error("Failed to fetch deposit history:",z),[]}},refetchInterval:3e4}),Oe=Ir(),ge={BTC:{name:"BTC",address:"bc1q6w3rdy5kwaf4es2lpjk6clpd25pterzvgwu5hu",network:"BTC",minAmount:.001,description:"Send Bitcoin to this address",chainId:null},ETH:{name:"ETH",address:"0x06292164c039E611B37ff0c4B71ce0F72e56AB7A",network:"ETH",minAmount:.01,description:"Send Ethereum to this address",chainId:1},SOL:{name:"SOL",address:"6s2UxAyknMvzN2nUpRdHp6EqDetsdK9mjsLTguzNYeKU",network:"SOL",minAmount:.1,description:"Send Solana to this address",chainId:null},"USDT-ERC20":{name:"USDT ERC20",address:"0x06292164c039E611B37ff0c4B71ce0F72e56AB7A",network:"USDT ERC20",minAmount:100,description:"Send USDT on Ethereum network to this address",chainId:1},"USDT-TRC20":{name:"USDT TRC20",address:"TTZzHBjpmksYqaM6seVjCSLSe6m77Bfjp9",network:"USDT TRC20",minAmount:100,description:"Send USDT on TRON network to this address",chainId:null},"USDT-BEP20":{name:"USDT BEP20",address:"0x06292164c039E611B37ff0c4B71ce0F72e56AB7A",network:"USDT BEP20",minAmount:100,description:"Send USDT on Binance Smart Chain to this address",chainId:56}},He=Ms({mutationFn:async z=>{const Te=localStorage.getItem("authToken");if(!Te)throw new Error("No authentication token found");const St=await fetch("/api/deposits",{method:"POST",headers:{Authorization:`Bearer ${Te}`},body:z});if(!St.ok){const kt=await St.json();throw new Error(kt.message||"Failed to submit deposit")}return St.json()},onSuccess:z=>{R({title:"Deposit Submitted",description:"Your deposit request has been submitted for review."}),o(""),p(null),Oe.invalidateQueries({queryKey:["/api/balances"]}),Oe.invalidateQueries({queryKey:[`/api/users/${$==null?void 0:$.id}/deposits`]})},onError:z=>{R({title:"Deposit Failed",description:z.message,variant:"destructive"})}}),se=z=>{var St;const Te=(St=z.target.files)==null?void 0:St[0];if(Te){if(!["image/jpeg","image/png","image/jpg","application/pdf"].includes(Te.type)){R({title:"Invalid File Type",description:"Please upload a JPEG, PNG, or PDF file.",variant:"destructive"});return}if(Te.size>5*1024*1024){R({title:"File Too Large",description:"Please upload a file smaller than 5MB.",variant:"destructive"});return}p(Te)}},ze=z=>{navigator.clipboard.writeText(z),R({title:"Copied!",description:"Address copied to clipboard"})},ce=()=>{if(!a||parseFloat(a)<=0){R({title:"Invalid Amount",description:"Please enter a valid deposit amount.",variant:"destructive"});return}if(!x){R({title:"Receipt Required",description:"Please upload a transaction receipt.",variant:"destructive"});return}const z=ge[u];if(parseFloat(a)<z.minAmount){R({title:"Amount Too Small",description:`Minimum deposit amount is ${z.minAmount} ${u}.`,variant:"destructive"});return}const Te=new FormData;Te.append("amount",a),Te.append("currency",u),Te.append("receipt",x),He.mutate(Te)},Ke=()=>{const z=ge[u],Te=z.address;return console.log("QR Code value:",Te),`METACHROME DEPOSIT ADDRESS
${z.network}
${Te}

COPY THIS ADDRESS TO YOUR WALLET`},{data:je,isLoading:Ve}=ns({queryKey:["/api/balances"],enabled:!!$,refetchInterval:5e3,staleTime:0,cacheTime:0,queryFn:async()=>{var St;console.log(" WALLET: Fetching balance from /api/balances for user:",$==null?void 0:$.id,$==null?void 0:$.username),console.log(" WALLET: Auth token:",((St=localStorage.getItem("authToken"))==null?void 0:St.substring(0,30))+"...");const z=await fetch("/api/balances",{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(console.log(" WALLET: Response status:",z.status,z.statusText),!z.ok){const kt=await z.text();throw console.error(" WALLET: Balance API failed:",z.status,kt),new Error(`Failed to fetch balance: ${z.status} ${kt}`)}const Te=await z.json();return console.log(" WALLET: Balance API response:",Te),Te}}),{cryptoData:Me,loading:De,error:pt}=cy();console.log(" WalletPage - Market Data:",{marketData:Me,marketDataLoading:De,marketDataError:pt,dataLength:Me==null?void 0:Me.length});const K=[{id:"Balance",label:"Balance"},{id:"Deposit",label:"Deposit"},{id:"Withdraw",label:"Withdraw"},{id:"Transfer",label:"Transfer"}],pe=z=>{if(z==="USDT"||z==="USDC"||z==="BUSD")return 1;const Te=Me==null?void 0:Me.find(Dt=>Dt.symbol===`${z}/USDT`);if(Te&&Te.rawPrice){const Dt=Te.rawPrice;return console.log(" getMarketPrice (from API):",{symbol:z,price:Dt,marketItem:Te}),Dt}const kt={BTC:107e3,ETH:3700,SOL:200,BNB:600,XRP:2.4,ADA:.82,DOGE:.24,TRX:.25,LINK:20,AVAX:35,DOT:7,LTC:100}[z]||0;return console.log(" getMarketPrice (fallback):",{symbol:z,fallbackPrice:kt,reason:"Market data not available"}),kt},st=parseFloat(((oe=je==null?void 0:je.find(z=>z.symbol==="USDT"))==null?void 0:oe.available)||"0"),qe=(je==null?void 0:je.reduce((z,Te)=>{const St=parseFloat(Te.available||"0"),kt=pe(Te.symbol),Dt=St*kt;return console.log(" Balance calculation:",{symbol:Te.symbol,available:St,price:kt,usdtValue:Dt}),z+Dt},0))||st;console.log(" WALLET PAGE - Balance data:",{userId:$==null?void 0:$.id,userBalances:je,usdtBalance:st,totalBalanceUSDT:qe,balancesLoading:Ve});const Wt=Ms({mutationFn:async z=>{const Te=localStorage.getItem("authToken");if(!Te)throw new Error("Please login first to make a withdrawal");const St=await fetch("/api/withdrawals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Te}`},body:JSON.stringify({amount:z.amount,currency:z.currency,address:z.address,password:z.password})});if(!St.ok){const kt=await St.json();throw new Error(kt.error||kt.message||"Withdrawal failed")}return St.json()},onSuccess:z=>{R({title:"Withdrawal Initiated",description:`Withdrawal of ${z.amount} ${z.currency} has been initiated and is pending approval`}),c(""),h(""),b(""),Oe.invalidateQueries({queryKey:["/api/balances"]})},onError:z=>{R({title:"Withdrawal Failed",description:z.message,variant:"destructive"})}}),ut=()=>{if(!T.trim()){R({title:"Transaction Hash Required",description:"Please provide a valid transaction hash for verification",variant:"destructive"});return}He.mutate({...G,txHash:T}),S(!1),E(""),A(null)},D=()=>{if(!I.trim()){R({title:"Transfer Reference Required",description:"Please provide your bank transfer reference number",variant:"destructive"});return}He.mutate({...G,paymentData:{transferReference:I}}),k(!1),V(""),A(null)},H=z=>{He.mutate({...G,paymentData:{paymentIntentId:z}}),M(!1),A(null)},X=z=>{R({title:"Payment Failed",description:z,variant:"destructive"})},ve=je||[];return r.jsxs("div",{className:"min-h-screen bg-[#1a1b2e]",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"flex items-center space-x-1 mb-8 border-b border-gray-600 overflow-x-auto scrollbar-hide",children:K.map(z=>r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>e(z.id),className:`whitespace-nowrap flex-shrink-0 ${t===z.id?"bg-transparent text-white border-b-2 border-purple-500 rounded-none pb-3":"bg-transparent text-gray-400 hover:text-white rounded-none pb-3"}`,children:z.label},z.id))})}),t==="Balance"&&r.jsx("div",{className:"space-y-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-[26px] md:text-[31px] font-bold text-white mb-2",children:"Balance"}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Total Balances"}),r.jsx("span",{className:"text-gray-400",children:""})]}),r.jsx("button",{onClick:()=>n(!s),className:"text-purple-400 text-sm hover:text-purple-300",children:s?"Simple View":"Detailed View"})]}),r.jsx("div",{className:`font-bold text-white leading-[2.5rem] ${i?"text-[24px]":"text-[30px]"}`,children:Ve?r.jsx("span",{className:"animate-pulse",children:"Loading..."}):`${qe.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})} USDT`}),r.jsxs("div",{className:"mt-4 bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:[r.jsxs("div",{className:"text-blue-400 text-sm font-medium flex items-center mb-2",children:[r.jsx("span",{className:"mr-2",children:""}),"Auto-Conversion System Active"]}),r.jsxs("div",{className:"text-blue-300 text-xs space-y-1",children:[r.jsx("div",{children:" All cryptocurrency deposits are automatically converted to USDT"}),r.jsx("div",{children:" Real-time conversion with competitive rates"}),r.jsx("div",{children:" Unified balance for easy management and instant withdrawals"})]})]})]}),r.jsxs("div",{className:"mt-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"My assets"}),r.jsx("div",{className:"text-sm text-gray-400",children:je?`${je.filter(z=>parseFloat(z.available)>0).length} assets`:"0 assets"})]}),Ve?r.jsx("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-8",children:r.jsx("div",{className:"text-center text-gray-400",children:r.jsx("div",{className:"animate-pulse",children:"Loading assets..."})})}):je&&je.some(z=>parseFloat(z.available)>0)?r.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"hidden md:grid grid-cols-4 gap-4 p-4 bg-gray-700/30 border-b border-gray-600",children:[r.jsx("div",{className:"text-sm font-medium text-gray-300",children:"Name"}),r.jsx("div",{className:"text-sm font-medium text-gray-300",children:"Available assets"}),r.jsx("div",{className:"text-sm font-medium text-gray-300",children:"Occupy"}),r.jsx("div",{className:"text-sm font-medium text-gray-300 text-right",children:"Amount in USDT"})]}),r.jsx("div",{className:"divide-y divide-gray-600",children:je.filter(z=>parseFloat(z.available)>0).map(z=>{const Te=parseFloat(z.available),St=parseFloat(z.locked||"0"),kt=pe(z.symbol),Dt=Te*kt,xs={BTC:"",ETH:"",SOL:"",USDT:"",BNB:"BNB",USDC:"USDC",BUSD:"BUSD"},Kn={BTC:"bg-orange-500",ETH:"bg-blue-500",SOL:"bg-purple-500",USDT:"bg-green-500",BNB:"bg-yellow-500",USDC:"bg-blue-600",BUSD:"bg-yellow-600"};return r.jsxs("div",{children:[r.jsxs("div",{className:"hidden md:grid grid-cols-4 gap-4 p-4 hover:bg-gray-700/20 transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-8 h-8 ${Kn[z.symbol]||"bg-gray-500"} rounded-full flex items-center justify-center text-white font-bold text-sm`,children:xs[z.symbol]||z.symbol.charAt(0)}),r.jsx("span",{className:"text-white font-medium",children:z.symbol})]}),r.jsx("div",{className:"text-white",children:Te.toFixed(4)}),r.jsx("div",{className:"text-white",children:St.toFixed(4)}),r.jsx("div",{className:"text-white text-right",children:Dt.toFixed(2)})]}),r.jsxs("div",{className:"md:hidden p-4 hover:bg-gray-700/20 transition-colors",children:[r.jsx("div",{className:"flex items-center justify-between mb-3",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-10 h-10 ${Kn[z.symbol]||"bg-gray-500"} rounded-full flex items-center justify-center text-white font-bold`,children:xs[z.symbol]||z.symbol.charAt(0)}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-medium",children:z.symbol}),r.jsxs("div",{className:"text-gray-400 text-sm",children:[Dt.toFixed(2)," USDT"]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400 mb-1",children:"Available"}),r.jsx("div",{className:"text-white",children:Te.toFixed(4)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400 mb-1",children:"Occupy"}),r.jsx("div",{className:"text-white",children:St.toFixed(4)})]})]})]})]},z.symbol)})})]}):r.jsx("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-full mx-auto mb-4 flex items-center justify-center",children:r.jsx("span",{className:"text-2xl text-gray-400",children:""})}),r.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No Data"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"You don't have any cryptocurrency assets yet."}),r.jsx("p",{className:"text-gray-500 text-xs",children:"Start trading or deposit funds to see your assets here."})]})})]})]})}),t==="Deposit"&&r.jsx("div",{className:"space-y-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"Deposit"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"Add Funds"}),r.jsx(Rt,{className:"text-gray-400",children:"Top up your account balance with cryptocurrency"})]}),r.jsx(he,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Deposit network"}),r.jsxs("select",{value:u,onChange:z=>m(z.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[r.jsx("option",{value:"BTC",children:"BTC"}),r.jsx("option",{value:"ETH",children:"ETH"}),r.jsx("option",{value:"SOL",children:"SOL"}),r.jsx("option",{value:"USDT-ERC20",children:"USDT-ERC20"}),r.jsx("option",{value:"USDT-TRC20",children:"USDT-TRC20"}),r.jsx("option",{value:"USDT-BEP20",children:"USDT-BEP20"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"depositAmount",className:"block text-sm font-medium text-gray-300 mb-2",children:["Deposit amount ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("input",{id:"depositAmount",name:"depositAmount",type:"number",placeholder:"Please enter the recharge amount",value:a,onChange:z=>o(z.target.value),className:`w-full bg-gray-800 border rounded-lg px-3 py-2 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 ${a?"border-gray-600":"border-red-500"}`,min:((te=ge[u])==null?void 0:te.minAmount)||0,step:"0.01"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Minimum: ",(Se=ge[u])==null?void 0:Se.minAmount," ",u]}),a&&parseFloat(a)>0&&!u.startsWith("USDT")&&r.jsxs("div",{className:"mt-3 p-3 bg-gradient-to-r from-purple-900/30 to-blue-900/30 border border-purple-500/30 rounded-lg",children:[r.jsx("div",{className:"flex items-center mb-2",children:r.jsx("span",{className:"text-purple-400 text-sm font-medium",children:" Auto-convert:"})}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-300 text-xs",children:"You deposit:"}),r.jsxs("span",{className:"text-white text-sm font-bold",children:[a," ",u]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-300 text-xs",children:"Current price:"}),r.jsxs("span",{className:"text-blue-300 text-sm font-medium",children:[pe(u).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," USDT"]})]}),r.jsx("div",{className:"border-t border-purple-500/20 my-2"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-purple-300 text-xs font-medium",children:"You will receive:"}),r.jsxs("span",{className:"text-green-400 text-base font-bold",children:[" ",(parseFloat(a)*pe(u)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," USDT"]})]})]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-2 italic",children:["* Your ",u," will be automatically converted to USDT at the current market rate"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Platform Deposit Address"}),r.jsxs("div",{className:"p-3 bg-blue-900/20 border border-blue-600/30 rounded-lg mb-2",children:[r.jsxs("p",{className:"text-blue-300 text-xs mb-1",children:[" Send ",u," to this address to deposit funds to your METACHROME account"]}),r.jsxs("p",{className:"text-yellow-300 text-xs",children:[r.jsx("strong",{children:"Important:"})," Only send on ",(Re=ge[u])==null?void 0:Re.network,". Sending on wrong network will result in loss of funds!"]})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-800 border border-gray-600 rounded-lg px-3 py-2",children:[r.jsx("span",{className:"text-white text-sm font-mono flex-1 break-all",children:(Ze=ge[u])==null?void 0:Ze.address}),r.jsx(W,{size:"sm",variant:"ghost",className:"text-purple-400 hover:text-purple-300 p-2 hover:bg-gray-700",onClick:()=>{var z;return ze((z=ge[u])==null?void 0:z.address)},children:r.jsx(Mh,{className:"w-4 h-4"})})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Network: ",(ht=ge[u])==null?void 0:ht.network]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:(ts=ge[u])==null?void 0:ts.description})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"QR Code - Deposit Address"}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg inline-block",children:r.jsx(Dk,{value:Ke(),size:200,className:"mx-auto"})}),r.jsx("p",{className:"text-xs text-gray-300 mt-3",children:"Scan to see deposit information (copy the address manually)"}),r.jsxs("p",{className:"text-xs text-yellow-300 mt-1",children:["Make sure to send on ",r.jsx("strong",{children:(Je=ge[u])==null?void 0:Je.network})]}),r.jsxs("p",{className:"text-xs text-blue-300 mt-1",children:["Address: ",(ie=ge[u])==null?void 0:ie.address]})]}),r.jsx("div",{className:"mt-4",children:r.jsxs(W,{onClick:()=>{var z;return ze((z=ge[u])==null?void 0:z.address)},className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[r.jsx(Mh,{className:"w-4 h-4 mr-2"}),"Copy Deposit Address"]})}),r.jsxs("div",{className:"mt-4 p-3 bg-gray-800/50 border border-gray-600 rounded-lg",children:[r.jsx("h5",{className:"text-sm font-medium text-gray-300 mb-2",children:" How to use:"}),r.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Scan QR Code:"})," View deposit info (manually copy the address)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Copy Address:"})," Click the button to copy address to clipboard"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Manual Entry:"})," Type or paste address in your wallet"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Send Crypto:"})," Send to the address on the correct network"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Upload Receipt:"})," Upload transaction proof and confirm"]})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Upload receipt ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:border-purple-500 transition-colors ${x?"border-gray-600":"border-red-500"}`,onClick:()=>{var z;return(z=w.current)==null?void 0:z.click()},children:x?r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(qr,{className:"w-6 h-6 text-green-500"}),r.jsx("span",{className:"text-green-400 text-sm",children:x.name})]}):r.jsxs(r.Fragment,{children:[r.jsx(Mc,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Click to upload receipt"}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"JPEG, PNG, PDF (max 5MB)"})]})}),r.jsx("input",{id:"receiptUpload",name:"receiptUpload",ref:w,type:"file",accept:"image/jpeg,image/png,image/jpg,application/pdf",onChange:se,className:"hidden"})]}),(!a||!x)&&r.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-600/30 rounded-lg mb-4",children:[r.jsx("p",{className:"text-yellow-300 text-sm",children:" Please complete all required fields:"}),r.jsxs("ul",{className:"text-yellow-200 text-xs mt-1 ml-4",children:[!a&&r.jsx("li",{children:" Enter deposit amount"}),!x&&r.jsx("li",{children:" Upload transaction receipt"})]})]}),r.jsx(W,{className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 font-medium disabled:opacity-50 disabled:cursor-not-allowed",onClick:ce,disabled:He.isPending||!a||!x,children:He.isPending?"Processing...":"Confirm recharge"})]})})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx(de,{className:"bg-gray-800 border-gray-700",children:r.jsxs(he,{className:"p-6",children:[r.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Recent Deposits"}),r.jsxs("div",{className:"space-y-4",children:[Q.length>0?Q.slice(0,3).map((z,Te)=>r.jsx("div",{className:"border-b border-gray-700 pb-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-white text-sm font-medium",children:[z.amount," ",z.currency]}),r.jsxs("div",{className:"text-gray-400 text-xs",children:[z.currency," Network"]}),r.jsxs("div",{className:"text-gray-400 text-xs",children:[new Date(z.created_at||z.timestamp).toLocaleDateString()," ",new Date(z.created_at||z.timestamp).toLocaleTimeString()]})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${z.status==="pending"?"bg-yellow-500/20 text-yellow-400":z.status==="approved"||z.status==="completed"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:z.status==="approved"?"Completed":z.status==="pending"?"Pending":z.status==="rejected"?"Rejected":z.status.charAt(0).toUpperCase()+z.status.slice(1)})]})},z.id||Te)):r.jsx("div",{className:"text-center py-8",children:r.jsx("div",{className:"text-gray-400 text-sm",children:"No deposit history"})}),r.jsx("div",{className:"text-center",children:r.jsx("button",{className:"text-purple-400 hover:text-purple-300 text-sm transition-colors",children:"View All History"})})]})]})})})]})]})}),t==="Withdraw"&&r.jsx("div",{className:"space-y-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"Withdraw"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(de,{className:"bg-gray-800 border-gray-700",children:r.jsx(he,{className:"p-8",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx(Bt,{className:"text-gray-300 text-sm font-medium",children:"Cryptocurrency"}),r.jsx("div",{className:"w-full mt-2 p-3 bg-gray-700 border border-gray-600 rounded-lg text-white",children:"USDT"})]}),r.jsxs("div",{children:[r.jsx(Bt,{className:"text-gray-300 text-sm font-medium",children:"Network"}),r.jsxs("select",{value:y,onChange:z=>v(z.target.value),className:"w-full mt-2 p-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-purple-500 focus:ring-1 focus:ring-purple-500",children:[r.jsx("option",{value:"ERC20",children:"USDT ERC20 (Ethereum Network)"}),r.jsx("option",{value:"TRC20",children:"USDT TRC20 (Tron Network)"}),r.jsx("option",{value:"BEP20",children:"USDT BEP20 (BNB Chain)"})]}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Please ensure you select the correct network to avoid loss of funds"})]}),r.jsxs("div",{children:[r.jsx(Bt,{className:"text-gray-300 text-sm font-medium",children:"Withdrawal Amount"}),r.jsxs("div",{className:"relative mt-2",children:[r.jsx(Ee,{id:"withdrawAmount",name:"withdrawAmount",type:"number",placeholder:"0.00",value:d,onChange:z=>h(z.target.value),className:"bg-gray-700 border-gray-600 text-white pr-16 focus:border-purple-500 focus:ring-1 focus:ring-purple-500"}),r.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm",children:"USDT"})]}),r.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mt-1",children:[r.jsxs("span",{children:["Available: ",((tr=ve.find(z=>z.symbol==="USDT"))==null?void 0:tr.available)||"0"," USDT"]}),r.jsx("button",{onClick:()=>{var z;return h(((z=ve.find(Te=>Te.symbol==="USDT"))==null?void 0:z.available)||"0")},className:"text-purple-400 hover:text-purple-300",children:"Max"})]})]}),r.jsxs("div",{children:[r.jsx(Bt,{className:"text-gray-300 text-sm font-medium",children:"Withdrawal Address"}),r.jsx(Ee,{id:"withdrawAddress",name:"withdrawAddress",type:"text",placeholder:`Enter USDT-${y} address`,value:l,onChange:z=>c(z.target.value),className:"mt-2 bg-gray-700 border-gray-600 text-white focus:border-purple-500 focus:ring-1 focus:ring-purple-500"}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Double-check the address. Transactions cannot be reversed."})]}),r.jsxs("div",{children:[r.jsx(Bt,{className:"text-gray-300 text-sm font-medium",children:"Login Password"}),r.jsx(Ee,{id:"fundPassword",name:"fundPassword",type:"password",placeholder:"Enter your login password",value:g,onChange:z=>b(z.target.value),className:"mt-2 bg-gray-700 border-gray-600 text-white focus:border-purple-500 focus:ring-1 focus:ring-purple-500"}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Your login password is required for security verification"})]}),U<3&&r.jsx("div",{className:"bg-yellow-900/30 border border-yellow-600/50 rounded-lg p-4 mb-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"w-5 h-5 text-yellow-500 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-yellow-500 font-semibold text-sm mb-1",children:"Minimum Trade Requirement"}),r.jsxs("p",{className:"text-yellow-200/80 text-sm",children:["You need to complete at least ",r.jsx("strong",{children:"3 trades"})," before you can withdraw. Current completed trades: ",r.jsxs("strong",{children:[U,"/3"]})]}),r.jsxs("p",{className:"text-yellow-200/60 text-xs mt-2",children:["Please complete ",3-U," more trade",3-U>1?"s":""," to unlock withdrawal."]})]})]})}),r.jsx(W,{onClick:()=>{if(U<3){R({title:"Withdrawal Not Available",description:`You need to complete at least 3 trades before withdrawing. Current: ${U}/3 trades completed.`,variant:"destructive"});return}if(!l||!d||!g||parseFloat(d)<=0){R({title:"Invalid Input",description:"Please fill in all required fields",variant:"destructive"});return}Wt.mutate({address:l,amount:d,currency:"USDT",password:g})},disabled:U<3||!l||!d||!g||Wt.isPending,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 py-3 disabled:opacity-50 disabled:cursor-not-allowed",children:Wt.isPending?"Processing Withdrawal...":U<3?`Complete ${3-U} More Trade${3-U>1?"s":""} to Withdraw`:"Confirm Withdrawal"})]})})})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx(de,{className:"bg-gray-800 border-gray-700",children:r.jsxs(he,{className:"p-6",children:[r.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Recent Withdrawals"}),r.jsxs("div",{className:"space-y-4",children:[J.length>0?J.slice(0,3).map((z,Te)=>r.jsx("div",{className:"border-b border-gray-700 pb-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-white text-sm font-medium",children:[z.amount," ",z.currency]}),r.jsxs("div",{className:"text-gray-400 text-xs",children:[z.currency," Network"]}),r.jsxs("div",{className:"text-gray-400 text-xs",children:[new Date(z.created_at||z.timestamp).toLocaleDateString()," ",new Date(z.created_at||z.timestamp).toLocaleTimeString()]})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${z.status==="pending"?"bg-yellow-500/20 text-yellow-400":z.status==="approved"||z.status==="completed"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:z.status==="approved"?"Completed":z.status.charAt(0).toUpperCase()+z.status.slice(1)})]})},z.id||Te)):r.jsx("div",{className:"text-center py-8",children:r.jsx("div",{className:"text-gray-400 text-sm",children:"No withdrawal history"})}),r.jsx("div",{className:"text-center",children:r.jsx("button",{className:"text-purple-400 hover:text-purple-300 text-sm transition-colors",children:"View All History"})})]})]})})})]})]})}),t==="Transfer"&&r.jsx("div",{className:"space-y-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"Transfer"}),r.jsx(de,{className:"bg-gray-800 border-gray-700",children:r.jsx(he,{className:"p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-full mx-auto mb-4 flex items-center justify-center",children:r.jsx(Mm,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Transfer Feature"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"Transfer functionality will be available soon. Stay tuned for updates."}),r.jsx(W,{className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white",children:"Coming Soon"})]})})})]})})]}),r.jsx(el,{open:j,onOpenChange:S,children:r.jsxs(Qa,{className:"bg-gray-800 border-gray-700 max-w-md",children:[r.jsx(Xa,{children:r.jsx(Ya,{className:"text-white",children:"Enter Transaction Hash"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Please enter your transaction hash for verification. This helps us confirm your deposit."}),r.jsxs("div",{children:[r.jsx(Bt,{htmlFor:"txHash",className:"text-gray-300",children:"Transaction Hash"}),r.jsx(Ee,{id:"txHash",type:"text",placeholder:"0x...",value:T,onChange:z=>E(z.target.value),className:"bg-gray-700 border-gray-600 text-white mt-2"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(W,{variant:"outline",onClick:()=>{S(!1),E(""),A(null)},className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"}),r.jsx(W,{onClick:ut,disabled:!T.trim()||He.isPending,className:"flex-1 bg-green-600 hover:bg-green-700",children:He.isPending?"Processing...":"Confirm"})]})]})]})}),r.jsx(el,{open:_,onOpenChange:k,children:r.jsxs(Qa,{className:"bg-gray-800 border-gray-700 max-w-md",children:[r.jsx(Xa,{children:r.jsx(Ya,{className:"text-white",children:"Enter Bank Transfer Reference"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Please enter your bank transfer reference number. This helps us verify your payment."}),r.jsxs("div",{children:[r.jsx(Bt,{htmlFor:"bankRef",className:"text-gray-300",children:"Transfer Reference Number"}),r.jsx(Ee,{id:"bankRef",type:"text",placeholder:"Enter reference number",value:I,onChange:z=>V(z.target.value),className:"bg-gray-700 border-gray-600 text-white mt-2"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(W,{variant:"outline",onClick:()=>{k(!1),V(""),A(null)},className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"}),r.jsx(W,{onClick:D,disabled:!I.trim()||He.isPending,className:"flex-1 bg-green-600 hover:bg-green-700",children:He.isPending?"Processing...":"Confirm"})]})]})]})}),r.jsx(el,{open:P,onOpenChange:M,children:r.jsxs(Qa,{className:"bg-gray-800 border-gray-700 max-w-md",children:[r.jsx(Xa,{children:r.jsx(Ya,{className:"text-white",children:"Credit/Debit Card Payment"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Complete your payment securely with Stripe. Your card information is encrypted and secure."}),G&&r.jsx(qU,{amount:G.amount,currency:"usd",onSuccess:H,onError:X}),r.jsx(W,{variant:"outline",onClick:()=>{M(!1),A(null)},className:"w-full border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"})]})]})})]})}const XU="/assets/support_banner_desktop-1762724043163.jpg",YU="/assets/support_banner_mobile-1762724043163.jpg";function JU({onContactSupport:t,isOpen:e,onClose:s}){const[n,i]=f.useState([]),[a,o]=f.useState(""),[l,c]=f.useState([]),[d,h]=f.useState(!1),[u,m]=f.useState(!0),[y,v]=f.useState(!1),g=f.useRef(null),b=f.useCallback((S,_=0)=>{setTimeout(()=>{const k={id:Date.now().toString(),text:S,sender:"bot",timestamp:new Date};i(P=>[...P,k])},_)},[]),x=f.useCallback(async()=>{c([{id:"1",question:"How do I deposit funds?",answer:"To deposit funds, go to Wallet page, click Deposit, select your preferred cryptocurrency (USDT, BTC, ETH, SOL), choose the network, and send funds to the displayed address.",category:"deposit"},{id:"2",question:"How do I withdraw funds?",answer:"To withdraw, go to Wallet page, click Withdraw, enter the amount and your wallet address, then submit. A superadmin will review and approve your request within 24 hours.",category:"withdrawal"},{id:"3",question:"What are the trading durations?",answer:"We offer two trading durations: 30 seconds (minimum 100 USDT with 10% profit) and 60 seconds (minimum 1000 USDT with 15% profit).",category:"trading"},{id:"4",question:"How do I verify my account?",answer:"Go to Profile page, click on Verification section, upload your ID document and proof of address. Our team will review within 24-48 hours.",category:"verification"},{id:"5",question:"What cryptocurrencies are supported?",answer:"We support USDT (BEP20, TRC20, ERC20), Bitcoin (BTC), Ethereum (ETH), and Solana (SOL) for deposits and withdrawals.",category:"general"}]);try{const _=await fetch("/api/chat/faq");if(_.ok){const k=await _.json();console.log(" Loaded FAQs from API:",k),k&&k.length>0&&c(k.slice(0,5))}else console.log(" FAQ API returned non-OK status, using fallback FAQs")}catch(_){console.error(" Error loading FAQs, using fallback:",_)}},[]);f.useEffect(()=>{if(e&&!y&&(x(),b(` Hello! I'm your METACHROME assistant. How can I help you today?

You can ask me common questions or click 'Contact Support' to chat with our team.`),v(!0)),!e&&y){const S=setTimeout(()=>{i([]),v(!1),m(!0),o("")},300);return()=>clearTimeout(S)}},[e,y,x,b]),f.useEffect(()=>{var S;n.length>0&&((S=g.current)==null||S.scrollIntoView({behavior:"smooth"}))},[n]);const p=S=>{const _={id:Date.now().toString(),text:S,sender:"user",timestamp:new Date};i(k=>[...k,_])},w=S=>{p(S.question),m(!1);const _={id:"typing",text:"",sender:"bot",timestamp:new Date,isTyping:!0};i(k=>[...k,_]),setTimeout(()=>{i(k=>k.filter(P=>P.id!=="typing")),b(S.answer),setTimeout(()=>{b("Is there anything else I can help you with? You can ask another question or contact our support team."),m(!0)},1e3)},1500)},j=()=>{if(!a.trim())return;p(a);const S=a.toLowerCase();o(""),m(!1);const _={id:"typing",text:"",sender:"bot",timestamp:new Date,isTyping:!0};i(k=>[...k,_]),setTimeout(()=>{i(P=>P.filter(M=>M.id!=="typing"));let k=!1;for(const P of l)if(P.question.toLowerCase().split(" ").some(T=>S.includes(T))){b(P.answer),k=!0;break}k||(S.includes("deposit")||S.includes("fund")?b("To deposit funds, go to Wallet page, click Deposit, select your cryptocurrency, and send funds to the displayed address. Need more specific help?"):S.includes("withdraw")||S.includes("cash out")?b("To withdraw, go to Wallet page, click Withdraw, enter amount and wallet address. Superadmin will approve within 24 hours. Need assistance?"):S.includes("trade")||S.includes("trading")?b("We offer 30s (min 100 USDT, 10% profit) and 60s (min 1000 USDT, 15% profit) trading. Go to Trade page to start. Want more details?"):S.includes("verify")||S.includes("kyc")?b("Upload your ID and proof of address in Profile > Verification. Review takes 24-48 hours. Need help with documents?"):b("I'm not sure about that specific question. Would you like to contact our support team for personalized assistance?")),setTimeout(()=>{b("Anything else I can help with?"),m(!0)},1e3)},1500)};return e?r.jsx("div",{className:`fixed ${d?"bottom-4 right-4":"bottom-0 right-0 md:bottom-4 md:right-4"} z-50 ${d?"w-auto":"w-full md:w-96"} ${d?"h-auto":"h-full md:h-[600px]"} transition-all duration-300`,children:r.jsxs(de,{className:"bg-[#1a1f2e] border-purple-500/30 shadow-2xl h-full flex flex-col",children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 p-4 flex items-center justify-between rounded-t-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(Pb,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:"METACHROME Assistant"}),r.jsx("p",{className:"text-purple-200 text-xs",children:"Online 24/7"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>h(!d),className:"text-white hover:bg-white/20 p-2 rounded transition-colors",children:d?r.jsx(k2,{className:"w-4 h-4"}):r.jsx(E2,{className:"w-4 h-4"})}),r.jsx("button",{onClick:s,className:"text-white hover:bg-white/20 p-2 rounded transition-colors",children:r.jsx(Bl,{className:"w-4 h-4"})})]})]}),!d&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-[#0f1419]",children:[n.map(S=>r.jsx("div",{className:`flex ${S.sender==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`flex gap-2 max-w-[80%] ${S.sender==="user"?"flex-row-reverse":"flex-row"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${S.sender==="user"?"bg-purple-600":"bg-gray-600"}`,children:S.sender==="user"?r.jsx(Qr,{className:"w-4 h-4 text-white"}):r.jsx(Pb,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsx("div",{className:`rounded-lg p-3 ${S.sender==="user"?"bg-purple-600 text-white":"bg-gray-700 text-gray-100"}`,children:S.isTyping?r.jsxs("div",{className:"flex gap-1",children:[r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}):r.jsx("p",{className:"text-sm whitespace-pre-line",children:S.text})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1 px-1",children:S.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},S.id)),u&&l.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-gray-400 text-xs px-2",children:"Quick questions:"}),l.map(S=>r.jsx("button",{onClick:()=>w(S),className:"w-full text-left bg-gray-700/50 hover:bg-gray-700 text-gray-200 text-sm p-3 rounded-lg transition-colors border border-gray-600/30",children:S.question},S.id))]}),r.jsx("div",{ref:g})]}),r.jsxs("div",{className:"p-4 bg-[#1a1f2e] border-t border-gray-700",children:[r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsx("input",{type:"text",value:a,onChange:S=>o(S.target.value),onKeyPress:S=>S.key==="Enter"&&j(),placeholder:"Type your message...",className:"flex-1 bg-gray-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),r.jsx(W,{onClick:j,className:"bg-purple-600 hover:bg-purple-700 text-white px-4",children:r.jsx(Mm,{className:"w-4 h-4"})})]}),r.jsx(W,{onClick:t,className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white",children:"Contact Live Support"})]})]})]})}):null}function ZU({userId:t,username:e,isOpen:s,onClose:n}){const[i,a]=f.useState([]),[o,l]=f.useState(""),[c,d]=f.useState(null),[h,u]=f.useState(!1),[m,y]=f.useState(!1),[v,g]=f.useState(!1),b=f.useRef(null),x=f.useRef(null),{toast:p}=Zs();f.useEffect(()=>(s&&t&&(S(),j()),()=>{x.current&&x.current.close()}),[s,t]),f.useEffect(()=>{w()},[i]);const w=()=>{var k;(k=b.current)==null||k.scrollIntoView({behavior:"smooth"})},j=()=>{const P=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;try{const M=new WebSocket(P);M.onopen=()=>{console.log(" WebSocket connected for chat"),g(!0),M.send(JSON.stringify({type:"subscribe_chat",data:{userId:t}}))},M.onmessage=T=>{try{const E=JSON.parse(T.data);E.type==="new_message"?(a(I=>[...I,E.data]),E.data.sender_type==="admin"&&p({title:"New message from support",description:E.data.message.substring(0,50)+"..."})):E.type==="message_read"&&a(I=>I.map(V=>V.id===E.data.messageId?{...V,is_read:!0}:V))}catch(E){console.error("Error parsing WebSocket message:",E)}},M.onerror=T=>{console.error("WebSocket error:",T),g(!1)},M.onclose=()=>{console.log("WebSocket disconnected"),g(!1),setTimeout(()=>{s&&j()},3e3)},x.current=M}catch(M){console.error("Error connecting WebSocket:",M),g(!1)}},S=async()=>{u(!0);try{console.log(" Initializing chat for user:",t);const k=localStorage.getItem("authToken");if(!k){console.error(" No auth token found"),u(!1);return}const P=await fetch("/api/chat/conversation",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},credentials:"include"});if(console.log(" Conversation response:",P.status,P.ok),P.ok){const M=await P.json();console.log(" Conversation created/loaded:",M),d(M);const T=await fetch(`/api/chat/messages/${M.id}`,{headers:{Authorization:`Bearer ${k}`},credentials:"include"});if(T.ok){const E=await T.json();console.log(" Messages loaded:",E.length),a(E)}}else{const M=await P.text();console.error(" Failed to create conversation:",P.status,M),console.log(" Creating mock conversation as fallback"),d({id:`temp-${t}-${Date.now()}`,user_id:t,status:"active",priority:"normal",category:"general",last_message_at:new Date().toISOString(),created_at:new Date().toISOString()})}}catch(k){console.error("Error initializing chat:",k),console.log(" Creating mock conversation due to error"),d({id:`temp-${t}-${Date.now()}`,user_id:t,status:"active",priority:"normal",category:"general",last_message_at:new Date().toISOString(),created_at:new Date().toISOString()}),p({title:"Limited Mode",description:"Chat is running in limited mode. Messages may not be saved.",variant:"default"})}finally{u(!1)}},_=async()=>{if(!o.trim()||!c)return;const k=o;l("");const P={id:"temp-"+Date.now(),conversation_id:c.id,sender_id:t,sender_type:"user",message:k,is_read:!1,created_at:new Date().toISOString()};a(M=>[...M,P]);try{const M=localStorage.getItem("authToken");if(!M){console.error(" No auth token found"),p({title:"Authentication Error",description:"Please login again",variant:"destructive"});return}const T=await fetch("/api/chat/send",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M}`},credentials:"include",body:JSON.stringify({message:k})});if(T.ok){const E=await T.json();console.log(" Message sent successfully:",E),a(I=>I.map(V=>V.id===P.id?E:V)),x.current&&x.current.readyState===WebSocket.OPEN&&x.current.send(JSON.stringify({type:"send_message",data:{conversationId:c.id,message:k,senderId:t,senderType:"user"}}))}else{const E=await T.text();console.error(" Failed to send message:",T.status,E),a(I=>I.filter(V=>V.id!==P.id)),p({title:"Send Failed",description:`Failed to send message (${T.status}). Please try again.`,variant:"destructive"})}}catch(M){console.error("Error sending message:",M),a(T=>T.filter(E=>E.id!==P.id)),p({title:"Send Failed",description:"Failed to send message. Please try again.",variant:"destructive"})}};return s?r.jsx("div",{className:`fixed ${m?"bottom-4 right-4":"bottom-0 right-0 md:bottom-4 md:right-4"} z-50 ${m?"w-auto":"w-full md:w-96"} ${m?"h-auto":"h-full md:h-[600px]"} transition-all duration-300`,children:r.jsxs(de,{className:"bg-[#1a1f2e] border-purple-500/30 shadow-2xl h-full flex flex-col",children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 p-4 flex items-center justify-between rounded-t-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center relative",children:[r.jsx(Qr,{className:"w-6 h-6 text-white"}),v&&r.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:"Live Support"}),r.jsx("p",{className:"text-purple-200 text-xs flex items-center gap-1",children:v?r.jsxs(r.Fragment,{children:[r.jsx(qr,{className:"w-3 h-3"}),"Connected"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ph,{className:"w-3 h-3"}),"Connecting..."]})})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>y(!m),className:"text-white hover:bg-white/20 p-2 rounded transition-colors",children:m?r.jsx(k2,{className:"w-4 h-4"}):r.jsx(E2,{className:"w-4 h-4"})}),r.jsx("button",{onClick:n,className:"text-white hover:bg-white/20 p-2 rounded transition-colors",children:r.jsx(Bl,{className:"w-4 h-4"})})]})]}),!m&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-[#0f1419]",children:[h?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("div",{className:"text-gray-400",children:"Loading chat..."})}):i.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[r.jsx(Qr,{className:"w-16 h-16 text-gray-600 mb-4"}),r.jsx("h3",{className:"text-white font-semibold mb-2",children:"Start a conversation"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Our support team is here to help you 24/7. Send a message to get started."})]}):i.map(k=>r.jsx("div",{className:`flex ${k.sender_type==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`flex gap-2 max-w-[80%] ${k.sender_type==="user"?"flex-row-reverse":"flex-row"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${k.sender_type==="user"?"bg-purple-600":k.sender_type==="admin"?"bg-blue-600":"bg-gray-600"}`,children:r.jsx(Qr,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsx("div",{className:`rounded-lg p-3 ${k.sender_type==="user"?"bg-purple-600 text-white":k.sender_type==="admin"?"bg-blue-600 text-white":"bg-gray-700 text-gray-100"}`,children:r.jsx("p",{className:"text-sm whitespace-pre-line",children:k.message})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1 px-1",children:new Date(k.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},k.id)),r.jsx("div",{ref:b})]}),r.jsx("div",{className:"p-4 bg-[#1a1f2e] border-t border-gray-700",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:o,onChange:k=>l(k.target.value),onKeyPress:k=>k.key==="Enter"&&!k.shiftKey&&_(),placeholder:"Type your message...",disabled:!c,className:"flex-1 bg-gray-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50"}),r.jsx(W,{onClick:_,disabled:!c||!o.trim(),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 disabled:opacity-50",children:r.jsx(Mm,{className:"w-4 h-4"})})]})})]})]})}):null}function e8(){const[t,e]=f.useState(null),[s,n]=f.useState(null),[i,a]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(null),[h,u]=f.useState(!0),m=Wn();f.useEffect(()=>{console.log("Fetching current user..."),u(!0);const g=localStorage.getItem("user");if(g)try{const b=JSON.parse(g);if(console.log("User from localStorage:",b),b&&b.id){d(b),u(!1);return}}catch(b){console.error("Error parsing stored user:",b)}fetch("/api/auth",{credentials:"include"}).then(b=>{if(console.log("User API response status:",b.status,b.ok),!b.ok)throw new Error(`HTTP ${b.status}`);return b.json()}).then(b=>{console.log("User data received:",b),b&&b.id?(d(b),localStorage.setItem("user",JSON.stringify(b))):console.warn("No valid user data received")}).catch(b=>{console.error("Error fetching user:",b)}).finally(()=>{u(!1)})},[]);const y=[{icon:"/icon_support_email.png",title:"Email Us",description:"Email our support team for general queries or platform assistance.",contact:"support@metachrome.io",action:"Email",color:"from-purple-500 to-purple-600"},{icon:"/icon_support_livechat.png",title:"Live Chat",description:"Get in touch with our team members over Live Chat 24/7.",contact:"",action:"Live Chat",color:"from-purple-500 to-purple-600"}],v=[{question:"What products does METACHROME Ecosystem include?",answer:"Our ecosystem includes spot trading, futures, options, and advanced trading tools with MetaMask integration."},{question:"Why is it better to trade cryptocurrencies on METACHROME?",answer:"Advanced trading features with competitive fees, superior execution, and admin-controlled outcomes."},{question:"Can I buy cryptocurrency with a credit card?",answer:"Yes, we support multiple payment methods including credit cards and crypto wallets."},{question:"How to buy cryptocurrency on METACHROME?",answer:"Connect your MetaMask wallet and start trading with our intuitive interface."},{question:"How to Complete Identity Verification?",answer:"Upload required documents through our secure verification system for enhanced features."}];return r.jsxs("div",{className:"min-h-[10vh] bg-[#0B0E11]",children:[r.jsx("section",{className:`relative overflow-hidden bg-black w-full ${m?"pt-[25px] pb-0":"py-8"}`,children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:`relative overflow-hidden rounded-lg ${m?"h-auto":"h-80"}`,children:[r.jsx("img",{src:m?YU:XU,alt:"Support Banner",className:"w-full h-full object-contain"}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"})]})})}),r.jsx("section",{className:"bg-black",children:r.jsx("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${m?"py-4":"py-8 sm:py-16"}`,children:r.jsx("div",{className:`grid gap-6 ${m?"grid-cols-1 mb-8":"grid-cols-1 md:grid-cols-2 gap-8 mb-20"}`,children:y.map((g,b)=>r.jsx(de,{className:"bg-[#1A1D29] border-gray-800 overflow-hidden hover:bg-[#1E2329] transition-colors rounded-xl",children:r.jsxs(he,{className:`${m?"p-6":"p-8"} text-center h-full flex flex-col`,children:[r.jsx("div",{className:`${m?"mb-4":"mb-6"}`,children:r.jsx("img",{src:g.icon,alt:g.title,className:`mx-auto object-contain ${m?"w-12 h-12":"w-16 h-16"}`,onLoad:()=>console.log("Support icon loaded:",g.icon),onError:x=>{console.error("Support icon failed to load:",x.target.src)}})}),r.jsx("h3",{className:`font-semibold text-white ${m?"text-lg mb-3":"text-xl mb-4"}`,children:g.title}),r.jsx("p",{className:`text-gray-400 leading-relaxed flex-grow ${m?"mb-4 text-sm":"mb-6 text-sm"}`,children:g.description}),g.contact&&r.jsx("p",{className:`text-white font-medium ${m?"mb-4 text-sm":"mb-6"}`,children:g.contact}),g.title!=="Email Us"&&r.jsx(W,{onClick:()=>a(!0),className:`text-white w-full rounded-lg font-medium mt-auto hover:opacity-90 ${m?"py-2 text-sm":"py-3"}`,style:{backgroundColor:"#AB00FF"},children:g.action})]})},b))})})}),r.jsx("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-8 sm:py-16",children:m?r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Frequently Asked Questions"}),r.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed text-sm sm:text-base px-2",children:"Begin your trading journey and stand a chance to earn exciting rewards worth up to $300 through our Mystery Box promotion."}),r.jsx("div",{className:"flex justify-center mb-8",children:r.jsx("div",{className:"w-48 h-48 sm:w-64 sm:h-64",children:r.jsx("img",{src:Vh,alt:"Crypto FAQ",className:"w-full h-full object-contain"})})})]}),r.jsx("div",{className:"space-y-4 px-2",children:v.map((g,b)=>r.jsxs(Uh,{open:s===b,onOpenChange:()=>n(s===b?null:b),children:[r.jsx(Bh,{asChild:!0,children:r.jsx(de,{className:`bg-black border-2 transition-all duration-300 cursor-pointer ${s===b?"border-purple-500 shadow-lg shadow-purple-500/50":"border-gray-700 hover:border-purple-400"}`,children:r.jsx(he,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:`font-medium pr-3 text-sm transition-colors duration-300 ${s===b?"text-purple-400":"text-white"}`,children:g.question}),r.jsx(gi,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 flex-shrink-0 ${s===b?"rotate-180 text-purple-400":""}`})]})})})}),r.jsx(zh,{children:r.jsx("div",{className:"px-4 pb-4 bg-black border-l-2 border-r-2 border-b-2 border-gray-700 rounded-b-lg",children:r.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:g.answer})})})]},b))})]}):r.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[r.jsxs("div",{className:"order-2 lg:order-1 p-0 m-0",children:[r.jsx("h2",{className:"text-5xl font-bold text-white mb-6",children:"Frequently Asked Questions"}),r.jsx("p",{className:"text-gray-400 mb-0 leading-relaxed text-xl",children:"Begin your trading journey and stand a chance to earn exciting rewards worth up to $300 through our Mystery Box promotion."}),r.jsx("div",{className:"p-0 m-0",children:r.jsx("div",{className:"w-[564px] h-[564px] p-0 m-0",children:r.jsx("img",{src:Vh,alt:"Crypto FAQ",className:"w-full h-full object-contain p-0 m-0 block"})})})]}),r.jsx("div",{className:"space-y-4 order-1 lg:order-2",children:v.map((g,b)=>r.jsxs(Uh,{open:s===b,onOpenChange:()=>n(s===b?null:b),children:[r.jsx(Bh,{asChild:!0,children:r.jsx(de,{className:`bg-black border-2 transition-all duration-300 cursor-pointer ${s===b?"border-purple-500 shadow-lg shadow-purple-500/50":"border-gray-700 hover:border-purple-400"}`,children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:`font-medium pr-4 text-lg transition-colors duration-300 ${s===b?"text-purple-400":"text-white"}`,children:g.question}),r.jsx(gi,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 flex-shrink-0 ${s===b?"rotate-180 text-purple-400":""}`})]})})})}),r.jsx(zh,{children:r.jsx("div",{className:"px-6 pb-6 bg-black border-l-2 border-r-2 border-b-2 border-gray-700 rounded-b-lg",children:r.jsx("p",{className:"text-gray-400 text-lg",children:g.answer})})})]},b))})]})}),i&&r.jsx(JU,{isOpen:i,onClose:()=>a(!1),onContactSupport:async()=>{console.log("=== Contact Support Clicked ==="),console.log("Current user state:",c),console.log("Is loading user:",h);let g=c;if(!g||!g.id){console.log("User not loaded, trying localStorage...");const b=localStorage.getItem("user");if(b)try{g=JSON.parse(b),console.log("User from localStorage:",g),g&&g.id?d(g):g=null}catch(x){console.error("Error parsing stored user:",x),g=null}if(!g||!g.id){console.log("Fetching from API...");try{const x=await fetch("/api/auth");console.log("Fetch response:",x.status,x.ok),x.ok?(g=await x.json(),console.log("User fetched:",g),g&&g.id?(d(g),localStorage.setItem("user",JSON.stringify(g))):(console.error("Invalid user data:",g),g=null)):console.error("Fetch failed with status:",x.status)}catch(x){console.error("Error fetching user:",x)}}}if(!g||!g.id){console.error("No valid user found, showing alert"),alert("Please login first to contact live support");return}console.log("Opening live chat for user:",g.id,g.username||g.email),l(!0),setTimeout(()=>{a(!1)},100)}}),o&&c&&r.jsx(ZU,{userId:c.id,username:c.username||c.email,isOpen:o,onClose:()=>l(!1)})]})}function t8(){return r.jsx("div",{className:"min-h-screen",style:{backgroundColor:"rgb(13 11 31 / 98%)"},children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"Trade Policy  Metachrome"}),r.jsxs("p",{className:"text-gray-400 mb-8",children:[r.jsx("strong",{children:"Effective Date:"})," October 26, 2024"]}),r.jsxs("div",{className:"prose prose-lg max-w-none",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"1. Introduction"}),r.jsxs("p",{className:"text-gray-300 mb-4",children:['Metachrome (hereinafter referred to as "the Company") operates the website ',r.jsx("strong",{children:"https://www.metachrome.io/"}),' and related applications (hereinafter referred to as "the Platform") dedicated to the trading of digital assets and the provision of associated services (hereinafter referred to as "the Services").']}),r.jsx("p",{className:"text-gray-300 mb-4",children:'All individuals or entities who access or use this Platform are regarded as users (hereinafter referred to as "the Users," or "you").'}),r.jsx("p",{className:"text-gray-300 mb-4",children:"This Trade Policy describes the terms, conditions, rules, and practices governing trading activities conducted via the Platform, including how trades are executed, processed, settled, and maintained."}),r.jsx("p",{className:"text-gray-300 mb-4",children:"By accessing or using the Platform, you acknowledge and accept this Trade Policy. This Policy may be updated from time to time; continued use of the Platform constitutes acceptance of such updates. Users are responsible for reviewing this Trade Policy periodically."}),r.jsx("hr",{className:"my-8 border-gray-700"}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"2. Scope of Trading Services"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"The Platform provides a marketplace for the trading of digital assets, including but not limited to cryptocurrencies, tokens, and other blockchain-based instruments. The Company acts as a facilitator and does not provide investment advice, financial planning, or recommendations regarding specific trades."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"3. Account Registration and Verification"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"To access trading services, users must register an account and complete any required identity verification procedures (KYC/AML). The Company reserves the right to request additional documentation or information at any time."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"4. Order Types and Execution"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"The Platform supports various order types including market orders, limit orders, and stop orders. All orders are subject to availability, market conditions, and the Platform's matching engine. The Company does not guarantee execution at any specific price."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"5. Fees and Charges"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"Trading on the Platform may be subject to fees including but not limited to trading fees, withdrawal fees, and network fees. All applicable fees are disclosed on the Platform and may be updated from time to time."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"6. Market Risks"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"Digital asset trading involves substantial risk. Prices can be highly volatile and may result in significant losses. Users acknowledge that they trade at their own risk and the Company is not liable for any trading losses."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"7. Prohibited Activities"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"Users are prohibited from engaging in market manipulation, wash trading, spoofing, or any other fraudulent or deceptive trading practices. Violation may result in account suspension or termination."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"8. Settlement and Clearing"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"Trades are settled according to the Platform's settlement procedures. The Company reserves the right to reverse or cancel trades in cases of error, fraud, or system malfunction."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"9. Dispute Resolution"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"Any disputes arising from trading activities shall be resolved in accordance with the Platform's Terms of Service and applicable law."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"10. Amendments"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"The Company reserves the right to amend this Trade Policy at any time. Users will be notified of material changes and continued use constitutes acceptance of the amended policy."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"11. Contact Information"}),r.jsxs("p",{className:"text-gray-300 mb-4",children:["For questions regarding this Trade Policy, please contact us at ",r.jsx("a",{href:"mailto:support@metachrome.io",className:"text-purple-400 hover:underline",children:"support@metachrome.io"})]}),r.jsx("hr",{className:"my-8 border-gray-700"}),r.jsxs("p",{className:"text-sm text-gray-400 mt-8",children:[r.jsx("strong",{children:"Last Updated:"})," October 26, 2024"]})]})]})})}function s8(){return r.jsx("div",{className:"min-h-screen",style:{backgroundColor:"rgb(13 11 31 / 98%)"},children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"Terms of Service  Metachrome"}),r.jsxs("p",{className:"text-gray-400 mb-8",children:[r.jsx("strong",{children:"Last updated:"})," October 26, 2024"]}),r.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4 mb-8",children:r.jsxs("p",{className:"text-gray-200",children:[r.jsx("strong",{children:"Important:"})," By opening an account, using ",r.jsx("a",{href:"https://www.metachrome.io",className:"text-purple-400 hover:underline",children:"metachrome.io"}),' and/or any Services provided by Metachrome, you acknowledge that you have read, understood, and agreed to these Terms of Service (the "Terms"). If you do not agree, you must cease using the Platform immediately.']})}),r.jsxs("div",{className:"prose prose-lg max-w-none",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"(1) Our Agreement"}),r.jsx("h3",{className:"text-xl font-semibold text-white mt-6 mb-3",children:"1.1 Preliminaries"}),r.jsx("p",{className:"text-gray-300 mb-4",children:'These Terms of Service constitute a legally binding agreement between you and Metachrome ("we," "us," or "our"). By accessing or using our Platform, you agree to be bound by these Terms.'}),r.jsx("h3",{className:"text-xl font-semibold text-white mt-6 mb-3",children:"1.2 Definitions"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsxs("li",{children:[r.jsx("strong",{children:'"Platform"'})," means the Metachrome website, mobile applications, and all related services"]}),r.jsxs("li",{children:[r.jsx("strong",{children:'"Services"'})," means all trading, wallet, and related services provided by Metachrome"]}),r.jsxs("li",{children:[r.jsx("strong",{children:'"User"'})," or ",r.jsx("strong",{children:'"you"'})," means any person or entity using the Platform"]}),r.jsxs("li",{children:[r.jsx("strong",{children:'"Digital Assets"'})," means cryptocurrencies, tokens, and other blockchain-based assets"]})]}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"(2) Eligibility"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"To use our Services, you must:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsx("li",{children:"Be at least 18 years of age"}),r.jsx("li",{children:"Have the legal capacity to enter into binding contracts"}),r.jsx("li",{children:"Not be located in a jurisdiction where our Services are prohibited"}),r.jsx("li",{children:"Comply with all applicable laws and regulations"})]}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"(3) Account Registration"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"You must register an account to access certain Services. You agree to:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsx("li",{children:"Provide accurate and complete information"}),r.jsx("li",{children:"Maintain the security of your account credentials"}),r.jsx("li",{children:"Notify us immediately of any unauthorized access"}),r.jsx("li",{children:"Accept responsibility for all activities under your account"})]}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"(4) Trading Services"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"Our Platform facilitates the trading of Digital Assets. You acknowledge that:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsx("li",{children:"Trading involves substantial risk and may result in losses"}),r.jsx("li",{children:"We do not provide investment advice or recommendations"}),r.jsx("li",{children:"All trading decisions are your sole responsibility"}),r.jsx("li",{children:"Market conditions may affect order execution"})]}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"(5) Fees and Charges"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"You agree to pay all applicable fees as disclosed on the Platform, including:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsx("li",{children:"Trading fees"}),r.jsx("li",{children:"Withdrawal fees"}),r.jsx("li",{children:"Network transaction fees"}),r.jsx("li",{children:"Any other fees disclosed on the Platform"})]}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"(6) Prohibited Activities"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"You agree not to:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsx("li",{children:"Engage in market manipulation or fraudulent trading"}),r.jsx("li",{children:"Use the Platform for money laundering or illegal activities"}),r.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),r.jsx("li",{children:"Violate any applicable laws or regulations"}),r.jsx("li",{children:"Interfere with other users' access to the Platform"})]}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"(7) Intellectual Property"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"All content, trademarks, and intellectual property on the Platform are owned by Metachrome or our licensors. You may not use, copy, or distribute any content without our prior written permission."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"(8) Limitation of Liability"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"To the maximum extent permitted by law, Metachrome shall not be liable for any indirect, incidental, special, or consequential damages arising from your use of the Platform or Services."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"(9) Indemnification"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"You agree to indemnify and hold harmless Metachrome from any claims, damages, or expenses arising from your use of the Platform or violation of these Terms."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"(10) Termination"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"We reserve the right to suspend or terminate your account at any time for violation of these Terms or for any other reason at our sole discretion."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"(11) Governing Law"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"These Terms shall be governed by and construed in accordance with applicable law. Any disputes shall be resolved through binding arbitration."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"(12) Changes to Terms"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"We reserve the right to modify these Terms at any time. Material changes will be notified to users, and continued use constitutes acceptance of the modified Terms."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"(13) Contact Us"}),r.jsxs("p",{className:"text-gray-300 mb-4",children:["For questions about these Terms, please contact us at ",r.jsx("a",{href:"mailto:support@metachrome.io",className:"text-purple-400 hover:underline",children:"support@metachrome.io"})]}),r.jsx("hr",{className:"my-8 border-gray-700"}),r.jsxs("p",{className:"text-sm text-gray-400 mt-8",children:[r.jsx("strong",{children:"Last Updated:"})," October 26, 2024"]})]})]})})}function r8(){return r.jsx("div",{className:"min-h-screen",style:{backgroundColor:"rgb(13 11 31 / 98%)"},children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"Privacy Policy  Metachrome"}),r.jsxs("p",{className:"text-gray-400 mb-8",children:[r.jsx("strong",{children:"Effective date:"})," October 26, 2024  ",r.jsx("strong",{children:"Last updated:"})," October 26, 2024"]}),r.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4 mb-8",children:r.jsxs("p",{className:"text-gray-200",children:[r.jsx("strong",{children:"Summary (TL;DR):"})," This Policy explains what personal data we collect, why we collect it, how we use and share it, how long we keep it, and your rightsespecially under the EU/UK GDPR. If you disagree with this Policy, please do not use the Platform."]})}),r.jsxs("div",{className:"prose prose-lg max-w-none",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"1. Introduction"}),r.jsx("p",{className:"text-gray-300 mb-4",children:'Metachrome ("we," "us," or "our") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your personal information when you use our Platform and Services.'}),r.jsx("p",{className:"text-gray-300 mb-4",children:"By using our Platform, you consent to the data practices described in this Policy. If you do not agree with this Policy, please do not access or use our Services."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"2. Information We Collect"}),r.jsx("h3",{className:"text-xl font-semibold text-white mt-6 mb-3",children:"2.1 Personal Information"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"We collect personal information that you provide to us, including:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsx("li",{children:"Name, email address, and contact information"}),r.jsx("li",{children:"Government-issued identification documents (for KYC/AML compliance)"}),r.jsx("li",{children:"Financial information (bank account details, transaction history)"}),r.jsx("li",{children:"Proof of address and other verification documents"})]}),r.jsx("h3",{className:"text-xl font-semibold text-white mt-6 mb-3",children:"2.2 Automatically Collected Information"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"When you use our Platform, we automatically collect:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsx("li",{children:"IP address and device information"}),r.jsx("li",{children:"Browser type and operating system"}),r.jsx("li",{children:"Usage data and analytics"}),r.jsx("li",{children:"Cookies and similar tracking technologies"})]}),r.jsx("h3",{className:"text-xl font-semibold text-white mt-6 mb-3",children:"2.3 Transaction Information"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"We collect information about your trading activities, including:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsx("li",{children:"Trade history and order details"}),r.jsx("li",{children:"Wallet addresses and transaction records"}),r.jsx("li",{children:"Deposit and withdrawal information"})]}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"3. How We Use Your Information"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"We use your information for the following purposes:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsx("li",{children:"To provide and maintain our Services"}),r.jsx("li",{children:"To verify your identity and comply with KYC/AML regulations"}),r.jsx("li",{children:"To process transactions and manage your account"}),r.jsx("li",{children:"To detect and prevent fraud and security threats"}),r.jsx("li",{children:"To communicate with you about your account and our Services"}),r.jsx("li",{children:"To improve our Platform and develop new features"}),r.jsx("li",{children:"To comply with legal obligations and regulatory requirements"})]}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"4. How We Share Your Information"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"We may share your information with:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Service Providers:"})," Third-party vendors who assist us in operating our Platform"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Regulatory Authorities:"})," Government agencies and law enforcement when required by law"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Business Partners:"})," With your consent, for specific purposes"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Legal Proceedings:"})," When necessary to comply with legal obligations or protect our rights"]})]}),r.jsx("p",{className:"text-gray-300 mb-4",children:"We do not sell your personal information to third parties."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"5. Data Security"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"We implement appropriate technical and organizational measures to protect your personal information, including:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsx("li",{children:"Encryption of sensitive data"}),r.jsx("li",{children:"Secure server infrastructure"}),r.jsx("li",{children:"Regular security audits and monitoring"}),r.jsx("li",{children:"Access controls and authentication measures"})]}),r.jsx("p",{className:"text-gray-300 mb-4",children:"However, no method of transmission over the Internet is 100% secure, and we cannot guarantee absolute security."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"6. Data Retention"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"We retain your personal information for as long as necessary to:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsx("li",{children:"Provide our Services to you"}),r.jsx("li",{children:"Comply with legal and regulatory obligations"}),r.jsx("li",{children:"Resolve disputes and enforce our agreements"})]}),r.jsx("p",{className:"text-gray-300 mb-4",children:"After this period, we will securely delete or anonymize your information."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"7. Your Rights (GDPR)"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"If you are located in the EU/UK, you have the following rights:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4 text-gray-300",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Right to Access:"})," Request a copy of your personal data"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Right to Rectification:"})," Correct inaccurate or incomplete data"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Right to Erasure:"})," Request deletion of your data"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Right to Restriction:"})," Limit how we use your data"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Right to Data Portability:"})," Receive your data in a structured format"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Right to Object:"})," Object to certain processing activities"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Right to Withdraw Consent:"})," Withdraw consent at any time"]})]}),r.jsxs("p",{className:"text-gray-300 mb-4",children:["To exercise these rights, please contact us at ",r.jsx("a",{href:"mailto:privacy@metachrome.io",className:"text-purple-400 hover:underline",children:"privacy@metachrome.io"})]}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"8. Cookies and Tracking"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"We use cookies and similar technologies to enhance your experience. You can control cookie settings through your browser preferences."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"9. International Data Transfers"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"Your information may be transferred to and processed in countries outside your jurisdiction. We ensure appropriate safeguards are in place to protect your data."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"10. Children's Privacy"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"Our Services are not intended for individuals under 18 years of age. We do not knowingly collect personal information from children."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"11. Changes to This Policy"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"We may update this Privacy Policy from time to time. We will notify you of material changes by posting the updated Policy on our Platform."}),r.jsx("h2",{className:"text-2xl font-bold text-white mt-8 mb-4",children:"12. Contact Us"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"For questions about this Privacy Policy or our data practices, please contact us at:"}),r.jsxs("ul",{className:"list-none mb-4 text-gray-300",children:[r.jsxs("li",{children:["Email: ",r.jsx("a",{href:"mailto:privacy@metachrome.io",className:"text-purple-400 hover:underline",children:"privacy@metachrome.io"})]}),r.jsxs("li",{children:["Support: ",r.jsx("a",{href:"mailto:support@metachrome.io",className:"text-purple-400 hover:underline",children:"support@metachrome.io"})]})]}),r.jsx("hr",{className:"my-8 border-gray-700"}),r.jsxs("p",{className:"text-sm text-gray-400 mt-8",children:[r.jsx("strong",{children:"Last Updated:"})," October 26, 2024"]})]})]})})}const ka=f.forwardRef(({className:t,...e},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:Ue("w-full caption-bottom text-sm",t),...e})}));ka.displayName="Table";const Ea=f.forwardRef(({className:t,...e},s)=>r.jsx("thead",{ref:s,className:Ue("[&_tr]:border-b",t),...e}));Ea.displayName="TableHeader";const Pa=f.forwardRef(({className:t,...e},s)=>r.jsx("tbody",{ref:s,className:Ue("[&_tr:last-child]:border-0",t),...e}));Pa.displayName="TableBody";const n8=f.forwardRef(({className:t,...e},s)=>r.jsx("tfoot",{ref:s,className:Ue("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));n8.displayName="TableFooter";const Es=f.forwardRef(({className:t,...e},s)=>r.jsx("tr",{ref:s,className:Ue("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Es.displayName="TableRow";const tt=f.forwardRef(({className:t,...e},s)=>r.jsx("th",{ref:s,className:Ue("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));tt.displayName="TableHead";const Ge=f.forwardRef(({className:t,...e},s)=>r.jsx("td",{ref:s,className:Ue("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Ge.displayName="TableCell";const i8=f.forwardRef(({className:t,...e},s)=>r.jsx("caption",{ref:s,className:Ue("mt-4 text-sm text-muted-foreground",t),...e}));i8.displayName="TableCaption";var df="Tabs",[a8]=Zr(df,[Bm]),qk=Bm(),[o8,Iy]=a8(df),Qk=f.forwardRef((t,e)=>{const{__scopeTabs:s,value:n,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=t,h=$m(l),[u,m]=ca({prop:n,onChange:i,defaultProp:a??"",caller:df});return r.jsx(o8,{scope:s,baseId:xn(),value:u,onValueChange:m,orientation:o,dir:h,activationMode:c,children:r.jsx(We.div,{dir:h,"data-orientation":o,...d,ref:e})})});Qk.displayName=df;var Xk="TabsList",Yk=f.forwardRef((t,e)=>{const{__scopeTabs:s,loop:n=!0,...i}=t,a=Iy(Xk,s),o=qk(s);return r.jsx(wC,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:r.jsx(We.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});Yk.displayName=Xk;var Jk="TabsTrigger",Zk=f.forwardRef((t,e)=>{const{__scopeTabs:s,value:n,disabled:i=!1,...a}=t,o=Iy(Jk,s),l=qk(s),c=sE(o.baseId,n),d=rE(o.baseId,n),h=n===o.value;return r.jsx(jC,{asChild:!0,...l,focusable:!i,active:h,children:r.jsx(We.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:e,onMouseDown:we(t.onMouseDown,u=>{!i&&u.button===0&&u.ctrlKey===!1?o.onValueChange(n):u.preventDefault()}),onKeyDown:we(t.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(n)}),onFocus:we(t.onFocus,()=>{const u=o.activationMode!=="manual";!h&&!i&&u&&o.onValueChange(n)})})})});Zk.displayName=Jk;var eE="TabsContent",tE=f.forwardRef((t,e)=>{const{__scopeTabs:s,value:n,forceMount:i,children:a,...o}=t,l=Iy(eE,s),c=sE(l.baseId,n),d=rE(l.baseId,n),h=n===l.value,u=f.useRef(h);return f.useEffect(()=>{const m=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(m)},[]),r.jsx(en,{present:i||h,children:({present:m})=>r.jsx(We.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:u.current?"0s":void 0},children:m&&a})})});tE.displayName=eE;function sE(t,e){return`${t}-trigger-${e}`}function rE(t,e){return`${t}-content-${e}`}var l8=Qk,nE=Yk,iE=Zk,aE=tE;const oE=l8,Zh=f.forwardRef(({className:t,...e},s)=>r.jsx(nE,{ref:s,className:Ue("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Zh.displayName=nE.displayName;const bs=f.forwardRef(({className:t,...e},s)=>r.jsx(iE,{ref:s,className:Ue("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));bs.displayName=iE.displayName;const Ks=f.forwardRef(({className:t,...e},s)=>r.jsx(aE,{ref:s,className:Ue("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ks.displayName=aE.displayName;const _u=43200,jj=1440,Nj=Symbol.for("constructDateFrom");function Ly(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Nj in t?t[Nj](e):t instanceof Date?new t.constructor(e):new Date(e)}function ma(t,e){return Ly(t,t)}let c8={};function d8(){return c8}function Sj(t){const e=ma(t),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return s.setUTCFullYear(e.getFullYear()),+t-+s}function Fy(t,...e){const s=Ly.bind(null,t||e.find(n=>typeof n=="object"));return e.map(s)}function th(t,e){const s=+ma(t)-+ma(e);return s<0?-1:s>0?1:s}function u8(t){return Ly(t,Date.now())}function h8(t,e,s){const[n,i]=Fy(s==null?void 0:s.in,t,e),a=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return a*12+o}function m8(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function f8(t,e){return+ma(t)-+ma(e)}function p8(t,e){const s=ma(t);return s.setHours(23,59,59,999),s}function g8(t,e){const s=ma(t),n=s.getMonth();return s.setFullYear(s.getFullYear(),n+1,0),s.setHours(23,59,59,999),s}function x8(t,e){const s=ma(t);return+p8(s)==+g8(s)}function y8(t,e,s){const[n,i,a]=Fy(s==null?void 0:s.in,t,t,e),o=th(i,a),l=Math.abs(h8(i,a));if(l<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*l);let c=th(i,a)===-o;x8(n)&&l===1&&th(n,a)===1&&(c=!1);const d=o*(l-+c);return d===0?0:d}function v8(t,e,s){const n=f8(t,e)/1e3;return m8(s==null?void 0:s.roundingMethod)(n)}const b8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},w8=(t,e,s)=>{let n;const i=b8[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};function Mp(t){return(e={})=>{const s=e.width?String(e.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const j8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},N8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},S8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},C8={date:Mp({formats:j8,defaultWidth:"full"}),time:Mp({formats:N8,defaultWidth:"full"}),dateTime:Mp({formats:S8,defaultWidth:"full"})},T8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},k8=(t,e,s,n)=>T8[t];function dc(t){return(e,s)=>{const n=s!=null&&s.context?String(s.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=s!=null&&s.width?String(s.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=s!=null&&s.width?String(s.width):t.defaultWidth;i=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const E8={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},P8={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_8={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},M8={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},A8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},D8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},R8=(t,e)=>{const s=Number(t),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},O8={ordinalNumber:R8,era:dc({values:E8,defaultWidth:"wide"}),quarter:dc({values:P8,defaultWidth:"wide",argumentCallback:t=>t-1}),month:dc({values:_8,defaultWidth:"wide"}),day:dc({values:M8,defaultWidth:"wide"}),dayPeriod:dc({values:A8,defaultWidth:"wide",formattingValues:D8,defaultFormattingWidth:"wide"})};function uc(t){return(e,s={})=>{const n=s.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?L8(l,u=>u.test(o)):I8(l,u=>u.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=s.valueCallback?s.valueCallback(d):d;const h=e.slice(o.length);return{value:d,rest:h}}}function I8(t,e){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return s}function L8(t,e){for(let s=0;s<t.length;s++)if(e(t[s]))return s}function F8(t){return(e,s={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=s.valueCallback?s.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const $8=/^(\d+)(th|st|nd|rd)?/i,U8=/\d+/i,B8={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},z8={any:[/^b/i,/^(a|c)/i]},V8={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},W8={any:[/1/i,/2/i,/3/i,/4/i]},H8={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},K8={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},G8={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},q8={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Q8={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},X8={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Y8={ordinalNumber:F8({matchPattern:$8,parsePattern:U8,valueCallback:t=>parseInt(t,10)}),era:uc({matchPatterns:B8,defaultMatchWidth:"wide",parsePatterns:z8,defaultParseWidth:"any"}),quarter:uc({matchPatterns:V8,defaultMatchWidth:"wide",parsePatterns:W8,defaultParseWidth:"any",valueCallback:t=>t+1}),month:uc({matchPatterns:H8,defaultMatchWidth:"wide",parsePatterns:K8,defaultParseWidth:"any"}),day:uc({matchPatterns:G8,defaultMatchWidth:"wide",parsePatterns:q8,defaultParseWidth:"any"}),dayPeriod:uc({matchPatterns:Q8,defaultMatchWidth:"any",parsePatterns:X8,defaultParseWidth:"any"})},J8={code:"en-US",formatDistance:w8,formatLong:C8,formatRelative:k8,localize:O8,match:Y8,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Z8(t,e,s){const n=d8(),i=(s==null?void 0:s.locale)??n.locale??J8,a=2520,o=th(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:o}),[c,d]=Fy(s==null?void 0:s.in,...o>0?[e,t]:[t,e]),h=v8(d,c),u=(Sj(d)-Sj(c))/1e3,m=Math.round((h-u)/60);let y;if(m<2)return s!=null&&s.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,l):h<10?i.formatDistance("lessThanXSeconds",10,l):h<20?i.formatDistance("lessThanXSeconds",20,l):h<40?i.formatDistance("halfAMinute",0,l):h<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):m===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",m,l);if(m<45)return i.formatDistance("xMinutes",m,l);if(m<90)return i.formatDistance("aboutXHours",1,l);if(m<jj){const v=Math.round(m/60);return i.formatDistance("aboutXHours",v,l)}else{if(m<a)return i.formatDistance("xDays",1,l);if(m<_u){const v=Math.round(m/jj);return i.formatDistance("xDays",v,l)}else if(m<_u*2)return y=Math.round(m/_u),i.formatDistance("aboutXMonths",y,l)}if(y=y8(d,c),y<12){const v=Math.round(m/_u);return i.formatDistance("xMonths",v,l)}else{const v=y%12,g=Math.trunc(y/12);return v<3?i.formatDistance("aboutXYears",g,l):v<9?i.formatDistance("overXYears",g,l):i.formatDistance("almostXYears",g+1,l)}}function eB(t,e){return Z8(t,u8(t),e)}function tB({onTabChange:t}){const[e,s]=f.useState([]),[n,i]=f.useState(!1),[a,o]=f.useState(0),l=f.useRef(null),c=f.useRef(null);console.log(" NotificationBell component rendered"),console.log(" Current state:",{notificationsCount:e.length,unreadCount:a,isOpen:n}),f.useEffect(()=>{let p=0;const w=3;let j;const S=()=>{console.log(" Connecting to notification stream... (attempt",p+1,")");const k=localStorage.getItem("authToken");if(!k){console.error(" No auth token found, cannot connect to notification stream");return}const P=`/sse/notifications/stream?token=${encodeURIComponent(k)}`;console.log(" SSE URL:",P);const M=new EventSource(P,{withCredentials:!0});return console.log(" EventSource created, readyState:",M.readyState),M.onopen=()=>{console.log(" Notification stream connected successfully!"),console.log(" EventSource readyState:",M.readyState),p=0},M.onmessage=T=>{try{console.log(" SSE message received:",T.data);const E=JSON.parse(T.data);if(E.type==="connected"){console.log(" Notification stream ready");return}if((E.type==="deposit"||E.type==="withdrawal"||E.type==="registration"||E.type==="verification")&&(console.log(" New notification received:",E),s(I=>[E,...I]),m(),Notification.permission==="granted")){let I="";E.type==="registration"?I=`${E.username} (${E.email||"N/A"}) registered`:E.type==="verification"?I=`${E.username} uploaded ID for verification`:I=`${E.username} requested ${E.amount} ${E.currency}`,new Notification(`New ${E.type} ${E.type==="registration"||E.type==="verification"?"":"request"}`,{body:I,icon:"/new-metachrome-logo.png"})}}catch(E){console.error(" Error parsing notification:",E,"Raw data:",T.data)}},M.onerror=T=>{if(console.error(" Notification stream error:",T),console.error(" Error details:",{readyState:M.readyState,url:M.url}),M.close(),p<w){p++;const E=Math.min(1e3*Math.pow(2,p),1e4);console.log(` Retrying connection in ${E}ms... (${p}/${w})`),j=setTimeout(S,E)}else console.error(" Max retries reached. Notification stream disabled."),console.log(" Please check if you are logged in as super_admin and refresh the page.")},c.current=M,M},_=S();return Notification.permission==="default"&&Notification.requestPermission().then(k=>{console.log(" Notification permission:",k)}),d(),()=>{j&&clearTimeout(j),_&&_.close()}},[]),f.useEffect(()=>{const p=e.filter(w=>!w.read).length;o(p)},[e]),f.useEffect(()=>{function p(w){l.current&&!l.current.contains(w.target)&&i(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const d=async()=>{try{const p=await fetch("/api/admin/notifications",{credentials:"include"});if(p.ok){const w=await p.json();s(w.notifications||[])}}catch(p){console.error("Error fetching notifications:",p)}},h=async p=>{try{await fetch(`/api/admin/notifications/${p}/read`,{method:"POST",credentials:"include"}),s(w=>w.map(j=>j.id===p?{...j,read:!0}:j))}catch(w){console.error("Error marking notification as read:",w)}},u=async()=>{try{await fetch("/api/admin/notifications/read-all",{method:"POST",credentials:"include"}),s(p=>p.map(w=>({...w,read:!0})))}catch(p){console.error("Error marking all as read:",p)}},m=()=>{try{const p=new(window.AudioContext||window.webkitAudioContext),w=p.createOscillator(),j=p.createGain();w.connect(j),j.connect(p.destination),w.frequency.value=800,w.type="sine",j.gain.setValueAtTime(.3,p.currentTime),j.gain.exponentialRampToValueAtTime(.01,p.currentTime+.5),w.start(p.currentTime),w.stop(p.currentTime+.5)}catch(p){console.error("Error playing notification sound:",p)}},y=()=>{const p={id:`test-${Date.now()}`,type:"deposit",userId:"test-user-id",username:"Test User",amount:"1000",currency:"USDT",timestamp:new Date,read:!1};console.log(" Adding test notification:",p),s(w=>[p,...w]),m()};f.useEffect(()=>(window.testNotification=y,console.log(" Test function available: window.testNotification()"),()=>{delete window.testNotification}),[]);const v=p=>p==="deposit"?"":p==="withdrawal"?"":p==="registration"?"":p==="verification"?"":"",g=p=>p==="deposit"?"text-green-400":p==="withdrawal"?"text-yellow-400":p==="registration"?"text-blue-400":p==="verification"?"text-purple-400":"text-gray-400",b=p=>p==="deposit"?"New Deposit":p==="withdrawal"?"New Withdrawal":p==="registration"?"New User Registration":p==="verification"?"ID Verification Upload":"Notification",x=p=>{p.read||h(p.id),t&&(p.type==="registration"?t("users"):p.type==="deposit"||p.type==="withdrawal"?t("pending"):p.type==="verification"&&t("verification")),i(!1)};return r.jsxs("div",{className:"relative",ref:l,children:[r.jsxs("button",{onClick:()=>{console.log(" Bell clicked, isOpen:",n),i(!n)},className:"relative p-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors border border-gray-600",title:"Notifications",children:[r.jsx(Gf,{className:"w-6 h-6"}),a>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:a>9?"9+":a})]}),n&&r.jsxs(de,{className:"absolute right-0 mt-2 w-96 max-h-[500px] overflow-hidden bg-gray-800 border-gray-700 shadow-xl z-50",children:[r.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[r.jsxs("h3",{className:"text-white font-semibold flex items-center space-x-2",children:[r.jsx(Gf,{className:"w-5 h-5"}),r.jsx("span",{children:"Notifications"}),a>0&&r.jsx(xt,{className:"bg-red-500 text-white",children:a})]}),a>0&&r.jsx("button",{onClick:u,className:"text-xs text-blue-400 hover:text-blue-300",children:"Mark all read"})]}),r.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:e.length===0?r.jsxs("div",{className:"p-8 text-center text-gray-400",children:[r.jsx(Gf,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"No notifications yet"})]}):e.map(p=>r.jsx("div",{onClick:()=>x(p),className:`p-4 border-b border-gray-700 hover:bg-gray-700/50 cursor-pointer transition-colors ${p.read?"":"bg-gray-700/30"}`,children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"text-2xl",children:v(p.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:`font-semibold ${g(p.type)}`,children:b(p.type)}),!p.read&&r.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),r.jsx("p",{className:"text-sm text-gray-300",children:p.type==="registration"?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"font-medium",children:p.username})," registered with email"," ",r.jsx("span",{className:"font-bold text-white",children:p.email})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"font-medium",children:p.username})," requested"," ",r.jsxs("span",{className:"font-bold text-white",children:[p.amount," ",p.currency]})]})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:eB(new Date(p.timestamp),{addSuffix:!0})})]})]})},p.id))}),e.length>0&&r.jsx("div",{className:"p-3 border-t border-gray-700 text-center",children:r.jsx("button",{className:"text-sm text-blue-400 hover:text-blue-300",onClick:()=>{t&&t("pending"),i(!1)},children:"View all transactions "})})]})]})}function sB(){var V,G;const[t,e]=f.useState([]),[s,n]=f.useState(null),[i,a]=f.useState([]),[o,l]=f.useState(""),[c,d]=f.useState(""),[h,u]=f.useState("all"),[m,y]=f.useState(!1),[v,g]=f.useState(""),b=f.useRef(null),x=f.useRef(null),{toast:p}=Zs();f.useEffect(()=>(j(),_(),S(),()=>{x.current&&x.current.close()}),[]),f.useEffect(()=>{s&&k(s.id)},[s]),f.useEffect(()=>{w()},[i]);const w=()=>{var A;(A=b.current)==null||A.scrollIntoView({behavior:"smooth"})},j=async()=>{try{const A=await fetch("/api/user");if(A.ok){const R=await A.json();g(R.id)}}catch(A){console.error("Error loading admin:",A)}},S=()=>{const R=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;try{const $=new WebSocket(R);$.onopen=()=>{console.log(" Admin WebSocket connected"),$.send(JSON.stringify({type:"subscribe_admin_chat",data:{}}))},$.onmessage=O=>{var U;try{const J=JSON.parse(O.data);J.type==="new_message"?(s&&J.data.conversation_id===s.id&&a(Q=>[...Q,J.data]),_(),p({title:"New message",description:`From ${((U=J.data.sender)==null?void 0:U.username)||"User"}`})):J.type==="new_conversation"&&(_(),p({title:"New conversation",description:"A user has started a new chat"}))}catch(J){console.error("Error parsing WebSocket message:",J)}},$.onerror=O=>{console.error("WebSocket error:",O)},$.onclose=()=>{console.log("WebSocket disconnected, reconnecting..."),setTimeout(S,3e3)},x.current=$}catch($){console.error("Error connecting WebSocket:",$)}},_=async()=>{try{const A=await fetch("/api/admin/chat/conversations");if(A.ok){const R=await A.json();e(R)}}catch(A){console.error("Error loading conversations:",A)}},k=async A=>{y(!0);try{const R=await fetch(`/api/admin/chat/messages/${A}`);if(R.ok){const $=await R.json();a($),await fetch(`/api/admin/chat/mark-read/${A}`,{method:"POST"})}}catch(R){console.error("Error loading messages:",R)}finally{y(!1)}},P=async()=>{if(!o.trim()||!s)return;const A=o;l("");const R={id:"temp-"+Date.now(),conversation_id:s.id,sender_id:v,sender_type:"admin",message:A,is_read:!1,created_at:new Date().toISOString()};a($=>[...$,R]);try{const $=await fetch("/api/admin/chat/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:s.id,message:A,senderId:v,senderType:"admin"})});if($.ok){const O=await $.json();a(U=>U.map(J=>J.id===R.id?O:J)),x.current&&x.current.readyState===WebSocket.OPEN&&x.current.send(JSON.stringify({type:"admin_message",data:{conversationId:s.id,userId:s.user_id,message:A}}))}else a(O=>O.filter(U=>U.id!==R.id)),p({title:"Send Failed",description:"Failed to send message",variant:"destructive"})}catch($){console.error("Error sending message:",$),a(O=>O.filter(U=>U.id!==R.id))}},M=async(A,R)=>{try{(await fetch(`/api/admin/chat/conversation/${A}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:R})})).ok&&(_(),(s==null?void 0:s.id)===A&&n(O=>O?{...O,status:R}:null),p({title:"Status Updated",description:`Conversation marked as ${R}`}))}catch($){console.error("Error updating status:",$)}},T=t.filter(A=>{var O,U,J,Q;const R=c===""||((U=(O=A.user)==null?void 0:O.username)==null?void 0:U.toLowerCase().includes(c.toLowerCase()))||((Q=(J=A.user)==null?void 0:J.email)==null?void 0:Q.toLowerCase().includes(c.toLowerCase())),$=h==="all"||A.status===h;return R&&$}),E=A=>{switch(A){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"normal":return"bg-blue-500";case"low":return"bg-gray-500";default:return"bg-gray-500"}},I=A=>{switch(A){case"active":return r.jsx(qr,{className:"w-4 h-4 text-green-500"});case"waiting":return r.jsx(_h,{className:"w-4 h-4 text-yellow-500"});case"closed":return r.jsx(Ka,{className:"w-4 h-4 text-gray-500"});default:return r.jsx(Ph,{className:"w-4 h-4 text-gray-500"})}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(de,{className:"bg-gradient-to-br from-blue-600 to-blue-700 border-blue-500",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-blue-100 text-sm",children:"Active Chats"}),r.jsx("p",{className:"text-3xl font-bold text-white",children:t.filter(A=>A.status==="active").length})]}),r.jsx(Qu,{className:"w-8 h-8 text-blue-200"})]})})}),r.jsx(de,{className:"bg-gradient-to-br from-yellow-600 to-yellow-700 border-yellow-500",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-yellow-100 text-sm",children:"Waiting"}),r.jsx("p",{className:"text-3xl font-bold text-white",children:t.filter(A=>A.status==="waiting").length})]}),r.jsx(_h,{className:"w-8 h-8 text-yellow-200"})]})})}),r.jsx(de,{className:"bg-gradient-to-br from-green-600 to-green-700 border-green-500",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-green-100 text-sm",children:"Total Today"}),r.jsx("p",{className:"text-3xl font-bold text-white",children:t.filter(A=>{const R=new Date().toDateString();return new Date(A.created_at).toDateString()===R}).length})]}),r.jsx(Qr,{className:"w-8 h-8 text-green-200"})]})})}),r.jsx(de,{className:"bg-gradient-to-br from-purple-600 to-purple-700 border-purple-500",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-purple-100 text-sm",children:"Unread"}),r.jsx("p",{className:"text-3xl font-bold text-white",children:t.reduce((A,R)=>A+(R.unread_count||0),0)})]}),r.jsx(Ph,{className:"w-8 h-8 text-purple-200"})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(de,{className:"bg-[#1a1f2e] border-gray-700 lg:col-span-1",children:[r.jsxs(nt,{children:[r.jsxs(it,{className:"text-white flex items-center gap-2",children:[r.jsx(Qu,{className:"w-5 h-5"}),"Conversations"]}),r.jsxs("div",{className:"space-y-2 mt-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(_m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(Ee,{placeholder:"Search users...",value:c,onChange:A=>d(A.target.value),className:"pl-10 bg-gray-700 border-gray-600 text-white"})]}),r.jsxs("select",{value:h,onChange:A=>u(A.target.value),className:"w-full bg-gray-700 border-gray-600 text-white rounded-md px-3 py-2",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"waiting",children:"Waiting"}),r.jsx("option",{value:"closed",children:"Closed"})]})]})]}),r.jsx(he,{className:"p-0",children:r.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:T.length===0?r.jsx("div",{className:"p-6 text-center text-gray-400",children:"No conversations found"}):T.map(A=>{var R,$;return r.jsxs("div",{onClick:()=>n(A),className:`p-4 border-b border-gray-700 cursor-pointer transition-colors ${(s==null?void 0:s.id)===A.id?"bg-purple-600/20":"hover:bg-gray-700/50"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center",children:r.jsx(Qr,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:((R=A.user)==null?void 0:R.username)||(($=A.user)==null?void 0:$.email)||"Unknown User"}),r.jsx("p",{className:"text-xs text-gray-400",children:new Date(A.last_message_at).toLocaleString()})]})]}),I(A.status)]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xt,{className:`${E(A.priority)} text-white text-xs`,children:A.priority}),r.jsx(xt,{variant:"outline",className:"text-xs",children:A.category}),(A.unread_count||0)>0&&r.jsx(xt,{className:"bg-red-500 text-white text-xs",children:A.unread_count})]})]},A.id)})})})]}),r.jsx(de,{className:"bg-[#1a1f2e] border-gray-700 lg:col-span-2",children:s?r.jsxs(r.Fragment,{children:[r.jsx(nt,{className:"border-b border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(it,{className:"text-white",children:((V=s.user)==null?void 0:V.username)||((G=s.user)==null?void 0:G.email)}),r.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[s.category,"  ",s.priority," priority"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(W,{size:"sm",variant:"outline",onClick:()=>M(s.id,"active"),disabled:s.status==="active",children:"Active"}),r.jsx(W,{size:"sm",variant:"outline",onClick:()=>M(s.id,"closed"),disabled:s.status==="closed",children:"Close"})]})]})}),r.jsxs(he,{className:"p-0",children:[r.jsxs("div",{className:"h-[400px] overflow-y-auto p-4 space-y-4 bg-[#0f1419]",children:[m?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("div",{className:"text-gray-400",children:"Loading messages..."})}):i.length===0?r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No messages yet"}):i.map(A=>r.jsx("div",{className:`flex ${A.sender_type==="admin"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`flex gap-2 max-w-[80%] ${A.sender_type==="admin"?"flex-row-reverse":"flex-row"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${A.sender_type==="admin"?"bg-blue-600":A.sender_type==="user"?"bg-purple-600":"bg-gray-600"}`,children:r.jsx(Qr,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsx("div",{className:`rounded-lg p-3 ${A.sender_type==="admin"?"bg-blue-600 text-white":A.sender_type==="user"?"bg-gray-700 text-white":"bg-gray-600 text-white"}`,children:r.jsx("p",{className:"text-sm whitespace-pre-line",children:A.message})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1 px-1",children:new Date(A.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},A.id)),r.jsx("div",{ref:b})]}),r.jsx("div",{className:"p-4 border-t border-gray-700",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ee,{placeholder:"Type your message...",value:o,onChange:A=>l(A.target.value),onKeyPress:A=>A.key==="Enter"&&P(),className:"bg-gray-700 border-gray-600 text-white"}),r.jsx(W,{onClick:P,disabled:!o.trim(),className:"bg-purple-600 hover:bg-purple-700",children:r.jsx(Mm,{className:"w-4 h-4"})})]})})]})]}):r.jsx(he,{className:"flex items-center justify-center h-[500px]",children:r.jsxs("div",{className:"text-center text-gray-400",children:[r.jsx(Qu,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Select a conversation to start chatting"})]})})})]})]})}const lE=t=>{if(typeof t=="number")return t;if(typeof t=="string"){const e=t.replace(/[^0-9.-]/g,""),s=parseFloat(e);return isNaN(s)?0:s}return 0},Mu=t=>{const e=lE(t);return(Math.round(e*100)/100).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},Cj=t=>t.reduce((e,s)=>{const n=lE(s.balance);return e+n},0),rB=t=>{if(t.symbol)return t.symbol;if(t.currency)return t.currency;if(t.type==="withdrawal"&&t.description){const e=t.description.match(/- (BTC|ETH|USDT|SOL|USDT-ERC20|USDT-TRC20|USDT-BEP20)/);if(e)return e[1]}return"USDT"},nB=t=>{const e=rB(t);return`${(typeof t.amount=="string"?parseFloat(t.amount):t.amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:8})} ${e}`};function Tj(){var xr,ji,nr,ql,Ql,Xl;const{user:t}=Ss(),[e,s]=f.useState([]),[n,i]=f.useState([]),[a,o]=f.useState([]),[l,c]=f.useState({deposits:[],withdrawals:[],total:0}),[d,h]=f.useState(null),[u,m]=f.useState(!1),[y,v]=f.useState([]),[g,b]=f.useState(null),[x,p]=f.useState([]),[w,j]=f.useState(null),[S,_]=f.useState(!1),[k,P]=f.useState(!1),[M,T]=f.useState(null),[E,I]=f.useState({code:"",bonusAmount:"",maxUses:"",description:""}),[V,G]=f.useState({username:"",email:"",password:"",balance:1e4,role:"user",trading_mode:"normal"}),[A,R]=f.useState(!1),[$,O]=f.useState(!1),[U,J]=f.useState(!1),[Q,Oe]=f.useState(!1),[ge,He]=f.useState(null),[se,ze]=f.useState(""),[ce,Ke]=f.useState(""),[je,Ve]=f.useState(""),[Me,De]=f.useState(""),[pt,K]=f.useState([]),[pe,st]=f.useState(null),[qe,Wt]=f.useState(""),[ut,D]=f.useState("overview"),[H,X]=f.useState(!0),[ve,oe]=f.useState(new Date),[te,Se]=f.useState(!1),Re=JSON.parse(localStorage.getItem("user")||"{}"),Ze=localStorage.getItem("authToken")||"",ht=Re.role==="super_admin"||Re.role==="superadmin"||Re.username==="superadmin"||Ze.includes("superadmin")||Ze.includes("admin-session-superadmin");console.log(" Current user:",Re),console.log(" Auth token:",Ze.substring(0,30)+"..."),console.log(" Current user role:",Re.role),console.log(" Is Super Admin:",ht),console.log(" Role check details:",{role:Re.role,username:Re.username,isSuper:Re.role==="super_admin",isSuperadmin:Re.role==="superadmin",isUsernameSuper:Re.username==="superadmin",tokenHasSuper:Ze.includes("superadmin"),tokenHasAdminSession:Ze.includes("admin-session-superadmin"),finalResult:ht});const ts=async()=>{try{if(console.log(" FORCE refreshing transactions with aggressive cache busting..."),"serviceWorker"in navigator&&"caches"in window){const Qe=await caches.keys();await Promise.all(Qe.map(mt=>caches.delete(mt)))}const C=Date.now(),Y=Math.random().toString(36).substring(7),ue=Math.random().toString(36).substring(2,15),q=`/api/admin/transactions?_t=${C}&_r=${Y}&_bust=${Date.now()}&_force=${ue}&_nocache=${Math.random()}`;console.log(" Force fetching from URL:",q);const ne=await fetch(q,{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","X-Requested-With":"XMLHttpRequest","If-None-Match":"*","X-Force-Refresh":"true"},cache:"no-store"});if(ne.ok){const Qe=await ne.json();return console.log(" FORCE refreshed transactions:",Qe.length,"transactions"),console.log(" First 3 transaction IDs:",Qe.slice(0,3).map(mt=>mt.id)),o([...Qe]),!0}else return console.error(" Failed to force refresh transactions:",ne.status),!1}catch(C){return console.error(" Force refresh error:",C),!1}},Je=async()=>await ts(),ie=async()=>{m(!0);let C=!1;try{console.log(" Fetching all data...");const Y=Date.now(),ue={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"};try{const q=await fetch(`/api/admin/users?_t=${Y}`,{headers:ue});if(q.ok){const ne=await q.json();console.log(" Users loaded:",ne),s(ne)}else console.error(" Failed to fetch users:",q.status),C=!0}catch(q){console.error(" Users fetch error:",q),C=!0}try{const q=await fetch(`/api/admin/live-trades?_t=${Y}`,{headers:ue});if(q.ok){const ne=await q.json();console.log(" Live trades loaded:",ne);const Qe=ne.trades||ne;i(Qe)}else console.error(" Failed to fetch trades:",q.status),C=!0}catch(q){console.error(" Trades fetch error:",q),C=!0}try{const q=await fetch(`/api/admin/transactions?_t=${Y}&_r=${Math.random()}`,{headers:{...ue,"X-Requested-With":"XMLHttpRequest","If-None-Match":"*"}});if(q.ok){const ne=await q.json();console.log(" Transactions loaded:",ne.length,"transactions"),o(ne)}else console.error(" Failed to fetch transactions:",q.status),C=!0}catch(q){console.error(" Transactions fetch error:",q),C=!0}try{const q=await fetch(`/api/admin/stats?_t=${Y}`,{headers:ue});if(q.ok){const ne=await q.json();console.log(" Stats loaded:",ne),h(ne)}else console.error(" Failed to fetch stats:",q.status),C=!0}catch(q){console.error(" Stats fetch error:",q),C=!0}try{const q=await fetch(`/api/admin/pending-requests?_t=${Y}`,{headers:ue});if(q.ok){const ne=await q.json();console.log(" Pending requests loaded:",ne),c(ne)}else console.error(" Failed to fetch pending requests:",q.status),C=!0}catch(q){console.error(" Pending requests fetch error:",q),C=!0}try{const q=await fetch(`/api/admin/pending-verifications-enhanced?_t=${Y}`,{headers:ue});if(q.ok){const ne=await q.json();if(console.log(" Enhanced pending verifications loaded:",ne),ne.enhanced){v(ne.pending||[]),console.log(` Set ${ne.pendingCount||0} pending verifications`),console.log(` Total documents in database: ${ne.totalCount||0}`);const Qe=ne.total||[],mt={pending:Qe.filter(Os=>Os.verification_status==="pending").length,approved:Qe.filter(Os=>Os.verification_status==="approved").length,rejected:Qe.filter(Os=>Os.verification_status==="rejected").length,total:Qe.length};b(mt)}else{v(ne);const Qe={pending:ne.filter(mt=>mt.verification_status==="pending").length,approved:ne.filter(mt=>mt.verification_status==="approved").length,rejected:ne.filter(mt=>mt.verification_status==="rejected").length,total:ne.length};b(Qe)}}else{console.error(" Failed to fetch enhanced pending verifications:",q.status);try{const ne=await fetch(`/api/admin/pending-verifications?_t=${Y}`,{headers:ue});if(ne.ok){const Qe=await ne.json();v(Qe);const mt={pending:Qe.filter(Os=>Os.verification_status==="pending").length,approved:Qe.filter(Os=>Os.verification_status==="approved").length,rejected:Qe.filter(Os=>Os.verification_status==="rejected").length,total:Qe.length};b(mt)}}catch(ne){console.error(" Fallback verification fetch error:",ne),C=!0}}}catch(q){console.error(" Enhanced pending verifications fetch error:",q),C=!0}try{const q=await fetch(`/api/admin/redeem-codes?_t=${Y}`,{headers:ue});if(q.ok){const ne=await q.json();console.log(" Redeem codes loaded:",ne);let Qe=ne.codes||[];try{const mt=await fetch(`/api/admin/redeem-codes-usage-all?_t=${Y}`,{headers:ue});if(mt.ok){const Fr=(await mt.json()).data||[];Qe=Qe.map(Gn=>({...Gn,redemptions:Fr.filter($r=>$r.code===Gn.code)})),console.log(" Codes with redemption history:",Qe)}}catch(mt){console.log(" Could not fetch redemption history:",mt)}p(Qe),j(ne.stats||{})}else console.error(" Failed to fetch redeem codes:",q.status),C=!0}catch(q){console.error(" Redeem codes fetch error:",q),C=!0}C?et({title:"Warning",description:"Some data failed to load. Check console for details.",variant:"destructive"}):console.log(" All data loaded successfully")}catch(Y){console.error(" Unexpected error fetching data:",Y),et({title:"Error",description:"Unexpected error occurred while loading data",variant:"destructive"})}finally{m(!1)}},tr=async()=>{try{const C=Date.now(),Y={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"};let ue=!1;try{const q=await fetch(`/api/admin/users?_t=${C}`,{headers:Y});if(q.ok){const ne=await q.json();JSON.stringify(ne)!==JSON.stringify(e)&&(s(ne),ue=!0)}}catch{console.log(" Silent users fetch failed")}try{const q=await fetch(`/api/admin/pending-requests?_t=${C}`,{headers:Y});if(q.ok){const ne=await q.json();JSON.stringify(ne)!==JSON.stringify(l)&&(c(ne),ue=!0)}}catch{console.log(" Silent pending requests fetch failed")}try{const q=await fetch(`/api/admin/transactions?_t=${C}&_r=${Math.random()}`,{headers:{...Y,"X-Requested-With":"XMLHttpRequest","If-None-Match":"*"}});if(q.ok){const ne=await q.json();JSON.stringify(ne)!==JSON.stringify(a)&&(o(ne),ue=!0)}}catch{console.log(" Silent transactions fetch failed")}try{const q=await fetch(`/api/admin/live-trades?_t=${C}`,{headers:Y});if(q.ok){const ne=await q.json(),Qe=ne.trades||ne;JSON.stringify(Qe)!==JSON.stringify(n)&&(i(Qe),ue=!0)}}catch{console.log(" Silent trades fetch failed")}ue&&(oe(new Date),Se(!0),setTimeout(()=>Se(!1),5e3))}catch(C){console.log(" Silent fetch error:",C)}},z=async()=>{if(!V.username||!V.email||!V.password){et({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}try{console.log(" Creating user:",V);const C=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(C.ok){const Y=await C.json();console.log(" User created:",Y),et({title:"Success",description:`User ${Y.username} created successfully!`}),G({username:"",email:"",password:"",balance:1e4,role:"user",trading_mode:"normal"}),ie()}else throw new Error("Failed to create user")}catch(C){console.error(" Error creating user:",C),et({title:"Error",description:"Failed to create user",variant:"destructive"})}},Te=async(C,Y)=>{try{console.log(" Updating trading mode:",C,Y);const ue=await fetch("/api/admin/trading-controls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:C,controlType:Y})});if(ue.ok){const q=await ue.json();console.log(" Trading mode updated:",q),et({title:"Success",description:`Trading mode updated to ${Y.toUpperCase()}`,duration:2e3}),s(ne=>ne.map(Qe=>Qe.id===C?{...Qe,trading_mode:Y}:Qe)),console.log(` Trading mode for user ${C} updated to ${Y.toUpperCase()} in UI`)}else throw new Error("Failed to update trading mode")}catch(ue){console.error(" Error updating trading mode:",ue),et({title:"Error",description:"Failed to update trading mode",variant:"destructive"})}},St=async(C,Y)=>{try{console.log(" Controlling trade:",C,Y);const ue=await fetch(`/api/admin/trades/${C}/control`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:Y})});if(ue.ok){const q=await ue.json();console.log(" Trade controlled:",q),et({title:"Trade Controlled",description:`Trade set to ${Y.toUpperCase()}`}),i(n.map(ne=>ne.id===C?{...ne,result:Y}:ne)),ie()}else throw new Error("Failed to control trade")}catch(ue){console.error(" Error controlling trade:",ue),et({title:"Error",description:"Failed to control trade",variant:"destructive"})}},kt=async C=>{try{console.log(" Deleting trade:",C);const Y=[...n];i(q=>q.filter(ne=>ne.id!==C));const ue=await fetch(`/api/admin/trades/${C}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(ue.ok){const q=await ue.json();console.log(" Trade deleted:",q),et({title:"Trade Deleted",description:q.message||"Trade deleted successfully",duration:3e3}),ie()}else{console.log(" Delete failed, restoring original state..."),i(Y);const q=await ue.text();throw new Error(q||"Failed to delete trade")}}catch(Y){console.error(" Error deleting trade:",Y),i(ue=>[...n]),et({title:"Error",description:Y instanceof Error?Y.message:"Failed to delete trade",variant:"destructive",duration:5e3})}},[Dt,xs]=f.useState(!1),[Kn,sr]=f.useState(!1),[_t,F]=f.useState(null),[ee,Pe]=f.useState({});f.useEffect(()=>{console.log(" Edit form data updated:",ee)},[ee]);const ot=C=>{console.log(" Viewing user:",C),F(C),xs(!0)},Kt=C=>{console.log(" Editing user:",C),F(C);const Y={username:C.username,email:C.email,balance:C.balance,trading_mode:C.trading_mode,role:C.role,status:C.status,wallet_address:C.wallet_address||""};console.log(" Setting edit form data:",Y),Pe(Y),sr(!0)},Ft=async()=>{try{if((await fetch(`/api/admin/users/${_t.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(ee)})).ok)et({title:"Success",description:"User updated successfully"}),sr(!1),setTimeout(()=>{ie()},100);else throw new Error("Failed to update user")}catch(C){console.error(" Error updating user:",C),et({title:"Error",description:"Failed to update user",variant:"destructive"})}},rr=async C=>{if(confirm(`Are you sure you want to delete user "${C.username}"? This action cannot be undone.`))try{if((await fetch(`/api/admin/users/${C.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)et({title:"Success",description:`User "${C.username}" deleted successfully`}),setTimeout(()=>{ie()},100);else throw new Error("Failed to delete user")}catch(Y){console.error(" Error deleting user:",Y),et({title:"Error",description:"Failed to delete user",variant:"destructive"})}},N=async()=>{if(!(!ge||!se))try{const C=await fetch("/api/superadmin/deposit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:ge.id,amount:Number(se),note:`Admin deposit for ${ge.username}`})});if(C.ok){const Y=await C.json();et({title:"Success",description:Y.message}),ze(""),R(!1),setTimeout(()=>{ie()},100)}else throw new Error("Failed to process deposit")}catch{et({title:"Error",description:"Failed to process deposit",variant:"destructive"})}},B=async()=>{if(!(!ge||!ce))try{const C=await fetch("/api/superadmin/withdrawal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:ge.id,amount:Number(ce),note:`Admin withdrawal for ${ge.username}`})});if(C.ok){const Y=await C.json();et({title:"Success",description:Y.message}),Ke(""),O(!1),setTimeout(()=>{ie()},100)}else{const Y=await C.json();throw new Error(Y.error||"Failed to process withdrawal")}}catch(C){et({title:"Error",description:C.message||"Failed to process withdrawal",variant:"destructive"})}},me=async()=>{if(!(!ge||!je))try{const C=await fetch("/api/superadmin/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:ge.id,newPassword:je})});if(C.ok){const Y=await C.json();et({title:"Success",description:Y.message}),Ve(""),J(!1),setTimeout(()=>{ie()},100)}else{const Y=await C.json();throw new Error(Y.error||"Failed to change password")}}catch(C){et({title:"Error",description:C.message||"Failed to change password",variant:"destructive"})}},Z=async()=>{if(ge)try{const C=await fetch("/api/superadmin/update-wallet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:ge.id,walletAddress:Me})});if(C.ok){const Y=await C.json();et({title:"Success",description:Y.message}),He({...ge,wallet_address:Me}),s(ue=>ue.map(q=>q.id===ge.id?{...q,wallet_address:Me}:q)),De(""),re(ge.id),setTimeout(()=>{ie()},100)}else throw new Error("Failed to update wallet address")}catch{et({title:"Error",description:"Failed to update wallet address",variant:"destructive"})}},re=async C=>{try{const Y=await fetch(`/api/superadmin/wallet-history/${C}`);if(Y.ok){const ue=await Y.json();K(ue.history||[])}}catch(Y){console.error("Failed to load wallet history:",Y),K([])}},xe=async(C,Y,ue)=>{X(!1);try{console.log(" Deposit action:",C,Y,ue);const q=await fetch(`/api/admin/deposits/${C}/action`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({action:Y,reason:ue})});if(q.ok){const ne=await q.json();et({title:`Deposit ${Y==="approve"?"Approved":"Rejected"}`,description:ne.message||`Deposit ${Y}d successfully`,duration:3e3}),ie()}else{const ne=await q.text();throw new Error(ne||"Failed to process deposit")}}catch(q){console.error("Failed to process deposit:",q),et({title:"Error",description:q instanceof Error?q.message:"Failed to process deposit",variant:"destructive",duration:5e3})}finally{X(!0)}},Le=async(C,Y,ue)=>{X(!1);try{console.log(" Withdrawal action:",C,Y,ue);const q=await fetch(`/api/admin/withdrawals/${C}/action`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({action:Y,reason:ue})});if(q.ok){const ne=await q.json();et({title:`Withdrawal ${Y==="approve"?"Approved":"Rejected"}`,description:ne.message||`Withdrawal ${Y}d successfully`,duration:3e3}),ie()}else{const ne=await q.text();throw new Error(ne||"Failed to process withdrawal")}}catch(q){console.error("Failed to process withdrawal:",q),et({title:"Error",description:q instanceof Error?q.message:"Failed to process withdrawal",variant:"destructive",duration:5e3})}finally{X(!0)}},_e=async(C,Y,ue)=>{try{console.log(" Document action:",C,Y,ue);const q=await fetch(`/api/admin/verify-document/${C}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({status:Y==="approve"?"approved":"rejected",adminNotes:ue||`Document ${Y}d by admin`})});if(q.ok){const ne=await q.json();et({title:`Document ${Y==="approve"?"Approved":"Rejected"}`,description:ne.message||`Document ${Y}d successfully`,duration:3e3}),ie()}else{const ne=await q.text();throw new Error(ne||"Failed to process document")}}catch(q){console.error("Failed to process document:",q),et({title:"Error",description:q instanceof Error?q.message:"Failed to process document",variant:"destructive",duration:5e3})}},Be=async C=>{try{console.log(" Deleting transaction:",C),console.log(" Current transactions count before deletion:",a.length);const Y=[...a];o(q=>q.map(ne=>ne.id===C?{...ne,deleting:!0}:ne));const ue=await fetch(`/api/admin/transactions/${C}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(ue.ok){const q=await ue.json();console.log(" Delete response:",q),console.log(" Immediately refreshing transactions after successful deletion..."),await Je()?et({title:"Transaction Deleted",description:q.message||"Transaction deleted successfully",duration:3e3}):(o(Qe=>Qe.filter(mt=>mt.id!==C)),et({title:"Transaction Deleted",description:"Transaction deleted (manual update)",duration:3e3}))}else{console.log(" Delete failed, restoring original state..."),o(Y);const q=await ue.text();throw new Error(q||"Failed to delete transaction")}}catch(Y){console.error("Failed to delete transaction:",Y),console.log(" Error occurred, restoring original state..."),o(ue=>ue.filter(q=>!q.deleting)),et({title:"Error",description:Y instanceof Error?Y.message:"Failed to delete transaction",variant:"destructive",duration:5e3})}},gt=C=>{const Y=`/api/admin/receipt/${C}/view`;window.open(Y,"receiptViewer","width=800,height=600,scrollbars=yes,resizable=yes")},Mt=async(C,Y)=>{try{if(console.log(" Redeem code action:",C,Y),Y==="edit"){const q=x.find(ne=>ne.id===C||ne.code===C);q?(T(q),P(!0)):et({title:"Error",description:"Code not found",variant:"destructive"});return}const ue=await fetch(`/api/admin/redeem-codes/${C}/action`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({action:Y})});if(ue.ok){const q=await ue.json();et({title:`Code ${Y==="disable"?"Disabled":"Deleted"}`,description:q.message||`Code ${Y}d successfully`,duration:3e3}),setTimeout(()=>{ie()},100)}else{const q=await ue.text();throw new Error(q||`Failed to ${Y} code`)}}catch(ue){console.error(`Failed to ${Y} redeem code:`,ue),et({title:"Error",description:ue instanceof Error?ue.message:`Failed to ${Y} code`,variant:"destructive",duration:5e3})}},Cs=async()=>{try{if(!M||!M.bonus_amount){et({title:"Missing Information",description:"Please fill in bonus amount",variant:"destructive"});return}const C=await fetch(`/api/admin/redeem-codes/${M.id}/action`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({action:"edit",newAmount:parseFloat(M.bonus_amount),newDescription:M.description,newMaxUses:M.max_uses?parseInt(M.max_uses):null})});if(C.ok){const Y=await C.json();et({title:"Code Updated",description:`Redeem code ${M.code} updated successfully`,duration:3e3}),P(!1),T(null),ie()}else{const Y=await C.text();throw new Error(Y||"Failed to update code")}}catch(C){console.error("Failed to update redeem code:",C),et({title:"Error",description:C instanceof Error?C.message:"Failed to update code",variant:"destructive",duration:5e3})}},At=async()=>{try{if(!E.code||!E.bonusAmount){et({title:"Missing Information",description:"Please fill in code and bonus amount",variant:"destructive"});return}const C=await fetch("/api/admin/redeem-codes",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({code:E.code.toUpperCase(),bonusAmount:parseFloat(E.bonusAmount),maxUses:E.maxUses?parseInt(E.maxUses):null,description:E.description||`Bonus code for ${E.bonusAmount} USDT`})});if(C.ok){const Y=await C.json();et({title:"Code Created",description:`Redeem code ${E.code} created successfully`,duration:3e3}),_(!1),I({code:"",bonusAmount:"",maxUses:"",description:""}),ie()}else{const Y=await C.text();throw new Error(Y||"Failed to create code")}}catch(C){console.error("Failed to create redeem code:",C),et({title:"Error",description:C instanceof Error?C.message:"Failed to create code",variant:"destructive",duration:5e3})}},as=(C,Y)=>{switch(console.log(" Opening super admin modal:",Y,"for user:",C.username),He(C),De(C.wallet_address||""),Y){case"deposit":R(!0);break;case"withdrawal":O(!0);break;case"password":J(!0);break;case"wallet":Oe(!0),re(C.id);break}};f.useEffect(()=>{ie();let C=null;return H&&(C=setInterval(()=>{console.log(" AUTO-REFRESH: Silent polling for new data..."),tr()},15e3)),()=>{C&&(clearInterval(C),console.log(" AUTO-REFRESH: Polling stopped"))}},[H]);const Rs=C=>{const Y=Date.now(),ue=new Date(C).getTime(),q=Math.max(0,ue-Y);return Math.floor(q/1e3)};return r.jsxs(r.Fragment,{children:[r.jsx("style",{children:`
        .admin-table-container {
          scrollbar-width: thin;
          scrollbar-color: #6b7280 #374151;
        }
        .admin-table-container::-webkit-scrollbar {
          height: 8px;
        }
        .admin-table-container::-webkit-scrollbar-track {
          background: #374151;
          border-radius: 4px;
        }
        .admin-table-container::-webkit-scrollbar-thumb {
          background: #6b7280;
          border-radius: 4px;
        }
        .admin-table-container::-webkit-scrollbar-thumb:hover {
          background: #9ca3af;
        }
      `}),r.jsxs("div",{className:"min-h-screen bg-gray-900",children:[r.jsx("div",{className:"bg-gray-800 border-b border-gray-700 sticky top-0 z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx($s,{className:"w-8 h-8 text-purple-500"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"METACHROME Admin Dashboard"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Complete Trading Platform Control"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[(t==null?void 0:t.role)==="super_admin"&&r.jsx(tB,{onTabChange:D}),r.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700/50 rounded-lg px-3 py-2 border border-gray-600",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${H?"bg-green-500 animate-pulse":"bg-gray-500"}`}),r.jsxs("div",{className:"text-xs text-gray-400",children:[r.jsx("div",{className:"font-medium",children:H?"Live Updates":"Paused"}),r.jsx("div",{className:"text-[10px]",children:ve.toLocaleTimeString()})]})]}),r.jsxs(W,{onClick:ts,variant:"outline",size:"sm",className:"bg-red-600 hover:bg-red-700 border-red-600",children:[r.jsx(On,{className:"w-4 h-4 mr-2"}),"Force Refresh Transactions"]}),r.jsxs("div",{className:"flex items-center space-x-2 bg-gray-700 rounded-lg px-3 py-2",children:[r.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-bold",children:t!=null&&t.username?t.username.substring(0,2).toUpperCase():"SA"})}),r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:"text-white font-medium",children:(t==null?void 0:t.username)||"superadmin"}),r.jsx("div",{className:"text-gray-400 text-xs",children:(t==null?void 0:t.role)==="super_admin"?"Super Admin":"Admin"})]})]})]})]})})}),r.jsx("div",{className:"max-w-full mx-auto p-6",children:r.jsxs(oE,{value:ut,onValueChange:D,className:"space-y-6",children:[r.jsxs(Zh,{className:"flex w-full overflow-x-auto bg-gray-800 border-gray-700 scrollbar-hide gap-2 p-2",children:[r.jsxs(bs,{value:"overview",className:"flex-shrink-0 px-4 py-2",children:[r.jsx(na,{className:"w-4 h-4 mr-2"}),"Overview"]}),r.jsxs(bs,{value:"users",className:"flex-shrink-0 px-4 py-2",children:[r.jsx(cu,{className:"w-4 h-4 mr-2"}),"Users"]}),r.jsxs(bs,{value:"trades",className:"flex-shrink-0 px-4 py-2",children:[r.jsx(ur,{className:"w-4 h-4 mr-2"}),"Trades"]}),r.jsxs(bs,{value:"transactions",className:"flex-shrink-0 px-4 py-2",children:[r.jsx(qf,{className:"w-4 h-4 mr-2"}),"Transactions"]}),r.jsxs(bs,{value:"pending",className:"flex-shrink-0 px-4 py-2",children:[r.jsx($s,{className:"w-4 h-4 mr-2"}),"Pending Requests"]}),r.jsxs(bs,{value:"verification",className:"flex-shrink-0 px-4 py-2",children:[r.jsx(CA,{className:"w-4 h-4 mr-2"}),"Verification"]}),r.jsxs(bs,{value:"redeem-codes",className:"flex-shrink-0 px-4 py-2",children:[r.jsx(EA,{className:"w-4 h-4 mr-2"}),"Redeem Codes"]}),r.jsxs(bs,{value:"controls",className:"flex-shrink-0 px-4 py-2",children:[r.jsx(jl,{className:"w-4 h-4 mr-2"}),"Controls"]}),r.jsxs(bs,{value:"support",className:"flex-shrink-0 px-4 py-2",children:[r.jsx(Qu,{className:"w-4 h-4 mr-2"}),"Support"]})]}),r.jsxs(Ks,{value:"overview",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx(de,{className:"bg-gradient-to-br from-blue-600 to-blue-700 border-blue-500",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-blue-100 text-sm",children:"Total Users"}),r.jsx("p",{className:"text-3xl font-bold text-white",children:(d==null?void 0:d.totalUsers)||e.length})]}),r.jsx(cu,{className:"w-8 h-8 text-blue-200"})]})})}),r.jsx(de,{className:"bg-gradient-to-br from-green-600 to-green-700 border-green-500",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-green-100 text-sm",children:"Active Trades"}),r.jsx("p",{className:"text-3xl font-bold text-white",children:Array.isArray(n)?n.filter(C=>C.result==="pending").length:0})]}),r.jsx(Kf,{className:"w-8 h-8 text-green-200"})]})})}),r.jsx(de,{className:"bg-gradient-to-br from-purple-600 to-purple-700 border-purple-500",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-purple-100 text-sm",children:"Total Volume"}),r.jsxs("p",{className:"text-3xl font-bold text-white",children:["$",n.reduce((C,Y)=>C+parseFloat(Y.amount||0),0).toLocaleString()]})]}),r.jsx(qf,{className:"w-8 h-8 text-purple-200"})]})})}),r.jsx(de,{className:"bg-gradient-to-br from-orange-600 to-orange-700 border-orange-500",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-orange-100 text-sm",children:"Total Balance"}),r.jsxs("p",{className:"text-3xl font-bold text-white",children:[Cj(e).toLocaleString()," USDT"]})]}),r.jsx(ur,{className:"w-8 h-8 text-orange-200"})]})})})]}),r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"Quick Actions"}),r.jsx(Rt,{className:"text-gray-400",children:"Common administrative tasks"})]}),r.jsx(he,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(W,{className:"h-20 bg-blue-600 hover:bg-blue-700",children:r.jsxs("div",{className:"text-center",children:[r.jsx(cu,{className:"w-6 h-6 mx-auto mb-2"}),r.jsx("div",{className:"text-sm",children:"Manage Users"})]})}),r.jsx(W,{className:"h-20 bg-green-600 hover:bg-green-700",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Kf,{className:"w-6 h-6 mx-auto mb-2"}),r.jsx("div",{className:"text-sm",children:"Monitor Trades"})]})}),r.jsx(W,{className:"h-20 bg-purple-600 hover:bg-purple-700",onClick:()=>window.location.href="/admin/test",children:r.jsxs("div",{className:"text-center",children:[r.jsx(jl,{className:"w-6 h-6 mx-auto mb-2"}),r.jsx("div",{className:"text-sm",children:"Test Features"})]})})]})})]})]}),r.jsxs(Ks,{value:"users",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx(de,{className:"bg-gray-800 border-gray-700",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Users"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:e.length})]}),r.jsx(cu,{className:"w-8 h-8 text-blue-500"})]})})}),r.jsx(de,{className:"bg-gray-800 border-gray-700",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Active Users"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:Array.isArray(e)?e.filter(C=>C.status==="active").length:0})]}),r.jsx(qr,{className:"w-8 h-8 text-green-500"})]})})}),r.jsx(de,{className:"bg-gray-800 border-gray-700",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Platform Balance"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-2xl font-bold text-green-400",children:[Cj(e).toLocaleString()," USDT"]}),r.jsx("p",{className:"text-sm text-gray-400",children:"All crypto auto-converted to USDT"})]}),r.jsx("div",{className:"text-xs text-blue-400 bg-blue-900/20 px-2 py-1 rounded",children:" Unified USDT balance system"})]}),r.jsx(Gg,{className:"w-8 h-8 text-purple-500"})]})})}),r.jsx(de,{className:"bg-gray-800 border-gray-700",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Controlled Users"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:Array.isArray(e)?e.filter(C=>C.trading_mode!=="normal").length:0})]}),r.jsx(Rb,{className:"w-8 h-8 text-orange-500"})]})})})]}),r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsxs(it,{className:"text-white flex items-center space-x-2",children:[r.jsx(Mc,{className:"w-5 h-5"}),r.jsx("span",{children:"Create New User"})]}),r.jsx(Rt,{className:"text-gray-400",children:"Add new users to the trading platform"})]}),r.jsx(he,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[r.jsx(Ee,{placeholder:"Username",value:V.username,onChange:C=>G({...V,username:C.target.value}),className:"bg-gray-700 border-gray-600 text-white"}),r.jsx(Ee,{placeholder:"Email",type:"email",value:V.email,onChange:C=>G({...V,email:C.target.value}),className:"bg-gray-700 border-gray-600 text-white"}),r.jsx(Ee,{placeholder:"Password",type:"password",value:V.password,onChange:C=>G({...V,password:C.target.value}),className:"bg-gray-700 border-gray-600 text-white"}),r.jsx(Ee,{placeholder:"Balance",type:"number",value:V.balance,onChange:C=>G({...V,balance:Number(C.target.value)}),className:"bg-gray-700 border-gray-600 text-white"}),r.jsxs(Dn,{value:V.role,onValueChange:C=>G({...V,role:C}),children:[r.jsx(un,{className:"bg-gray-700 border-gray-600 text-white",children:r.jsx(Rn,{})}),r.jsxs(hn,{children:[r.jsx(wt,{value:"user",children:"User"}),r.jsx(wt,{value:"admin",children:"Admin"}),r.jsx(wt,{value:"super_admin",children:"Super Admin"})]})]}),r.jsx(W,{onClick:z,className:"w-full bg-purple-600 hover:bg-purple-700",children:"Create User"})]})})]}),r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"User Management"}),r.jsx(Rt,{className:"text-gray-400",children:"Manage all platform users and their trading settings"})]}),r.jsxs(he,{children:[r.jsx("div",{className:"mb-4",children:r.jsx(Ee,{placeholder:"Search users by username, email, or ID...",value:qe,onChange:C=>Wt(C.target.value),className:"bg-gray-700 border-gray-600 text-white placeholder:text-gray-400"})}),r.jsx("div",{className:"border border-gray-700 rounded-lg overflow-x-auto admin-table-container",style:{maxWidth:"100%"},children:r.jsxs(ka,{className:"w-full",style:{minWidth:"1200px"},children:[r.jsx(Ea,{children:r.jsxs(Es,{className:"bg-gray-700",children:[r.jsx(tt,{className:"text-gray-300 min-w-[200px]",children:"User"}),r.jsx(tt,{className:"text-gray-300 min-w-[250px]",children:"Email"}),r.jsx(tt,{className:"text-gray-300 min-w-[120px]",children:"Balance"}),r.jsx(tt,{className:"text-gray-300 min-w-[100px]",children:"Role"}),r.jsx(tt,{className:"text-gray-300 min-w-[100px]",children:"Status"}),r.jsx(tt,{className:"text-gray-300 min-w-[120px]",children:"Trading Mode"}),r.jsx(tt,{className:"text-gray-300 min-w-[400px]",children:"Actions"})]})}),r.jsx(Pa,{children:Array.isArray(e)?r.jsxs(r.Fragment,{children:[console.log(" Rendering users table with",e.length,"users"),e.filter(C=>{var ue,q,ne;if(!qe)return!0;const Y=qe.toLowerCase();return((ue=C.username)==null?void 0:ue.toLowerCase().includes(Y))||((q=C.email)==null?void 0:q.toLowerCase().includes(Y))||((ne=C.id)==null?void 0:ne.toLowerCase().includes(Y))}).sort((C,Y)=>{const ue=new Date(C.created_at||0).getTime();return new Date(Y.created_at||0).getTime()-ue}).map(C=>r.jsxs(Es,{className:"border-gray-700 hover:bg-gray-700/50",children:[r.jsx(Ge,{children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-white font-bold",children:C.username.charAt(0).toUpperCase()})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"text-white font-medium truncate",title:C.username,children:C.username.length>20?`${C.username.slice(0,20)}...`:C.username}),r.jsxs("div",{className:"text-gray-400 text-sm",children:["ID: ",C.id?C.id.slice(0,8):"N/A","..."]})]})]})}),r.jsx(Ge,{className:"text-white",children:r.jsx("div",{className:"truncate",title:C.email,children:C.email.length>30?`${C.email.slice(0,30)}...`:C.email})}),r.jsx(Ge,{className:"text-white",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"font-medium text-green-400",children:[Mu(C.balance)," USDT"]}),r.jsx("div",{className:"text-xs text-blue-400 bg-blue-900/20 px-2 py-1 rounded border border-blue-700",children:" Auto-converts all crypto deposits to USDT"})]})}),r.jsx(Ge,{children:r.jsx(xt,{variant:C.role==="super_admin"?"default":C.role==="admin"?"secondary":"outline",children:C.role})}),r.jsx(Ge,{children:r.jsx(xt,{variant:C.status==="active"?"default":"destructive",children:C.status})}),r.jsx(Ge,{children:r.jsxs(Dn,{value:C.trading_mode,onValueChange:Y=>Te(C.id,Y),children:[r.jsx(un,{className:"w-24 bg-gray-700 border-gray-600",children:r.jsx(Rn,{})}),r.jsxs(hn,{children:[r.jsx(wt,{value:"win",children:r.jsx("span",{className:"text-green-600 font-bold",children:"WIN"})}),r.jsx(wt,{value:"normal",children:r.jsx("span",{className:"text-blue-600 font-bold",children:"NORMAL"})}),r.jsx(wt,{value:"lose",children:r.jsx("span",{className:"text-red-600 font-bold",children:"LOSE"})})]})]})}),r.jsx(Ge,{className:"min-w-[300px]",children:r.jsxs("div",{className:"flex items-center space-x-1 flex-wrap",children:[r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{console.log(" View button clicked for user:",C.username),ot(C)},className:"text-gray-400 hover:text-white",title:"View User Details",children:r.jsx(xi,{className:"w-4 h-4"})}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{console.log(" Edit button clicked for user:",C.username),Kt(C)},className:"text-gray-400 hover:text-white",title:"Edit User",children:r.jsx(Db,{className:"w-4 h-4"})}),ht&&r.jsxs(r.Fragment,{children:[r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{console.log(" Deposit button clicked for user:",C.username),as(C,"deposit")},className:"text-green-400 hover:text-green-300",title:"Deposit Money",children:r.jsx(Mc,{className:"w-4 h-4"})}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{console.log(" Withdrawal button clicked for user:",C.username),as(C,"withdrawal")},className:"text-red-400 hover:text-red-300",title:"Withdraw Money",children:r.jsx(DA,{className:"w-4 h-4"})}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>as(C,"password"),className:"text-blue-400 hover:text-blue-300",title:"Change Password",children:r.jsx(_A,{className:"w-4 h-4"})}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>as(C,"wallet"),className:"text-purple-400 hover:text-purple-300",title:"Update Wallet Address",children:r.jsx(Gg,{className:"w-4 h-4"})}),C.role==="user"&&C.id!==Re.id?r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>rr(C),className:"text-red-500 hover:text-red-400 border border-red-500",title:"Delete User",children:r.jsx(lu,{className:"w-4 h-4"})}):null]})]})})]},C.id))]}):[]})]})})]})]})]}),r.jsxs(Ks,{value:"trades",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx(de,{className:"bg-gradient-to-br from-green-600 to-green-700 border-green-500",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-green-100 text-sm",children:"Active Trades"}),r.jsx("p",{className:"text-3xl font-bold text-white",children:Array.isArray(n)?n.filter(C=>C.result==="pending").length:0})]}),r.jsx(RA,{className:"w-8 h-8 text-green-200"})]})})}),r.jsx(de,{className:"bg-gradient-to-br from-blue-600 to-blue-700 border-blue-500",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-blue-100 text-sm",children:"Win Rate"}),r.jsxs("p",{className:"text-3xl font-bold text-white",children:[(d==null?void 0:d.winRate)||0,"%"]})]}),r.jsx(Rb,{className:"w-8 h-8 text-blue-200"})]})})}),r.jsx(de,{className:"bg-gradient-to-br from-purple-600 to-purple-700 border-purple-500",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-purple-100 text-sm",children:"Total Volume"}),r.jsxs("p",{className:"text-3xl font-bold text-white",children:["$",n.reduce((C,Y)=>C+parseFloat(Y.amount||0),0).toLocaleString()]})]}),r.jsx(na,{className:"w-8 h-8 text-purple-200"})]})})}),r.jsx(de,{className:"bg-gradient-to-br from-orange-600 to-orange-700 border-orange-500",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-orange-100 text-sm",children:"Total P&L"}),r.jsxs("p",{className:"text-3xl font-bold text-white",children:["$",(()=>{const C=(d==null?void 0:d.totalProfit)||0,Y=(d==null?void 0:d.totalLoss)||0;return(C-Y).toLocaleString()})()]})]}),r.jsx(ur,{className:"w-8 h-8 text-orange-200"})]})})})]}),r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsx(nt,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(it,{className:"text-white flex items-center space-x-2",children:[r.jsx(Kf,{className:"w-5 h-5"}),r.jsx("span",{children:"Live Trading Monitor"})]}),r.jsx(Rt,{className:"text-gray-400",children:"Real-time trading activity with manual controls"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm text-gray-400",children:"Live"})]})]})}),r.jsx(he,{children:r.jsx("div",{className:"border border-gray-700 rounded-lg overflow-hidden",children:r.jsxs(ka,{children:[r.jsx(Ea,{children:r.jsxs(Es,{className:"bg-gray-700",children:[r.jsx(tt,{className:"text-gray-300",children:"Trade ID"}),r.jsx(tt,{className:"text-gray-300",children:"User"}),r.jsx(tt,{className:"text-gray-300",children:"Symbol"}),r.jsx(tt,{className:"text-gray-300",children:"Direction"}),r.jsx(tt,{className:"text-gray-300",children:"Amount"}),r.jsx(tt,{className:"text-gray-300",children:"Duration"}),r.jsx(tt,{className:"text-gray-300",children:"Entry Price"}),r.jsx(tt,{className:"text-gray-300",children:"Status"}),r.jsx(tt,{className:"text-gray-300",children:"Time Left"}),r.jsx(tt,{className:"text-gray-300",children:"Control"})]})}),r.jsx(Pa,{children:Array.isArray(n)?n.slice(0,10).map(C=>{const Y=Rs(C.expires_at);return r.jsxs(Es,{className:"border-gray-700 hover:bg-gray-700/50",children:[r.jsx(Ge,{children:r.jsxs("div",{className:"text-white font-mono text-sm",children:[C.id?C.id.slice(0,8):"N/A","..."]})}),r.jsx(Ge,{className:"text-white",children:C.username||"Unknown"}),r.jsx(Ge,{className:"text-white font-medium",children:C.symbol}),r.jsx(Ge,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[C.direction==="up"?r.jsx(Hg,{className:"w-4 h-4 text-green-500"}):r.jsx(Wg,{className:"w-4 h-4 text-red-500"}),r.jsx("span",{className:"text-white",children:C.direction==="up"?"BUY":"SELL"})]})}),r.jsxs(Ge,{className:"text-white",children:[C.amount.toLocaleString()," USDT"]}),r.jsxs(Ge,{className:"text-white",children:[C.duration,"s"]}),r.jsxs(Ge,{className:"text-white font-mono",children:[C.entry_price," USDT"]}),r.jsx(Ge,{children:r.jsx(xt,{variant:C.result==="win"?"default":C.result==="lose"?"destructive":"secondary",children:C.result||"pending"})}),r.jsx(Ge,{children:C.result==="pending"?r.jsxs("span",{className:`text-sm font-medium ${Y<=10?"text-red-400":"text-yellow-400"}`,children:[Y,"s"]}):r.jsx("span",{className:"text-gray-400 text-sm",children:"Completed"})}),r.jsx(Ge,{children:r.jsxs("div",{className:"flex items-center space-x-1",children:[C.result==="pending"?r.jsxs(r.Fragment,{children:[r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>St(C.id,"win"),className:"text-green-400 hover:text-green-300",title:"Force Win",children:r.jsx(qr,{className:"w-4 h-4"})}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>St(C.id,"lose"),className:"text-red-400 hover:text-red-300",title:"Force Lose",children:r.jsx(Ka,{className:"w-4 h-4"})})]}):null,r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>kt(C.id),className:"text-gray-400 hover:text-red-400",title:"Delete Trade",children:r.jsx(lu,{className:"w-4 h-4"})})]})})]},C.id)}):[]})]})})})]})]}),r.jsx(Ks,{value:"transactions",className:"space-y-6",children:r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"Financial Transactions"}),r.jsx(Rt,{className:"text-gray-400",children:"Monitor all financial transactions"})]}),r.jsxs(he,{children:[r.jsxs("div",{className:"bg-gray-800 border border-yellow-500 rounded-lg p-4 mb-4",children:[r.jsx("h4",{className:"text-yellow-400 font-semibold mb-2",children:" Debug Info"}),r.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[r.jsxs("div",{children:["React State Count: ",r.jsx("span",{className:"text-white font-mono",children:a.length})]}),r.jsxs("div",{children:["First 3 IDs: ",r.jsx("span",{className:"text-white font-mono text-xs",children:a.slice(0,3).map(C=>C.id.slice(0,8)).join(", ")})]}),r.jsxs("div",{children:["Last Updated: ",r.jsx("span",{className:"text-white font-mono",children:new Date().toLocaleTimeString()})]})]})]}),r.jsx("div",{className:"border border-gray-700 rounded-lg overflow-hidden",children:r.jsxs(ka,{children:[r.jsx(Ea,{children:r.jsxs(Es,{className:"bg-gray-700",children:[r.jsx(tt,{className:"text-gray-300",children:"Transaction ID"}),r.jsx(tt,{className:"text-gray-300",children:"User"}),r.jsx(tt,{className:"text-gray-300",children:"Type"}),r.jsx(tt,{className:"text-gray-300",children:"Amount"}),r.jsx(tt,{className:"text-gray-300",children:"Status"}),r.jsx(tt,{className:"text-gray-300",children:"Date"}),r.jsx(tt,{className:"text-gray-300",children:"Actions"})]})}),r.jsx(Pa,{children:Array.isArray(a)?a.map(C=>{var Y;return r.jsxs(Es,{className:"border-gray-700 hover:bg-gray-700/50",children:[r.jsx(Ge,{children:r.jsxs("div",{className:"text-white font-mono text-sm",children:[C.id?C.id.slice(0,8):"N/A","..."]})}),r.jsx(Ge,{className:"text-white",children:((Y=C.users)==null?void 0:Y.username)||"Unknown"}),r.jsx(Ge,{children:r.jsx(xt,{variant:C.type==="deposit"?"default":"secondary",children:C.type})}),r.jsx(Ge,{className:"text-white font-medium",children:nB(C)}),r.jsx(Ge,{children:r.jsx(xt,{variant:C.status==="completed"?"default":"secondary",children:C.status})}),r.jsx(Ge,{className:"text-white",children:new Date(C.created_at).toLocaleDateString()}),r.jsx(Ge,{children:r.jsx(W,{size:"sm",variant:"destructive",onClick:()=>Be(C.id),disabled:C.deleting,className:"bg-red-600 hover:bg-red-700 disabled:opacity-50",children:C.deleting?r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):r.jsx(lu,{className:"w-4 h-4"})})})]},C.id)}):[]})]})})]})]})}),r.jsx(Ks,{value:"controls",className:"space-y-6",children:r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"System Controls"}),r.jsx(Rt,{className:"text-gray-400",children:"Platform-wide controls and settings"})]}),r.jsx(he,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-white font-medium mb-3",children:"Trading Controls"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(W,{className:"w-full bg-green-600 hover:bg-green-700",children:"Enable All Trading"}),r.jsx(W,{className:"w-full bg-yellow-600 hover:bg-yellow-700",children:"Pause Trading"}),r.jsx(W,{className:"w-full bg-red-600 hover:bg-red-700",children:"Emergency Stop"})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-white font-medium mb-3",children:"Market Status"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Price Feed:"}),r.jsx(xt,{className:"bg-green-600",children:"Live"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Auto Mode:"}),r.jsx(xt,{className:"bg-blue-600",children:"Enabled"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Manual Override:"}),r.jsx(xt,{variant:"outline",children:"Ready"})]})]})]}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[r.jsx("h3",{className:"text-white font-medium mb-3",children:"System Health"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Server:"}),r.jsx(xt,{className:"bg-green-600",children:"Online"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Database:"}),r.jsx(xt,{className:"bg-green-600",children:"Connected"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"WebSocket:"}),r.jsx(xt,{className:"bg-green-600",children:"Active"})]})]})]})]})})]})}),r.jsx(Ks,{value:"pending",className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsxs(it,{className:"text-white flex items-center space-x-2",children:[r.jsx(qf,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Pending Deposits"}),r.jsx(xt,{variant:"secondary",className:"ml-2",children:((xr=l==null?void 0:l.deposits)==null?void 0:xr.length)||0})]}),r.jsx(Rt,{className:"text-gray-400",children:"Review and approve user deposit requests"})]}),r.jsx(he,{children:r.jsx("div",{className:"space-y-4",children:((ji=l==null?void 0:l.deposits)==null?void 0:ji.length)===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx($s,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No pending deposits"})]}):(nr=l==null?void 0:l.deposits)==null?void 0:nr.map(C=>{var Y,ue;return r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:C.username}),r.jsxs("p",{className:"text-sm text-gray-400",children:["Balance: ",C.user_balance," USDT"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-lg font-bold text-green-400",children:[C.amount," ",C.currency]}),r.jsxs("p",{className:"text-sm text-gray-400",children:[C.currency," Network"]})]})]}),C.tx_hash&&r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-gray-400",children:"Transaction Hash:"}),r.jsx("p",{className:"text-blue-400 font-mono break-all",children:C.tx_hash})]}),C.receipt&&r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-gray-400 mb-2",children:"Receipt:"}),r.jsx("div",{className:"bg-gray-600 rounded-lg p-3",children:(Y=C.receipt.mimetype)!=null&&Y.startsWith("image/")?r.jsxs("div",{className:"space-y-2",children:[r.jsx("img",{src:C.receipt.url,alt:"Transaction Receipt",className:"max-w-full h-32 object-contain rounded border border-gray-500",onError:q=>{q.currentTarget.style.display="none";const ne=q.currentTarget.nextElementSibling;ne&&(ne.style.display="block")}}),r.jsx("div",{style:{display:"none"},className:"text-red-400 text-xs",children:"Failed to load image"}),r.jsx("a",{href:C.receipt.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-xs underline",children:"View Full Size"})]}):r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-white text-xs",children:C.receipt.originalName}),r.jsxs("p",{className:"text-gray-400 text-xs",children:[C.receipt.mimetype,"  ",Math.round(C.receipt.size/1024),"KB"]}),r.jsx("a",{href:C.receipt.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-xs underline",children:"Download File"})]})})]}),r.jsxs("div",{className:"text-sm text-gray-400",children:[r.jsxs("p",{children:["Requested: ",new Date(C.created_at).toLocaleString()]}),r.jsxs("p",{children:["Status: ",r.jsx("span",{className:"text-yellow-400",children:C.status})]})]}),C.receiptUploaded&&C.receiptViewUrl&&r.jsxs("div",{className:"bg-gray-600 rounded-lg p-3",children:[r.jsx("p",{className:"text-sm text-gray-300 mb-2",children:" Receipt Uploaded:"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(W,{onClick:()=>{var q;return gt(((q=C.receiptFile)==null?void 0:q.filename)||"")},variant:"outline",size:"sm",className:"text-blue-400 border-blue-400 hover:bg-blue-400 hover:text-white",children:"View Receipt"}),((ue=C.receiptFile)==null?void 0:ue.originalname)&&r.jsx("span",{className:"text-xs text-gray-400",children:C.receiptFile.originalname})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(W,{onClick:()=>xe(C.id,"approve"),className:"bg-green-600 hover:bg-green-700 flex-1",size:"sm",children:[r.jsx($s,{className:"w-4 h-4 mr-2"}),"Approve"]}),r.jsx(W,{onClick:()=>xe(C.id,"reject","Invalid transaction proof"),variant:"destructive",className:"flex-1",size:"sm",children:"Reject"})]})]},C.id)})})})]}),r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsxs(it,{className:"text-white flex items-center space-x-2",children:[r.jsx(ur,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Pending Withdrawals"}),r.jsx(xt,{variant:"secondary",className:"ml-2",children:((ql=l==null?void 0:l.withdrawals)==null?void 0:ql.length)||0})]}),r.jsx(Rt,{className:"text-gray-400",children:"Review and approve user withdrawal requests"})]}),r.jsx(he,{children:r.jsx("div",{className:"space-y-4",children:((Ql=l==null?void 0:l.withdrawals)==null?void 0:Ql.length)===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx($s,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No pending withdrawals"})]}):(Xl=l==null?void 0:l.withdrawals)==null?void 0:Xl.map(C=>r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:C.username}),r.jsxs("div",{className:"text-sm space-y-1",children:[r.jsxs("p",{className:"text-green-400 font-medium",children:["Balance: ",C.user_balance," USDT"]}),r.jsx("p",{className:"text-blue-400 text-xs",children:" Unified USDT balance (auto-converted)"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-lg font-bold text-red-400",children:[C.amount," ",C.currency]}),r.jsxs("p",{className:"text-sm text-gray-400",children:[C.currency," Network"]})]})]}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-gray-400",children:"Wallet Address:"}),r.jsx("p",{className:"text-blue-400 font-mono break-all",children:C.wallet_address})]}),r.jsxs("div",{className:"text-sm text-gray-400",children:[r.jsxs("p",{children:["Requested: ",new Date(C.created_at).toLocaleString()]}),r.jsxs("p",{children:["Status: ",r.jsx("span",{className:"text-yellow-400",children:C.status})]})]}),r.jsxs("div",{className:"bg-green-900/20 border border-green-700 rounded p-3 my-3",children:[r.jsxs("div",{className:"text-green-400 text-xs font-medium flex items-center mb-1",children:[r.jsx("span",{className:"mr-2",children:""}),"Withdrawal Processing"]}),r.jsxs("div",{className:"text-green-300 text-xs",children:["Approving this withdrawal will deduct ",r.jsxs("span",{className:"font-bold text-red-400",children:[C.amount," USDT"]})," from the user's unified USDT balance. Simple and instant processing with auto-conversion system."]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(W,{onClick:()=>Le(C.id,"approve"),className:"bg-green-600 hover:bg-green-700 flex-1",size:"sm",children:[r.jsx($s,{className:"w-4 h-4 mr-2"}),"Approve"]}),r.jsx(W,{onClick:()=>Le(C.id,"reject","Insufficient verification"),variant:"destructive",className:"flex-1",size:"sm",children:"Reject"})]})]},C.id))})})]})]})}),r.jsx(Ks,{value:"verification",className:"space-y-6",children:r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"Document Verification"}),r.jsx(Rt,{className:"text-gray-400",children:"Review and approve user verification documents"})]}),r.jsx(he,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:(g==null?void 0:g.pending)||0}),r.jsx("div",{className:"text-gray-400 text-sm",children:"Pending Review"})]}),r.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-400",children:(g==null?void 0:g.approved)||0}),r.jsx("div",{className:"text-gray-400 text-sm",children:"Approved"})]}),r.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-red-400",children:(g==null?void 0:g.rejected)||0}),r.jsx("div",{className:"text-gray-400 text-sm",children:"Rejected"})]}),r.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-400",children:(g==null?void 0:g.total)||0}),r.jsx("div",{className:"text-gray-400 text-sm",children:"Total Documents"})]})]}),r.jsx("div",{className:"border border-gray-700 rounded-lg overflow-x-auto",children:r.jsxs(ka,{children:[r.jsx(Ea,{children:r.jsxs(Es,{className:"bg-gray-700",children:[r.jsx(tt,{className:"text-gray-300",children:"User"}),r.jsx(tt,{className:"text-gray-300",children:"Document Type"}),r.jsx(tt,{className:"text-gray-300",children:"Submitted"}),r.jsx(tt,{className:"text-gray-300",children:"Status"}),r.jsx(tt,{className:"text-gray-300",children:"Actions"})]})}),r.jsx(Pa,{children:y.length===0?r.jsx(Es,{className:"border-gray-700",children:r.jsx(Ge,{colSpan:5,className:"text-center py-8 text-gray-400",children:"No pending verification documents"})}):y.filter(C=>C.verification_status==="pending").map(C=>{var Y,ue,q,ne,Qe;return r.jsxs(Es,{className:"border-gray-700",children:[r.jsx(Ge,{className:"text-white",children:((Y=C.users)==null?void 0:Y.email)||((ue=C.users)==null?void 0:ue.username)||"Unknown User"}),r.jsx(Ge,{className:"text-gray-300",children:((q=C.document_type)==null?void 0:q.replace("_"," ").replace(/\b\w/g,mt=>mt.toUpperCase()))||"Unknown Type"}),r.jsx(Ge,{className:"text-gray-300",children:C.created_at?new Date(C.created_at).toLocaleString():"Unknown"}),r.jsx(Ge,{children:r.jsx(xt,{className:C.verification_status==="pending"?"bg-yellow-600":C.verification_status==="approved"?"bg-green-600":C.verification_status==="rejected"?"bg-red-600":"bg-gray-600",children:((ne=C.verification_status)==null?void 0:ne.charAt(0).toUpperCase())+((Qe=C.verification_status)==null?void 0:Qe.slice(1))||"Unknown"})}),r.jsx(Ge,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(W,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",onClick:()=>window.open(C.document_url,"docViewer","width=800,height=600"),children:[r.jsx(xi,{className:"w-4 h-4 mr-1"}),"View"]}),r.jsxs(W,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>_e(C.id,"approve"),children:[r.jsx(qr,{className:"w-4 h-4 mr-1"}),"Approve"]}),r.jsxs(W,{size:"sm",className:"bg-red-600 hover:bg-red-700",onClick:()=>_e(C.id,"reject","Document review required"),children:[r.jsx(Ka,{className:"w-4 h-4 mr-1"}),"Reject"]})]})})]},C.id)})})]})})]})})]})}),r.jsx(Ks,{value:"redeem-codes",className:"space-y-6",children:r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsx(nt,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(it,{className:"text-white",children:"Redeem Code Management"}),r.jsx(Rt,{className:"text-gray-400",children:"Create and manage promotional redeem codes"})]}),r.jsxs(W,{className:"bg-purple-600 hover:bg-purple-700",onClick:()=>_(!0),children:[r.jsx(Mc,{className:"w-4 h-4 mr-2"}),"Create Code"]})]})}),r.jsx(he,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-400",children:(w==null?void 0:w.activeCodes)||0}),r.jsx("div",{className:"text-gray-400 text-sm",children:"Active Codes"})]}),r.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-400",children:(w==null?void 0:w.totalRedeemed)||0}),r.jsx("div",{className:"text-gray-400 text-sm",children:"Total Redeemed"})]}),r.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[r.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[(w==null?void 0:w.bonusDistributed)||0," USDT"]}),r.jsx("div",{className:"text-gray-400 text-sm",children:"Bonus Distributed"})]}),r.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[r.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[(w==null?void 0:w.usageRate)||0,"%"]}),r.jsx("div",{className:"text-gray-400 text-sm",children:"Usage Rate"})]})]}),r.jsx("div",{className:"border border-gray-700 rounded-lg overflow-x-auto",children:r.jsxs(ka,{children:[r.jsx(Ea,{children:r.jsxs(Es,{className:"bg-gray-700",children:[r.jsx(tt,{className:"text-gray-300",children:"Code"}),r.jsx(tt,{className:"text-gray-300",children:"Bonus Amount"}),r.jsx(tt,{className:"text-gray-300",children:"Usage"}),r.jsx(tt,{className:"text-gray-300",children:"Status"}),r.jsx(tt,{className:"text-gray-300",children:"Created"}),r.jsx(tt,{className:"text-gray-300",children:"Actions"})]})}),r.jsx(Pa,{children:x.length===0?r.jsx(Es,{className:"border-gray-700",children:r.jsx(Ge,{colSpan:6,className:"text-center py-8 text-gray-400",children:"No redeem codes found"})}):x.map(C=>{var Y,ue;return r.jsxs(Es,{className:"border-gray-700",children:[r.jsx(Ge,{className:"text-white font-mono",children:C.code}),r.jsxs(Ge,{className:"text-green-400",children:[C.bonus_amount," USDT"]}),r.jsxs(Ge,{className:"text-gray-300",children:[C.used_count||0," / ",C.max_uses||""]}),r.jsx(Ge,{children:r.jsx(xt,{className:C.status==="active"?"bg-green-600":C.status==="disabled"?"bg-red-600":"bg-gray-600",children:((Y=C.status)==null?void 0:Y.charAt(0).toUpperCase())+((ue=C.status)==null?void 0:ue.slice(1))||"Unknown"})}),r.jsx(Ge,{className:"text-gray-300",children:C.created_at?new Date(C.created_at).toLocaleDateString():"Unknown"}),r.jsx(Ge,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(W,{size:"sm",variant:"outline",className:"border-gray-600",onClick:()=>Mt(C.code||C.id,"edit"),children:[r.jsx(Db,{className:"w-4 h-4 mr-1"}),"Edit"]}),r.jsx(W,{size:"sm",className:"bg-red-600 hover:bg-red-700",onClick:()=>Mt(C.code||C.id,"disable"),disabled:C.status==="disabled"||!C.is_active,children:"Disable"}),r.jsx(W,{size:"sm",className:"bg-gray-600 hover:bg-gray-700",onClick:()=>Mt(C.code||C.id,"delete"),children:r.jsx(lu,{className:"w-4 h-4"})})]})})]},C.id)})})]})}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"User Redemption History"}),r.jsx("div",{className:"border border-gray-700 rounded-lg overflow-x-auto",children:r.jsxs(ka,{children:[r.jsx(Ea,{children:r.jsxs(Es,{className:"bg-gray-700",children:[r.jsx(tt,{className:"text-gray-300",children:"Code"}),r.jsx(tt,{className:"text-gray-300",children:"User"}),r.jsx(tt,{className:"text-gray-300",children:"Amount"}),r.jsx(tt,{className:"text-gray-300",children:"Redeemed Date"}),r.jsx(tt,{className:"text-gray-300",children:"Status"}),r.jsx(tt,{className:"text-gray-300",children:"Trades Progress"})]})}),r.jsx(Pa,{children:x.length===0?r.jsx(Es,{className:"border-gray-700",children:r.jsx(Ge,{colSpan:6,className:"text-center py-8 text-gray-400",children:"No redemptions yet"})}):x.map(C=>{const Y=C.redemptions||[];return Y.length===0?r.jsxs(Es,{className:"border-gray-700",children:[r.jsx(Ge,{className:"text-white font-mono",children:C.code}),r.jsx(Ge,{colSpan:5,className:"text-center text-gray-400",children:"No users have redeemed this code yet"})]},`${C.id}-empty`):Y.map((ue,q)=>r.jsxs(Es,{className:"border-gray-700",children:[r.jsx(Ge,{className:"text-white font-mono",children:C.code}),r.jsx(Ge,{className:"text-blue-400",children:ue.user}),r.jsxs(Ge,{className:"text-green-400",children:[ue.amount," USDT"]}),r.jsxs(Ge,{className:"text-gray-300",children:[new Date(ue.date).toLocaleDateString()," ",new Date(ue.date).toLocaleTimeString()]}),r.jsx(Ge,{children:r.jsx(xt,{className:ue.status==="completed"?"bg-green-600":ue.status==="pending_trades"?"bg-yellow-600":"bg-gray-600",children:ue.status==="completed"?"Completed":"Pending Trades"})}),r.jsxs(Ge,{className:"text-gray-300",children:[ue.tradesCompleted,"/",ue.tradesRequired]})]},`${C.id}-${q}`))})})]})})]})]})})]})}),r.jsx(Ks,{value:"support",className:"space-y-6",children:r.jsx(sB,{})})]})}),Dt&&_t&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-md w-full border border-gray-700 flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 pb-4 border-b border-gray-700",children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:" User Details"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>xs(!1),className:"text-gray-400 hover:text-white",children:""})]}),r.jsx("div",{className:"overflow-y-auto flex-1 px-6 py-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Username:"}),r.jsx("span",{className:"text-white font-medium",children:_t.username})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Email:"}),r.jsx("span",{className:"text-white",children:_t.email})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex justify-between",children:r.jsx("span",{className:"text-gray-400",children:"Balance Details:"})}),r.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-green-400 font-medium",children:"USDT Balance"}),r.jsxs("span",{className:"text-white font-bold",children:[Mu(_t.balance)," USDT"]})]}),r.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded p-3",children:[r.jsxs("div",{className:"text-blue-400 text-xs font-medium flex items-center mb-2",children:[r.jsx("span",{className:"mr-2",children:""}),"Auto-Conversion System"]}),r.jsxs("div",{className:"text-blue-300 text-xs space-y-1",children:[r.jsx("div",{children:" All cryptocurrency deposits (BTC, ETH, SOL, etc.) are automatically converted to USDT"}),r.jsx("div",{children:" Real-time conversion rates with minimal fees (0.1-0.2%)"}),r.jsx("div",{children:" Unified balance system - only USDT is stored"}),r.jsx("div",{children:" Withdrawals are processed directly from USDT balance"})]})]}),r.jsxs("div",{className:"bg-green-900/20 border border-green-700 rounded p-2",children:[r.jsxs("div",{className:"text-green-400 text-xs font-medium flex items-center",children:[r.jsx("span",{className:"mr-2",children:""}),"Benefits"]}),r.jsx("div",{className:"text-green-300 text-xs mt-1",children:" Simplified balance management  No conversion delays  Instant withdrawals"})]})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Role:"}),r.jsx("span",{className:"text-white",children:_t.role})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Status:"}),r.jsx("span",{className:"text-white",children:_t.status})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Trading Mode:"}),r.jsx("span",{className:"text-white font-medium",children:(_t.trading_mode||"normal").toUpperCase()})]}),r.jsx("div",{className:"border-t border-gray-700 pt-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("span",{className:"text-gray-400",children:"Wallet Address:"}),r.jsx("div",{className:"flex-1 ml-3",children:_t.wallet_address?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("span",{className:"text-white font-mono text-xs bg-gray-700 px-2 py-1 rounded break-all flex-1",children:_t.wallet_address}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(_t.wallet_address||""),className:"text-gray-400 hover:text-white p-1 flex-shrink-0",title:"Copy address",children:""})]}),ht&&r.jsx(W,{variant:"outline",size:"sm",onClick:()=>{xs(!1),as(_t,"wallet")},className:"text-purple-400 border-purple-400 hover:bg-purple-400 hover:text-white text-xs",children:" Manage"})]}):r.jsxs("div",{className:"space-y-2",children:[r.jsx("span",{className:"text-gray-500 italic text-sm",children:"Not set"}),ht&&r.jsx(W,{variant:"outline",size:"sm",onClick:()=>{xs(!1),as(_t,"wallet")},className:"text-purple-400 border-purple-400 hover:bg-purple-400 hover:text-white text-xs",children:" Set Address"})]})})]})}),r.jsx("div",{className:"border-t border-gray-700 pt-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("span",{className:"text-gray-400",children:"Phone Number:"}),r.jsx("div",{className:"flex-1 ml-3 text-right",children:_t.phone?r.jsx("span",{className:"text-white font-mono text-sm",children:_t.phone}):r.jsx("span",{className:"text-gray-500 italic text-sm",children:"Not set"})})]})}),r.jsx("div",{className:"border-t border-gray-700 pt-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("span",{className:"text-gray-400",children:"Withdrawal Address:"}),r.jsx("div",{className:"flex-1 ml-3",children:_t.address?r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("span",{className:"text-white text-sm bg-gray-700 px-2 py-1 rounded break-all flex-1",children:_t.address}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(_t.address||""),className:"text-gray-400 hover:text-white p-1 flex-shrink-0",title:"Copy withdrawal address",children:""})]})}):r.jsx("span",{className:"text-gray-500 italic text-sm",children:"Not set"})})]})}),r.jsxs("div",{className:"flex justify-between border-t border-gray-700 pt-3",children:[r.jsx("span",{className:"text-gray-400",children:"Created:"}),r.jsx("span",{className:"text-white",children:new Date(_t.created_at).toLocaleDateString()})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Last Login:"}),r.jsx("span",{className:"text-white",children:_t.last_login?new Date(_t.last_login).toLocaleDateString():"Never"})]})]})}),r.jsx("div",{className:"p-6 pt-4 border-t border-gray-700",children:r.jsx("div",{className:"flex justify-end",children:r.jsx(W,{onClick:()=>xs(!1),className:"bg-purple-600 hover:bg-purple-700",children:"Close"})})})]})}),Kn&&_t&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 border border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:" Edit User"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>sr(!1),className:"text-gray-400 hover:text-white",children:""})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Username"}),r.jsx(Ee,{value:ee.username||"",onChange:C=>{console.log(" Username changed:",C.target.value),Pe({...ee,username:C.target.value})},className:"bg-gray-700 border-gray-600 text-white w-full focus:ring-2 focus:ring-blue-500",placeholder:"Enter username",autoComplete:"off",disabled:!1,readOnly:!1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Email"}),r.jsx(Ee,{type:"email",value:ee.email||"",onChange:C=>{console.log(" Email changed:",C.target.value),Pe({...ee,email:C.target.value})},className:"bg-gray-700 border-gray-600 text-white w-full focus:ring-2 focus:ring-blue-500",placeholder:"Enter email",autoComplete:"off",disabled:!1,readOnly:!1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Balance"}),r.jsx(Ee,{type:"number",value:ee.balance||0,onChange:C=>{console.log(" Balance changed:",C.target.value),Pe({...ee,balance:Number(C.target.value)})},className:"bg-gray-700 border-gray-600 text-white w-full focus:ring-2 focus:ring-blue-500",placeholder:"Enter balance",step:"0.01",min:"0",disabled:!1,readOnly:!1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Wallet Address"}),r.jsx(Ee,{value:ee.wallet_address||"",onChange:C=>{console.log(" Wallet address changed:",C.target.value),Pe({...ee,wallet_address:C.target.value})},placeholder:"Enter wallet address (0x...)",className:"bg-gray-700 border-gray-600 text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Trading Mode"}),r.jsxs(Dn,{value:ee.trading_mode,onValueChange:C=>Pe({...ee,trading_mode:C}),children:[r.jsx(un,{className:"bg-gray-700 border-gray-600 text-white w-full",children:r.jsx(Rn,{placeholder:"Select trading mode"})}),r.jsxs(hn,{className:"bg-gray-700 border-gray-600",children:[r.jsx(wt,{value:"win",className:"text-white hover:bg-gray-600",children:r.jsx("span",{className:"text-green-400 font-bold",children:"WIN"})}),r.jsx(wt,{value:"normal",className:"text-white hover:bg-gray-600",children:r.jsx("span",{className:"text-blue-400 font-bold",children:"NORMAL"})}),r.jsx(wt,{value:"lose",className:"text-white hover:bg-gray-600",children:r.jsx("span",{className:"text-red-400 font-bold",children:"LOSE"})})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Role"}),r.jsxs(Dn,{value:ee.role,onValueChange:C=>Pe({...ee,role:C}),children:[r.jsx(un,{className:"bg-gray-700 border-gray-600 text-white w-full",children:r.jsx(Rn,{placeholder:"Select role"})}),r.jsxs(hn,{className:"bg-gray-700 border-gray-600",children:[r.jsx(wt,{value:"user",className:"text-white hover:bg-gray-600",children:"User"}),r.jsx(wt,{value:"admin",className:"text-white hover:bg-gray-600",children:"Admin"}),r.jsx(wt,{value:"superadmin",className:"text-white hover:bg-gray-600",children:"Super Admin"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Status"}),r.jsxs(Dn,{value:ee.status,onValueChange:C=>Pe({...ee,status:C}),children:[r.jsx(un,{className:"bg-gray-700 border-gray-600 text-white w-full",children:r.jsx(Rn,{placeholder:"Select status"})}),r.jsxs(hn,{className:"bg-gray-700 border-gray-600",children:[r.jsx(wt,{value:"active",className:"text-white hover:bg-gray-600",children:"Active"}),r.jsx(wt,{value:"inactive",className:"text-white hover:bg-gray-600",children:"Inactive"}),r.jsx(wt,{value:"suspended",className:"text-white hover:bg-gray-600",children:"Suspended"}),r.jsx(wt,{value:"banned",className:"text-white hover:bg-gray-600",children:"Banned"})]})]})]})]}),r.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[r.jsx(W,{variant:"outline",onClick:()=>sr(!1),children:"Cancel"}),r.jsx(W,{onClick:Ft,className:"bg-purple-600 hover:bg-purple-700",children:"Save Changes"})]})]})}),ht&&r.jsxs(r.Fragment,{children:[A&&ge&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 border border-gray-700",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Deposit to"}),r.jsx("div",{className:"bg-gray-700 rounded-lg p-2",children:r.jsx("span",{className:"text-sm text-gray-300 font-mono break-all",children:ge.username})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Amount ($)"}),r.jsx(Ee,{type:"number",value:se,onChange:C=>ze(C.target.value),placeholder:"Enter deposit amount",className:"bg-gray-700 border-gray-600 text-white"})]}),r.jsxs("div",{className:"text-sm text-gray-400",children:["Current Balance: ",Mu(ge.balance)," USDT"]})]}),r.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[r.jsx(W,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),r.jsx(W,{onClick:N,className:"bg-green-600 hover:bg-green-700",children:"Process Deposit"})]})]})}),$&&ge&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 border border-gray-700",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Withdraw from"}),r.jsx("div",{className:"bg-gray-700 rounded-lg p-2",children:r.jsx("span",{className:"text-sm text-gray-300 font-mono break-all",children:ge.username})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Amount ($)"}),r.jsx(Ee,{type:"number",value:ce,onChange:C=>Ke(C.target.value),placeholder:"Enter withdrawal amount",className:"bg-gray-700 border-gray-600 text-white"})]}),r.jsxs("div",{className:"text-sm text-gray-400",children:["Current Balance: ",Mu(ge.balance)," USDT"]})]}),r.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[r.jsx(W,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),r.jsx(W,{onClick:B,className:"bg-red-600 hover:bg-red-700",children:"Process Withdrawal"})]})]})}),U&&ge&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 border border-gray-700",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Change Password for"}),r.jsx("div",{className:"bg-gray-700 rounded-lg p-2",children:r.jsx("span",{className:"text-sm text-gray-300 font-mono break-all",children:ge.username})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"New Password"}),r.jsx(Ee,{type:"password",value:je,onChange:C=>Ve(C.target.value),placeholder:"Enter new password",className:"bg-gray-700 border-gray-600 text-white"})]}),r.jsx("div",{className:"text-sm text-yellow-400",children:" This will immediately change the user's login password"})]}),r.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[r.jsx(W,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),r.jsx(W,{onClick:me,className:"bg-blue-600 hover:bg-blue-700",children:"Change Password"})]})]})}),Q&&ge&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-lg w-full mx-4 border border-gray-700 max-h-[80vh] overflow-y-auto",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Manage Wallet for"}),r.jsx("div",{className:"bg-gray-700 rounded-lg p-2",children:r.jsx("span",{className:"text-sm text-gray-300 font-mono break-all",children:ge.username})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-white font-medium mb-2",children:"Current Wallet Address"}),r.jsx("div",{className:"text-sm",children:ge.wallet_address?r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("span",{className:"font-mono text-green-400 bg-gray-800 px-2 py-1 rounded break-all flex-1 text-xs",children:ge.wallet_address}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(ge.wallet_address||""),className:"text-gray-400 hover:text-white p-1 flex-shrink-0",title:"Copy address",children:""})]}):r.jsx("span",{className:"text-gray-400 italic",children:"No wallet address set"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-2",children:"New Wallet Address"}),r.jsx(Ee,{value:Me,onChange:C=>De(C.target.value),placeholder:"Enter new wallet address",className:"bg-gray-700 border-gray-600 text-white"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium mb-3",children:"Previous Wallet Addresses"}),pt.length>0?r.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Array.isArray(pt)?pt.map((C,Y)=>r.jsxs("div",{className:"bg-gray-700 p-3 rounded flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-mono text-sm text-gray-300",children:C.address?`${C.address.slice(0,10)}...${C.address.slice(-8)}`:"N/A"}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Changed: ",new Date(C.changed_at).toLocaleDateString()]})]}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>De(C.address),className:"text-blue-400 hover:text-blue-300 text-xs",title:"Use this address",children:"Use"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(C.address),className:"text-gray-400 hover:text-white p-1",title:"Copy address",children:""})]})]},Y)):[]}):r.jsx("div",{className:"bg-gray-700 p-3 rounded text-center",children:r.jsx("div",{className:"text-gray-400 text-sm",children:"No previous wallet addresses found"})})]}),r.jsx("div",{className:"bg-yellow-900/20 border border-yellow-600/30 p-3 rounded",children:r.jsx("div",{className:"text-yellow-400 text-sm",children:" Changing the wallet address will move the current address to history"})})]}),r.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[r.jsx(W,{variant:"outline",onClick:()=>Oe(!1),children:"Cancel"}),r.jsx(W,{onClick:Z,className:"bg-purple-600 hover:bg-purple-700",disabled:!Me||Me===ge.wallet_address,children:"Update Wallet"})]})]})})]}),r.jsx(el,{open:!!pe,onOpenChange:()=>st(null),children:r.jsxs(Qa,{className:"max-w-4xl max-h-[90vh] bg-gray-800 border-gray-700",children:[r.jsx(Xa,{children:r.jsxs(Ya,{className:"text-white",children:["Receipt: ",pe==null?void 0:pe.filename]})}),r.jsx("div",{className:"flex justify-center items-center p-4",children:pe&&r.jsx("img",{src:pe.url,alt:"Receipt",className:"max-w-full max-h-[70vh] object-contain rounded-lg",onError:C=>{console.error("Failed to load receipt image"),C.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzMzMzMzMyIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmaWxsPSIjNjY2NjY2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+UmVjZWlwdCBOb3QgRm91bmQ8L3RleHQ+PC9zdmc+"}})})]})}),S&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 border border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:" Create Redeem Code"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>_(!1),className:"text-gray-400 hover:text-white",children:""})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-2",children:"Code *"}),r.jsx(Ee,{value:E.code,onChange:C=>I({...E,code:C.target.value.toUpperCase()}),placeholder:"e.g., BONUS100",className:"bg-gray-700 border-gray-600 text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-2",children:"Bonus Amount (USDT) *"}),r.jsx(Ee,{type:"number",value:E.bonusAmount,onChange:C=>I({...E,bonusAmount:C.target.value}),placeholder:"100",className:"bg-gray-700 border-gray-600 text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-2",children:"Max Uses (optional)"}),r.jsx(Ee,{type:"number",value:E.maxUses,onChange:C=>I({...E,maxUses:C.target.value}),placeholder:"Leave empty for unlimited",className:"bg-gray-700 border-gray-600 text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm block mb-2",children:"Description (optional)"}),r.jsx(Ee,{value:E.description,onChange:C=>I({...E,description:C.target.value}),placeholder:"Bonus code description",className:"bg-gray-700 border-gray-600 text-white"})]})]}),r.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[r.jsx(W,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),r.jsx(W,{onClick:At,className:"bg-purple-600 hover:bg-purple-700",children:"Create Code"})]})]})}),k&&M&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 border border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:" Edit Redeem Code"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{P(!1),T(null)},className:"text-gray-400 hover:text-white",children:""})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Code"}),r.jsx("input",{type:"text",value:M.code,disabled:!0,className:"w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md text-white opacity-50 cursor-not-allowed"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Code cannot be changed"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Bonus Amount (USDT)"}),r.jsx("input",{type:"number",step:"0.01",value:M.bonus_amount,onChange:C=>T({...M,bonus_amount:C.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Max Uses (optional)"}),r.jsx("input",{type:"number",value:M.max_uses||"",onChange:C=>T({...M,max_uses:C.target.value}),placeholder:"Unlimited",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Description"}),r.jsx("input",{type:"text",value:M.description||"",onChange:C=>T({...M,description:C.target.value}),placeholder:"Code description",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white"})]})]}),r.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[r.jsx(W,{variant:"outline",onClick:()=>{P(!1),T(null)},children:"Cancel"}),r.jsx(W,{onClick:Cs,className:"bg-blue-600 hover:bg-blue-700",children:"Update Code"})]})]})})]})]})}var Ud=t=>t.type==="checkbox",Ra=t=>t instanceof Date,lr=t=>t==null;const cE=t=>typeof t=="object";var ds=t=>!lr(t)&&!Array.isArray(t)&&cE(t)&&!Ra(t),dE=t=>ds(t)&&t.target?Ud(t.target)?t.target.checked:t.target.value:t,iB=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,uE=(t,e)=>t.has(iB(e)),aB=t=>{const e=t.constructor&&t.constructor.prototype;return ds(e)&&e.hasOwnProperty("isPrototypeOf")},$y=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ms(t){let e;const s=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!($y&&(t instanceof Blob||n))&&(s||ds(t)))if(e=s?[]:Object.create(Object.getPrototypeOf(t)),!s&&!aB(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=ms(t[i]));else return t;return e}var uf=t=>/^\w*$/.test(t),es=t=>t===void 0,Uy=t=>Array.isArray(t)?t.filter(Boolean):[],By=t=>Uy(t.replace(/["|']|\]/g,"").split(/\.|\[/)),be=(t,e,s)=>{if(!e||!ds(t))return s;const n=(uf(e)?[e]:By(e)).reduce((i,a)=>lr(i)?i:i[a],t);return es(n)||n===t?es(t[e])?s:t[e]:n},Cr=t=>typeof t=="boolean",Et=(t,e,s)=>{let n=-1;const i=uf(e)?[e]:By(e),a=i.length,o=a-1;for(;++n<a;){const l=i[n];let c=s;if(n!==o){const d=t[l];c=ds(d)||Array.isArray(d)?d:isNaN(+i[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const em={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},mn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Yn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},zy=ye.createContext(null);zy.displayName="HookFormContext";const hf=()=>ye.useContext(zy),oB=t=>{const{children:e,...s}=t;return ye.createElement(zy.Provider,{value:s},e)};var hE=(t,e,s,n=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==mn.all&&(e._proxyFormState[o]=!n||mn.all),s&&(s[o]=!0),t[o]}});return i};const Vy=typeof window<"u"?ye.useLayoutEffect:ye.useEffect;function lB(t){const e=hf(),{control:s=e.control,disabled:n,name:i,exact:a}=t||{},[o,l]=ye.useState(s._formState),c=ye.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Vy(()=>s._subscribe({name:i,formState:c.current,exact:a,callback:d=>{!n&&l({...s._formState,...d})}}),[i,n,a]),ye.useEffect(()=>{c.current.isValid&&s._setValid(!0)},[s]),ye.useMemo(()=>hE(o,s,c.current,!1),[o,s])}var kr=t=>typeof t=="string",mE=(t,e,s,n,i)=>kr(t)?(n&&e.watch.add(t),be(s,t,i)):Array.isArray(t)?t.map(a=>(n&&e.watch.add(a),be(s,a))):(n&&(e.watchAll=!0),s),v0=t=>lr(t)||!cE(t);function ii(t,e,s=new WeakSet){if(v0(t)||v0(e))return t===e;if(Ra(t)&&Ra(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(s.has(t)||s.has(e))return!0;s.add(t),s.add(e);for(const a of n){const o=t[a];if(!i.includes(a))return!1;if(a!=="ref"){const l=e[a];if(Ra(o)&&Ra(l)||ds(o)&&ds(l)||Array.isArray(o)&&Array.isArray(l)?!ii(o,l,s):o!==l)return!1}}return!0}function cB(t){const e=hf(),{control:s=e.control,name:n,defaultValue:i,disabled:a,exact:o,compute:l}=t||{},c=ye.useRef(i),d=ye.useRef(l),h=ye.useRef(void 0);d.current=l;const u=ye.useMemo(()=>s._getWatch(n,c.current),[s,n]),[m,y]=ye.useState(d.current?d.current(u):u);return Vy(()=>s._subscribe({name:n,formState:{values:!0},exact:o,callback:v=>{if(!a){const g=mE(n,s._names,v.values||s._formValues,!1,c.current);if(d.current){const b=d.current(g);ii(b,h.current)||(y(b),h.current=b)}else y(g)}}}),[s,a,n,o]),ye.useEffect(()=>s._removeUnmounted()),m}function dB(t){const e=hf(),{name:s,disabled:n,control:i=e.control,shouldUnregister:a,defaultValue:o}=t,l=uE(i._names.array,s),c=ye.useMemo(()=>be(i._formValues,s,be(i._defaultValues,s,o)),[i,s,o]),d=cB({control:i,name:s,defaultValue:c,exact:!0}),h=lB({control:i,name:s,exact:!0}),u=ye.useRef(t),m=ye.useRef(void 0),y=ye.useRef(i.register(s,{...t.rules,value:d,...Cr(t.disabled)?{disabled:t.disabled}:{}}));u.current=t;const v=ye.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!be(h.errors,s)},isDirty:{enumerable:!0,get:()=>!!be(h.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!be(h.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!be(h.validatingFields,s)},error:{enumerable:!0,get:()=>be(h.errors,s)}}),[h,s]),g=ye.useCallback(w=>y.current.onChange({target:{value:dE(w),name:s},type:em.CHANGE}),[s]),b=ye.useCallback(()=>y.current.onBlur({target:{value:be(i._formValues,s),name:s},type:em.BLUR}),[s,i._formValues]),x=ye.useCallback(w=>{const j=be(i._fields,s);j&&w&&(j._f.ref={focus:()=>w.focus&&w.focus(),select:()=>w.select&&w.select(),setCustomValidity:S=>w.setCustomValidity(S),reportValidity:()=>w.reportValidity()})},[i._fields,s]),p=ye.useMemo(()=>({name:s,value:d,...Cr(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:g,onBlur:b,ref:x}),[s,n,h.disabled,g,b,x,d]);return ye.useEffect(()=>{const w=i._options.shouldUnregister||a,j=m.current;j&&j!==s&&!l&&i.unregister(j),i.register(s,{...u.current.rules,...Cr(u.current.disabled)?{disabled:u.current.disabled}:{}});const S=(_,k)=>{const P=be(i._fields,_);P&&P._f&&(P._f.mount=k)};if(S(s,!0),w){const _=ms(be(i._options.defaultValues,s,u.current.defaultValue));Et(i._defaultValues,s,_),es(be(i._formValues,s))&&Et(i._formValues,s,_)}return!l&&i.register(s),m.current=s,()=>{(l?w&&!i._state.action:w)?i.unregister(s):S(s,!1)}},[s,i,l,a]),ye.useEffect(()=>{i._setDisabledField({disabled:n,name:s})},[n,s,i]),ye.useMemo(()=>({field:p,formState:h,fieldState:v}),[p,h,v])}const uB=t=>t.render(dB(t));var fE=(t,e,s,n,i)=>e?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[n]:i||!0}}:{},Lc=t=>Array.isArray(t)?t:[t],kj=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}};function pE(t,e){const s={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],a=e[n];if(i&&ds(i)&&a){const o=pE(i,a);ds(o)&&(s[n]=o)}else t[n]&&(s[n]=a)}return s}var or=t=>ds(t)&&!Object.keys(t).length,Wy=t=>t.type==="file",fn=t=>typeof t=="function",tm=t=>{if(!$y)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},gE=t=>t.type==="select-multiple",Hy=t=>t.type==="radio",hB=t=>Hy(t)||Ud(t),Ap=t=>tm(t)&&t.isConnected;function mB(t,e){const s=e.slice(0,-1).length;let n=0;for(;n<s;)t=es(t)?n++:t[e[n++]];return t}function fB(t){for(const e in t)if(t.hasOwnProperty(e)&&!es(t[e]))return!1;return!0}function os(t,e){const s=Array.isArray(e)?e:uf(e)?[e]:By(e),n=s.length===1?t:mB(t,s),i=s.length-1,a=s[i];return n&&delete n[a],i!==0&&(ds(n)&&or(n)||Array.isArray(n)&&fB(n))&&os(t,s.slice(0,-1)),t}var pB=t=>{for(const e in t)if(fn(t[e]))return!0;return!1};function xE(t){return Array.isArray(t)||ds(t)&&!pB(t)}function b0(t,e={}){for(const s in t)xE(t[s])?(e[s]=Array.isArray(t[s])?[]:{},b0(t[s],e[s])):es(t[s])||(e[s]=!0);return e}function Eo(t,e,s){s||(s=b0(e));for(const n in t)xE(t[n])?es(e)||v0(s[n])?s[n]=b0(t[n],Array.isArray(t[n])?[]:{}):Eo(t[n],lr(e)?{}:e[n],s[n]):s[n]=!ii(t[n],e[n]);return s}const Ej={value:!1,isValid:!1},Pj={value:!0,isValid:!0};var yE=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!es(t[0].attributes.value)?es(t[0].value)||t[0].value===""?Pj:{value:t[0].value,isValid:!0}:Pj:Ej}return Ej},vE=(t,{valueAsNumber:e,valueAsDate:s,setValueAs:n})=>es(t)?t:e?t===""?NaN:t&&+t:s&&kr(t)?new Date(t):n?n(t):t;const _j={isValid:!1,value:null};var bE=t=>Array.isArray(t)?t.reduce((e,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:e,_j):_j;function Mj(t){const e=t.ref;return Wy(e)?e.files:Hy(e)?bE(t.refs).value:gE(e)?[...e.selectedOptions].map(({value:s})=>s):Ud(e)?yE(t.refs).value:vE(es(e.value)?t.ref.value:e.value,t)}var gB=(t,e,s,n)=>{const i={};for(const a of t){const o=be(e,a);o&&Et(i,a,o._f)}return{criteriaMode:s,names:[...t],fields:i,shouldUseNativeValidation:n}},sm=t=>t instanceof RegExp,hc=t=>es(t)?t:sm(t)?t.source:ds(t)?sm(t.value)?t.value.source:t.value:t,Aj=t=>({isOnSubmit:!t||t===mn.onSubmit,isOnBlur:t===mn.onBlur,isOnChange:t===mn.onChange,isOnAll:t===mn.all,isOnTouch:t===mn.onTouched});const Dj="AsyncFunction";var xB=t=>!!t&&!!t.validate&&!!(fn(t.validate)&&t.validate.constructor.name===Dj||ds(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Dj)),yB=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Rj=(t,e,s)=>!s&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Fc=(t,e,s,n)=>{for(const i of s||Object.keys(t)){const a=be(t,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(Fc(l,e))break}else if(ds(l)&&Fc(l,e))break}}};function Oj(t,e,s){const n=be(t,s);if(n||uf(s))return{error:n,name:s};const i=s.split(".");for(;i.length;){const a=i.join("."),o=be(e,a),l=be(t,a);if(o&&!Array.isArray(o)&&s!==a)return{name:s};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};i.pop()}return{name:s}}var vB=(t,e,s,n)=>{s(t);const{name:i,...a}=t;return or(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!n||mn.all))},bB=(t,e,s)=>!t||!e||t===e||Lc(t).some(n=>n&&(s?n===e:n.startsWith(e)||e.startsWith(n))),wB=(t,e,s,n,i)=>i.isOnAll?!1:!s&&i.isOnTouch?!(e||t):(s?n.isOnBlur:i.isOnBlur)?!t:(s?n.isOnChange:i.isOnChange)?t:!0,jB=(t,e)=>!Uy(be(t,e)).length&&os(t,e),NB=(t,e,s)=>{const n=Lc(be(t,s));return Et(n,"root",e[s]),Et(t,s,n),t};function Ij(t,e,s="validate"){if(kr(t)||Array.isArray(t)&&t.every(kr)||Cr(t)&&!t)return{type:s,message:kr(t)?t:"",ref:e}}var ko=t=>ds(t)&&!sm(t)?t:{value:t,message:""},Lj=async(t,e,s,n,i,a)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:h,min:u,max:m,pattern:y,validate:v,name:g,valueAsNumber:b,mount:x}=t._f,p=be(s,g);if(!x||e.has(g))return{};const w=l?l[0]:o,j=I=>{i&&w.reportValidity&&(w.setCustomValidity(Cr(I)?"":I||""),w.reportValidity())},S={},_=Hy(o),k=Ud(o),P=_||k,M=(b||Wy(o))&&es(o.value)&&es(p)||tm(o)&&o.value===""||p===""||Array.isArray(p)&&!p.length,T=fE.bind(null,g,n,S),E=(I,V,G,A=Yn.maxLength,R=Yn.minLength)=>{const $=I?V:G;S[g]={type:I?A:R,message:$,ref:o,...T(I?A:R,$)}};if(a?!Array.isArray(p)||!p.length:c&&(!P&&(M||lr(p))||Cr(p)&&!p||k&&!yE(l).isValid||_&&!bE(l).isValid)){const{value:I,message:V}=kr(c)?{value:!!c,message:c}:ko(c);if(I&&(S[g]={type:Yn.required,message:V,ref:w,...T(Yn.required,V)},!n))return j(V),S}if(!M&&(!lr(u)||!lr(m))){let I,V;const G=ko(m),A=ko(u);if(!lr(p)&&!isNaN(p)){const R=o.valueAsNumber||p&&+p;lr(G.value)||(I=R>G.value),lr(A.value)||(V=R<A.value)}else{const R=o.valueAsDate||new Date(p),$=J=>new Date(new Date().toDateString()+" "+J),O=o.type=="time",U=o.type=="week";kr(G.value)&&p&&(I=O?$(p)>$(G.value):U?p>G.value:R>new Date(G.value)),kr(A.value)&&p&&(V=O?$(p)<$(A.value):U?p<A.value:R<new Date(A.value))}if((I||V)&&(E(!!I,G.message,A.message,Yn.max,Yn.min),!n))return j(S[g].message),S}if((d||h)&&!M&&(kr(p)||a&&Array.isArray(p))){const I=ko(d),V=ko(h),G=!lr(I.value)&&p.length>+I.value,A=!lr(V.value)&&p.length<+V.value;if((G||A)&&(E(G,I.message,V.message),!n))return j(S[g].message),S}if(y&&!M&&kr(p)){const{value:I,message:V}=ko(y);if(sm(I)&&!p.match(I)&&(S[g]={type:Yn.pattern,message:V,ref:o,...T(Yn.pattern,V)},!n))return j(V),S}if(v){if(fn(v)){const I=await v(p,s),V=Ij(I,w);if(V&&(S[g]={...V,...T(Yn.validate,V.message)},!n))return j(V.message),S}else if(ds(v)){let I={};for(const V in v){if(!or(I)&&!n)break;const G=Ij(await v[V](p,s),w,V);G&&(I={...G,...T(V,G.message)},j(G.message),n&&(S[g]=I))}if(!or(I)&&(S[g]={ref:w,...I},!n))return S}}return j(!0),S};const SB={mode:mn.onSubmit,reValidateMode:mn.onChange,shouldFocusError:!0};function CB(t={}){let e={...SB,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:fn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=ds(e.defaultValues)||ds(e.values)?ms(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:ms(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...h};const m={array:kj(),state:kj()},y=e.criteriaMode===mn.all,v=D=>H=>{clearTimeout(d),d=setTimeout(D,H)},g=async D=>{if(!e.disabled&&(h.isValid||u.isValid||D)){const H=e.resolver?or((await k()).errors):await M(n,!0);H!==s.isValid&&m.state.next({isValid:H})}},b=(D,H)=>{!e.disabled&&(h.isValidating||h.validatingFields||u.isValidating||u.validatingFields)&&((D||Array.from(l.mount)).forEach(X=>{X&&(H?Et(s.validatingFields,X,H):os(s.validatingFields,X))}),m.state.next({validatingFields:s.validatingFields,isValidating:!or(s.validatingFields)}))},x=(D,H=[],X,ve,oe=!0,te=!0)=>{if(ve&&X&&!e.disabled){if(o.action=!0,te&&Array.isArray(be(n,D))){const Se=X(be(n,D),ve.argA,ve.argB);oe&&Et(n,D,Se)}if(te&&Array.isArray(be(s.errors,D))){const Se=X(be(s.errors,D),ve.argA,ve.argB);oe&&Et(s.errors,D,Se),jB(s.errors,D)}if((h.touchedFields||u.touchedFields)&&te&&Array.isArray(be(s.touchedFields,D))){const Se=X(be(s.touchedFields,D),ve.argA,ve.argB);oe&&Et(s.touchedFields,D,Se)}(h.dirtyFields||u.dirtyFields)&&(s.dirtyFields=Eo(i,a)),m.state.next({name:D,isDirty:E(D,H),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Et(a,D,H)},p=(D,H)=>{Et(s.errors,D,H),m.state.next({errors:s.errors})},w=D=>{s.errors=D,m.state.next({errors:s.errors,isValid:!1})},j=(D,H,X,ve)=>{const oe=be(n,D);if(oe){const te=be(a,D,es(X)?be(i,D):X);es(te)||ve&&ve.defaultChecked||H?Et(a,D,H?te:Mj(oe._f)):G(D,te),o.mount&&g()}},S=(D,H,X,ve,oe)=>{let te=!1,Se=!1;const Re={name:D};if(!e.disabled){if(!X||ve){(h.isDirty||u.isDirty)&&(Se=s.isDirty,s.isDirty=Re.isDirty=E(),te=Se!==Re.isDirty);const Ze=ii(be(i,D),H);Se=!!be(s.dirtyFields,D),Ze?os(s.dirtyFields,D):Et(s.dirtyFields,D,!0),Re.dirtyFields=s.dirtyFields,te=te||(h.dirtyFields||u.dirtyFields)&&Se!==!Ze}if(X){const Ze=be(s.touchedFields,D);Ze||(Et(s.touchedFields,D,X),Re.touchedFields=s.touchedFields,te=te||(h.touchedFields||u.touchedFields)&&Ze!==X)}te&&oe&&m.state.next(Re)}return te?Re:{}},_=(D,H,X,ve)=>{const oe=be(s.errors,D),te=(h.isValid||u.isValid)&&Cr(H)&&s.isValid!==H;if(e.delayError&&X?(c=v(()=>p(D,X)),c(e.delayError)):(clearTimeout(d),c=null,X?Et(s.errors,D,X):os(s.errors,D)),(X?!ii(oe,X):oe)||!or(ve)||te){const Se={...ve,...te&&Cr(H)?{isValid:H}:{},errors:s.errors,name:D};s={...s,...Se},m.state.next(Se)}},k=async D=>{b(D,!0);const H=await e.resolver(a,e.context,gB(D||l.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return b(D),H},P=async D=>{const{errors:H}=await k(D);if(D)for(const X of D){const ve=be(H,X);ve?Et(s.errors,X,ve):os(s.errors,X)}else s.errors=H;return H},M=async(D,H,X={valid:!0})=>{for(const ve in D){const oe=D[ve];if(oe){const{_f:te,...Se}=oe;if(te){const Re=l.array.has(te.name),Ze=oe._f&&xB(oe._f);Ze&&h.validatingFields&&b([te.name],!0);const ht=await Lj(oe,l.disabled,a,y,e.shouldUseNativeValidation&&!H,Re);if(Ze&&h.validatingFields&&b([te.name]),ht[te.name]&&(X.valid=!1,H))break;!H&&(be(ht,te.name)?Re?NB(s.errors,ht,te.name):Et(s.errors,te.name,ht[te.name]):os(s.errors,te.name))}!or(Se)&&await M(Se,H,X)}}return X.valid},T=()=>{for(const D of l.unMount){const H=be(n,D);H&&(H._f.refs?H._f.refs.every(X=>!Ap(X)):!Ap(H._f.ref))&&ce(D)}l.unMount=new Set},E=(D,H)=>!e.disabled&&(D&&H&&Et(a,D,H),!ii(J(),i)),I=(D,H,X)=>mE(D,l,{...o.mount?a:es(H)?i:kr(D)?{[D]:H}:H},X,H),V=D=>Uy(be(o.mount?a:i,D,e.shouldUnregister?be(i,D,[]):[])),G=(D,H,X={})=>{const ve=be(n,D);let oe=H;if(ve){const te=ve._f;te&&(!te.disabled&&Et(a,D,vE(H,te)),oe=tm(te.ref)&&lr(H)?"":H,gE(te.ref)?[...te.ref.options].forEach(Se=>Se.selected=oe.includes(Se.value)):te.refs?Ud(te.ref)?te.refs.forEach(Se=>{(!Se.defaultChecked||!Se.disabled)&&(Array.isArray(oe)?Se.checked=!!oe.find(Re=>Re===Se.value):Se.checked=oe===Se.value||!!oe)}):te.refs.forEach(Se=>Se.checked=Se.value===oe):Wy(te.ref)?te.ref.value="":(te.ref.value=oe,te.ref.type||m.state.next({name:D,values:ms(a)})))}(X.shouldDirty||X.shouldTouch)&&S(D,oe,X.shouldTouch,X.shouldDirty,!0),X.shouldValidate&&U(D)},A=(D,H,X)=>{for(const ve in H){if(!H.hasOwnProperty(ve))return;const oe=H[ve],te=D+"."+ve,Se=be(n,te);(l.array.has(D)||ds(oe)||Se&&!Se._f)&&!Ra(oe)?A(te,oe,X):G(te,oe,X)}},R=(D,H,X={})=>{const ve=be(n,D),oe=l.array.has(D),te=ms(H);Et(a,D,te),oe?(m.array.next({name:D,values:ms(a)}),(h.isDirty||h.dirtyFields||u.isDirty||u.dirtyFields)&&X.shouldDirty&&m.state.next({name:D,dirtyFields:Eo(i,a),isDirty:E(D,te)})):ve&&!ve._f&&!lr(te)?A(D,te,X):G(D,te,X),Rj(D,l)&&m.state.next({...s,name:D}),m.state.next({name:o.mount?D:void 0,values:ms(a)})},$=async D=>{o.mount=!0;const H=D.target;let X=H.name,ve=!0;const oe=be(n,X),te=Ze=>{ve=Number.isNaN(Ze)||Ra(Ze)&&isNaN(Ze.getTime())||ii(Ze,be(a,X,Ze))},Se=Aj(e.mode),Re=Aj(e.reValidateMode);if(oe){let Ze,ht;const ts=H.type?Mj(oe._f):dE(D),Je=D.type===em.BLUR||D.type===em.FOCUS_OUT,ie=!yB(oe._f)&&!e.resolver&&!be(s.errors,X)&&!oe._f.deps||wB(Je,be(s.touchedFields,X),s.isSubmitted,Re,Se),tr=Rj(X,l,Je);Et(a,X,ts),Je?(!H||!H.readOnly)&&(oe._f.onBlur&&oe._f.onBlur(D),c&&c(0)):oe._f.onChange&&oe._f.onChange(D);const z=S(X,ts,Je),Te=!or(z)||tr;if(!Je&&m.state.next({name:X,type:D.type,values:ms(a)}),ie)return(h.isValid||u.isValid)&&(e.mode==="onBlur"?Je&&g():Je||g()),Te&&m.state.next({name:X,...tr?{}:z});if(!Je&&tr&&m.state.next({...s}),e.resolver){const{errors:St}=await k([X]);if(te(ts),ve){const kt=Oj(s.errors,n,X),Dt=Oj(St,n,kt.name||X);Ze=Dt.error,X=Dt.name,ht=or(St)}}else b([X],!0),Ze=(await Lj(oe,l.disabled,a,y,e.shouldUseNativeValidation))[X],b([X]),te(ts),ve&&(Ze?ht=!1:(h.isValid||u.isValid)&&(ht=await M(n,!0)));ve&&(oe._f.deps&&(!Array.isArray(oe._f.deps)||oe._f.deps.length>0)&&U(oe._f.deps),_(X,ht,Ze,z))}},O=(D,H)=>{if(be(s.errors,H)&&D.focus)return D.focus(),1},U=async(D,H={})=>{let X,ve;const oe=Lc(D);if(e.resolver){const te=await P(es(D)?D:oe);X=or(te),ve=D?!oe.some(Se=>be(te,Se)):X}else D?(ve=(await Promise.all(oe.map(async te=>{const Se=be(n,te);return await M(Se&&Se._f?{[te]:Se}:Se)}))).every(Boolean),!(!ve&&!s.isValid)&&g()):ve=X=await M(n);return m.state.next({...!kr(D)||(h.isValid||u.isValid)&&X!==s.isValid?{}:{name:D},...e.resolver||!D?{isValid:X}:{},errors:s.errors}),H.shouldFocus&&!ve&&Fc(n,O,D?oe:l.mount),ve},J=(D,H)=>{let X={...o.mount?a:i};return H&&(X=pE(H.dirtyFields?s.dirtyFields:s.touchedFields,X)),es(D)?X:kr(D)?be(X,D):D.map(ve=>be(X,ve))},Q=(D,H)=>({invalid:!!be((H||s).errors,D),isDirty:!!be((H||s).dirtyFields,D),error:be((H||s).errors,D),isValidating:!!be(s.validatingFields,D),isTouched:!!be((H||s).touchedFields,D)}),Oe=D=>{D&&Lc(D).forEach(H=>os(s.errors,H)),m.state.next({errors:D?s.errors:{}})},ge=(D,H,X)=>{const ve=(be(n,D,{_f:{}})._f||{}).ref,oe=be(s.errors,D)||{},{ref:te,message:Se,type:Re,...Ze}=oe;Et(s.errors,D,{...Ze,...H,ref:ve}),m.state.next({name:D,errors:s.errors,isValid:!1}),X&&X.shouldFocus&&ve&&ve.focus&&ve.focus()},He=(D,H)=>fn(D)?m.state.subscribe({next:X=>"values"in X&&D(I(void 0,H),X)}):I(D,H,!0),se=D=>m.state.subscribe({next:H=>{bB(D.name,H.name,D.exact)&&vB(H,D.formState||h,qe,D.reRenderRoot)&&D.callback({values:{...a},...s,...H,defaultValues:i})}}).unsubscribe,ze=D=>(o.mount=!0,u={...u,...D.formState},se({...D,formState:u})),ce=(D,H={})=>{for(const X of D?Lc(D):l.mount)l.mount.delete(X),l.array.delete(X),H.keepValue||(os(n,X),os(a,X)),!H.keepError&&os(s.errors,X),!H.keepDirty&&os(s.dirtyFields,X),!H.keepTouched&&os(s.touchedFields,X),!H.keepIsValidating&&os(s.validatingFields,X),!e.shouldUnregister&&!H.keepDefaultValue&&os(i,X);m.state.next({values:ms(a)}),m.state.next({...s,...H.keepDirty?{isDirty:E()}:{}}),!H.keepIsValid&&g()},Ke=({disabled:D,name:H})=>{(Cr(D)&&o.mount||D||l.disabled.has(H))&&(D?l.disabled.add(H):l.disabled.delete(H))},je=(D,H={})=>{let X=be(n,D);const ve=Cr(H.disabled)||Cr(e.disabled);return Et(n,D,{...X||{},_f:{...X&&X._f?X._f:{ref:{name:D}},name:D,mount:!0,...H}}),l.mount.add(D),X?Ke({disabled:Cr(H.disabled)?H.disabled:e.disabled,name:D}):j(D,!0,H.value),{...ve?{disabled:H.disabled||e.disabled}:{},...e.progressive?{required:!!H.required,min:hc(H.min),max:hc(H.max),minLength:hc(H.minLength),maxLength:hc(H.maxLength),pattern:hc(H.pattern)}:{},name:D,onChange:$,onBlur:$,ref:oe=>{if(oe){je(D,H),X=be(n,D);const te=es(oe.value)&&oe.querySelectorAll&&oe.querySelectorAll("input,select,textarea")[0]||oe,Se=hB(te),Re=X._f.refs||[];if(Se?Re.find(Ze=>Ze===te):te===X._f.ref)return;Et(n,D,{_f:{...X._f,...Se?{refs:[...Re.filter(Ap),te,...Array.isArray(be(i,D))?[{}]:[]],ref:{type:te.type,name:D}}:{ref:te}}}),j(D,!1,void 0,te)}else X=be(n,D,{}),X._f&&(X._f.mount=!1),(e.shouldUnregister||H.shouldUnregister)&&!(uE(l.array,D)&&o.action)&&l.unMount.add(D)}}},Ve=()=>e.shouldFocusError&&Fc(n,O,l.mount),Me=D=>{Cr(D)&&(m.state.next({disabled:D}),Fc(n,(H,X)=>{const ve=be(n,X);ve&&(H.disabled=ve._f.disabled||D,Array.isArray(ve._f.refs)&&ve._f.refs.forEach(oe=>{oe.disabled=ve._f.disabled||D}))},0,!1))},De=(D,H)=>async X=>{let ve;X&&(X.preventDefault&&X.preventDefault(),X.persist&&X.persist());let oe=ms(a);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:te,values:Se}=await k();s.errors=te,oe=ms(Se)}else await M(n);if(l.disabled.size)for(const te of l.disabled)os(oe,te);if(os(s.errors,"root"),or(s.errors)){m.state.next({errors:{}});try{await D(oe,X)}catch(te){ve=te}}else H&&await H({...s.errors},X),Ve(),setTimeout(Ve);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:or(s.errors)&&!ve,submitCount:s.submitCount+1,errors:s.errors}),ve)throw ve},pt=(D,H={})=>{be(n,D)&&(es(H.defaultValue)?R(D,ms(be(i,D))):(R(D,H.defaultValue),Et(i,D,ms(H.defaultValue))),H.keepTouched||os(s.touchedFields,D),H.keepDirty||(os(s.dirtyFields,D),s.isDirty=H.defaultValue?E(D,ms(be(i,D))):E()),H.keepError||(os(s.errors,D),h.isValid&&g()),m.state.next({...s}))},K=(D,H={})=>{const X=D?ms(D):i,ve=ms(X),oe=or(D),te=oe?i:ve;if(H.keepDefaultValues||(i=X),!H.keepValues){if(H.keepDirtyValues){const Se=new Set([...l.mount,...Object.keys(Eo(i,a))]);for(const Re of Array.from(Se))be(s.dirtyFields,Re)?Et(te,Re,be(a,Re)):R(Re,be(te,Re))}else{if($y&&es(D))for(const Se of l.mount){const Re=be(n,Se);if(Re&&Re._f){const Ze=Array.isArray(Re._f.refs)?Re._f.refs[0]:Re._f.ref;if(tm(Ze)){const ht=Ze.closest("form");if(ht){ht.reset();break}}}}if(H.keepFieldsRef)for(const Se of l.mount)R(Se,be(te,Se));else n={}}a=e.shouldUnregister?H.keepDefaultValues?ms(i):{}:ms(te),m.array.next({values:{...te}}),m.state.next({values:{...te}})}l={mount:H.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!H.keepIsValid||!!H.keepDirtyValues,o.watch=!!e.shouldUnregister,m.state.next({submitCount:H.keepSubmitCount?s.submitCount:0,isDirty:oe?!1:H.keepDirty?s.isDirty:!!(H.keepDefaultValues&&!ii(D,i)),isSubmitted:H.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:oe?{}:H.keepDirtyValues?H.keepDefaultValues&&a?Eo(i,a):s.dirtyFields:H.keepDefaultValues&&D?Eo(i,D):H.keepDirty?s.dirtyFields:{},touchedFields:H.keepTouched?s.touchedFields:{},errors:H.keepErrors?s.errors:{},isSubmitSuccessful:H.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},pe=(D,H)=>K(fn(D)?D(a):D,H),st=(D,H={})=>{const X=be(n,D),ve=X&&X._f;if(ve){const oe=ve.refs?ve.refs[0]:ve.ref;oe.focus&&(oe.focus(),H.shouldSelect&&fn(oe.select)&&oe.select())}},qe=D=>{s={...s,...D}},ut={control:{register:je,unregister:ce,getFieldState:Q,handleSubmit:De,setError:ge,_subscribe:se,_runSchema:k,_focusError:Ve,_getWatch:I,_getDirty:E,_setValid:g,_setFieldArray:x,_setDisabledField:Ke,_setErrors:w,_getFieldArray:V,_reset:K,_resetDefaultValues:()=>fn(e.defaultValues)&&e.defaultValues().then(D=>{pe(D,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:Me,_subjects:m,_proxyFormState:h,get _fields(){return n},get _formValues(){return a},get _state(){return o},set _state(D){o=D},get _defaultValues(){return i},get _names(){return l},set _names(D){l=D},get _formState(){return s},get _options(){return e},set _options(D){e={...e,...D}}},subscribe:ze,trigger:U,register:je,handleSubmit:De,watch:He,setValue:R,getValues:J,reset:pe,resetField:pt,clearErrors:Oe,unregister:ce,setError:ge,setFocus:st,getFieldState:Q};return{...ut,formControl:ut}}function Ky(t={}){const e=ye.useRef(void 0),s=ye.useRef(void 0),[n,i]=ye.useState({isDirty:!1,isValidating:!1,isLoading:fn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:fn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!fn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=CB(t);e.current={...l,formState:n}}const a=e.current.control;return a._options=t,Vy(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),ye.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),ye.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),ye.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),ye.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),ye.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==n.isDirty&&a._subjects.state.next({isDirty:o})}},[a,n.isDirty]),ye.useEffect(()=>{t.values&&!ii(t.values,s.current)?(a._reset(t.values,{keepFieldsRef:!0,...a._options.resetOptions}),s.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),ye.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=hE(n,a),e.current}const Fj=(t,e,s)=>{if(t&&"reportValidity"in t){const n=be(s,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},wE=(t,e)=>{for(const s in e.fields){const n=e.fields[s];n&&n.ref&&"reportValidity"in n.ref?Fj(n.ref,s,t):n.refs&&n.refs.forEach(i=>Fj(i,s,t))}},TB=(t,e)=>{e.shouldUseNativeValidation&&wE(t,e);const s={};for(const n in t){const i=be(e.fields,n),a=Object.assign(t[n]||{},{ref:i&&i.ref});if(kB(e.names||Object.keys(t),n)){const o=Object.assign({},be(s,n));Et(o,"root",a),Et(s,n,o)}else Et(s,n,a)}return s},kB=(t,e)=>t.some(s=>s.startsWith(e+"."));var EB=function(t,e){for(var s={};t.length;){var n=t[0],i=n.code,a=n.message,o=n.path.join(".");if(!s[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];s[o]={message:l.message,type:l.code}}else s[o]={message:a,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(h){return h.errors.forEach(function(u){return t.push(u)})}),e){var c=s[o].types,d=c&&c[n.code];s[o]=fE(o,e,s,i,d?[].concat(d,n.message):n.message)}t.shift()}return s},Gy=function(t,e,s){return s===void 0&&(s={}),function(n,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[s.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(d){return a.shouldUseNativeValidation&&wE({},a),{errors:{},values:s.raw?n:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:TB(EB(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},jt;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function s(i){throw new Error}t.assertNever=s,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(jt||(jt={}));var $j;(function(t){t.mergeShapes=(e,s)=>({...e,...s})})($j||($j={}));const Ae=jt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Di=t=>{switch(typeof t){case"undefined":return Ae.undefined;case"string":return Ae.string;case"number":return Number.isNaN(t)?Ae.nan:Ae.number;case"boolean":return Ae.boolean;case"function":return Ae.function;case"bigint":return Ae.bigint;case"symbol":return Ae.symbol;case"object":return Array.isArray(t)?Ae.array:t===null?Ae.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ae.promise:typeof Map<"u"&&t instanceof Map?Ae.map:typeof Set<"u"&&t instanceof Set?Ae.set:typeof Date<"u"&&t instanceof Date?Ae.date:Ae.object;default:return Ae.unknown}},fe=jt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class bi extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}format(e){const s=e||function(a){return a.message},n={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(s(o));else{let l=n,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(s(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return i(this),n}static assert(e){if(!(e instanceof bi))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,jt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},n=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];s[a]=s[a]||[],s[a].push(e(i))}else n.push(e(i));return{formErrors:n,fieldErrors:s}}get formErrors(){return this.flatten()}}bi.create=t=>new bi(t);const w0=(t,e)=>{let s;switch(t.code){case fe.invalid_type:t.received===Ae.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case fe.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,jt.jsonStringifyReplacer)}`;break;case fe.unrecognized_keys:s=`Unrecognized key(s) in object: ${jt.joinValues(t.keys,", ")}`;break;case fe.invalid_union:s="Invalid input";break;case fe.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${jt.joinValues(t.options)}`;break;case fe.invalid_enum_value:s=`Invalid enum value. Expected ${jt.joinValues(t.options)}, received '${t.received}'`;break;case fe.invalid_arguments:s="Invalid function arguments";break;case fe.invalid_return_type:s="Invalid function return type";break;case fe.invalid_date:s="Invalid date";break;case fe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:jt.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case fe.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case fe.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case fe.custom:s="Invalid input";break;case fe.invalid_intersection_types:s="Intersection results could not be merged";break;case fe.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case fe.not_finite:s="Number must be finite";break;default:s=e.defaultError,jt.assertNever(t)}return{message:s}};let PB=w0;function _B(){return PB}const MB=t=>{const{data:e,path:s,errorMaps:n,issueData:i}=t,a=[...s,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:e,defaultError:l}).message;return{...i,path:a,message:l}};function Ce(t,e){const s=_B(),n=MB({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===w0?void 0:w0].filter(i=>!!i)});t.common.issues.push(n)}class Ar{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const n=[];for(const i of s){if(i.status==="aborted")return Xe;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,s){const n=[];for(const i of s){const a=await i.key,o=await i.value;n.push({key:a,value:o})}return Ar.mergeObjectSync(e,n)}static mergeObjectSync(e,s){const n={};for(const i of s){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return Xe;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[a.value]=o.value)}return{status:e.value,value:n}}}const Xe=Object.freeze({status:"aborted"}),bc=t=>({status:"dirty",value:t}),tn=t=>({status:"valid",value:t}),Uj=t=>t.status==="aborted",Bj=t=>t.status==="dirty",Al=t=>t.status==="valid",rm=t=>typeof Promise<"u"&&t instanceof Promise;var Ie;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ie||(Ie={}));class fa{constructor(e,s,n,i){this._cachedPath=[],this.parent=e,this.data=s,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const zj=(t,e)=>{if(Al(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new bi(t.common.issues);return this._error=s,this._error}}};function ct(t){if(!t)return{};const{errorMap:e,invalid_type_error:s,required_error:n,description:i}=t;if(e&&(s||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??s??l.defaultError}},description:i}}class vt{get description(){return this._def.description}_getType(e){return Di(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:Di(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ar,ctx:{common:e.parent.common,data:e.data,parsedType:Di(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(rm(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const n=this.safeParse(e,s);if(n.success)return n.data;throw n.error}safeParse(e,s){const n={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Di(e)},i=this._parseSync({data:e,path:n.path,parent:n});return zj(n,i)}"~validate"(e){var n,i;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Di(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:s});return Al(a)?{value:a.value}:{issues:s.common.issues}}catch(a){(i=(n=a==null?void 0:a.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(a=>Al(a)?{value:a.value}:{issues:s.common.issues})}async parseAsync(e,s){const n=await this.safeParseAsync(e,s);if(n.success)return n.data;throw n.error}async safeParseAsync(e,s){const n={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Di(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(rm(i)?i:Promise.resolve(i));return zj(n,a)}refine(e,s){const n=i=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(i):s;return this._refinement((i,a)=>{const o=e(i),l=()=>a.addIssue({code:fe.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,s){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof s=="function"?s(n,i):s),!1))}_refinement(e){return new Rl({schema:this,typeName:Ye.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return ia.create(this,this._def)}nullable(){return Ol.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Bn.create(this)}promise(){return om.create(this,this._def)}or(e){return im.create([this,e],this._def)}and(e){return am.create(this,e,this._def)}transform(e){return new Rl({...ct(this._def),schema:this,typeName:Ye.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new S0({...ct(this._def),innerType:this,defaultValue:s,typeName:Ye.ZodDefault})}brand(){return new e7({typeName:Ye.ZodBranded,type:this,...ct(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new C0({...ct(this._def),innerType:this,catchValue:s,typeName:Ye.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return qy.create(this,e)}readonly(){return T0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const AB=/^c[^\s-]{8,}$/i,DB=/^[0-9a-z]+$/,RB=/^[0-9A-HJKMNP-TV-Z]{26}$/i,OB=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,IB=/^[a-z0-9_-]{21}$/i,LB=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,FB=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$B=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,UB="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Dp;const BB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,zB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,VB=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,WB=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,HB=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,KB=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,jE="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",GB=new RegExp(`^${jE}$`);function NE(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const s=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${s}`}function qB(t){return new RegExp(`^${NE(t)}$`)}function QB(t){let e=`${jE}T${NE(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function XB(t,e){return!!((e==="v4"||!e)&&BB.test(t)||(e==="v6"||!e)&&VB.test(t))}function YB(t,e){if(!LB.test(t))return!1;try{const[s]=t.split(".");if(!s)return!1;const n=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function JB(t,e){return!!((e==="v4"||!e)&&zB.test(t)||(e==="v6"||!e)&&WB.test(t))}class qi extends vt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ae.string){const a=this._getOrReturnCtx(e);return Ce(a,{code:fe.invalid_type,expected:Ae.string,received:a.parsedType}),Xe}const n=new Ar;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Ce(i,{code:fe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Ce(i,{code:fe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?Ce(i,{code:fe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Ce(i,{code:fe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")$B.test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"email",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Dp||(Dp=new RegExp(UB,"u")),Dp.test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"emoji",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")OB.test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"uuid",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")IB.test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"nanoid",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")AB.test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"cuid",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")DB.test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"cuid2",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")RB.test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"ulid",code:fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Ce(i,{validation:"url",code:fe.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"regex",code:fe.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Ce(i,{code:fe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Ce(i,{code:fe.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Ce(i,{code:fe.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?QB(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{code:fe.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?GB.test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{code:fe.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?qB(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{code:fe.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?FB.test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"duration",code:fe.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?XB(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"ip",code:fe.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?YB(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"jwt",code:fe.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?JB(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"cidr",code:fe.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?HB.test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"base64",code:fe.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?KB.test(e.data)||(i=this._getOrReturnCtx(e,i),Ce(i,{validation:"base64url",code:fe.invalid_string,message:a.message}),n.dirty()):jt.assertNever(a);return{status:n.value,value:e.data}}_regex(e,s,n){return this.refinement(i=>e.test(i),{validation:s,code:fe.invalid_string,...Ie.errToObj(n)})}_addCheck(e){return new qi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ie.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ie.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ie.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ie.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ie.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ie.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ie.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ie.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ie.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...Ie.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...Ie.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...Ie.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...Ie.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...Ie.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...Ie.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...Ie.errToObj(s)})}nonempty(e){return this.min(1,Ie.errToObj(e))}trim(){return new qi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new qi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new qi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}qi.create=t=>new qi({checks:[],typeName:Ye.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...ct(t)});function ZB(t,e){const s=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=s>n?s:n,a=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return a%o/10**i}class pd extends vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ae.number){const a=this._getOrReturnCtx(e);return Ce(a,{code:fe.invalid_type,expected:Ae.number,received:a.parsedType}),Xe}let n;const i=new Ar;for(const a of this._def.checks)a.kind==="int"?jt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Ce(n,{code:fe.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Ce(n,{code:fe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Ce(n,{code:fe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?ZB(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),Ce(n,{code:fe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Ce(n,{code:fe.not_finite,message:a.message}),i.dirty()):jt.assertNever(a);return{status:i.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,Ie.toString(s))}gt(e,s){return this.setLimit("min",e,!1,Ie.toString(s))}lte(e,s){return this.setLimit("max",e,!0,Ie.toString(s))}lt(e,s){return this.setLimit("max",e,!1,Ie.toString(s))}setLimit(e,s,n,i){return new pd({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:n,message:Ie.toString(i)}]})}_addCheck(e){return new pd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ie.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:Ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ie.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&jt.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(s===null||n.value>s)&&(s=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(s)&&Number.isFinite(e)}}pd.create=t=>new pd({checks:[],typeName:Ye.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ct(t)});class gd extends vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ae.bigint)return this._getInvalidInput(e);let n;const i=new Ar;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Ce(n,{code:fe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Ce(n,{code:fe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Ce(n,{code:fe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):jt.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const s=this._getOrReturnCtx(e);return Ce(s,{code:fe.invalid_type,expected:Ae.bigint,received:s.parsedType}),Xe}gte(e,s){return this.setLimit("min",e,!0,Ie.toString(s))}gt(e,s){return this.setLimit("min",e,!1,Ie.toString(s))}lte(e,s){return this.setLimit("max",e,!0,Ie.toString(s))}lt(e,s){return this.setLimit("max",e,!1,Ie.toString(s))}setLimit(e,s,n,i){return new gd({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:n,message:Ie.toString(i)}]})}_addCheck(e){return new gd({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}gd.create=t=>new gd({checks:[],typeName:Ye.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...ct(t)});class j0 extends vt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ae.boolean){const n=this._getOrReturnCtx(e);return Ce(n,{code:fe.invalid_type,expected:Ae.boolean,received:n.parsedType}),Xe}return tn(e.data)}}j0.create=t=>new j0({typeName:Ye.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ct(t)});class nm extends vt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ae.date){const a=this._getOrReturnCtx(e);return Ce(a,{code:fe.invalid_type,expected:Ae.date,received:a.parsedType}),Xe}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Ce(a,{code:fe.invalid_date}),Xe}const n=new Ar;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Ce(i,{code:fe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Ce(i,{code:fe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):jt.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new nm({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:Ie.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:Ie.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}nm.create=t=>new nm({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ye.ZodDate,...ct(t)});class Vj extends vt{_parse(e){if(this._getType(e)!==Ae.symbol){const n=this._getOrReturnCtx(e);return Ce(n,{code:fe.invalid_type,expected:Ae.symbol,received:n.parsedType}),Xe}return tn(e.data)}}Vj.create=t=>new Vj({typeName:Ye.ZodSymbol,...ct(t)});class Wj extends vt{_parse(e){if(this._getType(e)!==Ae.undefined){const n=this._getOrReturnCtx(e);return Ce(n,{code:fe.invalid_type,expected:Ae.undefined,received:n.parsedType}),Xe}return tn(e.data)}}Wj.create=t=>new Wj({typeName:Ye.ZodUndefined,...ct(t)});class Hj extends vt{_parse(e){if(this._getType(e)!==Ae.null){const n=this._getOrReturnCtx(e);return Ce(n,{code:fe.invalid_type,expected:Ae.null,received:n.parsedType}),Xe}return tn(e.data)}}Hj.create=t=>new Hj({typeName:Ye.ZodNull,...ct(t)});class Kj extends vt{constructor(){super(...arguments),this._any=!0}_parse(e){return tn(e.data)}}Kj.create=t=>new Kj({typeName:Ye.ZodAny,...ct(t)});class Gj extends vt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tn(e.data)}}Gj.create=t=>new Gj({typeName:Ye.ZodUnknown,...ct(t)});class pa extends vt{_parse(e){const s=this._getOrReturnCtx(e);return Ce(s,{code:fe.invalid_type,expected:Ae.never,received:s.parsedType}),Xe}}pa.create=t=>new pa({typeName:Ye.ZodNever,...ct(t)});class qj extends vt{_parse(e){if(this._getType(e)!==Ae.undefined){const n=this._getOrReturnCtx(e);return Ce(n,{code:fe.invalid_type,expected:Ae.void,received:n.parsedType}),Xe}return tn(e.data)}}qj.create=t=>new qj({typeName:Ye.ZodVoid,...ct(t)});class Bn extends vt{_parse(e){const{ctx:s,status:n}=this._processInputParams(e),i=this._def;if(s.parsedType!==Ae.array)return Ce(s,{code:fe.invalid_type,expected:Ae.array,received:s.parsedType}),Xe;if(i.exactLength!==null){const o=s.data.length>i.exactLength.value,l=s.data.length<i.exactLength.value;(o||l)&&(Ce(s,{code:o?fe.too_big:fe.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&s.data.length<i.minLength.value&&(Ce(s,{code:fe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&s.data.length>i.maxLength.value&&(Ce(s,{code:fe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),s.common.async)return Promise.all([...s.data].map((o,l)=>i.type._parseAsync(new fa(s,o,s.path,l)))).then(o=>Ar.mergeArray(n,o));const a=[...s.data].map((o,l)=>i.type._parseSync(new fa(s,o,s.path,l)));return Ar.mergeArray(n,a)}get element(){return this._def.type}min(e,s){return new Bn({...this._def,minLength:{value:e,message:Ie.toString(s)}})}max(e,s){return new Bn({...this._def,maxLength:{value:e,message:Ie.toString(s)}})}length(e,s){return new Bn({...this._def,exactLength:{value:e,message:Ie.toString(s)}})}nonempty(e){return this.min(1,e)}}Bn.create=(t,e)=>new Bn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ye.ZodArray,...ct(e)});function Po(t){if(t instanceof ls){const e={};for(const s in t.shape){const n=t.shape[s];e[s]=ia.create(Po(n))}return new ls({...t._def,shape:()=>e})}else return t instanceof Bn?new Bn({...t._def,type:Po(t.element)}):t instanceof ia?ia.create(Po(t.unwrap())):t instanceof Ol?Ol.create(Po(t.unwrap())):t instanceof po?po.create(t.items.map(e=>Po(e))):t}class ls extends vt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=jt.objectKeys(e);return this._cached={shape:e,keys:s},this._cached}_parse(e){if(this._getType(e)!==Ae.object){const d=this._getOrReturnCtx(e);return Ce(d,{code:fe.invalid_type,expected:Ae.object,received:d.parsedType}),Xe}const{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof pa&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const h=a[d],u=i.data[d];c.push({key:{status:"valid",value:d},value:h._parse(new fa(i,u,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof pa){const d=this._def.unknownKeys;if(d==="passthrough")for(const h of l)c.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(d==="strict")l.length>0&&(Ce(i,{code:fe.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const h of l){const u=i.data[h];c.push({key:{status:"valid",value:h},value:d._parse(new fa(i,u,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const h of c){const u=await h.key,m=await h.value;d.push({key:u,value:m,alwaysSet:h.alwaysSet})}return d}).then(d=>Ar.mergeObjectSync(n,d)):Ar.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Ie.errToObj,new ls({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,n)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,s,n).message)??n.defaultError;return s.code==="unrecognized_keys"?{message:Ie.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new ls({...this._def,unknownKeys:"strip"})}passthrough(){return new ls({...this._def,unknownKeys:"passthrough"})}extend(e){return new ls({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ls({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ye.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new ls({...this._def,catchall:e})}pick(e){const s={};for(const n of jt.objectKeys(e))e[n]&&this.shape[n]&&(s[n]=this.shape[n]);return new ls({...this._def,shape:()=>s})}omit(e){const s={};for(const n of jt.objectKeys(this.shape))e[n]||(s[n]=this.shape[n]);return new ls({...this._def,shape:()=>s})}deepPartial(){return Po(this)}partial(e){const s={};for(const n of jt.objectKeys(this.shape)){const i=this.shape[n];e&&!e[n]?s[n]=i:s[n]=i.optional()}return new ls({...this._def,shape:()=>s})}required(e){const s={};for(const n of jt.objectKeys(this.shape))if(e&&!e[n])s[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof ia;)a=a._def.innerType;s[n]=a}return new ls({...this._def,shape:()=>s})}keyof(){return SE(jt.objectKeys(this.shape))}}ls.create=(t,e)=>new ls({shape:()=>t,unknownKeys:"strip",catchall:pa.create(),typeName:Ye.ZodObject,...ct(e)});ls.strictCreate=(t,e)=>new ls({shape:()=>t,unknownKeys:"strict",catchall:pa.create(),typeName:Ye.ZodObject,...ct(e)});ls.lazycreate=(t,e)=>new ls({shape:t,unknownKeys:"strip",catchall:pa.create(),typeName:Ye.ZodObject,...ct(e)});class im extends vt{_parse(e){const{ctx:s}=this._processInputParams(e),n=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return s.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new bi(l.ctx.common.issues));return Ce(s,{code:fe.invalid_union,unionErrors:o}),Xe}if(s.common.async)return Promise.all(n.map(async a=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await a._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of n){const d={...s,common:{...s.common,issues:[]},parent:null},h=c._parseSync({data:s.data,path:s.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return s.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new bi(c));return Ce(s,{code:fe.invalid_union,unionErrors:l}),Xe}}get options(){return this._def.options}}im.create=(t,e)=>new im({options:t,typeName:Ye.ZodUnion,...ct(e)});function N0(t,e){const s=Di(t),n=Di(e);if(t===e)return{valid:!0,data:t};if(s===Ae.object&&n===Ae.object){const i=jt.objectKeys(e),a=jt.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=N0(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(s===Ae.array&&n===Ae.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=N0(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return s===Ae.date&&n===Ae.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class am extends vt{_parse(e){const{status:s,ctx:n}=this._processInputParams(e),i=(a,o)=>{if(Uj(a)||Uj(o))return Xe;const l=N0(a.value,o.value);return l.valid?((Bj(a)||Bj(o))&&s.dirty(),{status:s.value,value:l.data}):(Ce(n,{code:fe.invalid_intersection_types}),Xe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}am.create=(t,e,s)=>new am({left:t,right:e,typeName:Ye.ZodIntersection,...ct(s)});class po extends vt{_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ae.array)return Ce(n,{code:fe.invalid_type,expected:Ae.array,received:n.parsedType}),Xe;if(n.data.length<this._def.items.length)return Ce(n,{code:fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Xe;!this._def.rest&&n.data.length>this._def.items.length&&(Ce(n,{code:fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const a=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new fa(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>Ar.mergeArray(s,o)):Ar.mergeArray(s,a)}get items(){return this._def.items}rest(e){return new po({...this._def,rest:e})}}po.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new po({items:t,typeName:Ye.ZodTuple,rest:null,...ct(e)})};class Qj extends vt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ae.map)return Ce(n,{code:fe.invalid_type,expected:Ae.map,received:n.parsedType}),Xe;const i=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([l,c],d)=>({key:i._parse(new fa(n,l,n.path,[d,"key"])),value:a._parse(new fa(n,c,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,h=await c.value;if(d.status==="aborted"||h.status==="aborted")return Xe;(d.status==="dirty"||h.status==="dirty")&&s.dirty(),l.set(d.value,h.value)}return{status:s.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,h=c.value;if(d.status==="aborted"||h.status==="aborted")return Xe;(d.status==="dirty"||h.status==="dirty")&&s.dirty(),l.set(d.value,h.value)}return{status:s.value,value:l}}}}Qj.create=(t,e,s)=>new Qj({valueType:e,keyType:t,typeName:Ye.ZodMap,...ct(s)});class xd extends vt{_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ae.set)return Ce(n,{code:fe.invalid_type,expected:Ae.set,received:n.parsedType}),Xe;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Ce(n,{code:fe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),s.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Ce(n,{code:fe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),s.dirty());const a=this._def.valueType;function o(c){const d=new Set;for(const h of c){if(h.status==="aborted")return Xe;h.status==="dirty"&&s.dirty(),d.add(h.value)}return{status:s.value,value:d}}const l=[...n.data.values()].map((c,d)=>a._parse(new fa(n,c,n.path,d)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,s){return new xd({...this._def,minSize:{value:e,message:Ie.toString(s)}})}max(e,s){return new xd({...this._def,maxSize:{value:e,message:Ie.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}xd.create=(t,e)=>new xd({valueType:t,minSize:null,maxSize:null,typeName:Ye.ZodSet,...ct(e)});class Xj extends vt{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}Xj.create=(t,e)=>new Xj({getter:t,typeName:Ye.ZodLazy,...ct(e)});class Yj extends vt{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return Ce(s,{received:s.data,code:fe.invalid_literal,expected:this._def.value}),Xe}return{status:"valid",value:e.data}}get value(){return this._def.value}}Yj.create=(t,e)=>new Yj({value:t,typeName:Ye.ZodLiteral,...ct(e)});function SE(t,e){return new Dl({values:t,typeName:Ye.ZodEnum,...ct(e)})}class Dl extends vt{_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),n=this._def.values;return Ce(s,{expected:jt.joinValues(n),received:s.parsedType,code:fe.invalid_type}),Xe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const s=this._getOrReturnCtx(e),n=this._def.values;return Ce(s,{received:s.data,code:fe.invalid_enum_value,options:n}),Xe}return tn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return Dl.create(e,{...this._def,...s})}exclude(e,s=this._def){return Dl.create(this.options.filter(n=>!e.includes(n)),{...this._def,...s})}}Dl.create=SE;class Jj extends vt{_parse(e){const s=jt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Ae.string&&n.parsedType!==Ae.number){const i=jt.objectValues(s);return Ce(n,{expected:jt.joinValues(i),received:n.parsedType,code:fe.invalid_type}),Xe}if(this._cache||(this._cache=new Set(jt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=jt.objectValues(s);return Ce(n,{received:n.data,code:fe.invalid_enum_value,options:i}),Xe}return tn(e.data)}get enum(){return this._def.values}}Jj.create=(t,e)=>new Jj({values:t,typeName:Ye.ZodNativeEnum,...ct(e)});class om extends vt{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==Ae.promise&&s.common.async===!1)return Ce(s,{code:fe.invalid_type,expected:Ae.promise,received:s.parsedType}),Xe;const n=s.parsedType===Ae.promise?s.data:Promise.resolve(s.data);return tn(n.then(i=>this._def.type.parseAsync(i,{path:s.path,errorMap:s.common.contextualErrorMap})))}}om.create=(t,e)=>new om({type:t,typeName:Ye.ZodPromise,...ct(e)});class Rl extends vt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ye.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{Ce(n,o),o.fatal?s.abort():s.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(async l=>{if(s.value==="aborted")return Xe;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?Xe:c.status==="dirty"||s.value==="dirty"?bc(c.value):c});{if(s.value==="aborted")return Xe;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?Xe:l.status==="dirty"||s.value==="dirty"?bc(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Xe:(l.status==="dirty"&&s.dirty(),o(l.value),{status:s.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Xe:(l.status==="dirty"&&s.dirty(),o(l.value).then(()=>({status:s.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Al(o))return Xe;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Al(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:s.value,value:l})):Xe);jt.assertNever(i)}}Rl.create=(t,e,s)=>new Rl({schema:t,typeName:Ye.ZodEffects,effect:e,...ct(s)});Rl.createWithPreprocess=(t,e,s)=>new Rl({schema:e,effect:{type:"preprocess",transform:t},typeName:Ye.ZodEffects,...ct(s)});class ia extends vt{_parse(e){return this._getType(e)===Ae.undefined?tn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ia.create=(t,e)=>new ia({innerType:t,typeName:Ye.ZodOptional,...ct(e)});class Ol extends vt{_parse(e){return this._getType(e)===Ae.null?tn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ol.create=(t,e)=>new Ol({innerType:t,typeName:Ye.ZodNullable,...ct(e)});class S0 extends vt{_parse(e){const{ctx:s}=this._processInputParams(e);let n=s.data;return s.parsedType===Ae.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}S0.create=(t,e)=>new S0({innerType:t,typeName:Ye.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ct(e)});class C0 extends vt{_parse(e){const{ctx:s}=this._processInputParams(e),n={...s,common:{...s.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return rm(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new bi(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new bi(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}C0.create=(t,e)=>new C0({innerType:t,typeName:Ye.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ct(e)});class Zj extends vt{_parse(e){if(this._getType(e)!==Ae.nan){const n=this._getOrReturnCtx(e);return Ce(n,{code:fe.invalid_type,expected:Ae.nan,received:n.parsedType}),Xe}return{status:"valid",value:e.data}}}Zj.create=t=>new Zj({typeName:Ye.ZodNaN,...ct(t)});class e7 extends vt{_parse(e){const{ctx:s}=this._processInputParams(e),n=s.data;return this._def.type._parse({data:n,path:s.path,parent:s})}unwrap(){return this._def.type}}class qy extends vt{_parse(e){const{status:s,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Xe:a.status==="dirty"?(s.dirty(),bc(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Xe:i.status==="dirty"?(s.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,s){return new qy({in:e,out:s,typeName:Ye.ZodPipeline})}}class T0 extends vt{_parse(e){const s=this._def.innerType._parse(e),n=i=>(Al(i)&&(i.value=Object.freeze(i.value)),i);return rm(s)?s.then(i=>n(i)):n(s)}unwrap(){return this._def.innerType}}T0.create=(t,e)=>new T0({innerType:t,typeName:Ye.ZodReadonly,...ct(e)});var Ye;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ye||(Ye={}));const _n=qi.create,CE=j0.create;pa.create;Bn.create;const Qy=ls.create;im.create;am.create;po.create;const t7=Dl.create;om.create;ia.create;Ol.create;const Xy=oB,TE=f.createContext({}),zr=({...t})=>r.jsx(TE.Provider,{value:{name:t.name},children:r.jsx(uB,{...t})}),mf=()=>{const t=f.useContext(TE),e=f.useContext(kE),{getFieldState:s,formState:n}=hf(),i=s(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},kE=f.createContext({}),wr=f.forwardRef(({className:t,...e},s)=>{const n=f.useId();return r.jsx(kE.Provider,{value:{id:n},children:r.jsx("div",{ref:s,className:Ue("space-y-2",t),...e})})});wr.displayName="FormItem";const jr=f.forwardRef(({className:t,...e},s)=>{const{error:n,formItemId:i}=mf();return r.jsx(Bt,{ref:s,className:Ue(n&&"text-destructive",t),htmlFor:i,...e})});jr.displayName="FormLabel";const Nr=f.forwardRef(({...t},e)=>{const{error:s,formItemId:n,formDescriptionId:i,formMessageId:a}=mf();return r.jsx(JS,{ref:e,id:n,"aria-describedby":s?`${i} ${a}`:`${i}`,"aria-invalid":!!s,...t})});Nr.displayName="FormControl";const s7=f.forwardRef(({className:t,...e},s)=>{const{formDescriptionId:n}=mf();return r.jsx("p",{ref:s,id:n,className:Ue("text-sm text-muted-foreground",t),...e})});s7.displayName="FormDescription";const Sr=f.forwardRef(({className:t,children:e,...s},n)=>{const{error:i,formMessageId:a}=mf(),o=i?String((i==null?void 0:i.message)??""):e;return o?r.jsx("p",{ref:n,id:a,className:Ue("text-sm font-medium text-destructive",t),...s,children:o}):null});Sr.displayName="FormMessage";const r7=Qy({username:_n().min(1,"Username is required"),password:_n().min(1,"Password is required")});function n7(){const[,t]=Or(),{toast:e}=Zs(),{user:s,adminLogin:n,isAdminLoginPending:i}=Ss();f.useEffect(()=>{const l=localStorage.getItem("authToken"),c=localStorage.getItem("user");l&&(l.startsWith("demo-token-")||c&&JSON.parse(c).role==="user")&&(console.log(" Clearing non-admin session for admin login"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("demoUser"))},[]),f.useEffect(()=>{s&&(s.role==="admin"||s.role==="super_admin"||s.role==="superadmin"?(console.log(" User already authenticated as admin, redirecting..."),t("/admin")):(console.log(" Non-admin user detected, clearing session for admin login"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("demoUser"),window.location.reload()))},[s,t]);const a=Ky({resolver:Gy(r7),defaultValues:{username:"",password:""}}),o=async l=>{try{const c=await n(l);console.log(" Login result:",c),e({title:"Login Successful",description:`Welcome back, ${l.username}!`}),c&&c.user&&(localStorage.setItem("authToken",c.token),localStorage.setItem("user",JSON.stringify(c.user)),console.log(" Stored user data:",c.user),console.log(" Forcing page reload to update auth state..."),setTimeout(()=>{window.location.href="/admin/dashboard"},1e3))}catch(c){e({title:"Login Failed",description:c.message||"Invalid admin credentials",variant:"destructive"})}};return r.jsx("div",{className:"bg-gray-900 flex items-center justify-center px-4 py-8 w-full",style:{minHeight:"100vh"},children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg flex items-center justify-center",children:r.jsx($s,{className:"text-white w-6 h-6"})})}),r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Admin Login"}),r.jsx("p",{className:"text-gray-400 mt-2",children:"Access the METACHROME admin dashboard"})]}),r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"Sign In"}),r.jsx(Rt,{className:"text-gray-400",children:"Enter your admin credentials to continue"})]}),r.jsx(he,{className:"pb-6",children:r.jsx(Xy,{...a,children:r.jsxs("form",{onSubmit:a.handleSubmit(o),className:"space-y-4",children:[r.jsx(zr,{control:a.control,name:"username",render:({field:l})=>r.jsxs(wr,{children:[r.jsx(jr,{className:"text-white",children:"Username"}),r.jsx(Nr,{children:r.jsx(Ee,{...l,placeholder:"Enter your username",className:"bg-gray-700 border-gray-600 text-white placeholder:text-gray-400"})}),r.jsx(Sr,{})]})}),r.jsx(zr,{control:a.control,name:"password",render:({field:l})=>r.jsxs(wr,{children:[r.jsx(jr,{className:"text-white",children:"Password"}),r.jsx(Nr,{children:r.jsx(Ee,{...l,type:"password",placeholder:"Enter your password",className:"bg-gray-700 border-gray-600 text-white placeholder:text-gray-400"})}),r.jsx(Sr,{})]})}),r.jsx(W,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",disabled:i,children:i?r.jsxs(r.Fragment,{children:[r.jsx(Ab,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing In..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ab,{className:"mr-2 h-4 w-4"}),"Sign In"]})})]})})})]})]})})}function i7(){const[,t]=Or();return f.useEffect(()=>{const e=localStorage.getItem("authToken"),s=localStorage.getItem("user");if(console.log(" AdminRedirect - Token:",!!e),console.log(" AdminRedirect - User:",s),e&&s)try{const n=JSON.parse(s);console.log(" AdminRedirect - Parsed user:",n),n.role==="admin"||n.role==="super_admin"||n.role==="superadmin"?(console.log(" AdminRedirect - Valid admin, redirecting to dashboard"),t("/admin/dashboard")):(console.log(" AdminRedirect - Not admin, redirecting to login"),t("/admin/login"))}catch(n){console.error(" AdminRedirect - Error parsing user:",n),t("/admin/login")}else console.log(" AdminRedirect - No token/user, redirecting to login"),t("/admin/login")},[t]),r.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(T2,{className:"h-8 w-8 animate-spin text-purple-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Redirecting to dashboard..."})]})})}var EE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},eN=ye.createContext&&ye.createContext(EE),aa=function(){return aa=Object.assign||function(t){for(var e,s=1,n=arguments.length;s<n;s++){e=arguments[s];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},aa.apply(this,arguments)},a7=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};function PE(t){return t&&t.map(function(e,s){return ye.createElement(e.tag,aa({key:s},e.attr),PE(e.child))})}function _E(t){return function(e){return ye.createElement(o7,aa({attr:aa({},t.attr)},e),PE(t.child))}}function o7(t){var e=function(s){var n=t.attr,i=t.size,a=t.title,o=a7(t,["attr","size","title"]),l=i||s.size||"1em",c;return s.className&&(c=s.className),t.className&&(c=(c?c+" ":"")+t.className),ye.createElement("svg",aa({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,n,o,{className:c,style:aa(aa({color:t.color||s.color},s.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&ye.createElement("title",null,a),t.children)};return eN!==void 0?ye.createElement(eN.Consumer,null,function(s){return e(s)}):e(EE)}function ME(t){return _E({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"}}]})(t)}function AE(t){return _E({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M11.944 17.97L4.58 13.62 11.943 24l7.37-10.38-7.372 4.35h.003zM12.056 0L4.69 12.223l7.365 4.354 7.365-4.35L12.056 0z"}}]})(t)}const l7=Qy({email:_n().min(1,"Username, email, or wallet address is required"),password:_n().min(1,"Password is required"),rememberMe:CE().optional()});function c7(){const[,t]=Or(),{toast:e}=Zs(),{userLogin:s,isUserLoginPending:n,metamaskLogin:i}=Ss(),[a,o]=f.useState(!1),[l,c]=f.useState(!1),d=Ir(),h=Ky({resolver:Gy(l7),defaultValues:{email:"",password:"",rememberMe:!1}}),u=async v=>{try{console.log(" Starting login process...",{email:v.email});const g=v.email;console.log(" Calling userLogin with:",{username:g,password:"***"}),console.log(" Testing direct fetch...");try{const b=await fetch("/api/auth/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:g,password:v.password}),credentials:"include"});console.log(" Direct fetch response:",{status:b.status,statusText:b.statusText,ok:b.ok,headers:Object.fromEntries(b.headers.entries())});const x=await b.text();if(console.log(" Response text:",x),b.ok){const p=JSON.parse(x);console.log(" Parsed response:",p),p.token&&(localStorage.setItem("authToken",p.token),console.log(" Token stored:",p.token)),p.user&&(localStorage.setItem("user",JSON.stringify(p.user)),console.log(" User data stored:",p.user)),d.setQueryData(["/api/auth"],p.user),d.invalidateQueries({queryKey:["/api/auth"]}),console.log(" Query cache updated"),e({title:"Login Successful",description:"Welcome back!"}),setTimeout(()=>{console.log(" Redirecting to dashboard..."),t("/dashboard")},100);return}else throw new Error(`Direct fetch failed: ${b.status} ${x}`)}catch(b){console.error(" Direct fetch failed:",b),console.log(" Falling back to userLogin hook..."),await s({username:g,password:v.password}),console.log(" Login successful"),e({title:"Login Successful",description:"Welcome back!"}),t("/dashboard")}}catch(g){console.error(" Login error:",g),console.error("Error details:",{message:g.message,stack:g.stack,name:g.name}),e({title:"Login Failed",description:g.message||"Invalid credentials",variant:"destructive"})}},m=async()=>{var v;if(console.log(" Starting MetaMask connection..."),console.log("Window ethereum:",window.ethereum),console.log("Is MetaMask:",(v=window.ethereum)==null?void 0:v.isMetaMask),!window.ethereum){console.error(" No ethereum provider found"),e({title:"MetaMask Not Found",description:"Please install MetaMask extension to continue.",variant:"destructive"});return}if(!window.ethereum.isMetaMask){console.error(" Ethereum provider is not MetaMask"),e({title:"MetaMask Not Detected",description:"Please make sure MetaMask extension is enabled.",variant:"destructive"});return}c(!0);try{console.log(" Requesting account access...");const g=await window.ethereum.request({method:"eth_requestAccounts"});if(console.log(" Accounts received:",g),g.length===0)throw new Error("No accounts found. Please unlock MetaMask.");const b=g[0];console.log(" Authenticating wallet:",b),console.log(" Authenticating wallet:",b);const x=await i({walletAddress:b});console.log(" Auth successful:",x),x.user&&x.token&&(localStorage.setItem("authToken",x.token),localStorage.setItem("user",JSON.stringify(x.user))),e({title:"MetaMask Connected",description:`Wallet ${b.slice(0,6)}...${b.slice(-4)} authenticated successfully!`}),console.log(" Redirecting to dashboard..."),setTimeout(()=>{t("/dashboard")},500)}catch(g){console.error(" MetaMask connection error:",g),e({title:"Connection Failed",description:g.message||"Failed to connect MetaMask",variant:"destructive"})}finally{c(!1)}},y=async()=>{try{e({title:"Google Login",description:"Redirecting to Google authentication..."}),setTimeout(()=>{e({title:"Google OAuth Issue",description:"If you see 'refused to connect', please contact support.",variant:"destructive"})},5e3),window.location.href="/api/auth/google"}catch{e({title:"Google Login Failed",description:"Please try again or use email login",variant:"destructive"})}};return r.jsx("div",{className:"min-h-screen bg-gray-900",children:r.jsxs("div",{className:"flex min-h-screen flex-col lg:flex-row",children:[r.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center relative min-h-[40vh] lg:min-h-auto",style:{backgroundColor:"#24083B",overflow:"visible"},children:[r.jsx(lt,{href:"/",children:r.jsx("div",{className:"hidden lg:block absolute top-6 left-6 lg:top-8 lg:left-8 cursor-pointer hover:opacity-80 transition-opacity z-20",children:r.jsx("img",{src:Od,alt:"METACHROME",className:"h-8 lg:h-10 w-auto"})})}),r.jsxs("div",{className:"text-center z-10 max-w-md relative py-8 px-4",style:{marginTop:"0px",opacity:1,visibility:"visible",display:"block"},children:[r.jsx("p",{className:"text-white text-sm lg:text-lg mb-2 lg:mb-4 font-medium",style:{opacity:1,visibility:"visible",color:"#FFFFFF",display:"block"},children:"Get Started with METACHROME"}),r.jsx("h1",{className:"text-2xl lg:text-4xl font-bold text-white mb-6 lg:mb-12 leading-tight",style:{opacity:1,visibility:"visible",color:"#FFFFFF",display:"block"},children:"The Future is for Everyone"}),r.jsx("div",{className:"relative w-48 h-48 lg:w-80 lg:h-80 mx-auto",style:{opacity:1,visibility:"visible",display:"block"},children:r.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",className:"w-full h-full object-cover rounded-full",style:{opacity:1,visibility:"visible",display:"block",WebkitTransform:"translateZ(0)",transform:"translateZ(0)"},children:[r.jsx("source",{src:"/orb_1755576133990.webm",type:"video/webm"}),r.jsx("source",{src:"/orb.webm",type:"video/webm"}),r.jsx("source",{src:"/orb.mp4",type:"video/mp4"})]})})]})]}),r.jsx("div",{className:"w-full lg:w-1/2 bg-black flex flex-col min-h-[60vh] lg:min-h-auto",children:r.jsx("div",{className:"flex-1 flex flex-col justify-center px-4 lg:px-12 py-8 lg:py-12 max-w-md mx-auto w-full",children:r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-2 lg:mb-0",children:"Log In"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Don't have an account? "}),r.jsx(lt,{href:"/signup",children:r.jsx("span",{className:"text-purple-400 hover:text-purple-300 cursor-pointer",children:"Sign up"})})]})]}),r.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Securely connect to your account"}),r.jsx("div",{className:"mb-6",children:r.jsxs(W,{variant:"outline",className:"w-full bg-transparent border-gray-600 hover:bg-gray-800 p-3 rounded-lg flex items-center justify-center space-x-2",onClick:y,type:"button",children:[r.jsx(ME,{className:"w-5 h-5 text-white"}),r.jsx("span",{className:"text-white",children:"Continue with Google"})]})}),r.jsx(W,{variant:"outline",className:"w-full bg-transparent border-gray-600 hover:bg-gray-800 p-3 rounded-lg mb-6 flex items-center justify-center",onClick:m,disabled:l,type:"button",children:l?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"text-white",children:"Connecting..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(AE,{className:"w-5 h-5 text-orange-500 mr-2"}),r.jsx("span",{className:"text-white",children:"Continue with Metamask"})]})}),r.jsxs("div",{className:"relative mb-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-600"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-black text-gray-400",children:"OR"})})]}),r.jsx(Xy,{...h,children:r.jsxs("form",{onSubmit:h.handleSubmit(u),className:"space-y-4",children:[r.jsx(zr,{control:h.control,name:"email",render:({field:v})=>r.jsxs(wr,{children:[r.jsx(jr,{className:"text-gray-400 text-sm",children:"Username/Wallet address/Email"}),r.jsx(Nr,{children:r.jsx(Ee,{...v,placeholder:"Enter your Username/Wallet address/Email",className:"bg-gray-900 border-gray-600 text-white placeholder:text-gray-500 h-12 rounded-md focus:ring-purple-500 focus:border-purple-500","data-testid":"input-email"})}),r.jsx(Sr,{})]})}),r.jsx(zr,{control:h.control,name:"password",render:({field:v})=>r.jsxs(wr,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(jr,{className:"text-gray-400 text-sm",children:"Password"}),r.jsx("span",{className:"text-purple-400 text-sm cursor-pointer hover:text-purple-300",children:"Forgot Password?"})]}),r.jsx(Nr,{children:r.jsxs("div",{className:"relative",children:[r.jsx(Ee,{...v,type:a?"text":"password",placeholder:"Enter your password",className:"bg-gray-900 border-gray-600 text-white placeholder:text-gray-500 h-12 rounded-md focus:ring-purple-500 focus:border-purple-500 pr-10","data-testid":"input-password"}),r.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:a?r.jsx(wl,{className:"w-4 h-4"}):r.jsx(xi,{className:"w-4 h-4"})})]})}),r.jsx(Sr,{})]})}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",id:"rememberMe",...h.register("rememberMe"),className:"w-4 h-4 text-purple-600 bg-gray-800 border-gray-600 rounded focus:ring-purple-500 focus:ring-2"}),r.jsx("label",{htmlFor:"rememberMe",className:"text-gray-400 text-sm font-normal",children:"Remember Me"})]}),r.jsx(W,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700 text-white h-12 font-semibold rounded-lg",disabled:n,children:n?"Logging In...":"Log In"})]})})]})})})]})})}const d7=Qy({firstName:_n().min(1,"First name is required"),lastName:_n().min(1,"Last name is required"),email:_n().email("Valid email is required"),password:_n().min(6,"Password must be at least 6 characters"),confirmPassword:_n().min(1,"Password confirmation is required"),referralCode:_n().optional(),documentType:t7(["id_card","driver_license","passport"],{required_error:"Document type is required",invalid_type_error:"Please select a valid document type"}),agreeToTerms:CE().refine(t=>t===!0,"You must agree to the terms")}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function u7(){const[,t]=Or(),{toast:e}=Zs(),{register:s,metamaskLogin:n}=Ss(),i=Ir(),[a,o]=f.useState(!1),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[u,m]=f.useState(!1),[y,v]=f.useState(null),[g,b]=f.useState(0),[x,p]=f.useState(typeof window<"u"?window.innerWidth>=1024:!0);f.useEffect(()=>{const P=()=>{p(window.innerWidth>=1024)};return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]);const w=Ky({resolver:Gy(d7),defaultValues:{firstName:"",lastName:"",email:"",password:"",confirmPassword:"",referralCode:"",documentType:"id_card",agreeToTerms:!1}}),j=async P=>{m(!0);try{if(!y){e({title:"ID Verification Required",description:"Please upload your ID document to complete registration. This is mandatory for account security.",variant:"destructive"}),m(!1);return}console.log(" Starting signup process...",{firstName:P.firstName,lastName:P.lastName,email:P.email,referralCode:P.referralCode,documentType:P.documentType,hasDocument:!!y});const M=await s({username:P.email.split("@")[0],email:P.email,password:P.password,firstName:P.firstName,lastName:P.lastName,referralCode:P.referralCode});if(console.log(" Registration successful:",M),console.log(" Registration result keys:",Object.keys(M)),console.log(" Token from result:",M.token?M.token.substring(0,50)+"...":"NO TOKEN"),M.token?(localStorage.setItem("authToken",M.token),console.log(" Stored auth token for immediate use"),console.log(" Token in localStorage:",localStorage.getItem("authToken")?localStorage.getItem("authToken").substring(0,50)+"...":"NOT FOUND")):console.error(" NO TOKEN IN REGISTRATION RESULT!"),M.user&&(localStorage.setItem("user",JSON.stringify(M.user)),console.log(" Stored user data for immediate use")),y&&P.documentType)try{b(25);const T=new FormData;T.append("document",y),T.append("documentType",P.documentType);const E=M.token;if(console.log(" Using registration token for document upload:",E?E.substring(0,30)+"...":"No token"),!E)throw new Error("No authentication token received from registration");console.log(" Waiting for user to be saved in database..."),await new Promise(V=>setTimeout(V,1e3)),b(50);const I=await fetch("/api/user/upload-verification",{method:"POST",headers:{Authorization:`Bearer ${E}`},body:T});if(b(75),I.ok){const V=await I.json();b(100),console.log(" Verification document uploaded successfully:",V);const G=localStorage.getItem("user");if(G)try{const A=JSON.parse(G);A.verificationStatus="pending",A.hasUploadedDocuments=!0,localStorage.setItem("user",JSON.stringify(A)),console.log(" Updated user data in localStorage with verification status"),i.setQueryData(["/api/auth"],A),i.invalidateQueries({queryKey:["/api/auth"]}),console.log(" Invalidated React Query cache - dashboard will fetch fresh data")}catch(A){console.error("Failed to update user data in localStorage:",A)}e({title:"Account Created & Document Uploaded!",description:"Your account is pending verification. You'll be notified once approved.",duration:5e3})}else{const V=await I.text();throw console.error(" Upload response error:",I.status,V),new Error(`Upload failed: ${I.status} - ${V}`)}}catch(T){console.error(" Document upload error:",T),e({title:"Account Created",description:`Account created but document upload failed: ${T.message}. You can upload it later in your profile.`,variant:"destructive",duration:5e3})}else e({title:"Account Created Successfully!",description:"Welcome to METACHROME! Please upload your verification document in your profile.",duration:5e3});console.log(" Waiting for database sync before redirect..."),await new Promise(T=>setTimeout(T,1e3)),console.log(" Redirecting to dashboard..."),t("/dashboard")}catch(M){console.error(" Registration error:",M),e({title:"Signup Failed",description:M.message||"Failed to create account",variant:"destructive"})}finally{m(!1),b(0)}},S=P=>{var T;const M=(T=P.target.files)==null?void 0:T[0];if(M){if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(M.type)){e({title:"Invalid File Type",description:"Please upload a JPG, PNG, or PDF file.",variant:"destructive"});return}if(M.size>5*1024*1024){e({title:"File Too Large",description:"Please upload a file smaller than 5MB.",variant:"destructive"});return}v(M),console.log(" File selected:",M.name,M.type,M.size)}},_=async()=>{if(!window.ethereum){e({title:"MetaMask Not Found",description:"Please install MetaMask to continue.",variant:"destructive"});return}h(!0);try{console.log(" Requesting MetaMask account access...");const P=await window.ethereum.request({method:"eth_requestAccounts"});if(console.log(" Accounts received:",P),P.length===0)throw new Error("No accounts found. Please unlock MetaMask.");const M=P[0];console.log(" Authenticating wallet:",M);const T=await n({walletAddress:M});console.log(" MetaMask authentication successful:",T),T.user&&T.token&&(localStorage.setItem("authToken",T.token),localStorage.setItem("user",JSON.stringify(T.user))),e({title:"MetaMask Connected Successfully!",description:`Welcome! Connected with wallet: ${M.slice(0,6)}...${M.slice(-4)}`}),console.log(" Redirecting to dashboard..."),setTimeout(()=>{t("/dashboard")},500)}catch(P){console.error(" MetaMask connection error:",P),e({title:"Connection Failed",description:P.message||"Failed to connect MetaMask",variant:"destructive"})}finally{h(!1)}},k=async()=>{try{e({title:"Google Signup",description:"Redirecting to Google authentication..."}),window.location.href="/api/auth/google"}catch{e({title:"Google Signup Failed",description:"Please try again or use email signup",variant:"destructive"})}};return r.jsx("div",{className:"min-h-screen bg-gray-900",children:r.jsxs("div",{className:"flex min-h-screen flex-col lg:flex-row",children:[r.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center relative overflow-hidden min-h-[40vh] lg:min-h-auto",style:{backgroundColor:"#24083B"},children:[r.jsx(lt,{href:"/",children:r.jsx("div",{className:"hidden lg:block absolute top-6 left-6 lg:top-8 lg:left-8 cursor-pointer hover:opacity-80 transition-opacity z-20",children:r.jsx("img",{src:Od,alt:"METACHROME",className:"h-8 lg:h-10 w-auto"})})}),r.jsxs("div",{className:"text-center z-10 max-w-md relative py-8 px-4",style:{marginTop:x?"-590px":"0px",opacity:1,visibility:"visible",display:"block"},children:[r.jsx("p",{className:"text-white text-sm lg:text-lg mb-2 lg:mb-4 font-medium",style:{opacity:1,visibility:"visible",color:"#FFFFFF",display:"block"},children:"Get Started with METACHROME"}),r.jsx("h1",{className:"text-2xl lg:text-4xl font-bold text-white mb-6 lg:mb-12 leading-tight",style:{opacity:1,visibility:"visible",color:"#FFFFFF",display:"block"},children:"The Future is for Everyone"}),r.jsx("div",{className:"relative w-48 h-48 lg:w-80 lg:h-80 mx-auto",style:{opacity:1,visibility:"visible",display:"block"},children:r.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",className:"w-full h-full object-cover rounded-full",style:{opacity:1,visibility:"visible",display:"block",WebkitTransform:"translateZ(0)",transform:"translateZ(0)"},children:[r.jsx("source",{src:"/orb_1755576133990.webm",type:"video/webm"}),r.jsx("source",{src:"/orb.webm",type:"video/webm"}),r.jsx("source",{src:"/orb.mp4",type:"video/mp4"})]})})]})]}),r.jsx("div",{className:"w-full lg:w-1/2 bg-black flex flex-col min-h-[60vh] lg:min-h-auto",children:r.jsx("div",{className:"flex-1 flex flex-col justify-center px-4 lg:px-12 py-8 lg:py-12 max-w-md mx-auto w-full",children:r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-2 lg:mb-0",children:"Sign Up"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Already have an account? "}),r.jsx(lt,{href:"/login",children:r.jsx("span",{className:"text-purple-400 hover:text-purple-300 cursor-pointer",children:"Sign In"})})]})]}),r.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Join the community and unleash endless possibilities"}),r.jsx("div",{className:"mb-6",children:r.jsxs(W,{variant:"outline",className:"w-full bg-transparent border-gray-600 hover:bg-gray-800 p-3 rounded-lg flex items-center justify-center space-x-2",onClick:k,type:"button",children:[r.jsx(ME,{className:"w-5 h-5 text-white"}),r.jsx("span",{className:"text-white",children:"Continue with Google"})]})}),r.jsx(W,{variant:"outline",className:"w-full bg-transparent border-gray-600 hover:bg-gray-800 p-3 rounded-lg mb-6 flex items-center justify-center",onClick:_,disabled:d,type:"button",children:d?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"text-white",children:"Connecting..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(AE,{className:"w-5 h-5 text-orange-500 mr-2"}),r.jsx("span",{className:"text-white",children:"Continue with Metamask"})]})}),r.jsxs("div",{className:"relative mb-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-600"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-black text-gray-400",children:"OR"})})]}),r.jsx(Xy,{...w,children:r.jsxs("form",{onSubmit:w.handleSubmit(j),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsx(zr,{control:w.control,name:"firstName",render:({field:P})=>r.jsxs(wr,{children:[r.jsx(jr,{className:"text-gray-400 text-sm",children:"First Name *"}),r.jsx(Nr,{children:r.jsx(Ee,{...P,placeholder:"Your First Name",className:"bg-gray-900 border-gray-600 text-white placeholder:text-gray-500 h-12 rounded-md focus:ring-purple-500 focus:border-purple-500"})}),r.jsx(Sr,{})]})}),r.jsx(zr,{control:w.control,name:"lastName",render:({field:P})=>r.jsxs(wr,{children:[r.jsx(jr,{className:"text-gray-400 text-sm",children:"Last Name *"}),r.jsx(Nr,{children:r.jsx(Ee,{...P,placeholder:"Your Last Name",className:"bg-gray-900 border-gray-600 text-white placeholder:text-gray-500 h-12 rounded-md focus:ring-purple-500 focus:border-purple-500"})}),r.jsx(Sr,{})]})})]}),r.jsx(zr,{control:w.control,name:"email",render:({field:P})=>r.jsxs(wr,{children:[r.jsx(jr,{className:"text-gray-400 text-sm",children:"E-Mail Address *"}),r.jsx(Nr,{children:r.jsx(Ee,{...P,type:"email",placeholder:"Your email",className:"bg-gray-900 border-gray-600 text-white placeholder:text-gray-500 h-12 rounded-md focus:ring-purple-500 focus:border-purple-500"})}),r.jsx(Sr,{})]})}),r.jsx(zr,{control:w.control,name:"referralCode",render:({field:P})=>r.jsxs(wr,{children:[r.jsx(jr,{className:"text-gray-400 text-sm",children:"Referral Code (Optional)"}),r.jsx(Nr,{children:r.jsx(Ee,{...P,type:"text",placeholder:"Enter referral code if you have one",className:"bg-gray-900 border-gray-600 text-white placeholder:text-gray-500 h-12 rounded-md focus:ring-purple-500 focus:border-purple-500"})}),r.jsx(Sr,{})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(zr,{control:w.control,name:"password",render:({field:P})=>r.jsxs(wr,{children:[r.jsx(jr,{className:"text-gray-400 text-sm",children:"Password *"}),r.jsx(Nr,{children:r.jsxs("div",{className:"relative",children:[r.jsx(Ee,{...P,type:a?"text":"password",placeholder:"Your password",className:"bg-gray-900 border-gray-600 text-white placeholder:text-gray-500 h-12 rounded-md focus:ring-purple-500 focus:border-purple-500 pr-10"}),r.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:a?r.jsx(wl,{className:"w-4 h-4"}):r.jsx(xi,{className:"w-4 h-4"})})]})}),r.jsx(Sr,{})]})}),r.jsx(zr,{control:w.control,name:"confirmPassword",render:({field:P})=>r.jsxs(wr,{children:[r.jsx(jr,{className:"text-gray-400 text-sm",children:"Confirm Password *"}),r.jsx(Nr,{children:r.jsxs("div",{className:"relative",children:[r.jsx(Ee,{...P,type:l?"text":"password",placeholder:"Password Confirmation",className:"bg-gray-900 border-gray-600 text-white placeholder:text-gray-500 h-12 rounded-md focus:ring-purple-500 focus:border-purple-500 pr-10"}),r.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:l?r.jsx(wl,{className:"w-4 h-4"}):r.jsx(xi,{className:"w-4 h-4"})})]})}),r.jsx(Sr,{})]})})]}),r.jsxs("div",{className:"space-y-4 p-4 bg-red-900/20 rounded-lg border border-red-700/50",children:[r.jsxs("h3",{className:"text-white text-sm font-medium flex items-center",children:[r.jsx("span",{className:"text-red-400 mr-2",children:"*"}),"Identity Verification (Required)"]}),r.jsxs("p",{className:"text-gray-400 text-xs",children:[r.jsx("span",{className:"text-red-400 font-medium",children:"Mandatory:"})," Upload your ID card, driver's license, or passport to complete registration. This is required for account security and compliance."]}),r.jsx(zr,{control:w.control,name:"documentType",render:({field:P})=>r.jsxs(wr,{children:[r.jsxs(jr,{className:"text-gray-400 text-sm",children:["Document Type ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx(Nr,{children:r.jsxs("select",{...P,className:"w-full bg-gray-900 border-gray-600 text-white h-12 rounded-md focus:ring-purple-500 focus:border-purple-500 px-3",children:[r.jsx("option",{value:"id_card",children:"ID Card"}),r.jsx("option",{value:"driver_license",children:"Driver's License"}),r.jsx("option",{value:"passport",children:"Passport"})]})}),r.jsx(Sr,{})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-gray-400 text-sm",children:["Upload Document ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:S,className:"hidden",id:"document-upload",required:!0}),r.jsx("label",{htmlFor:"document-upload",className:`flex-1 bg-gray-900 border-2 border-dashed h-12 rounded-md flex items-center justify-center cursor-pointer transition-colors ${y?"border-green-500 text-green-400":"border-red-500 text-gray-400 hover:border-purple-500"}`,children:y?` ${y.name}`:" Click to upload document (Required)"}),y&&r.jsx("button",{type:"button",onClick:()=>v(null),className:"text-red-400 hover:text-red-300 text-sm",children:"Remove"})]}),g>0&&r.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:r.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${g}%`}})}),r.jsxs("p",{className:"text-gray-500 text-xs",children:[r.jsx("span",{className:"text-red-400 font-medium",children:"Required:"})," Accepted formats: JPG, PNG, PDF (max 5MB)"]}),!y&&r.jsx("p",{className:"text-red-400 text-xs font-medium",children:" ID verification document is mandatory for registration"})]})]}),r.jsx(zr,{control:w.control,name:"agreeToTerms",render:({field:P})=>r.jsxs(wr,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(Nr,{children:r.jsx("input",{type:"checkbox",checked:P.value,onChange:P.onChange,className:"w-4 h-4 text-purple-600 bg-gray-800 border-gray-600 rounded focus:ring-purple-500 focus:ring-2 mt-1"})}),r.jsxs("div",{className:"space-y-1 leading-none",children:[r.jsxs(jr,{className:"text-gray-400 text-sm font-normal",children:["I agree with"," ",r.jsx(lt,{href:"/privacy-policy",className:"text-purple-400 hover:text-purple-300",children:"Privacy Policy"}),","," ",r.jsx(lt,{href:"/terms-of-service",className:"text-purple-400 hover:text-purple-300",children:"Terms of Service"}),","," ",r.jsx(lt,{href:"/trade-policy",className:"text-purple-400 hover:text-purple-300",children:"Trade Policy"})]}),r.jsx(Sr,{})]})]})}),r.jsx(W,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700 text-white h-12 font-semibold rounded-lg",disabled:u,children:u?"Creating Account...":"Register"})]})})]})})})]})})}function h7(){var $,O,U,J,Q,Oe,ge,He;const{user:t,userLogin:e,isUserLoginPending:s}=Ss(),{toast:n}=Zs(),i=Ir(),a=f.useRef(null),[o,l]=f.useState(!0),[c,d]=f.useState(!1),[h,u]=f.useState(""),[m,y]=f.useState(""),[v,g]=f.useState(""),[b,x]=f.useState("BTC"),[p,w]=f.useState(null),j=async se=>{se.preventDefault();try{await e({username:h,password:m}),d(!1),u(""),y(""),n({title:"Login Successful! ",description:"Welcome to your dashboard"})}catch(ze){n({title:"Login Failed ",description:ze.message||"Invalid credentials",variant:"destructive"})}},{data:S,isLoading:_}=ns({queryKey:["/api/balances"],enabled:!!(t!=null&&t.id)}),k=Array.isArray(S)?S.find(se=>se.symbol==="USDT"):S==null?void 0:S.USDT,P=k!=null&&k.available?parseFloat(k.available):(t==null?void 0:t.balance)||0,M=0,T="0",E={BTC:{name:"BTC",address:"bc1q6w3rdy5kwaf4es2lpjk6clpd25pterzvgwu5hu",network:"BTC",minAmount:.001,description:"Send Bitcoin to this address",chainId:null},ETH:{name:"ETH",address:"0x06292164c039E611B37ff0c4B71ce0F72e56AB7A",network:"ETH",minAmount:.01,description:"Send Ethereum to this address",chainId:1},SOL:{name:"SOL",address:"6s2UxAyknMvzN2nUpRdHp6EqDetsdK9mjsLTguzNYeKU",network:"SOL",minAmount:.1,description:"Send Solana to this address",chainId:null},"USDT-ERC20":{name:"USDT ERC20",address:"0x06292164c039E611B37ff0c4B71ce0F72e56AB7A",network:"USDT ERC20",minAmount:100,description:"Send USDT on Ethereum network to this address",chainId:1},"USDT-TRC20":{name:"USDT TRC20",address:"TTZzHBjpmksYqaM6seVjCSLSe6m77Bfjp9",network:"USDT TRC20",minAmount:100,description:"Send USDT on TRON network to this address",chainId:null},"USDT-BEP20":{name:"USDT BEP20",address:"0x06292164c039E611B37ff0c4B71ce0F72e56AB7A",network:"USDT BEP20",minAmount:100,description:"Send USDT on Binance Smart Chain to this address",chainId:56}},I=Ms({mutationFn:async se=>{const ze=localStorage.getItem("authToken");if(!ze||!t)throw new Error("Please login first to make a deposit");const ce=await fetch("/api/transactions/deposit-request",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ze}`},body:JSON.stringify({amount:se.amount,currency:se.currency})});if(!ce.ok){const je=await ce.text();throw new Error(je||"Failed to create deposit request")}const Ke=await ce.json();if(se.receipt){const je=new FormData;je.append("depositId",Ke.depositId),je.append("txHash",`user_upload_${Date.now()}`),je.append("walletAddress","user_wallet_address"),je.append("receipt",se.receipt);const Ve=await fetch("/api/transactions/submit-proof",{method:"POST",headers:{Authorization:`Bearer ${ze}`},body:je});if(!Ve.ok){const De=await Ve.text();throw new Error(De||"Failed to submit proof")}return{success:!0,message:(await Ve.json()).message,depositId:Ke.depositId,amount:se.amount,currency:se.currency,status:"verifying",receiptUploaded:!0}}return Ke},onSuccess:se=>{n({title:"Deposit Submitted Successfully! ",description:`Your ${se.amount} ${se.currency} deposit request has been submitted for processing. Deposit ID: ${se.depositId}`}),i.invalidateQueries({queryKey:["/api/balances"]}),g(""),w(null)},onError:se=>{n({title:"Deposit Failed",description:se.message||"Failed to submit deposit request.",variant:"destructive"})}}),V=se=>{var ce;const ze=(ce=se.target.files)==null?void 0:ce[0];if(ze){if(!["image/jpeg","image/png","image/jpg","application/pdf"].includes(ze.type)){n({title:"Invalid File Type",description:"Please upload a JPEG, PNG, or PDF file.",variant:"destructive"});return}if(ze.size>5*1024*1024){n({title:"File Too Large",description:"Please upload a file smaller than 5MB.",variant:"destructive"});return}w(ze)}},G=se=>{navigator.clipboard.writeText(se),n({title:"Copied!",description:"Address copied to clipboard"})},A=()=>{if(!v||parseFloat(v)<=0){n({title:"Invalid Amount",description:"Please enter a valid deposit amount.",variant:"destructive"});return}if(!p){n({title:"Receipt Required",description:"Please upload a transaction receipt before proceeding.",variant:"destructive"});return}const se=E[b];if(parseFloat(v)<se.minAmount){n({title:"Amount Too Small",description:`Minimum deposit amount is ${se.minAmount} ${b}.`,variant:"destructive"});return}I.mutate({amount:v,currency:b,receipt:p})},R=()=>{const se=E[b],ze=se.address;return console.log("QR Code value:",ze),`METACHROME DEPOSIT ADDRESS
${se.network}
${ze}

COPY THIS ADDRESS TO YOUR WALLET`};return t?r.jsx("div",{className:"min-h-screen bg-gray-900 pt-20 pb-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-white mb-2 break-words",children:(()=>{if(t!=null&&t.firstName&&(t!=null&&t.lastName))return`Welcome back, ${t.firstName} ${t.lastName}!`;if(t!=null&&t.firstName)return`Welcome back, ${t.firstName}!`;if(t!=null&&t.username){if(t.username.startsWith("0x")&&t.username.length>20){const se=t.username.slice(0,21),ze=t.username.slice(21);return r.jsxs("div",{className:"block max-w-full overflow-hidden",children:[r.jsx("div",{className:"leading-tight",children:"Welcome back,"}),r.jsxs("div",{className:"leading-tight font-mono text-purple-400 break-all text-xs sm:text-sm md:text-base",children:[se,r.jsx("br",{}),ze,"!"]})]})}return`Welcome back, ${t.username}!`}return"Welcome back, User!"})()}),r.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:"Here's your trading overview and account summary."})]}),(!(t!=null&&t.verificationStatus)||(t==null?void 0:t.verificationStatus)==="unverified")&&!(t!=null&&t.hasUploadedDocuments)&&r.jsx("div",{className:"mb-8",children:r.jsx(de,{className:"bg-gradient-to-r from-yellow-900/50 to-orange-900/50 border-yellow-600/50",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-yellow-600 rounded-full flex items-center justify-center",children:r.jsx(Ah,{className:"w-5 h-5 text-white"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-yellow-100 mb-2",children:" Verification Required for Trading"}),r.jsx("p",{className:"text-yellow-200 mb-4",children:"To start trading and access all platform features, please upload your verification documents. This is required for security and regulatory compliance."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx(lt,{href:"/profile?tab=verification",children:r.jsxs(W,{className:"bg-yellow-600 hover:bg-yellow-700 text-white",children:[r.jsx(Ah,{className:"w-4 h-4 mr-2"}),"Upload Documents Now"]})}),r.jsx("div",{className:"text-sm text-yellow-300",children:" Accepted: ID Card, Driver's License, or Passport"})]})]})]})})})}),((t==null?void 0:t.verificationStatus)==="pending"||(t==null?void 0:t.hasUploadedDocuments)&&(t==null?void 0:t.verificationStatus)!=="verified")&&r.jsx("div",{className:"mb-8",children:r.jsx(de,{className:"bg-gradient-to-r from-blue-900/50 to-indigo-900/50 border-blue-600/50",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:r.jsx(qr,{className:"w-5 h-5 text-white"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-100 mb-2",children:" Document Uploaded - Verification in Progress"}),r.jsx("p",{className:"text-blue-200 mb-2",children:"Your verification documents have been submitted and are currently being reviewed by our team. You can check your verification status in your profile."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start",children:[r.jsx("div",{className:"text-sm text-blue-300",children:" Review typically takes 24-48 hours"}),r.jsx(lt,{href:"/profile?tab=verification",children:r.jsx(W,{variant:"outline",size:"sm",className:"border-blue-400 text-blue-300 hover:bg-blue-800/30",children:"Check Status"})})]})]})]})})})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsxs(de,{className:"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700 hover:border-green-500/50 transition-colors",children:[r.jsxs(nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(it,{className:"text-sm font-medium text-gray-400",children:"Total Portfolio Value"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>l(!o),className:"h-6 w-6 p-0 text-gray-400 hover:text-white",children:o?r.jsx(xi,{className:"h-3 w-3"}):r.jsx(wl,{className:"h-3 w-3"})}),r.jsx(Gg,{className:"h-4 w-4 text-green-500"})]})]}),r.jsxs(he,{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:o?`${P.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})} USDT`:""}),r.jsx("p",{className:"text-xs text-gray-400",children:"Available balance"})]})]}),r.jsxs(de,{className:"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700 hover:border-blue-500/50 transition-colors",children:[r.jsxs(nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(it,{className:"text-sm font-medium text-gray-400",children:"Total Trades"}),r.jsx(na,{className:"h-4 w-4 text-blue-500"})]}),r.jsxs(he,{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:M}),r.jsx("p",{className:"text-xs text-gray-400",children:"All time"})]})]}),r.jsxs(de,{className:"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700 hover:border-green-500/50 transition-colors",children:[r.jsxs(nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(it,{className:"text-sm font-medium text-gray-400",children:"Win Rate"}),r.jsx(ur,{className:"h-4 w-4 text-green-500"})]}),r.jsxs(he,{children:[r.jsxs("div",{className:"text-2xl font-bold text-white",children:[T,"%"]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Success rate"}),r.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mt-2",children:r.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-400 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(parseFloat(T),100)}%`}})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"Quick Actions"}),r.jsx(Rt,{className:"text-gray-400",children:"Start trading or manage your account"})]}),r.jsxs(he,{className:"space-y-4",children:[r.jsx(lt,{href:"/trade/options",children:r.jsxs(W,{className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[r.jsx(ur,{className:"w-4 h-4 mr-2"}),"Options Trading"]})}),r.jsx(lt,{href:"/trade/spot",children:r.jsxs(W,{variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-700",children:[r.jsx(na,{className:"w-4 h-4 mr-2"}),"Spot Trading"]})})]})]}),r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"Account Management"}),r.jsx(Rt,{className:"text-gray-400",children:"Manage your account settings"})]}),r.jsxs(he,{className:"space-y-4",children:[r.jsx(lt,{href:"/profile",children:r.jsx(W,{variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-700",children:"View Profile"})}),r.jsx(lt,{href:"/transactions",children:r.jsx(W,{variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-700",children:"Transaction History"})})]})]}),r.jsxs(de,{className:"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"Add Funds"}),r.jsx(Rt,{className:"text-gray-400",children:"Top up your account balance with cryptocurrency"})]}),r.jsx(he,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Deposit network"}),r.jsxs("select",{value:b,onChange:se=>x(se.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[r.jsx("option",{value:"BTC",children:"BTC"}),r.jsx("option",{value:"ETH",children:"ETH"}),r.jsx("option",{value:"SOL",children:"SOL"}),r.jsx("option",{value:"USDT-ERC20",children:"USDT ERC20"}),r.jsx("option",{value:"USDT-TRC20",children:"USDT TRC20"}),r.jsx("option",{value:"USDT-BEP20",children:"USDT BEP20"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Deposit amount ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("input",{type:"number",placeholder:"Please enter the recharge amount",value:v,onChange:se=>g(se.target.value),className:`w-full bg-gray-800 border rounded-lg px-3 py-2 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 ${v?"border-gray-600":"border-red-500"}`,min:(($=E[b])==null?void 0:$.minAmount)||0,step:"0.01"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Minimum: ",(O=E[b])==null?void 0:O.minAmount," ",b]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Platform Deposit Address"}),r.jsxs("div",{className:"p-3 bg-blue-900/20 border border-blue-600/30 rounded-lg mb-2",children:[r.jsxs("p",{className:"text-blue-300 text-xs mb-1",children:[" Send ",b," to this address to deposit funds to your METACHROME account"]}),r.jsxs("p",{className:"text-yellow-300 text-xs",children:[r.jsx("strong",{children:"Important:"})," Only send on ",(U=E[b])==null?void 0:U.network,". Sending on wrong network will result in loss of funds!"]})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-800 border border-gray-600 rounded-lg px-3 py-2",children:[r.jsx("span",{className:"text-white text-sm font-mono flex-1 break-all",children:(J=E[b])==null?void 0:J.address}),r.jsx(W,{size:"sm",variant:"ghost",className:"text-purple-400 hover:text-purple-300 p-2 hover:bg-gray-700",onClick:()=>{var se;return G((se=E[b])==null?void 0:se.address)},children:r.jsx(Mh,{className:"w-4 h-4"})})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Network: ",(Q=E[b])==null?void 0:Q.network]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:(Oe=E[b])==null?void 0:Oe.description})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"QR Code - Deposit Address"}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg inline-block",children:r.jsx(Dk,{value:R(),size:200,className:"mx-auto"})}),r.jsx("p",{className:"text-xs text-gray-300 mt-3",children:"Scan to see deposit information (copy the address manually)"}),r.jsxs("p",{className:"text-xs text-yellow-300 mt-1",children:["Make sure to send on ",r.jsx("strong",{children:(ge=E[b])==null?void 0:ge.network})]}),r.jsxs("p",{className:"text-xs text-blue-300 mt-1",children:["Address: ",(He=E[b])==null?void 0:He.address]})]}),r.jsx("div",{className:"mt-4",children:r.jsxs(W,{onClick:()=>{var se;return G((se=E[b])==null?void 0:se.address)},className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[r.jsx(Mh,{className:"w-4 h-4 mr-2"}),"Copy Deposit Address"]})}),r.jsxs("div",{className:"mt-4 p-3 bg-gray-800/50 border border-gray-600 rounded-lg",children:[r.jsx("h5",{className:"text-sm font-medium text-gray-300 mb-2",children:" How to use:"}),r.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Scan QR Code:"})," View deposit info (manually copy the address)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Copy Address:"})," Click the button to copy address to clipboard"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Manual Entry:"})," Type or paste address in your wallet"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Send Crypto:"})," Send to the address on the correct network"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Upload Receipt:"})," Upload transaction proof and confirm"]})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Upload receipt ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:border-purple-500 transition-colors ${p?"border-gray-600":"border-red-500"}`,onClick:()=>{var se;return(se=a.current)==null?void 0:se.click()},children:p?r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(qr,{className:"w-6 h-6 text-green-500"}),r.jsx("span",{className:"text-green-400 text-sm",children:p.name})]}):r.jsxs(r.Fragment,{children:[r.jsx(Mc,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Click to upload receipt"}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"JPEG, PNG, PDF (max 5MB)"})]})}),r.jsx("input",{ref:a,type:"file",accept:"image/jpeg,image/png,image/jpg,application/pdf",onChange:V,className:"hidden"})]}),(!v||!p)&&r.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-600/30 rounded-lg mb-4",children:[r.jsx("p",{className:"text-yellow-300 text-sm",children:" Please complete all required fields:"}),r.jsxs("ul",{className:"text-yellow-200 text-xs mt-1 ml-4",children:[!v&&r.jsx("li",{children:" Enter deposit amount"}),!p&&r.jsx("li",{children:" Upload transaction receipt"})]})]}),r.jsx(W,{className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 font-medium disabled:opacity-50 disabled:cursor-not-allowed",onClick:A,disabled:I.isPending||!v||!p,children:I.isPending?"Processing...":"Confirm recharge"})]})})]})]}),r.jsx("div",{className:"mt-8",children:r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"Start Trading"}),r.jsx(Rt,{className:"text-gray-400",children:"Begin your trading journey"})]}),r.jsxs(he,{className:"text-center py-8",children:[r.jsx(ur,{className:"h-16 w-16 text-purple-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Ready to Trade?"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"Start trading with our advanced platform"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(lt,{href:"/trade/options",children:r.jsxs(W,{className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[r.jsx(ur,{className:"w-4 h-4 mr-2"}),"Options Trading"]})}),r.jsx(lt,{href:"/trade/spot",children:r.jsxs(W,{variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-700",children:[r.jsx(na,{className:"w-4 w-4 mr-2"}),"Spot Trading"]})})]})]})]})})]})}):r.jsx("div",{className:"min-h-screen bg-gray-900 pt-20 pb-12 flex items-center justify-center",children:r.jsx("div",{className:"max-w-md w-full mx-auto px-4",children:r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white text-center",children:"Login to Your Account"}),r.jsx(Rt,{className:"text-gray-400 text-center",children:"Enter your credentials to access your dashboard"})]}),r.jsxs(he,{children:[r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),r.jsx("input",{type:"text",value:h,onChange:se=>u(se.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter your username",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),r.jsx("input",{type:"password",value:m,onChange:se=>y(se.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter your password",required:!0})]}),r.jsx(W,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 font-medium",disabled:s,children:s?"Logging in...":"Login"})]}),r.jsx("div",{className:"mt-4 text-center",children:r.jsxs("p",{className:"text-gray-400 text-sm",children:["Demo credentials: username: ",r.jsx("span",{className:"text-purple-400",children:"admin"}),", password: ",r.jsx("span",{className:"text-purple-400",children:"any"})]})})]})]})})})}var m7="Separator",tN="horizontal",f7=["horizontal","vertical"],DE=f.forwardRef((t,e)=>{const{decorative:s,orientation:n=tN,...i}=t,a=p7(n)?n:tN,l=s?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return r.jsx(We.div,{"data-orientation":a,...l,...i,ref:e})});DE.displayName=m7;function p7(t){return f7.includes(t)}var RE=DE;const sh=f.forwardRef(({className:t,orientation:e="horizontal",decorative:s=!0,...n},i)=>r.jsx(RE,{ref:i,decorative:s,orientation:e,className:Ue("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));sh.displayName=RE.displayName;const g7=[{code:"+93",country:"Afghanistan",flag:""},{code:"+355",country:"Albania",flag:""},{code:"+213",country:"Algeria",flag:""},{code:"+376",country:"Andorra",flag:""},{code:"+244",country:"Angola",flag:""},{code:"+54",country:"Argentina",flag:""},{code:"+374",country:"Armenia",flag:""},{code:"+61",country:"Australia",flag:""},{code:"+43",country:"Austria",flag:""},{code:"+994",country:"Azerbaijan",flag:""},{code:"+973",country:"Bahrain",flag:""},{code:"+880",country:"Bangladesh",flag:""},{code:"+375",country:"Belarus",flag:""},{code:"+32",country:"Belgium",flag:""},{code:"+501",country:"Belize",flag:""},{code:"+975",country:"Bhutan",flag:""},{code:"+591",country:"Bolivia",flag:""},{code:"+387",country:"Bosnia",flag:""},{code:"+267",country:"Botswana",flag:""},{code:"+55",country:"Brazil",flag:""},{code:"+673",country:"Brunei",flag:""},{code:"+359",country:"Bulgaria",flag:""},{code:"+855",country:"Cambodia",flag:""},{code:"+237",country:"Cameroon",flag:""},{code:"+1",country:"Canada/USA",flag:""},{code:"+56",country:"Chile",flag:""},{code:"+86",country:"China",flag:""},{code:"+57",country:"Colombia",flag:""},{code:"+506",country:"Costa Rica",flag:""},{code:"+385",country:"Croatia",flag:""},{code:"+53",country:"Cuba",flag:""},{code:"+357",country:"Cyprus",flag:""},{code:"+420",country:"Czech Republic",flag:""},{code:"+45",country:"Denmark",flag:""},{code:"+593",country:"Ecuador",flag:""},{code:"+20",country:"Egypt",flag:""},{code:"+503",country:"El Salvador",flag:""},{code:"+372",country:"Estonia",flag:""},{code:"+251",country:"Ethiopia",flag:""},{code:"+358",country:"Finland",flag:""},{code:"+33",country:"France",flag:""},{code:"+995",country:"Georgia",flag:""},{code:"+49",country:"Germany",flag:""},{code:"+233",country:"Ghana",flag:""},{code:"+30",country:"Greece",flag:""},{code:"+502",country:"Guatemala",flag:""},{code:"+852",country:"Hong Kong",flag:""},{code:"+36",country:"Hungary",flag:""},{code:"+354",country:"Iceland",flag:""},{code:"+91",country:"India",flag:""},{code:"+62",country:"Indonesia",flag:""},{code:"+98",country:"Iran",flag:""},{code:"+964",country:"Iraq",flag:""},{code:"+353",country:"Ireland",flag:""},{code:"+972",country:"Israel",flag:""},{code:"+39",country:"Italy",flag:""},{code:"+81",country:"Japan",flag:""},{code:"+962",country:"Jordan",flag:""},{code:"+7",country:"Kazakhstan",flag:""},{code:"+254",country:"Kenya",flag:""},{code:"+965",country:"Kuwait",flag:""},{code:"+996",country:"Kyrgyzstan",flag:""},{code:"+856",country:"Laos",flag:""},{code:"+371",country:"Latvia",flag:""},{code:"+961",country:"Lebanon",flag:""},{code:"+218",country:"Libya",flag:""},{code:"+370",country:"Lithuania",flag:""},{code:"+352",country:"Luxembourg",flag:""},{code:"+853",country:"Macau",flag:""},{code:"+60",country:"Malaysia",flag:""},{code:"+960",country:"Maldives",flag:""},{code:"+356",country:"Malta",flag:""},{code:"+52",country:"Mexico",flag:""},{code:"+373",country:"Moldova",flag:""},{code:"+377",country:"Monaco",flag:""},{code:"+976",country:"Mongolia",flag:""},{code:"+382",country:"Montenegro",flag:""},{code:"+212",country:"Morocco",flag:""},{code:"+95",country:"Myanmar",flag:""},{code:"+977",country:"Nepal",flag:""},{code:"+31",country:"Netherlands",flag:""},{code:"+64",country:"New Zealand",flag:""},{code:"+234",country:"Nigeria",flag:""},{code:"+47",country:"Norway",flag:""},{code:"+968",country:"Oman",flag:""},{code:"+92",country:"Pakistan",flag:""},{code:"+970",country:"Palestine",flag:""},{code:"+507",country:"Panama",flag:""},{code:"+595",country:"Paraguay",flag:""},{code:"+51",country:"Peru",flag:""},{code:"+63",country:"Philippines",flag:""},{code:"+48",country:"Poland",flag:""},{code:"+351",country:"Portugal",flag:""},{code:"+974",country:"Qatar",flag:""},{code:"+40",country:"Romania",flag:""},{code:"+7",country:"Russia",flag:""},{code:"+966",country:"Saudi Arabia",flag:""},{code:"+381",country:"Serbia",flag:""},{code:"+65",country:"Singapore",flag:""},{code:"+421",country:"Slovakia",flag:""},{code:"+386",country:"Slovenia",flag:""},{code:"+27",country:"South Africa",flag:""},{code:"+82",country:"South Korea",flag:""},{code:"+34",country:"Spain",flag:""},{code:"+94",country:"Sri Lanka",flag:""},{code:"+46",country:"Sweden",flag:""},{code:"+41",country:"Switzerland",flag:""},{code:"+963",country:"Syria",flag:""},{code:"+886",country:"Taiwan",flag:""},{code:"+992",country:"Tajikistan",flag:""},{code:"+255",country:"Tanzania",flag:""},{code:"+66",country:"Thailand",flag:""},{code:"+90",country:"Turkey",flag:""},{code:"+993",country:"Turkmenistan",flag:""},{code:"+971",country:"UAE",flag:""},{code:"+256",country:"Uganda",flag:""},{code:"+380",country:"Ukraine",flag:""},{code:"+44",country:"United Kingdom",flag:""},{code:"+598",country:"Uruguay",flag:""},{code:"+998",country:"Uzbekistan",flag:""},{code:"+58",country:"Venezuela",flag:""},{code:"+84",country:"Vietnam",flag:""},{code:"+967",country:"Yemen",flag:""},{code:"+260",country:"Zambia",flag:""},{code:"+263",country:"Zimbabwe",flag:""}];function x7(){var De,pt;const{user:t}=Ss(),{toast:e}=Zs(),s=Ir(),n=Wn(),[i,a]=f.useState("profile");if(!t)return r.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:r.jsxs("div",{className:"text-white text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4"}),r.jsx("p",{children:"Loading profile..."})]})});const[o,l]=f.useState(!1),[c,d]=f.useState(!1),[h,u]=f.useState(""),[m,y]=f.useState(!1),[v,g]=f.useState(null),[b,x]=f.useState(null),[p,w]=f.useState(!1),[j,S]=f.useState(""),[_,k]=f.useState([]),[P,M]=f.useState(null),[T,E]=f.useState("id_card"),[I,V]=f.useState(!1),G=f.useRef(null),[A,R]=f.useState({username:(t==null?void 0:t.username)||"",email:(t==null?void 0:t.email)||"",firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",phone:(t==null?void 0:t.phone)||"",phoneCountryCode:"+1",address:(t==null?void 0:t.address)||"",currentPassword:"",newPassword:"",confirmPassword:""});f.useEffect(()=>{if(t){let K=t.phone||"",pe="+1";if(K.startsWith("+")){const st=K.match(/^(\+\d{1,4})/);st&&(pe=st[1],K=K.substring(pe.length).trim())}R(st=>({...st,username:t.username||"",email:t.email||"",firstName:t.firstName||"",lastName:t.lastName||"",phone:K,phoneCountryCode:pe,address:t.address||""}))}},[t]),f.useEffect(()=>{const pe=new URLSearchParams(window.location.search).get("tab");pe&&a(pe)},[]);const $=Ms({mutationFn:async K=>await qs("PUT","/api/user/profile",K),onSuccess:()=>{e({title:"Profile Updated",description:"Your profile has been updated successfully"}),l(!1),s.invalidateQueries({queryKey:["/api/auth"]}),s.refetchQueries({queryKey:["/api/auth"]}),localStorage.removeItem("user")},onError:K=>{e({title:"Update Failed",description:K.message||"Failed to update profile",variant:"destructive"})}}),O=Ms({mutationFn:async K=>(console.log(" Password change attempt with data:",K),await qs("PUT","/api/user/password",K)),onSuccess:K=>{e({title:"Password Set Successfully",description:K!=null&&K.isFirstTimePassword?"Your login password has been set! You can now log in with username and password.":"Your password has been changed successfully"}),R(pe=>({...pe,currentPassword:"",newPassword:"",confirmPassword:""})),console.log(" Password changed successfully, forcing complete user data refresh..."),localStorage.removeItem("user"),s.removeQueries({queryKey:["/api/auth/user"]}),s.removeQueries({queryKey:["/api/auth"]}),s.invalidateQueries({queryKey:["/api/auth/user"]}),s.invalidateQueries({queryKey:["/api/auth"]}),s.refetchQueries({queryKey:["/api/auth"]}),setTimeout(()=>{console.log(" Reloading page to ensure fresh user data..."),window.location.reload()},1e3),setTimeout(()=>{s.clear(),window.location.reload()},1e3)},onError:K=>{e({title:"Password Change Failed",description:K.message||"Failed to change password",variant:"destructive"})}}),U=Ms({mutationFn:async K=>await qs("POST","/api/user/redeem-code",{code:K}),onSuccess:K=>{e({title:"Code Redeemed Successfully!",description:K.message||`Bonus of ${K.bonusAmount} USDT added to your account!`}),u(""),s.invalidateQueries({queryKey:["/api/auth/user"]}),He()},onError:K=>{e({title:"Redeem Failed",description:K.message||"Invalid or expired redeem code",variant:"destructive"})}}),J=Ms({mutationFn:async K=>{const pe=new FormData;pe.append("document",K.file),pe.append("documentType",K.documentType);const st=localStorage.getItem("authToken"),qe=await fetch("/api/user/upload-verification",{method:"POST",headers:{Authorization:`Bearer ${st}`},body:pe});if(!qe.ok)try{const Wt=await qe.json();throw new Error(Wt.error||Wt.details||"Failed to upload document")}catch{throw new Error("Failed to upload document")}return await qe.json()},onSuccess:K=>{e({title:"Document Uploaded Successfully!",description:"Your verification document has been submitted for review."}),M(null),V(!1),s.invalidateQueries({queryKey:["/api/auth/user"]}),Q()},onError:K=>{e({title:"Upload Failed",description:K.message||"Failed to upload verification document",variant:"destructive"}),V(!1)}}),Q=async()=>{try{console.log(" Fetching verification status...");const K=await qs("GET","/api/user/verification-status");console.log(" Verification status response:",K),g(K)}catch(K){console.error(" Failed to fetch verification status:",K)}},Oe=async()=>{w(!0);try{console.log(" Force refreshing verification status...");const K=await qs("POST","/api/user/force-refresh-verification");console.log(" Force refresh response:",K),localStorage.removeItem("user"),s.removeQueries({queryKey:["/api/auth"]}),s.invalidateQueries({queryKey:["/api/auth"]}),await s.refetchQueries({queryKey:["/api/auth"]}),await Q(),e({title:"Verification Status Refreshed",description:K.message||"Your account verification status has been updated."}),S(` Verification refresh successful! Status: ${(t==null?void 0:t.verificationStatus)||"Unknown"}`)}catch(K){console.error("Failed to refresh verification status:",K),e({title:"Refresh Failed",description:K.message||"Failed to refresh verification status. Please try again.",variant:"destructive"}),S(` Verification refresh failed: ${K.message||K}`)}finally{w(!1)}},ge=f.useCallback(async()=>{var K;try{console.log(" Fetching referral stats for user:",t==null?void 0:t.username);const pe=await qs("GET","/api/user/referral-stats");console.log(" Referral stats response:",pe),x(pe)}catch(pe){console.error(" Failed to fetch referral stats:",pe),x({referralCode:`REF${((K=t==null?void 0:t.username)==null?void 0:K.toUpperCase().substring(0,4))||"USER"}${Date.now().toString().slice(-4)}`,totalReferrals:0,referrals:[]})}},[t==null?void 0:t.username]);f.useEffect(()=>{t!=null&&t.id&&ge()},[t==null?void 0:t.id,ge]);const He=f.useCallback(async()=>{try{console.log(" Fetching available redeem codes");const K=await qs("GET","/api/user/available-codes");console.log(" Available codes response:",K),k(K||[])}catch(K){console.error(" Failed to fetch available codes:",K),k([{code:"FIRSTBONUS",amount:"100 USDT",description:"First time user bonus"},{code:"LETSGO1000",amount:"1000 USDT",description:"High value bonus code"},{code:"WELCOME50",amount:"50 USDT",description:"Welcome bonus for new users"},{code:"BONUS500",amount:"500 USDT",description:"Limited time bonus"}])}},[]);f.useEffect(()=>{t!=null&&t.id&&He()},[t==null?void 0:t.id,He]),f.useEffect(()=>{t!=null&&t.id&&(console.log(" Component mounted, fetching verification status for user:",t.id),Q())},[t==null?void 0:t.id]);const se=(K,pe)=>{R(st=>({...st,[K]:pe}))},ze=()=>{const{currentPassword:K,newPassword:pe,confirmPassword:st,phoneCountryCode:qe,phone:Wt,...ut}=A,D=Wt?`${qe} ${Wt}`:"";$.mutate({...ut,phone:D})},ce=()=>{if(A.newPassword!==A.confirmPassword){e({title:"Password Mismatch",description:"New password and confirmation don't match",variant:"destructive"});return}if(A.newPassword.length<6){e({title:"Password Too Short",description:"Password must be at least 6 characters long",variant:"destructive"});return}O.mutate({currentPassword:A.currentPassword,newPassword:A.newPassword})},Ke=()=>{if(!h.trim()){e({title:"Invalid Code",description:"Please enter a redeem code",variant:"destructive"});return}y(!0),U.mutate(h.trim().toUpperCase()),y(!1)},je=K=>{var st;const pe=(st=K.target.files)==null?void 0:st[0];if(pe){if(!["image/jpeg","image/png","image/jpg","application/pdf"].includes(pe.type)){e({title:"Invalid File Type",description:"Please upload a JPEG, PNG, or PDF file.",variant:"destructive"});return}if(pe.size>5*1024*1024){e({title:"File Too Large",description:"Please upload a file smaller than 5MB.",variant:"destructive"});return}M(pe)}},Ve=()=>{if(!P){e({title:"No File Selected",description:"Please select a document to upload",variant:"destructive"});return}V(!0),J.mutate({file:P,documentType:T})},Me=K=>new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return r.jsx("div",{className:"min-h-screen bg-gray-900 pt-20 pb-24 md:pb-12",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:`mb-6 ${n?"mb-4":"mb-8"}`,children:[r.jsx("h1",{className:`font-bold text-white mb-2 ${n?"text-2xl":"text-3xl"}`,children:"Profile Settings"}),r.jsx("p",{className:`text-gray-400 ${n?"text-sm":""}`,children:"Manage your account information and preferences"})]}),r.jsxs(oE,{value:i,onValueChange:a,className:"space-y-6",children:[r.jsxs(Zh,{className:`grid w-full bg-gray-800 border-gray-700 ${n?"grid-cols-2 gap-1 p-1":"grid-cols-5"}`,children:[r.jsx(bs,{value:"profile",className:`data-[state=active]:bg-gray-700 ${n?"text-xs px-2 py-2":""}`,children:n?"Profile":"Profile Information"}),r.jsx(bs,{value:"verification",className:`data-[state=active]:bg-gray-700 ${n?"text-xs px-2 py-2":""}`,children:n?"Verify":"Verification"}),!n&&r.jsxs(r.Fragment,{children:[r.jsx(bs,{value:"redeem",className:"data-[state=active]:bg-gray-700",children:"Redeem Codes"}),r.jsx(bs,{value:"security",className:"data-[state=active]:bg-gray-700",children:"Security"}),r.jsx(bs,{value:"account",className:"data-[state=active]:bg-gray-700",children:"Account Details"})]})]}),n&&r.jsxs(Zh,{className:"grid w-full grid-cols-3 gap-1 p-1 bg-gray-800 border-gray-700 -mt-4",children:[r.jsx(bs,{value:"redeem",className:"data-[state=active]:bg-gray-700 text-xs px-2 py-2",children:"Redeem"}),r.jsx(bs,{value:"security",className:"data-[state=active]:bg-gray-700 text-xs px-2 py-2",children:"Security"}),r.jsx(bs,{value:"account",className:"data-[state=active]:bg-gray-700 text-xs px-2 py-2",children:"Account"})]}),r.jsx(Ks,{value:"profile",children:r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsx(nt,{className:n?"p-4":"",children:r.jsxs("div",{className:`flex items-center justify-between ${n?"flex-col space-y-3":""}`,children:[r.jsxs("div",{className:n?"text-center":"",children:[r.jsx(it,{className:`text-white ${n?"text-lg":""}`,children:"Profile Information"}),r.jsx(Rt,{className:`text-gray-400 ${n?"text-sm":""}`,children:"Update your personal information and contact details"})]}),r.jsxs(W,{variant:o?"outline":"default",onClick:()=>l(!o),className:`${o?"border-gray-600":""} ${n?"w-full":""}`,size:n?"sm":"default",children:[r.jsx(jl,{className:"w-4 h-4 mr-2"}),o?"Cancel":"Edit Profile"]})]})}),r.jsxs(he,{className:`space-y-6 ${n?"p-4":""}`,children:[r.jsxs("div",{className:`flex items-center ${n?"flex-col text-center space-y-3":"space-x-4"}`,children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`bg-gradient-to-br from-purple-600 to-blue-600 rounded-full flex items-center justify-center ${n?"w-16 h-16":"w-20 h-20"}`,children:r.jsx(Qr,{className:`text-white ${n?"w-6 h-6":"w-8 h-8"}`})}),o&&r.jsx(W,{size:"sm",className:`absolute -bottom-2 -right-2 rounded-full p-0 ${n?"h-6 w-6":"h-8 w-8"}`,disabled:!0,children:r.jsx(wA,{className:`${n?"w-3 h-3":"w-4 h-4"}`})})]}),r.jsxs("div",{className:"min-w-0 max-w-full",children:[r.jsx("h3",{className:`font-semibold text-white ${n?"text-base":"text-lg"} break-words`,children:t!=null&&t.firstName&&(t!=null&&t.lastName)?`${t.firstName} ${t.lastName}`:t!=null&&t.username&&t.username.startsWith("0x")&&t.username.length>20?`${t.username.slice(0,6)}...${t.username.slice(-4)}`:(t==null?void 0:t.username)||"User"}),r.jsxs("p",{className:`text-gray-400 ${n?"text-xs":"text-sm"} break-all max-w-full overflow-hidden`,children:["@",t!=null&&t.username&&t.username.startsWith("0x")&&t.username.length>20?`${t.username.slice(0,6)}...${t.username.slice(-4)}`:t==null?void 0:t.username]}),r.jsx(xt,{variant:"secondary",className:`mt-1 ${n?"text-xs":""}`,children:(t==null?void 0:t.role)==="admin"?"Administrator":"User"})]})]}),r.jsx(sh,{className:"bg-gray-700"}),r.jsxs("div",{className:`grid gap-6 ${n?"grid-cols-1":"grid-cols-1 md:grid-cols-2"}`,children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{htmlFor:"username",className:"text-gray-300",children:"Username"}),r.jsx(Ee,{id:"username",value:A.username,onChange:K=>se("username",K.target.value),disabled:!o,className:"bg-gray-700 border-gray-600 text-white disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{htmlFor:"email",className:"text-gray-300",children:"Email"}),r.jsx(Ee,{id:"email",type:"email",value:A.email,onChange:K=>se("email",K.target.value),disabled:!o,className:"bg-gray-700 border-gray-600 text-white disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{htmlFor:"firstName",className:"text-gray-300",children:"First Name"}),r.jsx(Ee,{id:"firstName",value:A.firstName,onChange:K=>se("firstName",K.target.value),disabled:!o,className:"bg-gray-700 border-gray-600 text-white disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{htmlFor:"lastName",className:"text-gray-300",children:"Last Name"}),r.jsx(Ee,{id:"lastName",value:A.lastName,onChange:K=>se("lastName",K.target.value),disabled:!o,className:"bg-gray-700 border-gray-600 text-white disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{htmlFor:"phone",className:"text-gray-300",children:"Phone Number"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Dn,{value:A.phoneCountryCode,onValueChange:K=>se("phoneCountryCode",K),disabled:!o,children:[r.jsx(un,{className:"w-[140px] bg-gray-700 border-gray-600 text-white disabled:opacity-50",children:r.jsx(Rn,{placeholder:"Code"})}),r.jsx(hn,{className:"bg-gray-800 border-gray-700 max-h-[300px]",children:g7.map(K=>r.jsx(wt,{value:K.code,className:"text-white hover:bg-gray-700 focus:bg-gray-700",children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("span",{children:K.flag}),r.jsx("span",{children:K.code}),r.jsx("span",{className:"text-gray-400 text-xs",children:K.country})]})},K.code))})]}),r.jsx(Ee,{id:"phone",value:A.phone,onChange:K=>se("phone",K.target.value),disabled:!o,className:"flex-1 bg-gray-700 border-gray-600 text-white disabled:opacity-50",placeholder:"Enter phone number"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{htmlFor:"address",className:"text-gray-300",children:"Withdrawal Address"}),r.jsx(Ee,{id:"address",value:A.address,onChange:K=>se("address",K.target.value),disabled:!o,className:"bg-gray-700 border-gray-600 text-white disabled:opacity-50",placeholder:"Enter withdrawal address"})]})]}),o&&r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(W,{variant:"outline",onClick:()=>l(!1),className:"border-gray-600",children:"Cancel"}),r.jsxs(W,{onClick:ze,disabled:$.isPending,className:"bg-purple-600 hover:bg-purple-700",children:[r.jsx(OA,{className:"w-4 h-4 mr-2"}),$.isPending?"Saving...":"Save Changes"]})]})]})]})}),r.jsx(Ks,{value:"verification",children:r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"Account Verification"}),r.jsx(Rt,{className:"text-gray-400",children:"Upload your identity documents for account verification and set login password"})]}),r.jsxs(he,{className:"space-y-6",children:[!1,r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsx(nt,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-gray-600/20 rounded-lg",children:r.jsx($s,{className:"w-6 h-6 text-gray-400"})}),r.jsxs("div",{children:[r.jsx(it,{className:"text-white text-lg",children:"Password Status"}),r.jsx(Rt,{className:"text-gray-400",children:"Current login methods and password status for your account"})]})]})}),r.jsx(he,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(t==null?void 0:t.walletAddress)&&r.jsxs("div",{className:"p-4 bg-green-900/20 border border-green-600/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),r.jsx("h3",{className:"text-green-400 font-medium",children:"MetaMask Connected"})]}),r.jsxs("p",{className:"text-green-300 text-sm",children:["Wallet: ",t.walletAddress.slice(0,6),"...",t.walletAddress.slice(-4)]})]}),((De=t==null?void 0:t.email)==null?void 0:De.includes("@gmail.com"))&&r.jsxs("div",{className:"p-4 bg-blue-900/20 border border-blue-600/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),r.jsx("h3",{className:"text-blue-400 font-medium",children:"Google Connected"})]}),r.jsxs("p",{className:"text-blue-300 text-sm",children:["Email: ",t.email]})]}),r.jsxs("div",{className:`p-4 border rounded-lg ${t!=null&&t.hasPassword?"bg-green-900/20 border-green-600/50":"bg-yellow-900/20 border-yellow-600/50"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${t!=null&&t.hasPassword?"bg-green-400":"bg-yellow-400"}`}),r.jsx("h3",{className:`font-medium ${t!=null&&t.hasPassword?"text-green-400":"text-yellow-400"}`,children:t!=null&&t.hasPassword?"Password Set":"No Password"})]}),r.jsx("p",{className:`text-sm ${t!=null&&t.hasPassword?"text-green-300":"text-yellow-300"}`,children:t!=null&&t.hasPassword?"You can log in with username/password":"Username/password login not available"})]})]})})]}),!(t!=null&&t.hasPassword)&&(t==null?void 0:t.verificationStatus)==="verified"&&r.jsxs(de,{className:"bg-gradient-to-r from-purple-900/30 to-blue-900/30 border-purple-600/50",children:[r.jsx(nt,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-600/20 rounded-lg",children:r.jsx($s,{className:"w-6 h-6 text-purple-400"})}),r.jsxs("div",{children:[r.jsx(it,{className:"text-white text-lg",children:"Set Login Password"}),r.jsx(Rt,{className:"text-purple-200",children:"Add password login to your verified account for additional security"})]})]})}),r.jsxs(he,{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-blue-900/20 border border-blue-600/50 rounded-lg",children:[r.jsx("h3",{className:"text-blue-400 font-medium mb-2",children:" Why Set a Password?"}),r.jsxs("ul",{className:"text-blue-300 text-sm space-y-1",children:[r.jsxs("li",{children:[" Access your account without ",t!=null&&t.walletAddress?"MetaMask":"Google"]}),r.jsx("li",{children:" Faster login on any device"}),r.jsx("li",{children:" Backup access method for security"}),r.jsx("li",{children:" No current password needed - this is your first password"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 bg-gray-700/50 border border-gray-600 rounded-lg",children:[r.jsx("h4",{className:"text-gray-300 font-medium mb-2",children:"Password Requirements:"}),r.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[r.jsxs("li",{className:`flex items-center gap-2 ${A.newPassword.length>=6?"text-green-400":""}`,children:[A.newPassword.length>=6?"":""," At least 6 characters"]}),r.jsxs("li",{className:`flex items-center gap-2 ${A.newPassword&&A.confirmPassword&&A.newPassword===A.confirmPassword?"text-green-400":""}`,children:[A.newPassword&&A.confirmPassword&&A.newPassword===A.confirmPassword?"":""," Passwords match"]}),r.jsx("li",{className:"flex items-center gap-2 text-blue-400",children:" No current password required (this is your first password)"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{htmlFor:"newPasswordVerification",className:"text-gray-300",children:"Create Your Password"}),r.jsx(Ee,{id:"newPasswordVerification",type:"password",value:A.newPassword,onChange:K=>se("newPassword",K.target.value),className:"bg-gray-700 border-gray-600 text-white",placeholder:"Enter your new password (minimum 6 characters)"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{htmlFor:"confirmPasswordVerification",className:"text-gray-300",children:"Confirm Your Password"}),r.jsx(Ee,{id:"confirmPasswordVerification",type:"password",value:A.confirmPassword,onChange:K=>se("confirmPassword",K.target.value),className:"bg-gray-700 border-gray-600 text-white",placeholder:"Confirm your new password"})]}),A.newPassword&&r.jsxs("div",{className:"space-y-2",children:[A.newPassword.length<6&&r.jsx("p",{className:"text-yellow-400 text-sm flex items-center gap-2",children:" Password must be at least 6 characters"}),A.newPassword.length>=6&&r.jsx("p",{className:"text-green-400 text-sm flex items-center gap-2",children:" Password length is good"}),A.confirmPassword&&A.newPassword!==A.confirmPassword&&r.jsx("p",{className:"text-red-400 text-sm flex items-center gap-2",children:" Passwords don't match"}),A.confirmPassword&&A.newPassword===A.confirmPassword&&A.newPassword.length>=6&&r.jsx("p",{className:"text-green-400 text-sm flex items-center gap-2",children:" Passwords match - ready to set!"})]}),r.jsxs(W,{onClick:()=>{var K,pe;if(console.log(" Setting password for verified user:",{hasPassword:t==null?void 0:t.hasPassword,verificationStatus:t==null?void 0:t.verificationStatus,newPasswordLength:(K=A.newPassword)==null?void 0:K.length,confirmPasswordLength:(pe=A.confirmPassword)==null?void 0:pe.length}),A.newPassword!==A.confirmPassword){e({title:"Password Mismatch",description:"New password and confirmation don't match",variant:"destructive"});return}if(A.newPassword.length<6){e({title:"Password Too Short",description:"Password must be at least 6 characters long",variant:"destructive"});return}O.mutate({newPassword:A.newPassword,isFirstTimePassword:!0})},disabled:O.isPending||!A.newPassword||!A.confirmPassword||A.newPassword!==A.confirmPassword||A.newPassword.length<6,className:"w-full bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-50",children:[r.jsx($s,{className:"w-4 h-4 mr-2"}),O.isPending?"Setting Password...":"Set My First Login Password"]}),A.newPassword&&A.confirmPassword&&A.newPassword===A.confirmPassword&&A.newPassword.length>=6&&r.jsxs("div",{className:"p-3 bg-green-900/20 border border-green-600/50 rounded-lg",children:[r.jsx("p",{className:"text-green-300 text-sm",children:" Once set, you'll be able to log in with:"}),r.jsxs("ul",{className:"text-green-400 text-sm mt-2 space-y-1",children:[r.jsxs("li",{children:[" Username: ",(t==null?void 0:t.username)||"Your username"]}),r.jsx("li",{children:" Password: (the password you're creating)"}),r.jsxs("li",{children:[" Plus your existing ",t!=null&&t.walletAddress?"MetaMask":"Google"," login"]})]})]})]})]})]}),n&&(t==null?void 0:t.verificationStatus)!=="verified"&&r.jsx("div",{className:"p-4 bg-blue-900/30 border border-blue-600/50 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-blue-100 font-medium mb-1",children:" Mobile Verification Status"}),r.jsx("p",{className:"text-blue-200 text-sm",children:"If you were verified on desktop, tap refresh to sync your status"})]}),r.jsx(W,{onClick:Oe,disabled:p,size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:p?r.jsx(On,{className:"w-4 h-4 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"w-4 h-4 mr-1"}),"Refresh"]})})]})}),!(t!=null&&t.hasPassword)&&(t==null?void 0:t.verificationStatus)!=="verified"&&r.jsxs(de,{className:"bg-gradient-to-r from-orange-900/30 to-red-900/30 border-orange-600/50",children:[r.jsx(nt,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-orange-600/20 rounded-lg",children:r.jsx($s,{className:"w-6 h-6 text-orange-400"})}),r.jsxs("div",{children:[r.jsx(it,{className:"text-white text-lg",children:"Set Login Password"}),r.jsx(Rt,{className:"text-orange-200",children:"Set a password for your account (verification not required)"})]})]})}),r.jsxs(he,{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-orange-900/20 border border-orange-600/50 rounded-lg",children:[r.jsx("h3",{className:"text-orange-400 font-medium mb-2",children:" Password Login Setup"}),r.jsx("p",{className:"text-orange-200 text-sm mb-4",children:"Add a password to enable username/password login for your account."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{htmlFor:"newPasswordAlt",className:"text-gray-300",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ee,{id:"newPasswordAlt",type:c?"text":"password",value:A.newPassword,onChange:K=>se("newPassword",K.target.value),className:"bg-gray-700 border-gray-600 text-white pr-10",placeholder:"Enter your new password"}),r.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!c),children:c?r.jsx(wl,{className:"h-4 w-4 text-gray-400"}):r.jsx(xi,{className:"h-4 w-4 text-gray-400"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{htmlFor:"confirmPasswordAlt",className:"text-gray-300",children:"Confirm Password"}),r.jsx(Ee,{id:"confirmPasswordAlt",type:c?"text":"password",value:A.confirmPassword,onChange:K=>se("confirmPassword",K.target.value),className:"bg-gray-700 border-gray-600 text-white",placeholder:"Confirm your new password"})]}),r.jsxs(W,{onClick:()=>{var K,pe;if(console.log(" Setting password for non-verified user:",{hasPassword:t==null?void 0:t.hasPassword,verificationStatus:t==null?void 0:t.verificationStatus,newPasswordLength:(K=A.newPassword)==null?void 0:K.length,confirmPasswordLength:(pe=A.confirmPassword)==null?void 0:pe.length}),A.newPassword!==A.confirmPassword){e({title:"Password Mismatch",description:"New password and confirmation don't match",variant:"destructive"});return}if(A.newPassword.length<6){e({title:"Password Too Short",description:"Password must be at least 6 characters long",variant:"destructive"});return}O.mutate({newPassword:A.newPassword,isFirstTimePassword:!0})},disabled:O.isPending||!A.newPassword||!A.confirmPassword,className:"w-full bg-orange-600 hover:bg-orange-700",children:[r.jsx($s,{className:"w-4 h-4 mr-2"}),O.isPending?"Setting Password...":"Set Password"]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"text-white font-medium",children:"Verification Status"}),r.jsx(W,{size:"sm",variant:"ghost",onClick:Oe,disabled:p,className:"h-6 w-6 p-0 text-gray-400 hover:text-white",children:r.jsx(On,{className:`w-3 h-3 ${p?"animate-spin":""}`})})]}),r.jsx("p",{className:"text-gray-400 text-sm",children:(t==null?void 0:t.verificationStatus)==="verified"?"Your account is verified":(t==null?void 0:t.verificationStatus)==="pending"?"Verification pending review":(t==null?void 0:t.verificationStatus)==="rejected"?"Verification rejected":"Account not verified"})]}),r.jsx(xt,{variant:(t==null?void 0:t.verificationStatus)==="verified"?"default":(t==null?void 0:t.verificationStatus)==="pending"?"secondary":(t==null?void 0:t.verificationStatus)==="rejected"?"destructive":"outline",className:(t==null?void 0:t.verificationStatus)==="verified"?"bg-green-600":(t==null?void 0:t.verificationStatus)==="pending"?"bg-yellow-600":(t==null?void 0:t.verificationStatus)==="rejected"?"bg-red-600":"bg-gray-600",children:(t==null?void 0:t.verificationStatus)==="verified"?" Verified":(t==null?void 0:t.verificationStatus)==="pending"?" Pending":(t==null?void 0:t.verificationStatus)==="rejected"?" Rejected":" Unverified"})]}),(t==null?void 0:t.verificationStatus)!=="verified"&&r.jsxs("div",{className:"space-y-4 p-4 bg-gray-700 rounded-lg",children:[r.jsx("h3",{className:"text-white font-medium",children:"Upload Verification Document"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Please upload a clear photo of your ID card, driver's license, or passport. This is required for trading and withdrawals."}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{className:"text-gray-300",children:"Document Type"}),r.jsxs("select",{value:T,onChange:K=>E(K.target.value),className:"w-full bg-gray-800 border border-gray-600 text-white rounded-md px-3 py-2",children:[r.jsx("option",{value:"id_card",children:"ID Card"}),r.jsx("option",{value:"driver_license",children:"Driver's License"}),r.jsx("option",{value:"passport",children:"Passport"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{className:"text-gray-300",children:"Document File"}),r.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:border-purple-500 transition-colors ${P?"border-green-500 bg-green-500/10":"border-gray-600"}`,onClick:()=>{var K;return(K=G.current)==null?void 0:K.click()},children:P?r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(qr,{className:"w-6 h-6 text-green-500"}),r.jsx("span",{className:"text-green-400 text-sm",children:P.name})]}):r.jsxs(r.Fragment,{children:[r.jsx(TA,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Click to upload document"}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"JPEG, PNG, PDF (max 5MB)"})]})}),r.jsx("input",{ref:G,type:"file",accept:"image/jpeg,image/png,image/jpg,application/pdf",onChange:je,className:"hidden"})]}),r.jsxs(W,{onClick:Ve,disabled:!P||I||J.isPending,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-50",children:[r.jsx(Ah,{className:"w-4 h-4 mr-2"}),I||J.isPending?"Uploading...":"Upload Document"]})]}),(t==null?void 0:t.verificationStatus)!=="verified"&&r.jsxs("div",{className:"p-4 bg-yellow-900/20 border border-yellow-600 rounded-lg",children:[r.jsx("h3",{className:"text-yellow-400 font-medium mb-2",children:" Account Restrictions"}),r.jsxs("ul",{className:"text-yellow-300 text-sm space-y-1",children:[r.jsx("li",{children:" Trading is disabled until verification is complete"}),r.jsx("li",{children:" Withdrawals are not available"}),r.jsx("li",{children:" Some features may be limited"})]})]})]})]})}),r.jsx(Ks,{value:"redeem",children:r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"Redeem Bonus Codes"}),r.jsx(Rt,{className:"text-gray-400",children:"Enter promotional codes to receive bonus credits"})]}),r.jsxs(he,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex space-x-3",children:[r.jsx(Ee,{value:h,onChange:K=>u(K.target.value.toUpperCase()),placeholder:"Enter redeem code (e.g., FIRSTBONUS)",className:"bg-gray-900 border-gray-600 text-white flex-1",onKeyPress:K=>{K.key==="Enter"&&h.trim()&&!m&&Ke()}}),r.jsx(W,{onClick:Ke,disabled:m||!h.trim(),className:"bg-purple-600 hover:bg-purple-700",children:m?"Redeeming...":"Redeem"})]}),r.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[r.jsx("h3",{className:"text-white font-medium mb-2",children:" Available Codes"}),_.length===0?r.jsx("p",{className:"text-gray-400 text-sm",children:"Loading available codes..."}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:_.map(K=>{const pe=K.isClaimed||!1;return r.jsx("div",{className:`p-3 rounded border transition-colors ${pe?"bg-gray-900 border-gray-700 opacity-60 cursor-not-allowed":"bg-gray-800 border-gray-600 hover:border-purple-500 cursor-pointer"}`,onClick:()=>{pe||u(K.code)},children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:`font-mono font-bold ${pe?"text-gray-500":"text-purple-400"}`,children:K.code}),r.jsx("div",{className:`font-semibold ${pe?"text-gray-500":"text-green-400"}`,children:K.amount}),r.jsx("div",{className:"text-gray-400 text-xs",children:K.description})]}),r.jsx(W,{size:"sm",variant:"outline",className:pe?"border-gray-600 text-gray-500 cursor-not-allowed":"border-purple-600 text-purple-400 hover:bg-purple-600 hover:text-white",onClick:st=>{st.stopPropagation(),pe||(u(K.code),setTimeout(()=>Ke(),100))},disabled:m||pe,children:pe?"Claimed":"Use"})]})},K.code)})})]})]}),r.jsxs("div",{className:"p-4 bg-blue-900/20 border border-blue-600 rounded-lg",children:[r.jsx("h3",{className:"text-blue-400 font-medium mb-2",children:" Bonus Terms"}),r.jsxs("ul",{className:"text-blue-300 text-sm space-y-1",children:[r.jsx("li",{children:" Complete 10 trades to unlock withdrawals after claiming bonus"}),r.jsx("li",{children:" Each code can only be used once per account"}),r.jsx("li",{children:" Bonus credits are added immediately to your balance"})]})]}),r.jsx(sh,{className:"bg-gray-600"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-white font-medium",children:" Your Referral Code"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ee,{value:(b==null?void 0:b.referralCode)||(b===null?"Loading...":"Error loading code"),readOnly:!0,className:"bg-gray-900 border-gray-600 text-white font-mono"}),r.jsx(W,{onClick:()=>{const K=(b==null?void 0:b.referralCode)||"";K&&K!=="Loading..."&&K!=="Error loading code"?(navigator.clipboard.writeText(K),e({title:"Copied!",description:"Referral code copied to clipboard"})):e({title:"Error",description:"No referral code to copy",variant:"destructive"})},variant:"outline",className:"border-gray-600",disabled:!(b!=null&&b.referralCode)||b.referralCode==="Loading..."||b.referralCode==="Error loading code",children:"Copy"})]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Share this code with friends to earn referral bonuses!"}),b&&r.jsxs("p",{className:"text-green-400 text-sm",children:["Total Referrals: ",b.totalReferrals||0]})]})]})]})}),r.jsx(Ks,{value:"security",children:r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"Security Settings"}),r.jsx(Rt,{className:"text-gray-400",children:"Manage your password and security preferences"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{onClick:()=>{console.log(" Manual refresh of user data"),s.removeQueries({queryKey:["/api/auth"]}),s.invalidateQueries({queryKey:["/api/auth"]}),s.refetchQueries({queryKey:["/api/auth"]}),e({title:"Refreshing User Data",description:"Updating password status..."})},variant:"outline",size:"sm",className:"text-blue-400 border-blue-600 hover:bg-blue-900/20",children:[r.jsx(On,{className:"w-4 h-4 mr-2"}),"Refresh Status"]}),r.jsx(W,{onClick:async()=>{var K,pe;try{const qe=await(await fetch("/api/debug/password-status",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json();console.log(" Password Debug Data:",qe),e({title:"Debug Info",description:`Password saved: ${qe.debug?((K=qe.supabaseData)==null?void 0:K.hasPasswordHash)||((pe=qe.fileData)==null?void 0:pe.hasPasswordHash):"Unknown"}`})}catch(st){console.error("Debug error:",st),e({title:"Debug Failed",description:"Could not fetch debug info",variant:"destructive"})}},variant:"outline",size:"sm",className:"text-yellow-400 border-yellow-600 hover:bg-yellow-900/20",children:" Debug"})]})]}),r.jsxs(he,{className:"space-y-6",children:[console.log(" Security Tab Debug - User Data:",{hasPassword:t==null?void 0:t.hasPassword,passwordStatus:t!=null&&t.hasPassword?"Password Set":"No Password",verificationStatus:t==null?void 0:t.verificationStatus,walletAddress:t==null?void 0:t.walletAddress,email:t==null?void 0:t.email,userId:t==null?void 0:t.id,username:t==null?void 0:t.username}),t!=null&&t.hasPassword?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-green-900/20 border border-green-600/50 rounded-lg",children:[r.jsx("h3",{className:"text-green-400 font-medium mb-2",children:" Password Protection Enabled"}),r.jsx("p",{className:"text-green-300 text-sm mb-3",children:"Your account is secured with a password. You can change it below if needed."}),r.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[r.jsx($s,{className:"w-4 h-4"}),r.jsx("span",{children:"You can log in with username and password"})]})]}),r.jsxs("div",{className:"p-4 bg-gray-700/50 border border-gray-600 rounded-lg",children:[r.jsx("h4",{className:"text-gray-300 font-medium mb-3",children:"Available Login Methods:"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:" Username & Password"}),(t==null?void 0:t.walletAddress)&&r.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[" MetaMask Wallet (",t.walletAddress.slice(0,6),"...",t.walletAddress.slice(-4),")"]}),((pt=t==null?void 0:t.email)==null?void 0:pt.includes("@gmail.com"))&&r.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[" Google Account (",t.email,")"]})]})]}),r.jsxs("div",{className:"p-4 bg-gray-800/50 border border-gray-600 rounded-lg",children:[r.jsx("h4",{className:"text-white font-medium mb-4",children:"Change Your Password"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{htmlFor:"currentPassword",className:"text-gray-300",children:"Current Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ee,{id:"currentPassword",type:c?"text":"password",value:A.currentPassword,onChange:K=>se("currentPassword",K.target.value),className:"bg-gray-700 border-gray-600 text-white pr-10",placeholder:"Enter your current password"}),r.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!c),children:c?r.jsx(wl,{className:"h-4 w-4 text-gray-400"}):r.jsx(xi,{className:"h-4 w-4 text-gray-400"})})]}),r.jsx("p",{className:"text-gray-400 text-xs",children:"This is the password you currently use to log in"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{htmlFor:"newPasswordSecurity",className:"text-gray-300",children:"New Password"}),r.jsx(Ee,{id:"newPasswordSecurity",type:"password",value:A.newPassword,onChange:K=>se("newPassword",K.target.value),className:"bg-gray-700 border-gray-600 text-white",placeholder:"Enter your new password (minimum 6 characters)"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Bt,{htmlFor:"confirmPasswordSecurity",className:"text-gray-300",children:"Confirm New Password"}),r.jsx(Ee,{id:"confirmPasswordSecurity",type:"password",value:A.confirmPassword,onChange:K=>se("confirmPassword",K.target.value),className:"bg-gray-700 border-gray-600 text-white",placeholder:"Confirm your new password"})]}),A.newPassword&&r.jsxs("div",{className:"space-y-1",children:[A.newPassword.length<6&&r.jsx("p",{className:"text-yellow-400 text-sm flex items-center gap-2",children:" New password must be at least 6 characters"}),A.confirmPassword&&A.newPassword!==A.confirmPassword&&r.jsx("p",{className:"text-red-400 text-sm flex items-center gap-2",children:" New passwords don't match"}),A.confirmPassword&&A.newPassword===A.confirmPassword&&A.newPassword.length>=6&&r.jsx("p",{className:"text-green-400 text-sm flex items-center gap-2",children:" New passwords match and meet requirements"})]})]})]}),r.jsxs(W,{onClick:ce,disabled:O.isPending||!A.currentPassword||!A.newPassword||!A.confirmPassword,className:"bg-purple-600 hover:bg-purple-700",children:[r.jsx($s,{className:"w-4 h-4 mr-2"}),O.isPending?"Changing...":"Change Password"]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-blue-900/20 border border-blue-600/50 rounded-lg",children:[r.jsx("h3",{className:"text-blue-400 font-medium mb-3",children:" No Password Set"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-blue-300 text-sm font-medium",children:"Current Login Method:"}),r.jsx("p",{className:"text-blue-200 text-sm",children:t!=null&&t.walletAddress?`MetaMask Wallet (${t.walletAddress.slice(0,6)}...${t.walletAddress.slice(-4)})`:"Google Account"})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full mt-2"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-yellow-300 text-sm font-medium",children:"Password Status:"}),r.jsxs("p",{className:"text-yellow-200 text-sm",children:[r.jsx("strong",{children:"You don't have a current password"})," because you've never set one."]})]})]})]})]}),r.jsxs("div",{className:"p-4 bg-gray-700/50 border border-gray-600 rounded-lg",children:[r.jsx("h4",{className:"text-gray-300 font-medium mb-3",children:"What This Means:"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:" Cannot log in with username & password"}),r.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[" Can log in with ",t!=null&&t.walletAddress?"MetaMask":"Google"]}),r.jsx("div",{className:"flex items-center gap-2 text-blue-400 text-sm",children:' No "current password" to remember or enter'})]})]}),r.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-900/30 to-blue-900/30 border border-purple-600/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx($s,{className:"w-5 h-5 text-purple-400"}),r.jsx("h4",{className:"text-purple-300 font-medium",children:"Want to Add Password Login?"})]}),r.jsx("p",{className:"text-purple-200 text-sm mb-3",children:"Set your first login password to access your account with username & password."}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-900/40 border border-purple-500/50 rounded-lg",children:[r.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full"}),r.jsxs("p",{className:"text-purple-300 text-sm",children:["Go to the ",r.jsx("strong",{children:"Verification"})," tab above to set your first password."]})]})]})]})]})]})}),r.jsx(Ks,{value:"account",children:r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsxs(nt,{children:[r.jsx(it,{className:"text-white",children:"Account Details"}),r.jsx(Rt,{className:"text-gray-400",children:"View your account information and status"})]}),r.jsxs(he,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(MA,{className:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Email"}),r.jsx("p",{className:"text-white break-words break-all text-sm leading-relaxed",children:t==null?void 0:t.email})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Qr,{className:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"text-sm text-gray-400",children:"User ID"}),r.jsx("p",{className:"text-white font-mono text-sm break-all leading-relaxed",children:t==null?void 0:t.id})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(bA,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Member Since"}),r.jsx("p",{className:"text-white",children:t!=null&&t.createdAt?Me(t.createdAt):"N/A"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx($s,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Account Status"}),r.jsx(xt,{variant:"secondary",className:"bg-green-600/20 text-green-400",children:"Active"})]})]})]}),r.jsx(sh,{className:"bg-gray-600"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-white font-medium",children:"Referral Code"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ee,{value:(b==null?void 0:b.referralCode)||(t==null?void 0:t.referral_code)||(b===null?"Loading...":"Error loading code"),readOnly:!0,className:"bg-gray-900 border-gray-600 text-white font-mono"}),r.jsx(W,{onClick:()=>{const K=(b==null?void 0:b.referralCode)||(t==null?void 0:t.referral_code)||"";K&&K!=="Loading..."&&K!=="Error loading code"?(navigator.clipboard.writeText(K),e({title:"Copied!",description:"Referral code copied to clipboard"})):e({title:"Error",description:"No referral code to copy",variant:"destructive"})},variant:"outline",className:"border-gray-600",disabled:!(b!=null&&b.referralCode)&&!(t!=null&&t.referral_code),children:"Copy"})]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Share this code with friends to earn referral bonuses!"}),b&&r.jsxs("p",{className:"text-green-400 text-sm",children:["Total Referrals: ",b.totalReferrals||0]})]})]})]})})]})]})})}function sN(){const{user:t}=Ss(),[e,s]=f.useState(""),[n,i]=f.useState("all"),[a,o]=f.useState("all"),[l,c]=f.useState("all"),d=async()=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");try{const j=await fetch(`/api/users/${t.id}/transactions`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!j.ok)throw new Error(`Server responded with ${j.status}: ${j.statusText}`);const S=await j.json();return console.log(" Fetched user transactions:",S),S}catch(j){return console.error(" API call failed, using fallback data:",j),[{id:"fallback-tx-1",user_id:t.id,username:t.username||"Current User",type:"deposit",amount:"1000",symbol:"USDT",status:"completed",description:"Demo deposit transaction",created_at:new Date(Date.now()-2*60*60*1e3).toISOString(),users:{username:t.username||"Current User"}},{id:"fallback-tx-2",user_id:t.id,username:t.username||"Current User",type:"trade",amount:"150",symbol:"USDT",status:"completed",description:"Demo trading win - BTC/USDT",created_at:new Date(Date.now()-4*60*60*1e3).toISOString(),users:{username:t.username||"Current User"}},{id:"fallback-tx-3",user_id:t.id,username:t.username||"Current User",type:"trade",amount:"-75",symbol:"USDT",status:"completed",description:"Demo trading loss - ETH/USDT",created_at:new Date(Date.now()-6*60*60*1e3).toISOString(),users:{username:t.username||"Current User"}}]}},{data:h,isLoading:u,error:m}=ns({queryKey:[`/api/users/${t==null?void 0:t.id}/transactions`],enabled:!!(t!=null&&t.id),queryFn:d,retry:1,retryDelay:1e3,staleTime:3e4,cacheTime:3e5}),{data:y}=ns({queryKey:[`/api/users/${t==null?void 0:t.id}/trades`],enabled:!!(t!=null&&t.id),queryFn:async()=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");try{const j=await fetch(`/api/users/${t.id}/trades`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!j.ok)throw new Error(`Server responded with ${j.status}: ${j.statusText}`);const S=await j.json();return console.log(" Fetched user trades:",S),S}catch(j){return console.error(" Trades API call failed, using fallback data:",j),[{id:"fallback-trade-1",user_id:t.id,username:t.username||"Current User",type:"trade_win",amount:150,symbol:"USDT",status:"completed",description:"Demo trading win - BTC/USDT",created_at:new Date(Date.now()-4*60*60*1e3).toISOString(),users:{username:t.username||"Current User"}}]}},retry:1,retryDelay:1e3}),v=(h==null?void 0:h.filter(j=>{var P,M,T,E,I;const S=((P=j.symbol)==null?void 0:P.toLowerCase().includes(e.toLowerCase()))||((M=j.type)==null?void 0:M.toLowerCase().includes(e.toLowerCase()))||((T=j.description)==null?void 0:T.toLowerCase().includes(e.toLowerCase()))||((I=(E=j.users)==null?void 0:E.username)==null?void 0:I.toLowerCase().includes(e.toLowerCase())),_=n==="all"||j.type===n||n==="trade"&&(j.type==="trade_win"||j.type==="trade_loss"),k=a==="all"||j.status===a;return S&&_&&k}))||[];m&&console.error(" Failed to fetch transactions:",m);const g=j=>{switch(j){case"deposit":return r.jsx(_b,{className:"h-4 w-4"});case"withdraw":case"withdrawal":return r.jsx(Ah,{className:"h-4 w-4"});case"trade":case"trade_win":case"trade_loss":return r.jsx(vA,{className:"h-4 w-4"});case"transfer":return r.jsx(On,{className:"h-4 w-4"});default:return r.jsx(On,{className:"h-4 w-4"})}},b=j=>{switch(j){case"completed":return"bg-green-600";case"pending":return"bg-yellow-600";case"failed":case"rejected":return"bg-red-600";default:return"bg-gray-600"}},x=(j,S)=>(S==="deposit"||S==="withdraw")&&j==="failed"?"rejected":j,p=j=>{switch(j){case"deposit":return"text-green-400";case"withdraw":case"withdrawal":return"text-red-400";case"trade":case"trade_win":return"text-green-400";case"trade_loss":return"text-red-400";case"transfer":return"text-blue-400";default:return"text-gray-400"}},w=j=>{switch(j){case"trade_win":return"Trade Win";case"trade_loss":return"Trade Loss";case"withdraw":return"Withdrawal";default:return j.charAt(0).toUpperCase()+j.slice(1)}};return r.jsx("div",{className:"min-h-screen bg-gray-900 pt-20 pb-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[r.jsx(Mb,{className:"h-8 w-8"}),"Transaction History"]}),r.jsx("p",{className:"text-gray-400",children:"View and manage all your transactions, deposits, and withdrawals"})]}),r.jsxs(de,{className:"bg-gray-800 border-gray-700 mb-8",children:[r.jsx(nt,{children:r.jsxs(it,{className:"text-white flex items-center gap-2",children:[r.jsx(kA,{className:"h-5 w-5"}),"Filters"]})}),r.jsx(he,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Search"}),r.jsxs("div",{className:"relative",children:[r.jsx(_m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(Ee,{placeholder:"Search transactions...",value:e,onChange:j=>s(j.target.value),className:"pl-10 bg-gray-700 border-gray-600 text-white"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Type"}),r.jsxs(Dn,{value:n,onValueChange:i,children:[r.jsx(un,{className:"bg-gray-700 border-gray-600 text-white",children:r.jsx(Rn,{})}),r.jsxs(hn,{className:"bg-gray-700 border-gray-600",children:[r.jsx(wt,{value:"all",children:"All Types"}),r.jsx(wt,{value:"deposit",children:"Deposits"}),r.jsx(wt,{value:"withdraw",children:"Withdrawals"}),r.jsx(wt,{value:"trade",children:"Trades"}),r.jsx(wt,{value:"transfer",children:"Transfers"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Status"}),r.jsxs(Dn,{value:a,onValueChange:o,children:[r.jsx(un,{className:"bg-gray-700 border-gray-600 text-white",children:r.jsx(Rn,{})}),r.jsxs(hn,{className:"bg-gray-700 border-gray-600",children:[r.jsx(wt,{value:"all",children:"All Status"}),r.jsx(wt,{value:"completed",children:"Completed"}),r.jsx(wt,{value:"pending",children:"Pending"}),r.jsx(wt,{value:"failed",children:"Failed"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Date Range"}),r.jsxs(Dn,{value:l,onValueChange:c,children:[r.jsx(un,{className:"bg-gray-700 border-gray-600 text-white",children:r.jsx(Rn,{})}),r.jsxs(hn,{className:"bg-gray-700 border-gray-600",children:[r.jsx(wt,{value:"all",children:"All Time"}),r.jsx(wt,{value:"today",children:"Today"}),r.jsx(wt,{value:"week",children:"This Week"}),r.jsx(wt,{value:"month",children:"This Month"})]})]})]})]})})]}),r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsx(nt,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(it,{className:"text-white",children:"Transactions"}),r.jsxs(Rt,{className:"text-gray-400",children:[v.length," transactions found"]})]}),r.jsxs(W,{variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[r.jsx(_b,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),r.jsx(he,{children:u?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(On,{className:"h-8 w-8 animate-spin text-gray-400"}),r.jsx("span",{className:"ml-3 text-gray-400",children:"Loading transactions..."})]}):m?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ka,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"Failed to load transactions"}),r.jsx("p",{className:"text-gray-400 mb-6",children:m instanceof Error?m.message:"Unable to fetch transaction data. Please try again."}),r.jsxs(W,{onClick:()=>window.location.reload(),variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[r.jsx(On,{className:"h-4 w-4 mr-2"}),"Retry"]})]}):v.length>0?r.jsx("div",{className:"space-y-4",children:v.map(j=>{var S;return r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg hover:bg-gray-700/70 transition-colors max-w-full overflow-hidden",children:[r.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${j.type==="deposit"?"bg-green-600/20 text-green-400":j.type==="withdraw"||j.type==="withdrawal"?"bg-red-600/20 text-red-400":j.type==="trade"||j.type==="trade_win"?"bg-green-600/20 text-green-400":j.type==="trade_loss"?"bg-red-600/20 text-red-400":"bg-blue-600/20 text-blue-400"}`,children:g(j.type)}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-white",children:w(j.type)}),r.jsx(xt,{className:b(j.status),children:x(j.status,j.type)})]}),r.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-2",children:[r.jsx(_h,{className:"h-3 w-3"}),new Date(j.created_at).toLocaleString()]}),j.description&&!j.description.includes("ADMIN")&&r.jsx("div",{className:"text-xs text-gray-500 truncate max-w-full",children:j.description}),((S=j.users)==null?void 0:S.username)&&r.jsxs("div",{className:"text-xs text-gray-500 truncate max-w-full",children:["User: ",j.users.username.startsWith("0x")&&j.users.username.length>20?`${j.users.username.slice(0,6)}...${j.users.username.slice(-4)}`:j.users.username]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:`font-medium text-lg ${p(j.type)}`,children:(()=>{const _=parseFloat(j.amount||"0");return`${_>0?"+":""}$${Math.abs(_).toFixed(2)}`})()}),r.jsx("div",{className:"text-sm text-gray-400",children:j.symbol||"USDT"}),(j.type==="trade"||j.type==="trade_win"||j.type==="trade_loss")&&r.jsx("div",{className:`text-sm font-medium ${parseFloat(j.amount||"0")>0?"text-green-400":"text-red-400"}`,children:(()=>{const _=parseFloat(j.amount||"0");return`P&L: ${_>0?"+":""}$${Math.abs(_).toFixed(2)}`})()}),j.old_balance!==void 0&&j.new_balance!==void 0&&r.jsxs("div",{className:"text-xs text-gray-500",children:["Balance: $",j.old_balance,"  $",j.new_balance]})]})]},j.id)})}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Mb,{className:"h-16 w-16 text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"No transactions found"}),r.jsx("p",{className:"text-gray-400 mb-6",children:e||n!=="all"||a!=="all"?"Try adjusting your filters to see more results":"Your transaction history will appear here once you start trading"}),r.jsx(W,{onClick:()=>{s(""),i("all"),o("all"),c("all")},variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"Clear Filters"})]})})]})]})})}const OE=f.forwardRef(({className:t,...e},s)=>r.jsx("textarea",{className:Ue("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...e}));OE.displayName="Textarea";function y7(){const[t,e]=f.useState(null),[s,n]=f.useState(""),{toast:i}=Zs(),a=Ir(),{data:o,isLoading:l}=ns({queryKey:["/api/admin/transactions/pending"],refetchInterval:3e4}),c=Ms({mutationFn:async({id:m,action:y,reason:v})=>{const g=await fetch(`/api/admin/transactions/${m}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:y,reason:v})});if(!g.ok){const b=await g.json();throw new Error(b.message||"Action failed")}return g.json()},onSuccess:(m,y)=>{i({title:y.action==="approve"?"Transaction Approved":"Transaction Rejected",description:`Transaction has been ${y.action}d successfully`}),a.invalidateQueries({queryKey:["/api/admin/transactions/pending"]}),e(null),n("")},onError:m=>{i({title:"Action Failed",description:m.message,variant:"destructive"})}}),d=(m,y)=>{const v=(y==="deposit"||y==="withdraw")&&m==="failed"?"rejected":m;switch(v){case"pending":return r.jsxs(xt,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:[r.jsx(_h,{className:"w-3 h-3 mr-1"}),"Pending"]});case"completed":return r.jsxs(xt,{variant:"outline",className:"text-green-600 border-green-600",children:[r.jsx(qr,{className:"w-3 h-3 mr-1"}),"Completed"]});case"failed":return r.jsxs(xt,{variant:"outline",className:"text-red-600 border-red-600",children:[r.jsx(Ka,{className:"w-3 h-3 mr-1"}),"Failed"]});case"rejected":return r.jsxs(xt,{variant:"outline",className:"text-red-600 border-red-600",children:[r.jsx(Ka,{className:"w-3 h-3 mr-1"}),"Rejected"]});default:return r.jsx(xt,{variant:"outline",children:v})}},h=m=>new Date(m).toLocaleString(),u=m=>{try{return m?JSON.parse(m):{}}catch{return{}}};return l?r.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Transaction Management"}),r.jsx("div",{className:"text-center",children:"Loading..."})]})}):r.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Transaction Management"}),r.jsxs(xt,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:[(o==null?void 0:o.length)||0," Pending"]})]}),!o||o.length===0?r.jsx(de,{className:"bg-gray-800 border-gray-700",children:r.jsxs(he,{className:"p-8 text-center",children:[r.jsx(qr,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Pending Transactions"}),r.jsx("p",{className:"text-gray-400",children:"All transactions have been processed."})]})}):r.jsx("div",{className:"space-y-4",children:o.map(m=>r.jsx(de,{className:"bg-gray-800 border-gray-700",children:r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[r.jsxs("h3",{className:"text-lg font-semibold",children:[m.type.toUpperCase()," - ",m.amount," ",m.symbol]}),d(m.status,m.type),r.jsx(xt,{variant:"secondary",children:m.method})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-400 mb-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"User ID:"}),r.jsx("br",{}),m.userId]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Created:"}),r.jsx("br",{}),h(m.createdAt)]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Method:"}),r.jsx("br",{}),m.method]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"TX Hash:"}),r.jsx("br",{}),m.txHash?r.jsxs("span",{className:"font-mono text-xs break-all",children:[m.txHash.substring(0,20),"..."]}):"N/A"]})]}),u(m.metadata).transferReference&&r.jsxs("div",{className:"mb-4 p-3 bg-gray-700 rounded",children:[r.jsx("span",{className:"font-medium text-sm",children:"Bank Transfer Reference:"}),r.jsx("br",{}),r.jsx("span",{className:"font-mono",children:u(m.metadata).transferReference})]})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[r.jsxs(el,{children:[r.jsx(dj,{asChild:!0,children:r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>e(m),children:[r.jsx(xi,{className:"w-4 h-4 mr-1"}),"Details"]})}),r.jsxs(Qa,{className:"bg-gray-800 border-gray-700 max-w-2xl",children:[r.jsx(Xa,{children:r.jsx(Ya,{className:"text-white",children:"Transaction Details"})}),r.jsx("div",{className:"space-y-4",children:r.jsx("pre",{className:"bg-gray-900 p-4 rounded text-sm overflow-auto",children:JSON.stringify(m,null,2)})})]})]}),r.jsxs(W,{onClick:()=>c.mutate({id:m.id,action:"approve"}),disabled:c.isPending,className:"bg-green-600 hover:bg-green-700",size:"sm",children:[r.jsx(qr,{className:"w-4 h-4 mr-1"}),"Approve"]}),r.jsxs(el,{children:[r.jsx(dj,{asChild:!0,children:r.jsxs(W,{variant:"destructive",size:"sm",children:[r.jsx(Ka,{className:"w-4 h-4 mr-1"}),"Reject"]})}),r.jsxs(Qa,{className:"bg-gray-800 border-gray-700",children:[r.jsx(Xa,{children:r.jsx(Ya,{className:"text-white",children:"Reject Transaction"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Rejection Reason"}),r.jsx(OE,{value:s,onChange:y=>n(y.target.value),placeholder:"Enter reason for rejection...",className:"bg-gray-700 border-gray-600 text-white mt-2"})]}),r.jsx(W,{onClick:()=>c.mutate({id:m.id,action:"reject",reason:s}),disabled:c.isPending||!s,variant:"destructive",className:"w-full",children:c.isPending?"Processing...":"Confirm Rejection"})]})]})]})]})]})})},m.id))})]})})}function v7(){const{toast:t}=Zs(),[e,s]=f.useState([]),[n,i]=f.useState(""),[a,o]=f.useState({}),[l,c]=f.useState(!1),[d,h]=f.useState("100"),[u,m]=f.useState("50"),[y,v]=f.useState("testpassword123"),[g,b]=f.useState("0x1234567890abcdef1234567890abcdef12345678");f.useEffect(()=>{x()},[]);const x=async()=>{try{const E=await fetch("/api/admin/users");if(E.ok){const I=await E.json();s(I),I.length>0&&!n&&i(I[0].id)}}catch(E){console.error("Error fetching users:",E)}},p=(E,I,V)=>{const R=`${new Date().toLocaleTimeString()} ${V?"":""} ${I}`;o($=>({...$,[E]:R})),t({title:V?"Test Passed":"Test Failed",description:`${E}: ${I}`,variant:V?"default":"destructive"})},w=async E=>{if(n)try{c(!0);const I=await fetch("/api/admin/trading-controls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n,controlType:E})});if(I.ok){const V=await I.json();p(`Trading Mode ${E.toUpperCase()}`,V.message,!0),await x()}else{const V=await I.text();p(`Trading Mode ${E.toUpperCase()}`,`Failed: ${V}`,!1)}}catch(I){p(`Trading Mode ${E.toUpperCase()}`,`Error: ${I}`,!1)}finally{c(!1)}},j=async()=>{if(!(!n||!d))try{c(!0);const E=await fetch("/api/superadmin/deposit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n,amount:Number(d),note:"Test deposit from SuperAdmin test page"})});if(E.ok){const I=await E.json();p("Deposit",I.message,!0),await x()}else{const I=await E.text();p("Deposit",`Failed: ${I}`,!1)}}catch(E){p("Deposit",`Error: ${E}`,!1)}finally{c(!1)}},S=async()=>{if(!(!n||!u))try{c(!0);const E=await fetch("/api/superadmin/withdrawal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n,amount:Number(u),note:"Test withdrawal from SuperAdmin test page"})});if(E.ok){const I=await E.json();p("Withdrawal",I.message,!0),await x()}else{const I=await E.text();p("Withdrawal",`Failed: ${I}`,!1)}}catch(E){p("Withdrawal",`Error: ${E}`,!1)}finally{c(!1)}},_=async()=>{if(!(!n||!y))try{c(!0);const E=await fetch("/api/superadmin/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n,newPassword:y})});if(E.ok){const I=await E.json();p("Password Change",I.message,!0)}else{const I=await E.text();p("Password Change",`Failed: ${I}`,!1)}}catch(E){p("Password Change",`Error: ${E}`,!1)}finally{c(!1)}},k=async()=>{if(!(!n||!g))try{c(!0);const E=await fetch("/api/superadmin/update-wallet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n,walletAddress:g})});if(E.ok){const I=await E.json();p("Wallet Update",I.message,!0),await x()}else{const I=await E.text();p("Wallet Update",`Failed: ${I}`,!1)}}catch(E){p("Wallet Update",`Error: ${E}`,!1)}finally{c(!1)}},P=async()=>{if(!n)return;const E=e.find(I=>I.id===n);if(E)try{c(!0);const I=await fetch(`/api/admin/users/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:E.username,email:E.email,balance:E.balance,role:E.role,status:"active",trading_mode:E.trading_mode})});if(I.ok)p("User Edit","User updated successfully",!0),await x();else{const V=await I.text();p("User Edit",`Failed: ${V}`,!1)}}catch(I){p("User Edit",`Error: ${I}`,!1)}finally{c(!1)}},M=async()=>{if(!n){t({title:"Error",description:"Please select a user first",variant:"destructive"});return}o({}),await w("win"),await new Promise(E=>setTimeout(E,1e3)),await w("lose"),await new Promise(E=>setTimeout(E,1e3)),await w("normal"),await new Promise(E=>setTimeout(E,1e3)),await j(),await new Promise(E=>setTimeout(E,1e3)),await S(),await new Promise(E=>setTimeout(E,1e3)),await _(),await new Promise(E=>setTimeout(E,1e3)),await k(),await new Promise(E=>setTimeout(E,1e3)),await P()},T=e.find(E=>E.id===n);return r.jsx("div",{className:"min-h-screen bg-gray-900 p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:" SuperAdmin Feature Test Page"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsx(nt,{children:r.jsx(it,{className:"text-white",children:" Select Test User"})}),r.jsxs(he,{children:[r.jsxs("select",{value:n,onChange:E=>i(E.target.value),className:"w-full p-2 bg-gray-700 text-white rounded border border-gray-600",children:[r.jsx("option",{value:"",children:"Select a user..."}),e.map(E=>r.jsxs("option",{value:E.id,children:[E.username," - $",E.balance," - ",E.trading_mode]},E.id))]}),T&&r.jsxs("div",{className:"mt-4 p-3 bg-gray-700 rounded",children:[r.jsxs("p",{className:"text-white",children:[r.jsx("strong",{children:"Username:"})," ",T.username]}),r.jsxs("p",{className:"text-white",children:[r.jsx("strong",{children:"Balance:"})," $",T.balance]}),r.jsxs("p",{className:"text-white",children:[r.jsx("strong",{children:"Trading Mode:"})," ",T.trading_mode]}),r.jsxs("p",{className:"text-white",children:[r.jsx("strong",{children:"Status:"})," ",T.status]}),r.jsxs("p",{className:"text-white",children:[r.jsx("strong",{children:"Wallet:"})," ",T.wallet_address||"Not set"]})]})]})]}),r.jsxs(de,{className:"bg-gray-800 border-gray-700",children:[r.jsx(nt,{children:r.jsx(it,{className:"text-white",children:" Test Parameters"})}),r.jsxs(he,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm",children:"Deposit Amount"}),r.jsx(Ee,{value:d,onChange:E=>h(E.target.value),className:"bg-gray-700 border-gray-600 text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm",children:"Withdrawal Amount"}),r.jsx(Ee,{value:u,onChange:E=>m(E.target.value),className:"bg-gray-700 border-gray-600 text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm",children:"New Password"}),r.jsx(Ee,{value:y,onChange:E=>v(E.target.value),className:"bg-gray-700 border-gray-600 text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm",children:"New Wallet Address"}),r.jsx(Ee,{value:g,onChange:E=>b(E.target.value),className:"bg-gray-700 border-gray-600 text-white"})]})]})]})]}),r.jsxs(de,{className:"bg-gray-800 border-gray-700 mt-6",children:[r.jsx(nt,{children:r.jsx(it,{className:"text-white",children:" Individual Tests"})}),r.jsxs(he,{children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(W,{onClick:()=>w("win"),disabled:l,className:"bg-green-600 hover:bg-green-700",children:" Test WIN Mode"}),r.jsx(W,{onClick:()=>w("lose"),disabled:l,className:"bg-red-600 hover:bg-red-700",children:" Test LOSE Mode"}),r.jsx(W,{onClick:()=>w("normal"),disabled:l,className:"bg-blue-600 hover:bg-blue-700",children:" Test NORMAL Mode"}),r.jsx(W,{onClick:j,disabled:l,className:"bg-green-600 hover:bg-green-700",children:" Test Deposit"}),r.jsx(W,{onClick:S,disabled:l,className:"bg-red-600 hover:bg-red-700",children:" Test Withdrawal"}),r.jsx(W,{onClick:_,disabled:l,className:"bg-purple-600 hover:bg-purple-700",children:" Test Password"}),r.jsx(W,{onClick:k,disabled:l,className:"bg-orange-600 hover:bg-orange-700",children:" Test Wallet"}),r.jsx(W,{onClick:P,disabled:l,className:"bg-blue-600 hover:bg-blue-700",children:" Test User Edit"})]}),r.jsx("div",{className:"mt-6",children:r.jsx(W,{onClick:M,disabled:l,className:"bg-purple-600 hover:bg-purple-700 w-full",children:" Run All Tests"})})]})]}),r.jsxs(de,{className:"bg-gray-800 border-gray-700 mt-6",children:[r.jsx(nt,{children:r.jsx(it,{className:"text-white",children:" Test Results"})}),r.jsx(he,{children:r.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[Object.entries(a).map(([E,I])=>r.jsxs("div",{className:"p-2 bg-gray-700 rounded",children:[r.jsxs("strong",{className:"text-white",children:[E,":"]}),r.jsx("span",{className:"text-gray-300 ml-2",children:I})]},E)),Object.keys(a).length===0&&r.jsx("p",{className:"text-gray-400",children:'No tests run yet. Click individual test buttons or "Run All Tests".'})]})})]})]})})}function b7(){const{priceData:t,isLoading:e,error:s}=Kl(),{changeText:n,changeColor:i,isPositive:a}=Ny(),{high:o,low:l,volume:c}=Sy();return e?r.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:r.jsx("div",{className:"text-white text-xl",children:"Loading price data..."})}):s?r.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:r.jsxs("div",{className:"text-red-400 text-xl",children:["Error: ",s]})}):r.jsxs("div",{className:"min-h-screen bg-gray-900 p-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Price Synchronization Test"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-[#10121E] p-6 rounded-lg border border-gray-700",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"Current Price (from usePrice)"}),r.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",t==null?void 0:t.price.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),r.jsx("div",{className:"text-sm mt-2",style:{color:i},children:n})]}),r.jsxs("div",{className:"bg-[#10121E] p-6 rounded-lg border border-gray-700",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"24h High"}),r.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["$",o.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"bg-[#10121E] p-6 rounded-lg border border-gray-700",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"24h Low"}),r.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["$",l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"bg-[#10121E] p-6 rounded-lg border border-gray-700",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"24h Volume"}),r.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[c.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," BTC"]})]})]}),r.jsxs("div",{className:"bg-[#10121E] p-4 rounded-lg border border-gray-700 mb-8",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Lightweight Chart (Binance Data)"}),r.jsx(vF,{symbol:"BTCUSDT",interval:"1m",height:500,containerId:"test_chart"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-[#10121E] p-6 rounded-lg border border-gray-700",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Order Book (Left Panel)"}),r.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"Current Price:"}),r.jsxs("div",{className:"text-xl font-bold text-white",children:["$",t==null?void 0:t.price.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-red-400",children:["$",(t.price+100).toFixed(2)]}),r.jsx("span",{className:"text-gray-400",children:"0.5 BTC"})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-red-400",children:["$",(t.price+50).toFixed(2)]}),r.jsx("span",{className:"text-gray-400",children:"1.2 BTC"})]}),r.jsxs("div",{className:"flex justify-between text-sm font-bold border-t border-b border-gray-700 py-2",children:[r.jsxs("span",{className:"text-white",children:["$",t==null?void 0:t.price.toFixed(2)]}),r.jsx("span",{className:"text-gray-400",children:"CURRENT"})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-green-400",children:["$",(t.price-50).toFixed(2)]}),r.jsx("span",{className:"text-gray-400",children:"0.8 BTC"})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-green-400",children:["$",(t.price-100).toFixed(2)]}),r.jsx("span",{className:"text-gray-400",children:"1.5 BTC"})]})]})]}),r.jsxs("div",{className:"bg-[#10121E] p-6 rounded-lg border border-gray-700",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Trading Panel (Right Panel)"}),r.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"Entry Price:"}),r.jsxs("div",{className:"text-xl font-bold text-white mb-4",children:["$",t==null?void 0:t.price.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm",children:"Amount (USDT)"}),r.jsx("input",{type:"number",className:"w-full bg-gray-800 text-white px-3 py-2 rounded mt-1",placeholder:"100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-400 text-sm",children:"Duration"}),r.jsxs("select",{className:"w-full bg-gray-800 text-white px-3 py-2 rounded mt-1",children:[r.jsx("option",{children:"30 seconds"}),r.jsx("option",{children:"60 seconds"})]})]}),r.jsx("button",{className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded font-bold",children:"BUY (UP)"}),r.jsx("button",{className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded font-bold",children:"SELL (DOWN)"})]})]}),r.jsxs("div",{className:"bg-[#10121E] p-6 rounded-lg border border-gray-700",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Stats Panel (Bottom Panel)"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"Current Price"}),r.jsxs("div",{className:"text-lg font-bold text-white",children:["$",t==null?void 0:t.price.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"24h Change"}),r.jsx("div",{className:"text-lg font-bold",style:{color:i},children:n})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"24h High"}),r.jsxs("div",{className:"text-lg font-bold text-green-400",children:["$",o.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"24h Low"}),r.jsxs("div",{className:"text-lg font-bold text-red-400",children:["$",l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]})]}),r.jsxs("div",{className:"mt-8 bg-[#10121E] p-6 rounded-lg border border-gray-700",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Debug Info (Raw Data)"}),r.jsx("pre",{className:"text-gray-400 text-xs overflow-auto",children:JSON.stringify(t,null,2)})]}),r.jsxs("div",{className:"mt-8 bg-blue-900/20 border border-blue-700 p-6 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-2",children:" Test Instructions"}),r.jsxs("ul",{className:"text-gray-300 space-y-2 text-sm",children:[r.jsx("li",{children:"1. Check that ALL price displays show the SAME number"}),r.jsx("li",{children:"2. Wait 2 seconds and verify all prices update TOGETHER"}),r.jsx("li",{children:"3. Compare chart overlay price with panel prices - should be IDENTICAL"}),r.jsx("li",{children:"4. Check browser console for price update logs"}),r.jsx("li",{children:"5. If all prices match, synchronization is working! "})]})]})]})}function w7(){return r.jsx(jy,{symbol:"BTCUSDT",updateInterval:2e3,children:r.jsx(b7,{})})}function j7(){return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:r.jsx(de,{className:"w-full max-w-md mx-4",children:r.jsxs(he,{className:"pt-6",children:[r.jsxs("div",{className:"flex mb-4 gap-2",children:[r.jsx(Ph,{className:"h-8 w-8 text-red-500"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),r.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function Au({children:t}){const{user:e,isLoading:s}=Ss(),[,n]=Or();return console.log(" ProtectedAdminRoute - User:",e),console.log(" ProtectedAdminRoute - isLoading:",s),f.useEffect(()=>{console.log(" ProtectedAdminRoute useEffect - User:",e,"isLoading:",s),!s&&(!e||e.role!=="admin"&&e.role!=="super_admin"&&e.role!=="superadmin")&&(console.log(" Redirecting to admin login - no valid admin user"),n("/admin/login"))},[e,s,n]),s?(console.log(" ProtectedAdminRoute - Still loading..."),r.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(T2,{className:"h-8 w-8 animate-spin text-purple-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Checking authentication..."})]})})):!e||e.role!=="admin"&&e.role!=="super_admin"&&e.role!=="superadmin"?(console.log(" ProtectedAdminRoute - No valid admin user, returning null"),null):(console.log(" ProtectedAdminRoute - Valid admin user, rendering children"),r.jsx(r.Fragment,{children:t}))}function Sa({children:t}){const{user:e,isLoading:s}=Ss(),[,n]=Or();return f.useEffect(()=>{!s&&!e&&n("/login")},[e,s,n]),s?r.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:r.jsx("div",{className:"text-white",children:"Loading..."})}):e?r.jsx(r.Fragment,{children:t}):null}function N7(){Ss();const[t]=Or();return f.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[t]),r.jsx(C5,{children:r.jsxs(F3,{children:[r.jsx(It,{path:"/",component:I5}),r.jsx(It,{path:"/dashboard",children:r.jsx(Sa,{children:r.jsx(h7,{})})}),r.jsx(It,{path:"/profile",children:r.jsx(Sa,{children:r.jsx(x7,{})})}),r.jsx(It,{path:"/market",component:L5}),r.jsx(It,{path:"/trading",children:r.jsx(Sa,{children:r.jsx(u$,{})})}),r.jsx(It,{path:"/trade/spot",component:TF}),r.jsx(It,{path:"/trade/options",component:aj}),r.jsx(It,{path:"/options",component:aj}),r.jsx(It,{path:"/trade/:type?",children:r.jsx(Sa,{children:r.jsx($5,{})})}),r.jsx(It,{path:"/wallet/:tab?",children:r.jsx(Sa,{children:r.jsx(QU,{})})}),r.jsx(It,{path:"/wallet/history",children:r.jsx(Sa,{children:r.jsx(sN,{})})}),r.jsx(It,{path:"/transactions",children:r.jsx(Sa,{children:r.jsx(sN,{})})}),r.jsx(It,{path:"/support",component:e8}),r.jsx(It,{path:"/trade-policy",component:t8}),r.jsx(It,{path:"/terms-of-service",component:s8}),r.jsx(It,{path:"/privacy-policy",component:r8}),r.jsx(It,{path:"/test-price-sync",component:w7}),r.jsx(It,{path:"/login",component:c7}),r.jsx(It,{path:"/signup",component:u7}),r.jsx(It,{path:"/admin/login",component:n7}),r.jsx(It,{path:"/admin/redirect",component:i7}),r.jsx(It,{path:"/admin",children:r.jsx(Au,{children:r.jsx(Tj,{})})}),r.jsx(It,{path:"/admin/dashboard",children:r.jsx(Au,{children:r.jsx(Tj,{})})}),r.jsx(It,{path:"/admin/transactions",children:r.jsx(Au,{children:r.jsx(y7,{})})}),r.jsx(It,{path:"/admin/test",children:r.jsx(Au,{children:r.jsx(v7,{})})}),r.jsx(It,{component:j7})]})})}function S7(){return r.jsx(lM,{client:jM,children:r.jsxs(s6,{children:[r.jsx(xD,{}),r.jsx(N7,{})]})})}if(!window.__tradingViewFetchIntercepted){console.log(" [MAIN] Setting up global TradingView fetch + XHR interception...");const t=window.fetch;window.fetch=function(s,n){let i=typeof s=="string"?s:s.toString();if(i.includes("tradingview-widget.com")){console.log(` [MAIN] Intercepting fetch: ${i}`);try{const a=new URL(i,window.location.origin),o=i.match(/embed-widget\/([^/?]+)/),l=o?o[1]:"advanced-chart",c=a.searchParams.get("locale")||"en",d=`/api/tradingview-widget/${l}?locale=${c}`;console.log(` [MAIN] Fetch redirected to proxy: ${d}`),i=d}catch(a){console.error(" [MAIN] Error parsing URL:",a)}}return t(i,n)};const e=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(s,n,...i){let a=typeof n=="string"?n:n.toString();if(a.includes("tradingview-widget.com")){console.log(` [MAIN] Intercepting XHR: ${a}`);try{const o=new URL(a,window.location.origin),l=a.match(/embed-widget\/([^/?]+)/),c=l?l[1]:"advanced-chart",d=o.searchParams.get("locale")||"en",h=`/api/tradingview-widget/${c}?locale=${d}`;console.log(` [MAIN] XHR redirected to proxy: ${h}`),a=h}catch(o){console.error(" [MAIN] Error parsing XHR URL:",o)}}return e.call(this,s,a,...i)},window.__tradingViewFetchIntercepted=!0}document.title="METACHROME - Advanced Crypto Trading Platform";TS(document.getElementById("root")).render(r.jsx(S7,{}));
